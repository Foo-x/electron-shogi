{"version":3,"file":"js/index-legacy.19696d0b.js","mappings":"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,MACbpB,SAAUgB,GAASI,MACnBzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBxF,OAAQ,CACNkE,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,MAEvBxF,KAAM,CACJ2D,GAAIwB,GAASK,KACb1G,KAAMqG,GAASK,KACftG,MAAOiG,GAASK,KAChB3B,KAAMsB,GAASK,MAEjBvF,KAAM,CACJoE,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnB1B,KAAMsB,GAASI,MACfzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfrF,SAAU,CACR+D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnBzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBpF,UAAW,CACT8D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnBzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBnF,WAAY,CACV6D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnBzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBlF,WAAY,CACV4D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnBzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBjF,MAAO,CACL2D,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,KACrB7B,GAAIwB,GAASI,MACbzG,KAAMqG,GAASI,MACfrG,MAAOiG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBhF,OAAQ,CACNoD,GAAIwB,GAASK,K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","sources":["webpack://electron-shogi/./src/App.vue?0a6f","webpack://electron-shogi/./src/components/main/StandardLayout.vue?3995","webpack://electron-shogi/./src/components/main/BoardPane.vue?1ab1","webpack://electron-shogi/./src/components/primitive/BoardView.vue?0722","webpack://electron-shogi/./src/shogi/color.ts","webpack://electron-shogi/./src/shogi/piece.ts","webpack://electron-shogi/./src/shogi/direction.ts","webpack://electron-shogi/./src/shogi/square.ts","webpack://electron-shogi/./src/shogi/move.ts","webpack://electron-shogi/./src/shogi/board.ts","webpack://electron-shogi/./src/shogi/hand.ts","webpack://electron-shogi/./src/shogi/position.ts","webpack://electron-shogi/./src/shogi/record.ts","webpack://electron-shogi/./src/helpers/time.ts","webpack://electron-shogi/./src/helpers/string.ts","webpack://electron-shogi/./src/shogi/kakinoki.ts","webpack://electron-shogi/./src/shogi/csa.ts","webpack://electron-shogi/./src/shogi/detect.ts","webpack://electron-shogi/./src/assets/preload.ts","webpack://electron-shogi/./src/components/primitive/BoardLayout.ts","webpack://electron-shogi/./src/components/primitive/Types.ts","webpack://electron-shogi/./src/components/primitive/BoardView.vue?53c8","webpack://electron-shogi/./src/components/primitive/BoardView.vue","webpack://electron-shogi/./src/uri.ts","webpack://electron-shogi/./src/settings/usi.ts","webpack://electron-shogi/./src/ipc/menu.ts","webpack://electron-shogi/./src/settings/analysis.ts","webpack://electron-shogi/./src/settings/app.ts","webpack://electron-shogi/./src/ipc/web.ts","webpack://electron-shogi/./src/settings/game.ts","webpack://electron-shogi/./src/settings/research.ts","webpack://electron-shogi/./src/players/usi.ts","webpack://electron-shogi/./src/players/human.ts","webpack://electron-shogi/./src/ipc/renderer.ts","webpack://electron-shogi/./src/audio/index.ts","webpack://electron-shogi/./src/store/usi.ts","webpack://electron-shogi/./src/players/player.ts","webpack://electron-shogi/./src/store/game.ts","webpack://electron-shogi/./src/store/record.ts","webpack://electron-shogi/./src/helpers/path.ts","webpack://electron-shogi/./src/store/bussy.ts","webpack://electron-shogi/./src/store/mode.ts","webpack://electron-shogi/./src/store/message.ts","webpack://electron-shogi/./src/store/error.ts","webpack://electron-shogi/./src/helpers/datetime.ts","webpack://electron-shogi/./src/store/score.ts","webpack://electron-shogi/./src/store/analysis.ts","webpack://electron-shogi/./src/store/index.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?eb5b","webpack://electron-shogi/./src/assets/icons.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?3913","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue","webpack://electron-shogi/./src/components/main/BoardPane.vue?7d48","webpack://electron-shogi/./src/components/main/BoardPane.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?2d79","webpack://electron-shogi/./src/components/primitive/RecordView.vue?bcb0","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f9e","webpack://electron-shogi/./src/components/primitive/RecordView.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?61e0","webpack://electron-shogi/./src/components/main/RecordPane.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?a220","webpack://electron-shogi/./src/components/tab/RecordComment.vue?646f","webpack://electron-shogi/./src/components/tab/RecordComment.vue?7802","webpack://electron-shogi/./src/components/tab/RecordComment.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?f3e1","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?7556","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?4973","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?6e00","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?5d0c","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?37e9","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?4c70","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?8fcb","webpack://electron-shogi/./src/components/tab/RecordInfo.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?c156","webpack://electron-shogi/./src/components/main/TabPane.vue","webpack://electron-shogi/./src/components/main/StandardLayout.vue?15bf","webpack://electron-shogi/./src/components/main/StandardLayout.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?d7dd","webpack://electron-shogi/./src/helpers/dialog.ts","webpack://electron-shogi/./src/helpers/form.ts","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?4613","webpack://electron-shogi/./src/components/dialog/GameDialog.vue","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?c707","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?110e","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?02ef","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?47d0","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?6142","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?449c","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?4945","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?12ff","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?971c","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?66a0","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?3002","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?f614","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?4a0a","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?8006","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?d525","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?f9a8","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?96a0","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?13c3","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue","webpack://electron-shogi/./src/helpers/key.ts","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?babe","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?de87","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue","webpack://electron-shogi/./src/App.vue?847a","webpack://electron-shogi/./src/App.vue","webpack://electron-shogi/./src/main.ts","webpack://electron-shogi/webpack/bootstrap","webpack://electron-shogi/webpack/runtime/chunk loaded","webpack://electron-shogi/webpack/runtime/compat get default export","webpack://electron-shogi/webpack/runtime/define property getters","webpack://electron-shogi/webpack/runtime/global","webpack://electron-shogi/webpack/runtime/hasOwnProperty shorthand","webpack://electron-shogi/webpack/runtime/jsonp chunk loading","webpack://electron-shogi/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_AnalysisDialog = _resolveComponent(\"AnalysisDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_BussyMessage = _resolveComponent(\"BussyMessage\")!\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\")!\n  const _component_InfoMessage = _resolveComponent(\"InfoMessage\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.analysis)\n      ? (_openBlock(), _createBlock(_component_AnalysisDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.bussy)\n      ? (_openBlock(), _createBlock(_component_BussyMessage, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.confirm)\n      ? (_openBlock(), _createBlock(_component_ConfirmDialog, { key: 7 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_InfoMessage, { key: 8 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 9 }))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6355277e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = {\n  ref: \"topPane\",\n  class: \"top-pane\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_TabPane = _resolveComponent(\"TabPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          \"max-size\": _ctx.boardPaneMaxSize\n        }, null, 8, [\"max-size\"]),\n        _createVNode(_component_RecordPane, { class: \"top-right-pane\" })\n      ], 512),\n      _createVNode(_component_TabPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-038099f9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 対局中断 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 解析 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 解析中断 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", null, \"局面の初期化\", -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"standard\" }, \"平手\", -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicapLance\" }, \"香落ち\", -1))\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicapRightLance\" }, \"右香落ち\", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicapBishop\" }, \"角落ち\", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicapRook\" }, \"飛車落ち\", -1))\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicapRookLance\" }, \"飛車香落ち\", -1))\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicap2Pieces\" }, \"2枚落ち\", -1))\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicap4Pieces\" }, \"4枚落ち\", -1))\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicap6Pieces\" }, \"6枚落ち\", -1))\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"handicap8Pieces\" }, \"8枚落ち\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"tsumeShogi\" }, \"詰め将棋\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"tsumeShogi2Kings\" }, \"双玉詰め将棋\", -1))\nconst _hoisted_25 = [\n  _hoisted_12,\n  _hoisted_13,\n  _hoisted_14,\n  _hoisted_15,\n  _hoisted_16,\n  _hoisted_17,\n  _hoisted_18,\n  _hoisted_19,\n  _hoisted_20,\n  _hoisted_21,\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = { class: \"control bottom\" }\nconst _hoisted_27 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_28 = [\"disabled\"]\nconst _hoisted_29 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_30 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_31 = [\"disabled\"]\nconst _hoisted_32 = /*#__PURE__*/_createTextVNode(\" 棋譜貼り付け \")\nconst _hoisted_33 = /*#__PURE__*/_createTextVNode(\" 棋譜コピー \")\nconst _hoisted_34 = [\"disabled\"]\nconst _hoisted_35 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_BoardView, {\n      \"piece-image-type\": _ctx.pieceImageType,\n      \"board-image-type\": _ctx.boardImageType,\n      \"max-size\": _ctx.maxSize,\n      position: _ctx.position,\n      \"last-move\": _ctx.lastMove,\n      flip: _ctx.flip,\n      \"allow-move\": _ctx.allowMove,\n      \"allow-edit\": _ctx.allowEdit,\n      \"black-player-name\": _ctx.blackPlayerName,\n      \"white-player-name\": _ctx.whitePlayerName,\n      \"black-player-time-ms\": _ctx.blackPlayerTimeMs,\n      \"black-player-byoyomi\": _ctx.blackPlayerByoyomi,\n      \"white-player-time-ms\": _ctx.whitePlayerTimeMs,\n      \"white-player-byoyomi\": _ctx.whitePlayerByoyomi,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.GAME\n                }, null, 8, [\"icon\"]),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESIGN\n                }, null, 8, [\"icon\"]),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESEARCH\n                }, null, 8, [\"icon\"]),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.END\n                }, null, 8, [\"icon\"]),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.analysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onAnalysis && _ctx.onAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.ANALYSIS\n                }, null, 8, [\"icon\"]),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endAnalysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndAnalysis && _ctx.onEndAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.EDIT\n                }, null, 8, [\"icon\"]),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CHECK\n                }, null, 8, [\"icon\"]),\n                _hoisted_10\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.SWAP\n                }, null, 8, [\"icon\"]),\n                _hoisted_11\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"select\", {\n                key: 10,\n                onChange: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onInitPosition && _ctx.onInitPosition(...args)))\n              }, _hoisted_25, 32))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_26, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_27\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.engineSettings,\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.ENGINE_SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_29\n          ], 8, _hoisted_28),\n          _createElementVNode(\"button\", {\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FLIP\n            }, null, 8, [\"icon\"]),\n            _hoisted_30\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.paste,\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.PASTE\n            }, null, 8, [\"icon\"]),\n            _hoisted_32\n          ], 8, _hoisted_31),\n          _createElementVNode(\"button\", {\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onCopy && _ctx.onCopy(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_33\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.removeAfter,\n            onClick: _cache[16] || (_cache[16] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.DELETE\n            }, null, 8, [\"icon\"]),\n            _hoisted_35\n          ], 8, _hoisted_34)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"piece-image-type\", \"board-image-type\", \"max-size\", \"position\", \"last-move\", \"flip\", \"allow-move\", \"allow-edit\", \"black-player-name\", \"white-player-name\", \"black-player-time-ms\", \"black-player-byoyomi\", \"white-player-time-ms\", \"white-player-byoyomi\", \"onMove\", \"onEdit\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3ecdb7e9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"▲\" + _toDisplayString(_ctx.blackPlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"△\" + _toDisplayString(_ctx.whitePlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: piece.id,\n          class: \"piece\",\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.BLACK, pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.WHITE, pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nexport function promotedPieceType(pieceType: PieceType): PieceType {\n  return promoteMap[pieceType] || pieceType;\n}\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nexport function unpromotedPieceType(pieceType: PieceType): PieceType {\n  return unpromoteMap[pieceType] || pieceType;\n}\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同　\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += `(${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n  TSUME_SHOGI_2KINGS = \"tsumeShogi2Kings\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI_2KINGS) {\n      return;\n    }\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  readonly checked: boolean;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSfen(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n      case InitialPositionType.TSUME_SHOGI_2KINGS:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (\n      type === InitialPositionType.TSUME_SHOGI ||\n      type === InitialPositionType.TSUME_SHOGI_2KINGS\n    ) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  get checked(): boolean {\n    return this._board.isChecked(this.color);\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color);\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isChecked(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isChecked(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isChecked(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSfen(1);\n  }\n\n  getSfen(nextMoveNumber: number): string {\n    let ret = `sfen ${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    if (sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    this._board.resetBySFEN(sections[0]);\n    this._color = parseSFENColor(sections[1]);\n    const hands = Hand.parseSFEN(sections[2]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length === 5 && sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    if (sections.length !== 4) {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[0])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[1])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[2])) {\n      return false;\n    }\n    if (!sections[3].match(/[0-9]+/)) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n\ntype PieceCounts = {\n  pawn: number;\n  lance: number;\n  knight: number;\n  silver: number;\n  gold: number;\n  bishop: number;\n  rook: number;\n  king: number;\n  promPawn: number;\n  promLance: number;\n  promKnight: number;\n  promSilver: number;\n  horse: number;\n  dragon: number;\n};\n\nexport function countExistingPieces(position: ImmutablePosition): PieceCounts {\n  const result: PieceCounts = {\n    pawn: 0,\n    lance: 0,\n    knight: 0,\n    silver: 0,\n    gold: 0,\n    bishop: 0,\n    rook: 0,\n    king: 0,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n  Square.all.forEach((square) => {\n    const piece = position.board.at(square);\n    if (piece) {\n      result[piece.type] += 1;\n    }\n  });\n  position.blackHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  position.whiteHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  return result;\n}\n\nexport function countNotExistingPieces(\n  position: ImmutablePosition\n): PieceCounts {\n  const existed = countExistingPieces(position);\n  return {\n    pawn: 18 - existed.pawn - existed.promPawn,\n    lance: 4 - existed.lance - existed.promLance,\n    knight: 4 - existed.knight - existed.promKnight,\n    silver: 4 - existed.silver - existed.promSilver,\n    gold: 4 - existed.gold,\n    bishop: 2 - existed.bishop - existed.horse,\n    rook: 2 - existed.rook - existed.dragon,\n    king: 2 - existed.king,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n}\n","import {\n  Position,\n  DoMoveOption,\n  ImmutablePosition,\n  Move,\n  Color,\n  reverseColor,\n  parseSFENMove,\n} from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TITLE = \"title\", // 表題\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport function getStandardMetadataDisplayName(key: RecordMetadataKey): string {\n  switch (key) {\n    case RecordMetadataKey.BLACK_NAME:\n      return \"先手\";\n    case RecordMetadataKey.WHITE_NAME:\n      return \"後手\";\n    case RecordMetadataKey.START_DATETIME:\n      return \"開始日時\";\n    case RecordMetadataKey.END_DATETIME:\n      return \"終了日時\";\n    case RecordMetadataKey.DATE:\n      return \"対局日\";\n    case RecordMetadataKey.TOURNAMENT:\n      return \"棋戦\";\n    case RecordMetadataKey.STRATEGY:\n      return \"戦型\";\n    case RecordMetadataKey.TITLE:\n      return \"表題\";\n    case RecordMetadataKey.TIME_LIMIT:\n      return \"持ち時間\";\n    case RecordMetadataKey.TIME_SPENT:\n      return \"消費時間\";\n    case RecordMetadataKey.PLACE:\n      return \"場所\";\n    case RecordMetadataKey.POSTED_ON:\n      return \"掲載\";\n    case RecordMetadataKey.NOTE:\n      return \"備考\";\n    case RecordMetadataKey.BLACK_SHORT_NAME:\n      return \"先手省略名\";\n    case RecordMetadataKey.WHITE_SHORT_NAME:\n      return \"後手省略名\";\n    case RecordMetadataKey.OPUS_NO:\n      return \"作品番号\";\n    case RecordMetadataKey.OPUS_NAME:\n      return \"作品名\";\n    case RecordMetadataKey.AUTHOR:\n      return \"作者\";\n    case RecordMetadataKey.PUBLISHED_ON:\n      return \"発表誌\";\n    case RecordMetadataKey.PUBLISHED_AT:\n      return \"発表年月\";\n    case RecordMetadataKey.SOURCE:\n      return \"出典\";\n    case RecordMetadataKey.LENGTH:\n      return \"手数\";\n    case RecordMetadataKey.INTEGRITY:\n      return \"完全性\";\n    case RecordMetadataKey.CATEGORY:\n      return \"分類\";\n    case RecordMetadataKey.AWARD:\n      return \"受賞\";\n  }\n}\n\nexport interface ImmutableRecordMetadata {\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey>;\n  getStandardMetadata(key: RecordMetadataKey): string | undefined;\n  get customMetadataKeys(): IterableIterator<string>;\n  getCustomMetadata(key: string): string | undefined;\n}\n\nexport class RecordMetadata {\n  private standard: Map<RecordMetadataKey, string>;\n  private custom: Map<string, string>;\n\n  constructor() {\n    this.standard = new Map<RecordMetadataKey, string>();\n    this.custom = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.standard.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.standard.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    if (value) {\n      this.standard.set(key, value);\n    } else {\n      this.standard.delete(key);\n    }\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.custom.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.custom.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    if (value) {\n      this.custom.set(key, value);\n    } else {\n      this.custom.delete(key);\n    }\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface ImmutableRecordEntry {\n  readonly number: number;\n  readonly prev: RecordEntry | null;\n  readonly next: RecordEntry | null;\n  readonly branch: RecordEntry | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  readonly isCheck: boolean;\n  readonly comment: string;\n  readonly customData: string | undefined;\n  readonly displayMoveText: string;\n  readonly displayText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n}\n\nexport interface RecordEntry extends ImmutableRecordEntry {\n  comment: string;\n  customData: string | undefined;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass RecordEntryImpl implements RecordEntry {\n  public next: RecordEntryImpl | null;\n  public branch: RecordEntryImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: RecordEntryImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove,\n    public isCheck: boolean\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayMoveText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get displayText(): string {\n    let ret = this.displayMoveText;\n    if (this.number !== 0) {\n      const elapsed = millisecondsToMSS(this.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n      ret += ` (${elapsed} / ${totalElapsed})`;\n    }\n    return ret;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  static newRootEntry(): RecordEntryImpl {\n    return new RecordEntryImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START, // move\n      false // isCheck\n    );\n  }\n}\n\nexport interface ImmutableRecord {\n  readonly metadata: ImmutableRecordMetadata;\n  readonly initialPosition: ImmutablePosition;\n  readonly position: ImmutablePosition;\n  readonly first: RecordEntry;\n  readonly current: RecordEntry;\n  readonly moves: Array<RecordEntry>; // TODO: forEach に統合したい。\n  readonly movesBefore: Array<RecordEntry>;\n  readonly length: number;\n  readonly branchBegin: RecordEntry;\n  readonly repetition: boolean;\n  readonly perpetualCheck: Color | null;\n  readonly usi: string;\n  readonly sfen: string;\n  forEach(handler: (entry: ImmutableRecordEntry) => void): void;\n}\n\nexport default class Record {\n  public metadata: RecordMetadata;\n  private _initialPosition: ImmutablePosition;\n  private _position: Position;\n  private _first: RecordEntryImpl;\n  private _current: RecordEntryImpl;\n  private repetitionCounts: { [sfen: string]: number };\n  private repetitionStart: { [sfen: string]: number };\n\n  constructor(position?: ImmutablePosition) {\n    this.metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = RecordEntryImpl.newRootEntry();\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): RecordEntry {\n    return this._first;\n  }\n\n  get current(): RecordEntry {\n    return this._current;\n  }\n\n  get moves(): Array<RecordEntry> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<RecordEntry> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<RecordEntryImpl> {\n    const moves = new Array<RecordEntryImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): RecordEntry {\n    return this._current.prev\n      ? (this._current.prev.next as RecordEntry)\n      : this._current;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    this.metadata = new RecordMetadata();\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first = RecordEntryImpl.newRootEntry();\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this.decrementRepetition();\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as RecordEntryImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n        this.incrementRepetition();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((entry) => {\n      entry.activeBranch = entry.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this.decrementRepetition();\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n          this.incrementRepetition();\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    let isCheck = false;\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n      this.incrementRepetition();\n      isCheck = this.position.checked;\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new RecordEntryImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move,\n        isCheck\n      );\n      this._current = this._current.next;\n      return true;\n    }\n    let p: RecordEntryImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new RecordEntryImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move,\n      isCheck\n    );\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n  }\n\n  private incrementRepetition(): void {\n    const sfen = this.position.sfen;\n    if (this.repetitionCounts[sfen]) {\n      this.repetitionCounts[sfen] += 1;\n    } else {\n      this.repetitionCounts[sfen] = 1;\n      this.repetitionStart[sfen] = this.current.number;\n    }\n  }\n\n  private decrementRepetition(): void {\n    const sfen = this.position.sfen;\n    this.repetitionCounts[sfen] -= 1;\n    if (this.repetitionCounts[sfen] === 0) {\n      delete this.repetitionCounts[sfen];\n      delete this.repetitionStart[sfen];\n    }\n  }\n\n  get repetition(): boolean {\n    return this.repetitionCounts[this.position.sfen] >= 4;\n  }\n\n  get perpetualCheck(): Color | null {\n    if (!this.repetition) {\n      return null;\n    }\n    const sfen = this.position.sfen;\n    const since = this.repetitionStart[sfen];\n    let black = true;\n    let white = true;\n    let color = this.position.color;\n    for (let p = this.current; p.number >= since; p = p.prev as RecordEntry) {\n      color = reverseColor(color);\n      if (p.isCheck) {\n        continue;\n      }\n      if (color === Color.BLACK) {\n        black = false;\n      } else {\n        white = false;\n      }\n    }\n    return black ? Color.BLACK : white ? Color.WHITE : null;\n  }\n\n  get usi(): string {\n    let ret = \"position \" + this.initialPosition.sfen + \" moves\";\n    this.movesBefore.forEach((entry) => {\n      if (entry.move instanceof Move) {\n        ret += \" \" + entry.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get usiAll(): string {\n    let ret = this.usi;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      if (p.move instanceof Move) {\n        ret += \" \" + p.move.sfen;\n      }\n    }\n    return ret;\n  }\n\n  get sfen(): string {\n    return this.position.getSfen(this._current.number + 1);\n  }\n\n  forEach(handler: (entry: RecordEntry) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (entry: RecordEntryImpl) => void): void {\n    let p: RecordEntryImpl | null = this._first;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  static newByUSI(data: string): Record | Error {\n    const prefixPositionStartpos = \"position startpos \";\n    const prefixPositionSfen = \"position sfen \";\n    const prefixStartpos = \"startpos \";\n    const prefixSfen = \"sfen \";\n    const prefixMoves = \"moves \";\n    if (data.startsWith(prefixPositionStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixPositionStartpos.length)\n      );\n    } else if (data.startsWith(prefixPositionSfen)) {\n      return Record.newByUSIFromSFENPosition(\n        data.slice(prefixPositionSfen.length)\n      );\n    } else if (data.startsWith(prefixStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixStartpos.length)\n      );\n    } else if (data.startsWith(prefixSfen)) {\n      return Record.newByUSIFromSFENPosition(data.slice(prefixSfen.length));\n    } else if (data.startsWith(prefixMoves)) {\n      return Record.newByUSIFromMoves(new Position(), data);\n    } else {\n      return new Error(\"不正なUSI(1): \" + data);\n    }\n  }\n\n  private static newByUSIFromSFENPosition(data: string): Record | Error {\n    const sections = data.split(\" \");\n    if (sections.length < 4) {\n      return new Error(\"不正なUSI(2): \" + data);\n    }\n    const position = Position.newBySFEN(sections.slice(0, 4).join(\" \"));\n    if (!position) {\n      return new Error(\"不正なUSI(3): \" + data);\n    }\n    return Record.newByUSIFromMoves(position, sections.slice(4).join(\" \"));\n  }\n\n  private static newByUSIFromMoves(\n    position: ImmutablePosition,\n    data: string\n  ): Record | Error {\n    const record = new Record(position);\n    if (data.length === 0) {\n      return record;\n    }\n    const sections = data.split(\" \");\n    if (sections[0] !== \"moves\") {\n      return new Error(\"不正なUSI(4): \" + data);\n    }\n    for (let i = 1; i < sections.length; i++) {\n      const parsed = parseSFENMove(sections[i]);\n      if (!parsed) {\n        break;\n      }\n      let move = record.position.createMove(parsed.from, parsed.to);\n      if (!move) {\n        return new Error(\"不正な指し手: \" + sections[i]);\n      }\n      if (parsed.promote) {\n        move = move.withPromote();\n      }\n      record.append(move, { ignoreValidation: true });\n    }\n    return record;\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","export function appendLine(base: string, newLines: string): string {\n  return base + (!base || base.endsWith(\"\\n\") ? \"\" : \"\\n\") + newLines;\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { appendLine } from \"@/helpers/string\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  SpecialMove,\n} from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  PROGRAM_COMMENT,\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^#/,\n    type: LineType.PROGRAM_COMMENT,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手番/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手番/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line,\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(王|玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section || section === \"なし\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let preMoveComment = \"\";\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          record.first.comment = preMoveComment;\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        if (inMoveSection) {\n          record.current.comment = appendLine(\n            record.current.comment,\n            parsed.data\n          );\n        } else {\n          preMoveComment = appendLine(preMoveComment, parsed.data);\n        }\n        break;\n      case LineType.PROGRAM_COMMENT:\n        break;\n      case LineType.UNKNOWN:\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n    record.first.comment = preMoveComment;\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"先手番\" + returnCode;\n  } else {\n    ret += \"後手番\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: ImmutableRecord,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((entry) => {\n    if (entry.number !== 0) {\n      if (!entry.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + entry.number + \"手\" + returnCode;\n      }\n      ret += entry.number + \" \";\n      if (entry.move instanceof Move) {\n        ret += formatMove(entry.move);\n      } else {\n        ret += specialMoveToString[entry.move];\n      }\n      const elapsed = millisecondsToMSS(entry.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(entry.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (entry.isFirstBranch && entry.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (entry.comment.length !== 0) {\n      ret +=\n        \"*\" + entry.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","// CSA file format (.csa)\n// See http://www2.computer-shogi.org/protocol/record_v22.html\n\nimport { Record } from \".\";\nimport { InitialPositionType } from \"./board\";\nimport { Color } from \"./color\";\nimport { ImmutableHand } from \"./hand\";\nimport Move from \"./move\";\nimport { Piece, PieceType, promotedPieceType } from \"./piece\";\nimport Position, {\n  countNotExistingPieces,\n  ImmutablePosition,\n} from \"./position\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  RecordMetadata,\n  RecordMetadataKey,\n  SpecialMove,\n} from \"./record\";\nimport Square from \"./square\";\n\nenum LineType {\n  VERSION,\n  COMMENT,\n  BLACK_NAME,\n  WHITE_NAME,\n  METADATA,\n  RANK,\n  PIECES,\n  FIRST_TURN,\n  MOVE,\n  SPECIAL_MOVE,\n  ELAPSED,\n}\n\nenum SectionType {\n  HEADER,\n  MOVE,\n  NEUTRAL,\n}\n\nconst linePatterns = [\n  {\n    pattern: /^V/,\n    type: LineType.VERSION,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^'/,\n    type: LineType.COMMENT,\n    sectionType: SectionType.NEUTRAL,\n  },\n  {\n    pattern: /^N\\+(.+)$/,\n    type: LineType.BLACK_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^N-(.+)$/,\n    type: LineType.WHITE_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^\\$([^:]+):(.+)$/,\n    type: LineType.METADATA,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[1-9]( \\* |[-+][A-Z][A-Z]){9}$/,\n    type: LineType.RANK,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[-+]([0-9]{2}[A-Z]{2})*/,\n    type: LineType.PIECES,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+]$/,\n    type: LineType.FIRST_TURN,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+][0-9]{4}[A-Z]{2}/,\n    type: LineType.MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^%[-+A-Z_]+/,\n    type: LineType.SPECIAL_MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^T([0-9]+)/,\n    type: LineType.ELAPSED,\n    sectionType: SectionType.MOVE,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  line: string;\n  args: string[];\n  sectionType: SectionType;\n};\n\nfunction parseLine(line: string): Line[] {\n  const results = [];\n  const lines = line.match(/^['N$]/) ? [line] : line.split(\",\");\n  for (const line of lines) {\n    for (let i = 0; i < linePatterns.length; i++) {\n      const result = linePatterns[i].pattern.exec(line);\n      if (result) {\n        results.push({\n          type: linePatterns[i].type,\n          line: line,\n          args: result.slice(1),\n          sectionType: linePatterns[i].sectionType,\n        });\n      }\n    }\n  }\n  return results;\n}\n\nconst csaNameToRecordMetadataKey: { [key: string]: RecordMetadataKey } = {\n  EVENT: RecordMetadataKey.TITLE,\n  SITE: RecordMetadataKey.PLACE,\n  START_TIME: RecordMetadataKey.START_DATETIME,\n  END_TIME: RecordMetadataKey.END_DATETIME,\n  TIME_LIMIT: RecordMetadataKey.TIME_LIMIT,\n  OPENING: RecordMetadataKey.STRATEGY,\n};\n\nconst csaNameToPieceType: { [name: string]: PieceType } = {\n  FU: PieceType.PAWN,\n  KY: PieceType.LANCE,\n  KE: PieceType.KNIGHT,\n  GI: PieceType.SILVER,\n  KI: PieceType.GOLD,\n  KA: PieceType.BISHOP,\n  HI: PieceType.ROOK,\n  OU: PieceType.KING,\n  TO: PieceType.PROM_PAWN,\n  NY: PieceType.PROM_LANCE,\n  NK: PieceType.PROM_KNIGHT,\n  NG: PieceType.PROM_SILVER,\n  UM: PieceType.HORSE,\n  RY: PieceType.DRAGON,\n};\n\nfunction parseRank(line: string, position: Position): Error | undefined {\n  const rank = Number(line[1]);\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const begin = x * 3 + 2;\n    const section = line.slice(begin, begin + 3);\n    if (section[0] === \" \") {\n      continue;\n    }\n    const color = section[0] === \"+\" ? Color.BLACK : Color.WHITE;\n    const pieceType = csaNameToPieceType[section.slice(1)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    position.board.set(new Square(file, rank), new Piece(color, pieceType));\n  }\n}\n\nfunction parsePieces(line: string, position: Position): Error | undefined {\n  const color = line[1] === \"+\" ? Color.BLACK : Color.WHITE;\n  for (let begin = 2; begin + 4 <= line.length; begin += 4) {\n    const section = line.slice(begin, begin + 4);\n    if (section === \"00AL\") {\n      const counts = countNotExistingPieces(position);\n      if (color === Color.BLACK) {\n        position.blackHand.forEach((pieceType) => {\n          position.blackHand.add(pieceType, counts[pieceType]);\n        });\n      } else {\n        position.whiteHand.forEach((pieceType) => {\n          position.whiteHand.add(pieceType, counts[pieceType]);\n        });\n      }\n      return;\n    }\n    const file = Number(section[0]);\n    const rank = Number(section[1]);\n    const pieceType = csaNameToPieceType[section.slice(2)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    if (file !== 0 && rank !== 0) {\n      position.board.set(new Square(file, rank), new Piece(color, pieceType));\n    } else if (color === Color.BLACK) {\n      position.blackHand.add(pieceType, 1);\n    } else {\n      position.whiteHand.add(pieceType, 1);\n    }\n  }\n}\n\nfunction parseMove(line: string, position: ImmutablePosition): Move | Error {\n  const color = line[0] === \"+\" ? Color.BLACK : Color.WHITE;\n  if (color != position.color) {\n    return new Error(\"不正な手番: \" + line);\n  }\n  const fromFile = Number(line[1]);\n  const fromRank = Number(line[2]);\n  const toFile = Number(line[3]);\n  const toRank = Number(line[4]);\n  const pieceType = csaNameToPieceType[line.slice(5, 7)];\n  if (!pieceType) {\n    return new Error(\"不正な駒の種類: \" + line);\n  }\n  const from =\n    fromFile === 0 && fromRank === 0\n      ? pieceType\n      : new Square(fromFile, fromRank);\n  const to = new Square(toFile, toRank);\n  let move = position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + line);\n  }\n  if (from instanceof Square) {\n    const basePiece = position.board.at(from);\n    if (!basePiece) {\n      return new Error(\"存在しない駒: \" + line);\n    }\n    if (basePiece.type !== pieceType) {\n      if (basePiece.promoted().type === pieceType) {\n        move = move.withPromote();\n      } else {\n        return new Error(\"存在しない駒: \" + line);\n      }\n    }\n  }\n  return move;\n}\n\nfunction parseSpecialMove(line: string): SpecialMove | undefined {\n  switch (line) {\n    case \"%TORYO\":\n      return SpecialMove.RESIGN;\n    case \"%CHUDAN\":\n      return SpecialMove.INTERRUPT;\n    case \"%SENNICHITE\":\n      return SpecialMove.REPETITION_DRAW;\n    case \"%TIME_UP\":\n      return SpecialMove.TIMEOUT;\n    case \"%ILLEGAL_MOVE\":\n      return SpecialMove.FOUL_LOSE;\n    case \"%JISHOGI\":\n      return SpecialMove.DRAW;\n    case \"%KACHI\":\n      return SpecialMove.ENTERING_OF_KING;\n    case \"%HIKIWAKE\":\n      return SpecialMove.DRAW;\n    case \"%TSUMI\":\n      return SpecialMove.MATE;\n  }\n}\n\nexport function importCSA(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const position = new Position();\n  position.reset(InitialPositionType.EMPTY);\n  let inMoveSection = false;\n  const lines = data.replace(/\\r?\\n\\//, \"\").split(/\\r?\\n/);\n  for (const line of lines) {\n    for (const parsed of parseLine(line)) {\n      if (\n        (parsed.sectionType === SectionType.HEADER && inMoveSection) ||\n        (parsed.sectionType === SectionType.MOVE && !inMoveSection)\n      ) {\n        return new Error(\"不正な行が検出されました: \" + parsed.line);\n      }\n      switch (parsed.type) {\n        case LineType.VERSION:\n          break;\n        case LineType.COMMENT:\n          break;\n        case LineType.BLACK_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.BLACK_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.WHITE_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.WHITE_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.METADATA: {\n          const key = csaNameToRecordMetadataKey[parsed.args[0]];\n          if (key) {\n            metadata.setStandardMetadata(key, parsed.args[1]);\n          } else {\n            metadata.setCustomMetadata(parsed.args[0], parsed.args[1]);\n          }\n          break;\n        }\n        case LineType.RANK: {\n          const error = parseRank(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.PIECES: {\n          const error = parsePieces(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.FIRST_TURN:\n          if (parsed.line[0] === \"+\") {\n            position.setColor(Color.BLACK);\n          } else {\n            position.setColor(Color.WHITE);\n          }\n          record.clear(position);\n          inMoveSection = true;\n          break;\n        case LineType.MOVE: {\n          const moveOrError = parseMove(parsed.line, record.position);\n          if (moveOrError instanceof Error) {\n            return moveOrError;\n          }\n          record.append(moveOrError, { ignoreValidation: true });\n          break;\n        }\n        case LineType.SPECIAL_MOVE: {\n          const specialMove = parseSpecialMove(parsed.line);\n          if (specialMove) {\n            record.append(specialMove, { ignoreValidation: true });\n          }\n          break;\n        }\n        case LineType.ELAPSED:\n          record.current.setElapsedMs(Number(parsed.args[0]) * 1e3);\n          break;\n      }\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\ntype CSAExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  const blackName =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (blackName) {\n    ret += \"N+\" + blackName + returnCode;\n  }\n  const whiteName =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (whiteName) {\n    ret += \"N-\" + whiteName + returnCode;\n  }\n  const event =\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PUBLISHED_ON);\n  if (event) {\n    ret += \"$EVENT:\" + event + returnCode;\n  }\n  const site = metadata.getStandardMetadata(RecordMetadataKey.PLACE);\n  if (site) {\n    ret += \"$SITE:\" + site + returnCode;\n  }\n  const startTime =\n    metadata.getStandardMetadata(RecordMetadataKey.START_DATETIME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (startTime) {\n    // 年月日 YYYY/MM/DD (10文字) については KIF 形式と共通\n    ret += \"$START_TIME:\" + startTime.slice(10) + returnCode;\n  }\n  const endTime = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (endTime) {\n    ret += \"$END_TIME:\" + endTime.slice(10) + returnCode;\n  }\n  const opening = metadata.getStandardMetadata(RecordMetadataKey.STRATEGY);\n  if (opening) {\n    ret += \"$OPENING:\" + opening + returnCode;\n  }\n  // TODO: 持ち時間（CSA形式に合致する場合のみ）\n  return ret;\n}\n\nconst pieceTypeToString = {\n  king: \"OU\",\n  rook: \"HI\",\n  dragon: \"RY\",\n  bishop: \"KA\",\n  horse: \"UM\",\n  gold: \"KI\",\n  silver: \"GI\",\n  promSilver: \"NG\",\n  knight: \"KE\",\n  promKnight: \"NK\",\n  lance: \"KY\",\n  promLance: \"NY\",\n  pawn: \"FU\",\n  promPawn: \"TO\",\n};\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    for (let i = 0; i < n; i++) {\n      ret += \"00\" + pieceTypeToString[pieceType];\n    }\n  });\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (let rank = 1; rank <= 9; rank += 1) {\n    ret += \"P\" + rank;\n    for (let file = 9; file >= 1; file -= 1) {\n      const piece = position.board.at(new Square(file, rank));\n      if (!piece) {\n        ret += \" * \";\n      } else if (piece.color === Color.BLACK) {\n        ret += \"+\" + pieceTypeToString[piece.type];\n      } else {\n        ret += \"-\" + pieceTypeToString[piece.type];\n      }\n    }\n    ret += returnCode;\n  }\n  ret += \"P+\" + formatHand(position.blackHand) + returnCode;\n  ret += \"P-\" + formatHand(position.whiteHand) + returnCode;\n  ret += (position.color === Color.BLACK ? \"+\" : \"-\") + returnCode;\n  return ret;\n}\n\nfunction formatSquare(square: Square | PieceType): string {\n  return square instanceof Square ? `${square.file}${square.rank}` : \"00\";\n}\n\nfunction formatMove(move: Move): string {\n  return (\n    (move.color === Color.BLACK ? \"+\" : \"-\") +\n    formatSquare(move.from) +\n    formatSquare(move.to) +\n    pieceTypeToString[\n      move.promote ? promotedPieceType(move.pieceType) : move.pieceType\n    ]\n  );\n}\n\nfunction formatSpecialMove(move: SpecialMove): string | undefined {\n  switch (move) {\n    case SpecialMove.RESIGN:\n      return \"%TORYO\";\n    case SpecialMove.INTERRUPT:\n      return \"%CHUDAN\";\n    case SpecialMove.REPETITION_DRAW:\n      return \"%SENNICHITE\";\n    case SpecialMove.TIMEOUT:\n      return \"%TIME_UP\";\n    case SpecialMove.FOUL_LOSE:\n      return \"%ILLEGAL_MOVE\";\n    case SpecialMove.DRAW:\n      return \"%JISHOGI\";\n    case SpecialMove.ENTERING_OF_KING:\n      return \"%KACHI\";\n    case SpecialMove.MATE:\n      return \"%TSUMI\";\n  }\n}\n\nexport function exportCSA(\n  record: ImmutableRecord,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"' CSA形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += \"V2.2\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  record.moves.forEach((entry) => {\n    if (entry.number === 0) {\n      return;\n    }\n    let move: string | undefined;\n    if (entry.move instanceof Move) {\n      move = formatMove(entry.move);\n    } else {\n      move = formatSpecialMove(entry.move);\n    }\n    if (move) {\n      ret += move + returnCode;\n      ret += \"T\" + Math.floor(entry.elapsedMs / 1e3) + returnCode;\n    }\n  });\n  return ret;\n}\n","import { Position } from \".\";\n\nexport enum RecordFormatType {\n  USI,\n  SFEN,\n  KIF,\n  CSA,\n}\n\nexport function detectRecordFormat(data: string): RecordFormatType {\n  // USI\n  if (\n    data.startsWith(\"position sfen \") ||\n    data.startsWith(\"position startpos \") ||\n    data.startsWith(\"sfen \") ||\n    data.startsWith(\"startpos \") ||\n    data.startsWith(\"moves \")\n  ) {\n    return RecordFormatType.USI;\n  }\n\n  // SFEN\n  if (Position.isValidSFEN(data)) {\n    return RecordFormatType.SFEN;\n  }\n\n  // KIF vs CSA: 行頭の文字の出現頻度を比較する。\n  const pattKIF = /(^|\\n)[#0-9開終棋手戦表持秒記消場掲備先後作発出完分受]/g;\n  const pattCSA = /(^|,|\\n)[-+$%'VNPT]/g;\n  const matchedKIF = data.match(pattKIF);\n  const matchedCSA = data.match(pattCSA);\n  const evalKIF = matchedKIF ? matchedKIF.length : 0;\n  const evalCSA = matchedCSA ? matchedCSA.length : 0;\n  return evalKIF >= evalCSA ? RecordFormatType.KIF : RecordFormatType.CSA;\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","import { handPieceTypes, ImmutableHand, PieceType } from \"@/shogi\";\nimport {\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum PieceImageType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n}\n\nexport enum BoardImageType {\n  LIGHT = \"light\",\n  WARM = \"warm\",\n  RESIN = \"resin\",\n}\n\ntype PieceImages = {\n  black: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n  white: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n};\n\nconst layoutTemplate = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#0088ff\", opacity: \"0.8\" },\n      lastMoveTo: { \"background-color\": \"#44cc44\", opacity: \"0.8\" },\n      lastMoveFrom: { \"background-color\": \"#44cc44\", opacity: \"0.4\" },\n    },\n  },\n  piece: {\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    color: \"#8b4513\",\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst pieceImageMap: { [key: string]: PieceImages } = {\n  [PieceImageType.HITOMOJI]: {\n    black: {\n      pawn: \"./piece/hitomoji/black_pawn.png\",\n      lance: \"./piece/hitomoji/black_lance.png\",\n      knight: \"./piece/hitomoji/black_knight.png\",\n      silver: \"./piece/hitomoji/black_silver.png\",\n      gold: \"./piece/hitomoji/black_gold.png\",\n      bishop: \"./piece/hitomoji/black_bishop.png\",\n      rook: \"./piece/hitomoji/black_rook.png\",\n      king: \"./piece/hitomoji/black_king.png\",\n      king2: \"./piece/hitomoji/black_king2.png\",\n      promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n      horse: \"./piece/hitomoji/black_horse.png\",\n      dragon: \"./piece/hitomoji/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji/white_pawn.png\",\n      lance: \"./piece/hitomoji/white_lance.png\",\n      knight: \"./piece/hitomoji/white_knight.png\",\n      silver: \"./piece/hitomoji/white_silver.png\",\n      gold: \"./piece/hitomoji/white_gold.png\",\n      bishop: \"./piece/hitomoji/white_bishop.png\",\n      rook: \"./piece/hitomoji/white_rook.png\",\n      king: \"./piece/hitomoji/white_king.png\",\n      king2: \"./piece/hitomoji/white_king2.png\",\n      promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n      horse: \"./piece/hitomoji/white_horse.png\",\n      dragon: \"./piece/hitomoji/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/black_rook.png\",\n      king: \"./piece/hitomoji_gothic/black_king.png\",\n      king2: \"./piece/hitomoji_gothic/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/white_rook.png\",\n      king: \"./piece/hitomoji_gothic/white_king.png\",\n      king2: \"./piece/hitomoji_gothic/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n    },\n  },\n};\n\nconst boardImageMap = {\n  [BoardImageType.LIGHT]: \"./board/light.png\",\n  [BoardImageType.WARM]: \"./board/warm.png\",\n  [BoardImageType.RESIN]: \"./board/resin.png\",\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: PieceType;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nexport default class LayoutBuilder {\n  private pieceImages: PieceImages;\n  private boardImage: string;\n\n  constructor(pieceImageType: PieceImageType, boardImageType: BoardImageType) {\n    this.pieceImages =\n      pieceImageMap[pieceImageType] || pieceImageMap[PieceImageType.HITOMOJI];\n    this.boardImage = boardImageMap[boardImageType];\n  }\n\n  preload(): void {\n    preloadImage(this.boardImage);\n    Object.values(this.pieceImages.black).forEach(preloadImage);\n    Object.values(this.pieceImages.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / layoutTemplate.frame.width;\n    if (layoutTemplate.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / layoutTemplate.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      return {\n        style: {\n          height: layoutTemplate.frame.height * ratio + \"px\",\n          width: layoutTemplate.frame.width * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.boardImage;\n      const x = layoutTemplate.board.x * ratio;\n      const y = layoutTemplate.board.y * ratio;\n      const width = layoutTemplate.board.width * ratio;\n      const height = layoutTemplate.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.pieceImages[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftPiecePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topPiecePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.piece.width * ratio;\n        const height = layoutTemplate.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftSquarePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topSquarePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.board.squreWidth * ratio;\n        const height = layoutTemplate.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveTo,\n          };\n        }\n        if (\n          lastMove &&\n          lastMove.from instanceof Square &&\n          square.equals(lastMove.from)\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveFrom,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = layoutTemplate.hand[displayColor].x * ratio;\n      const standY = layoutTemplate.hand[displayColor].y * ratio;\n      const standWidth = layoutTemplate.hand.width * ratio;\n      const standHeight = layoutTemplate.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": layoutTemplate.hand.color,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (layoutTemplate.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (layoutTemplate.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = layoutTemplate.piece.width * ratio;\n        const pieceHeight = layoutTemplate.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.pieceImages[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.pieceImages[color][promoted.type];\n      const notPromoteImagePath = this.pieceImages[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (layoutTemplate.board.leftSquarePadding +\n          layoutTemplate.board.squreWidth *\n            (square.x === 0 ? 0 : square.x === 8 ? 7 : square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (layoutTemplate.board.topSquarePadding +\n          layoutTemplate.board.squreHeight * square.y) *\n          ratio;\n      const width = layoutTemplate.board.squreWidth * 2 * ratio;\n      const height = layoutTemplate.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left:\n            layoutTemplate.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: layoutTemplate.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: layoutTemplate.turn.width * ratio - borderWidth + \"px\",\n          height: layoutTemplate.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": layoutTemplate.turn.fontSize * ratio + \"px\",\n          \"border-radius\": layoutTemplate.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.playerName[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.playerName[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.playerName.width * ratio + \"px\",\n          height: layoutTemplate.playerName.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.clock[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.clock[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.clock.width * ratio + \"px\",\n          height: layoutTemplate.clock.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: layoutTemplate.control.left.x * ratio + \"px\",\n            top: layoutTemplate.control.left.y * ratio + \"px\",\n            width: layoutTemplate.control.left.width * ratio + \"px\",\n            height: layoutTemplate.control.left.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: layoutTemplate.control.right.x * ratio + \"px\",\n            top: layoutTemplate.control.right.y * ratio + \"px\",\n            width: layoutTemplate.control.right.width * ratio + \"px\",\n            height: layoutTemplate.control.right.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","\nimport { PieceType } from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardImageType,\n  PieceImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { Square, Piece, Color, Move, ImmutablePosition } from \"@/shogi\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"BoardView\",\n  props: {\n    pieceImageType: {\n      type: String as PropType<PieceImageType>,\n      required: true,\n    },\n    boardImageType: {\n      type: String as PropType<BoardImageType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Object as PropType<Move>,\n      required: false,\n      default: null,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n      default: \"先手\",\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n      default: \"後手\",\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n  },\n  emits: [\"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(\n        props.pieceImageType,\n        props.boardImageType\n      );\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() =>\n      layoutBuilder.value.build(\n        props.maxSize.reduce(new RectSize(20, 20)),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      )\n    );\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n      Color,\n    };\n  },\n});\n","import { render } from \"./BoardView.vue?vue&type=template&id=3ecdb7e9&scoped=true&ts=true\"\nimport script from \"./BoardView.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardView.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=3ecdb7e9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3ecdb7e9\"]])\n\nexport default __exports__","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { issueEngineURI } from \"@/uri\";\n\nexport type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption\n): string | number | undefined {\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function duplicateEngineSetting(\n  src: USIEngineSetting\n): USIEngineSetting {\n  const engine: USIEngineSetting = JSON.parse(JSON.stringify(src));\n  engine.uri = issueEngineURI();\n  engine.name += \" のコピー\";\n  return engine;\n}\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      if (a.name !== b.name) {\n        return a.name > b.name ? 1 : -1;\n      }\n      if (a.defaultName !== b.defaultName) {\n        return a.defaultName > b.defaultName ? 1 : -1;\n      }\n      return a.uri > b.uri ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  COPY_RECORD_CSA = \"copyRecordCsa\",\n  COPY_RECORD_USI_BEFORE = \"copyRecordUsiBefore\",\n  COPY_RECORD_USI_ALL = \"copyRecordUsiAll\",\n  COPY_BOARD_SFEN = \"copyRecordSfen\",\n  PASTE_RECORD = \"pasteRecord\",\n  INSERT_INTERRUPT = \"insertInterrupt\",\n  INSERT_RESIGN = \"insertResign\",\n  INSERT_DRAW = \"insertDraw\",\n  INSERT_REPETITION_DRAW = \"insertRepetitionDraw\",\n  INSERT_MATE = \"insertMate\",\n  INSERT_TIMEOUT = \"insertTimeout\",\n  INSERT_FOUL_WIN = \"insertFoulWin\",\n  INSERT_FOUL_LOSE = \"insertFoulLose\",\n  INSERT_ENTERING_OF_KING = \"insertEnteringOfKing\",\n  INSERT_WIN_BY_DEFAULT = \"insertWinByDefault\",\n  INSERT_LOSS_BY_DEFAULT = \"insertLossByDefault\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  INIT_POSITION_TSUME_SHOGI_2KINGS = \"initPositionTsumeShogi2Kings\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_ANALYSIS = \"startAnalysis\",\n  STOP_ANALYSIS = \"stopAnalysis\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { USIEngineSetting } from \"./usi\";\n\ntype StartCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype EndCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype PerMoveCriteria = {\n  maxSeconds: number;\n};\n\nexport enum CommentBehavior {\n  NONE = \"none\",\n  INSERT = \"insert\",\n  APPEND = \"append\",\n  OVERWRITE = \"overwrite\",\n}\n\nexport type AnalysisSetting = {\n  usi?: USIEngineSetting;\n  startCriteria: StartCriteria;\n  endCriteria: EndCriteria;\n  perMoveCriteria: PerMoveCriteria;\n  commentBehavior: CommentBehavior;\n};\n\nexport function defaultAnalysisSetting(): AnalysisSetting {\n  return {\n    startCriteria: {\n      enableNumber: false,\n      number: 20,\n    },\n    endCriteria: {\n      enableNumber: false,\n      number: 100,\n    },\n    perMoveCriteria: {\n      maxSeconds: 5,\n    },\n    commentBehavior: CommentBehavior.INSERT,\n  };\n}\n\nexport function appendAnalysisComment(\n  org: string,\n  add: string,\n  behavior: CommentBehavior\n): string {\n  const sep = org ? \"\\n\" : \"\";\n  switch (behavior) {\n    case CommentBehavior.NONE:\n      return org;\n    case CommentBehavior.INSERT:\n      return add + sep + org;\n    case CommentBehavior.APPEND:\n      return org + sep + add;\n    case CommentBehavior.OVERWRITE:\n      return add;\n  }\n}\n","import {\n  PieceImageType,\n  BoardImageType,\n} from \"@/components/primitive/BoardLayout\";\n\nexport enum Tab {\n  RECORD_INFO = \"recordInfo\",\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  CHART = \"chart\",\n  PERCENTAGE_CHART = \"percentageChart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  pieceImage: PieceImageType;\n  boardImage: BoardImageType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  tab: Tab;\n  returnCode: string;\n  coefficientInSigmoid: number;\n  badMoveLevelThreshold1: number;\n  badMoveLevelThreshold2: number;\n  badMoveLevelThreshold3: number;\n  badMoveLevelThreshold4: number;\n  showElapsedTimeInRecordView: boolean;\n  showCommentInRecordView: boolean;\n};\n\nexport type AppSettingUpdate = {\n  pieceImage?: PieceImageType;\n  boardImage?: BoardImageType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  tab?: Tab;\n  returnCode?: string;\n  coefficientInSigmoid?: number;\n  badMoveLevelThreshold1?: number;\n  badMoveLevelThreshold2?: number;\n  badMoveLevelThreshold3?: number;\n  badMoveLevelThreshold4?: number;\n  showElapsedTimeInRecordView?: boolean;\n  showCommentInRecordView?: boolean;\n};\n\nexport function defaultAppSetting(returnCode?: string): AppSetting {\n  return {\n    pieceImage: PieceImageType.HITOMOJI,\n    boardImage: BoardImageType.LIGHT,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    tab: Tab.RECORD_INFO,\n    returnCode: returnCode || \"\\r\\n\",\n    coefficientInSigmoid: 600,\n    badMoveLevelThreshold1: 5,\n    badMoveLevelThreshold2: 10,\n    badMoveLevelThreshold3: 20,\n    badMoveLevelThreshold4: 50,\n    showElapsedTimeInRecordView: true,\n    showCommentInRecordView: true,\n  };\n}\n\nexport function validateAppSetting(setting: AppSetting): Error | undefined {\n  if (setting.pieceVolume < 0 || setting.pieceVolume > 100) {\n    return new Error(\"駒音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockVolume < 0 || setting.clockVolume > 100) {\n    return new Error(\"時計音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockPitch < 220 || setting.clockPitch > 880) {\n    return new Error(\"時計音の高さには220Hz～880Hzの値を指定してください。\");\n  }\n  if (setting.coefficientInSigmoid <= 0) {\n    return new Error(\"勝率換算係数には0より大きい値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold1 < 1 ||\n    setting.badMoveLevelThreshold1 > 100\n  ) {\n    return new Error(\"緩手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold2 < 1 ||\n    setting.badMoveLevelThreshold2 > 100\n  ) {\n    return new Error(\"疑問手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold3 < 1 ||\n    setting.badMoveLevelThreshold3 > 100\n  ) {\n    return new Error(\"悪手には1%～100%の閾値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold4 < 1 ||\n    setting.badMoveLevelThreshold4 > 100\n  ) {\n    return new Error(\"大悪手には1%～100%の値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold1 >= setting.badMoveLevelThreshold2) {\n    return new Error(\"緩手には疑問手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold2 >= setting.badMoveLevelThreshold3) {\n    return new Error(\"疑問手には悪手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold3 >= setting.badMoveLevelThreshold4) {\n    return new Error(\"悪手には大悪手より小さい値を指定してください。\");\n  }\n}\n","import { defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { API } from \"./renderer\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  ANALYSIS_SETTING = \"analysisSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: API = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Uint8Array> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadAnalysisSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.ANALYSIS_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAnalysisSetting());\n    }\n    return JSON.stringify({\n      ...defaultAnalysisSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAnalysisSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.ANALYSIS_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  async usiLaunch(): Promise<number> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async usiGo(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGoInfinite(): Promise<void> {\n    // Do Nothing\n  },\n  async usiStop(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGameover(): Promise<void> {\n    // Do Nothing\n  },\n  async usiQuit(): Promise<void> {\n    // Do Nothing\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n};\n","import { InitialPositionType } from \"@/shogi\";\nimport { USIEngineSetting } from \"./usi\";\nimport * as uri from \"@/uri\";\nimport { secondsToMSS } from \"@/helpers/time\";\n\nexport type PlayerSetting = {\n  name: string;\n  uri: string;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport function formatTimeLimitCSA(setting: TimeLimitSetting): string {\n  return (\n    secondsToMSS(setting.timeSeconds) +\n    \"+\" +\n    String(setting.byoyomi).padStart(2, \"0\")\n  );\n}\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとフィッシャールールは併用できません。\");\n  }\n  return;\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","import {\n  usiGameover,\n  usiGo,\n  usiGoInfinite,\n  usiLaunch,\n  usiQuit,\n  usiStop,\n} from \"@/ipc/renderer\";\nimport { GameSetting } from \"@/settings/game\";\nimport { USIEngineSetting } from \"@/settings/usi\";\nimport { ImmutableRecord, Position } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { GameResult, Player, SearchHandler } from \"./player\";\n\nexport class USIPlayer implements Player {\n  private setting: USIEngineSetting;\n  private sessionID: number;\n  private usi?: string;\n  private position?: Position;\n  private searchHandler?: SearchHandler;\n\n  constructor(setting: USIEngineSetting) {\n    this.setting = setting;\n    this.sessionID = 0;\n  }\n\n  async launch(): Promise<void> {\n    this.sessionID = await usiLaunch(this.setting);\n    usiPlayers[this.sessionID] = this;\n  }\n\n  isEngine(): boolean {\n    return true;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n    this.usi = record.usi;\n    this.position = record.position.clone();\n    usiGo(\n      this.sessionID,\n      this.usi,\n      gameSetting,\n      blackTimeMs,\n      whiteTimeMs\n    ).catch((e) => {\n      useStore().pushError(e);\n    });\n  }\n\n  async startResearch(record: ImmutableRecord): Promise<void> {\n    this.searchHandler = undefined;\n    this.usi = record.usi;\n    await usiGoInfinite(this.sessionID, record.usi);\n  }\n\n  async stop(): Promise<void> {\n    await usiStop(this.sessionID);\n  }\n\n  async gameover(result: GameResult): Promise<void> {\n    await usiGameover(this.sessionID, result);\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n    await usiQuit(this.sessionID);\n    delete usiPlayers[this.sessionID];\n  }\n\n  onBestMove(usi: string, sfen: string): void {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (!searchHandler || !this.position) {\n      return;\n    }\n    if (usi !== this.usi) {\n      return;\n    }\n    if (sfen === \"resign\") {\n      searchHandler.onResign();\n      return;\n    }\n    if (sfen === \"win\") {\n      searchHandler.onWin();\n      return;\n    }\n    const move = this.position.createMoveBySFEN(sfen);\n    if (!move) {\n      useStore().pushError(\"エンジンから不明な指し手を受信しました:\" + sfen);\n      searchHandler.onResign();\n      return;\n    }\n    searchHandler.onMove(move);\n  }\n}\n\nexport const usiPlayers: { [sessionID: number]: USIPlayer } = {};\n\nexport function usiBestMove(sessionID: number, usi: string, sfen: string) {\n  const player = usiPlayers[sessionID];\n  if (!player) {\n    return;\n  }\n  player.onBestMove(usi, sfen);\n}\n","import { GameSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\nimport { Player, SearchHandler } from \"./player\";\n\nexport class HumanPlayer implements Player {\n  private searchHandler?: SearchHandler;\n\n  isEngine(): boolean {\n    return false;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n  }\n\n  async stop(): Promise<void> {\n    // do nothing\n  }\n\n  async gameover(): Promise<void> {\n    // do nothing\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n  }\n\n  doMove(move: Move) {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onMove(move);\n    }\n  }\n\n  resign() {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onResign();\n    }\n  }\n}\n\nexport const humanPlayer = new HumanPlayer();\n","import { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { watch } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { MenuEvent } from \"@/ipc/menu\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { USIInfoSender } from \"@/store/usi\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mode } from \"@/store/mode\";\nimport { useStore } from \"@/store\";\nimport { GameResult } from \"@/players/player\";\nimport { usiBestMove } from \"@/players/usi\";\nimport { humanPlayer } from \"@/players/human\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(mode: Mode, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Uint8Array>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Uint8Array): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadAnalysisSetting(): Promise<string>;\n  saveAnalysisSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  usiLaunch(json: string): Promise<number>;\n  usiGo(\n    sessionID: number,\n    usi: string,\n    json: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiGoInfinite(sessionID: number, usi: string): Promise<void>;\n  usiStop(sessionID: number): Promise<void>;\n  usiGameover(sessionID: number, result: GameResult): Promise<void>;\n  usiQuit(sessionID: number): Promise<void>;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (sessionID: number, usi: string, sfen: string) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI: API;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n\nfunction getAPI(): API {\n  return getWindowObject().electronShogiAPI || webAPI;\n}\n\nexport async function getRecordPathFromProcArg(): Promise<string> {\n  return await getAPI().getRecordPathFromProcArg();\n}\n\nexport async function showOpenRecordDialog(): Promise<string> {\n  return await getAPI().showOpenRecordDialog();\n}\n\nexport async function openRecord(path: string): Promise<Uint8Array> {\n  return await getAPI().openRecord(path);\n}\n\nexport async function showSaveRecordDialog(\n  defaultPath: string\n): Promise<string> {\n  return await getAPI().showSaveRecordDialog(defaultPath);\n}\n\nexport async function saveRecord(\n  path: string,\n  data: Uint8Array\n): Promise<void> {\n  await getAPI().saveRecord(path, data);\n}\n\nexport async function showSelectFileDialog(): Promise<string> {\n  return await getAPI().showSelectFileDialog();\n}\n\nexport async function loadAppSetting(): Promise<AppSetting> {\n  return JSON.parse(await getAPI().loadAppSetting());\n}\n\nexport async function saveAppSetting(setting: AppSetting): Promise<void> {\n  await getAPI().saveAppSetting(JSON.stringify(setting));\n}\n\nexport async function loadResearchSetting(): Promise<ResearchSetting> {\n  return JSON.parse(await getAPI().loadResearchSetting());\n}\n\nexport async function saveResearchSetting(\n  setting: ResearchSetting\n): Promise<void> {\n  await getAPI().saveResearchSetting(JSON.stringify(setting));\n}\n\nexport async function loadAnalysisSetting(): Promise<AnalysisSetting> {\n  return JSON.parse(await getAPI().loadAnalysisSetting());\n}\n\nexport async function saveAnalysisSetting(\n  setting: AnalysisSetting\n): Promise<void> {\n  await getAPI().saveAnalysisSetting(JSON.stringify(setting));\n}\n\nexport async function loadGameSetting(): Promise<GameSetting> {\n  return JSON.parse(await getAPI().loadGameSetting());\n}\n\nexport async function saveGameSetting(setting: GameSetting): Promise<void> {\n  await getAPI().saveGameSetting(JSON.stringify(setting));\n}\n\nexport async function loadUSIEngineSetting(): Promise<USIEngineSettings> {\n  return new USIEngineSettings(await getAPI().loadUSIEngineSetting());\n}\n\nexport async function saveUSIEngineSetting(\n  setting: USIEngineSettings\n): Promise<void> {\n  await getAPI().saveUSIEngineSetting(setting.jsonWithIndent);\n}\n\nexport async function showSelectUSIEngineDialog(): Promise<string> {\n  return await getAPI().showSelectUSIEngineDialog();\n}\n\nexport async function getUSIEngineInfo(\n  path: string\n): Promise<USIEngineSetting> {\n  return JSON.parse(await getAPI().getUSIEngineInfo(path));\n}\n\nexport async function sendUSISetOption(\n  path: string,\n  name: string\n): Promise<void> {\n  await getAPI().sendUSISetOption(path, name);\n}\n\nexport async function usiLaunch(setting: USIEngineSetting): Promise<number> {\n  return await getAPI().usiLaunch(JSON.stringify(setting));\n}\n\nexport async function usiGo(\n  sessionID: number,\n  usi: string,\n  gameSetting: GameSetting,\n  blackTimeMs: number,\n  whiteTimeMs: number\n): Promise<void> {\n  await getAPI().usiGo(\n    sessionID,\n    usi,\n    JSON.stringify(gameSetting),\n    blackTimeMs,\n    whiteTimeMs\n  );\n}\n\nexport async function usiGoInfinite(\n  sessionID: number,\n  usi: string\n): Promise<void> {\n  await getAPI().usiGoInfinite(sessionID, usi);\n}\n\nexport async function usiStop(sessionID: number): Promise<void> {\n  await getAPI().usiStop(sessionID);\n}\n\nexport async function usiGameover(\n  sessionID: number,\n  result: GameResult\n): Promise<void> {\n  await getAPI().usiGameover(sessionID, result);\n}\n\nexport async function usiQuit(sessionID: number): Promise<void> {\n  await getAPI().usiQuit(sessionID);\n}\n\nexport function setup(): void {\n  const store = useStore();\n  const api = getAPI();\n  api.onSendError((e: Error) => {\n    store.pushError(e);\n  });\n  api.onMenuEvent((event: MenuEvent) => {\n    if (store.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.newRecord();\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.openRecord();\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.saveRecord({ overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.saveRecord();\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.copyRecordKIF();\n        break;\n      case MenuEvent.COPY_RECORD_CSA:\n        store.copyRecordCSA();\n        break;\n      case MenuEvent.COPY_RECORD_USI_BEFORE:\n        store.copyRecordUSIBefore();\n        break;\n      case MenuEvent.COPY_RECORD_USI_ALL:\n        store.copyRecordUSIAll();\n        break;\n      case MenuEvent.COPY_BOARD_SFEN:\n        store.copyBoardSFEN();\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.showPasteDialog();\n        break;\n      case MenuEvent.INSERT_INTERRUPT:\n        store.insertSpecialMove(SpecialMove.INTERRUPT);\n        break;\n      case MenuEvent.INSERT_RESIGN:\n        store.insertSpecialMove(SpecialMove.RESIGN);\n        break;\n      case MenuEvent.INSERT_DRAW:\n        store.insertSpecialMove(SpecialMove.DRAW);\n        break;\n      case MenuEvent.INSERT_REPETITION_DRAW:\n        store.insertSpecialMove(SpecialMove.REPETITION_DRAW);\n        break;\n      case MenuEvent.INSERT_MATE:\n        store.insertSpecialMove(SpecialMove.MATE);\n        break;\n      case MenuEvent.INSERT_TIMEOUT:\n        store.insertSpecialMove(SpecialMove.TIMEOUT);\n        break;\n      case MenuEvent.INSERT_FOUL_WIN:\n        store.insertSpecialMove(SpecialMove.FOUL_WIN);\n        break;\n      case MenuEvent.INSERT_FOUL_LOSE:\n        store.insertSpecialMove(SpecialMove.FOUL_LOSE);\n        break;\n      case MenuEvent.INSERT_ENTERING_OF_KING:\n        store.insertSpecialMove(SpecialMove.ENTERING_OF_KING);\n        break;\n      case MenuEvent.INSERT_WIN_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.WIN_BY_DEFAULT);\n        break;\n      case MenuEvent.INSERT_LOSS_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.LOSS_BY_DEFAULT);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.removeRecordAfter();\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.startPositionEditing();\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.endPositionEditing();\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.changeTurn();\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.initializePosition(InitialPositionType.STANDARD);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI_2KINGS:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI_2KINGS);\n        break;\n      case MenuEvent.START_GAME:\n        store.showGameDialog();\n        break;\n      case MenuEvent.STOP_GAME:\n        store.stopGame();\n        break;\n      case MenuEvent.RESIGN:\n        humanPlayer.resign();\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.showResearchDialog();\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.stopResearch();\n        break;\n      case MenuEvent.START_ANALYSIS:\n        store.showAnalysisDialog();\n        break;\n      case MenuEvent.STOP_ANALYSIS:\n        store.stopAnalysis();\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.flipBoard();\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.openAppSettingDialog();\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.openUsiEngineManagementDialog();\n        break;\n    }\n  });\n  api.onUSIBestMove((sessionID: number, usi: string, sfen: string) => {\n    usiBestMove(sessionID, usi, sfen);\n  });\n  api.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.updateUSIInfo(sessionID, usi, sender, name, JSON.parse(json));\n    }\n  );\n  watch(\n    () => [store.mode, store.isBussy],\n    ([mode, bussy]) => {\n      api.updateMenuState(mode as Mode, bussy as boolean);\n    }\n  );\n  api.updateMenuState(store.mode, store.isBussy);\n}\n","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","import { ImmutablePosition, Move } from \"@/shogi\";\n\nexport enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"先手\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"後手\";\n    case USIInfoSender.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n\nexport type USIIteration = {\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n\n  constructor(public sessionID: number, public name: string) {\n    this.iterates = [];\n  }\n\n  update(position: ImmutablePosition, update: InfoCommand): void {\n    const iterate: USIIteration = {};\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = formatPV(position, update.pv);\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      this.iterates.unshift(iterate);\n    }\n  }\n}\n\nexport class USIMonitor {\n  private _blackPlayer?: USIPlayerMonitor;\n  private _blackPosition?: string;\n  private _whitePlayer?: USIPlayerMonitor;\n  private _whitePosition?: string;\n  private _researcher?: USIPlayerMonitor;\n  private _researchPosition?: string;\n\n  get blackPlayer(): USIPlayerMonitor | undefined {\n    return this._blackPlayer;\n  }\n\n  get whitePlayer(): USIPlayerMonitor | undefined {\n    return this._whitePlayer;\n  }\n\n  get researcher(): USIPlayerMonitor | undefined {\n    return this._researcher;\n  }\n\n  update(\n    sessionID: number,\n    position: ImmutablePosition,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        if (\n          !this._blackPlayer ||\n          this._blackPlayer.sessionID !== sessionID ||\n          this._blackPosition !== position.sfen\n        ) {\n          this._blackPlayer = new USIPlayerMonitor(sessionID, name);\n          this._blackPosition = position.sfen;\n        }\n        this._blackPlayer.update(position, info);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        if (\n          !this._whitePlayer ||\n          this._whitePlayer.sessionID !== sessionID ||\n          this._whitePosition !== position.sfen\n        ) {\n          this._whitePlayer = new USIPlayerMonitor(sessionID, name);\n          this._whitePosition = position.sfen;\n        }\n        this._whitePlayer.update(position, info);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.RESEARCHER:\n        if (\n          !this._researcher ||\n          this._researcher.sessionID !== sessionID ||\n          this._researchPosition !== position.sfen\n        ) {\n          this._researcher = new USIPlayerMonitor(sessionID, name);\n          this._researchPosition = position.sfen;\n        }\n        this._researcher.update(position, info);\n        this._blackPlayer = undefined;\n        this._whitePlayer = undefined;\n        break;\n    }\n  }\n}\n","import { GameSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\n\nexport enum GameResult {\n  WIN = \"win\",\n  LOSE = \"lose\",\n  DRAW = \"draw\",\n}\n\nexport interface SearchHandler {\n  onMove: (move: Move) => void;\n  onResign: () => void;\n  onWin: () => void;\n}\n\nexport interface Player {\n  isEngine(): boolean;\n  startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void>;\n  stop(): Promise<void>;\n  gameover(result: GameResult): Promise<void>;\n  close(): Promise<void>;\n}\n","import { humanPlayer } from \"@/players/human\";\nimport { USIPlayer } from \"@/players/usi\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n} from \"@/settings/game\";\nimport { Color, ImmutableRecord, Move, Record, SpecialMove } from \"@/shogi\";\nimport * as uri from \"@/uri\";\nimport { GameResult, Player } from \"../players/player\";\n\nexport type PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\nexport interface GameHandlers {\n  onMove(move: Move): ImmutableRecord;\n  onEndGame(specialMove?: SpecialMove): void;\n  onBeepShort(): void;\n  onBeepUnlimited(): void;\n  onStopBeep(): void;\n  onError(e: unknown): void;\n}\n\nenum GameState {\n  IDLE = \"idle\",\n  ACTIVE = \"active\",\n  PENDING = \"pending\",\n  BUSSY = \"bussy\",\n}\n\nexport class GameManager {\n  private state: GameState;\n  private handlers: GameHandlers;\n  private blackState: PlayerState;\n  private whiteState: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private _setting: GameSetting;\n  private blackPlayer?: Player;\n  private whitePlayer?: Player;\n  private lastEventID: number;\n  private record: ImmutableRecord;\n\n  constructor(handlers: GameHandlers) {\n    this.state = GameState.IDLE;\n    this.handlers = handlers;\n    this.blackState = { timeMs: 0, byoyomi: 0 };\n    this.whiteState = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this._setting = defaultGameSetting();\n    this.lastEventID = 0;\n    this.record = new Record();\n  }\n\n  get blackTimeMs(): number {\n    return this.blackState.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.blackState.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.whiteState.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.whiteState.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  async startGame(setting: GameSetting): Promise<void> {\n    if (this.state !== GameState.IDLE) {\n      throw Error(\n        \"前回の対局が正常に終了できていません。アプリを再起動してください。\"\n      );\n    }\n    this.blackState.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.blackState.byoyomi = setting.timeLimit.byoyomi;\n    this.whiteState.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.whiteState.byoyomi = setting.timeLimit.byoyomi;\n    this._setting = setting;\n    try {\n      this.blackPlayer = await this.buildPlayer(setting.black);\n      this.whitePlayer = await this.buildPlayer(setting.white);\n    } catch (e) {\n      try {\n        await this.closePlayers();\n      } catch (errorOnClose) {\n        this.handlers.onError(errorOnClose);\n      }\n      throw e;\n    }\n    this.state = GameState.ACTIVE;\n    this.next();\n  }\n\n  private next(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"予期せぬステータスです: GameManager.next(): \" + this.state\n      );\n      return;\n    }\n    const color = this.record.position.color;\n    this.startTimer(color);\n    const player = this.getPlayer(color);\n    if (!player) {\n      this.handlers.onError(\n        \"致命的なエラーが発生しました: GameManager.next(): player is undefined\"\n      );\n      return;\n    }\n    const eventID = this.issueEventID();\n    player\n      .startSearch(\n        this.record,\n        this.setting,\n        this.blackTimeMs,\n        this.whiteTimeMs,\n        {\n          onMove: (move: Move): void => this.onMove(eventID, move),\n          onResign: (): void => this.onResign(eventID),\n          onWin: (): void => this.onWin(eventID),\n        }\n      )\n      .catch((e) => {\n        this.handlers.onError(\n          new Error(\"プレイヤーにコマンドを送信できませんでした: \" + e)\n        );\n      });\n  }\n\n  private onMove(eventID: number, move: Move): void {\n    if (eventID !== this.lastEventID) {\n      console.warn(\"指し手を受信しましたが既にイベントは無効です。\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      console.warn(\"指し手を受信しましたが既に対局中ではありません。\");\n      return;\n    }\n    if (!this.record.position.isValidMove(move)) {\n      this.handlers.onError(\"反則手: \" + move.getDisplayText());\n      this.endGame(SpecialMove.FOUL_LOSE);\n      return;\n    }\n    this.incrementTime(this.record.position.color);\n    this.record = this.handlers.onMove(move);\n    const faulColor = this.record.perpetualCheck;\n    if (faulColor) {\n      if (faulColor === this.record.position.color) {\n        this.endGame(SpecialMove.FOUL_LOSE);\n        return;\n      } else {\n        this.endGame(SpecialMove.FOUL_WIN);\n        return;\n      }\n    } else if (this.record.repetition) {\n      this.endGame(SpecialMove.REPETITION_DRAW);\n      return;\n    }\n    this.next();\n  }\n\n  private onResign(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      console.warn(\"投了を受信しましたが既にイベントは無効です。\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      console.warn(\"投了を受信しましたが既に対局中ではありません。\");\n      return;\n    }\n    this.endGame(SpecialMove.RESIGN);\n  }\n\n  private onWin(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      console.warn(\"勝ち宣言を受信しましたが既にイベントは無効です。\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      console.warn(\"勝ち宣言を受信しましたが既に対局中ではありません。\");\n      return;\n    }\n    this.endGame(SpecialMove.ENTERING_OF_KING);\n  }\n\n  private onTimeout(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"予期せぬステータスです: GameManager.onTimeout(): \" + this.state\n      );\n      return;\n    }\n    this.endGame(SpecialMove.TIMEOUT);\n  }\n\n  private startTimer(color: Color): void {\n    this.stopTimer();\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.setting.timeLimit.byoyomi;\n    this._elapsedMs = 0;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.setting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        this.timeout(color);\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          this.handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          this.handlers.onBeepShort();\n        }\n      } else if (!this.setting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          this.handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          this.handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  private timeout(color: Color): void {\n    this.stopTimer();\n    const player = this.getPlayer(color);\n    if (player && player.isEngine() && !this.setting.enableEngineTimeout) {\n      player.stop().catch((e) => {\n        this.handlers.onError(\n          new Error(\"プレイヤーにコマンドを送信できませんでした: \" + e)\n        );\n      });\n      return;\n    }\n    this.onTimeout();\n  }\n\n  endGame(specialMove?: SpecialMove): void {\n    if (this.state !== GameState.ACTIVE && this.state !== GameState.PENDING) {\n      return;\n    }\n    this.state = GameState.BUSSY;\n    this.stopTimer();\n    this.endGameAsync(specialMove)\n      .then(() => {\n        this.state = GameState.IDLE;\n      })\n      .catch((e) => {\n        this.handlers.onError(e);\n        this.state = GameState.PENDING;\n      });\n  }\n\n  private async endGameAsync(specialMove?: SpecialMove): Promise<void> {\n    if (specialMove) {\n      const color = this.record.position.color;\n      await this.sendGameResults(color, specialMove);\n    }\n    await this.closePlayers();\n    this.handlers.onEndGame(specialMove);\n  }\n\n  private async sendGameResults(\n    color: Color,\n    specialMove: SpecialMove\n  ): Promise<void> {\n    if (this.blackPlayer) {\n      const gameResult = this.getGameResult(color, Color.BLACK, specialMove);\n      if (gameResult) {\n        await this.blackPlayer.gameover(gameResult);\n      }\n    }\n    if (this.whitePlayer) {\n      const gameResult = this.getGameResult(color, Color.WHITE, specialMove);\n      if (gameResult) {\n        await this.whitePlayer.gameover(gameResult);\n      }\n    }\n  }\n\n  private getGameResult(\n    currentColor: Color,\n    playerColor: Color,\n    specialMove: SpecialMove\n  ): GameResult | null {\n    switch (specialMove) {\n      case SpecialMove.FOUL_WIN:\n      case SpecialMove.ENTERING_OF_KING:\n        return currentColor == playerColor ? GameResult.WIN : GameResult.LOSE;\n      case SpecialMove.RESIGN:\n      case SpecialMove.MATE:\n      case SpecialMove.TIMEOUT:\n      case SpecialMove.FOUL_LOSE:\n        return currentColor == playerColor ? GameResult.LOSE : GameResult.WIN;\n      case SpecialMove.DRAW:\n      case SpecialMove.REPETITION_DRAW:\n        return GameResult.DRAW;\n    }\n    return null;\n  }\n\n  private stopTimer(): void {\n    this.handlers.onStopBeep();\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n  }\n\n  private incrementTime(color: Color): void {\n    this.getPlayerState(color).timeMs += this.setting.timeLimit.increment * 1e3;\n  }\n\n  private async buildPlayer(playerSetting: PlayerSetting): Promise<Player> {\n    if (playerSetting.uri === uri.ES_HUMAN) {\n      return humanPlayer;\n    } else if (uri.isUSIEngine(playerSetting.uri) && playerSetting.usi) {\n      const player = new USIPlayer(playerSetting.usi);\n      await player.launch();\n      return player;\n    }\n    throw new Error(\"予期せぬプレイヤーURIです: \" + playerSetting.uri);\n  }\n\n  private async closePlayers(): Promise<void> {\n    if (this.blackPlayer) {\n      await this.blackPlayer.close();\n      this.blackPlayer = undefined;\n    }\n    if (this.whitePlayer) {\n      await this.whitePlayer.close();\n      this.whitePlayer = undefined;\n    }\n  }\n\n  private getPlayer(color: Color): Player | undefined {\n    switch (color) {\n      case Color.BLACK:\n        return this.blackPlayer;\n      case Color.WHITE:\n        return this.whitePlayer;\n    }\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.blackState;\n      case Color.WHITE:\n        return this.whiteState;\n    }\n  }\n\n  private issueEventID(): number {\n    this.lastEventID += 1;\n    return this.lastEventID;\n  }\n}\n","import { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/store/usi\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MATE_SCORE = 30000;\n\nexport class RecordEntryCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  private updateScore(\n    color: Color,\n    sender: USIInfoSender,\n    score: number\n  ): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] =\n          color === Color.BLACK ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.multipv !== undefined && command.multipv !== 1) {\n      return;\n    }\n    if (command.scoreCP) {\n      this.updateScore(color, sender, command.scoreCP);\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MATE_SCORE : -MATE_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n","import { RecordMetadata, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(metadata: RecordMetadata): string {\n  let ret = getDateString(metadata);\n  const title =\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NO) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PLACE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.POSTED_ON) ||\n    metadata.getStandardMetadata(RecordMetadataKey.AUTHOR);\n  if (title) {\n    ret += \"_\" + title;\n  }\n  const black =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (black) {\n    ret += \"_\" + black;\n  }\n  const white =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (white) {\n    ret += \"_\" + white;\n  }\n  return ret + \".kif\";\n}\n\nfunction getDateString(metadata: RecordMetadata): string {\n  const date = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return date\n      .trim()\n      .replaceAll(\" \", \"_\")\n      .replaceAll(\"/\", \"\")\n      .replaceAll(\":\", \"\");\n  }\n  return new Date()\n    .toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    })\n    .replaceAll(\"/\", \"\");\n}\n","export class BussyStore {\n  private count: number;\n\n  constructor() {\n    this.count = 0;\n  }\n\n  get isBussy(): boolean {\n    return this.count !== 0;\n  }\n\n  retain(): void {\n    this.count += 1;\n  }\n\n  release(): void {\n    this.count -= 1;\n  }\n}\n","export enum Mode {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  ANALYSIS = \"analysis\",\n  ANALYSIS_DIALOG = \"analysisDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  TEMPORARY = \"temporary\",\n}\n","export class MessageStore {\n  private _queue: string[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get message(): string {\n    return this._queue[0];\n  }\n\n  get hasMessage(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  enqueue(message: string): void {\n    this._queue.push(message);\n  }\n\n  dequeue(): void {\n    this._queue.shift();\n  }\n}\n\nexport type MessageState = {\n  queue: string[];\n};\n","export class ErrorStore {\n  private _queue: Error[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get errors(): Error[] {\n    return this._queue;\n  }\n\n  get hasError(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  push(e: unknown): void {\n    if (e instanceof Error) {\n      this._queue.push(e);\n    } else {\n      this._queue.push(new Error(\"\" + e));\n    }\n  }\n\n  clear(): void {\n    this._queue = [];\n  }\n}\n","export function getDateString(date?: Date): string {\n  return (date || new Date()).toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  });\n}\n\nexport function getDateTimeString(date?: Date): string {\n  return (date || new Date()).toLocaleTimeString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: false,\n  });\n}\n","import { AppSetting } from \"@/settings/app\";\n\nexport function getSituationText(score: number): string {\n  if (score >= 1500) {\n    return \"先手勝勢\";\n  } else if (score >= 600) {\n    return \"先手優勢\";\n  } else if (score >= 400) {\n    return \"先手有利\";\n  } else if (score >= 200) {\n    return \"先手有望\";\n  } else if (score >= -200) {\n    return \"互角\";\n  } else if (score >= -400) {\n    return \"後手有望\";\n  } else if (score >= -600) {\n    return \"後手有利\";\n  } else if (score >= -1500) {\n    return \"後手優勢\";\n  } else {\n    return \"後手勝勢\";\n  }\n}\n\nexport function scoreToPercentage(\n  score: number,\n  appSetting: AppSetting\n): number {\n  return 100 / (1 + Math.exp(-score / appSetting.coefficientInSigmoid));\n}\n\nexport function getMoveAccuracyText(\n  before: number,\n  after: number,\n  appSetting: AppSetting\n): string | null {\n  const loss =\n    scoreToPercentage(before, appSetting) -\n    scoreToPercentage(after, appSetting);\n  if (loss >= appSetting.badMoveLevelThreshold4) {\n    return \"大悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold3) {\n    return \"悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold2) {\n    return \"疑問手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold1) {\n    return \"緩手\";\n  }\n  return null;\n}\n","import { USIPlayer } from \"@/players/usi\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { AppSetting } from \"@/settings/app\";\nimport { USIEngineSetting } from \"@/settings/usi\";\nimport {\n  Color,\n  ImmutablePosition,\n  ImmutableRecord,\n  Move,\n  reverseColor,\n} from \"@/shogi\";\nimport { getMoveAccuracyText, getSituationText } from \"./score\";\nimport { InfoCommand } from \"./usi\";\n\nexport interface AnalysisResult {\n  number: number;\n  score?: number;\n  negaScore?: number;\n  scoreDelta?: number;\n  mate?: number;\n  pv?: Move[];\n  isBestMove?: boolean;\n}\n\nexport interface AnalysisHandler {\n  onResult(result: AnalysisResult): void;\n  onNext(number: number): ImmutableRecord | null;\n  onFinish(): void;\n  onError(e: unknown): void;\n}\n\nexport class AnalysisManager {\n  private handler: AnalysisHandler;\n  private researcher?: USIPlayer;\n  private _setting: AnalysisSetting;\n  private number?: number;\n  private actualMove?: Move;\n  private color: Color;\n  private lastScore?: number;\n  private score?: number;\n  private mate?: number;\n  private pv?: Move[];\n  private timerHandle?: NodeJS.Timeout;\n\n  constructor(setting: AnalysisSetting, handler: AnalysisHandler) {\n    if (!setting.usi) {\n      throw new Error(\"エンジンが設定されていません。\");\n    }\n    this._setting = setting;\n    this.handler = handler;\n    this.color = Color.BLACK;\n  }\n\n  get setting(): AnalysisSetting {\n    return this._setting;\n  }\n\n  async start(): Promise<void> {\n    await this.setupEngine(this.setting.usi as USIEngineSetting);\n    setTimeout(() => this.next());\n  }\n\n  private async setupEngine(setting: USIEngineSetting): Promise<void> {\n    await this.closeEngine();\n    const researcher = new USIPlayer(setting);\n    await researcher.launch();\n    this.researcher = researcher;\n  }\n\n  private finish(): void {\n    this.handler.onFinish();\n    this.close();\n  }\n\n  close(): void {\n    this.clearTimer();\n    this.closeEngine().catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private next(): void {\n    this.clearTimer();\n    this.onResult();\n\n    this.actualMove = undefined;\n    this.lastScore = this.score;\n    this.score = undefined;\n    this.mate = undefined;\n    this.pv = undefined;\n    this.number =\n      this.number !== undefined\n        ? this.number + 1\n        : this.setting.startCriteria.enableNumber\n        ? this.setting.startCriteria.number - 1\n        : 0;\n    if (\n      this.setting.endCriteria.enableNumber &&\n      this.number >= this.setting.endCriteria.number\n    ) {\n      this.finish();\n      return;\n    }\n\n    const record = this.handler.onNext(this.number);\n    if (!record) {\n      this.finish();\n      return;\n    }\n    if (!record.current.next && !(record.current.move instanceof Move)) {\n      this.finish();\n      return;\n    }\n    this.actualMove =\n      record.current.move instanceof Move ? record.current.move : undefined;\n    this.color = reverseColor(record.position.color);\n    this.timerHandle = setTimeout(\n      () => this.next(),\n      this.setting.perMoveCriteria.maxSeconds * 1e3\n    );\n    this.goAsync(record).catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private clearTimer(): void {\n    if (this.timerHandle) {\n      clearTimeout(this.timerHandle);\n      this.timerHandle = undefined;\n    }\n  }\n\n  private onResult(): void {\n    if (this.number === undefined) {\n      return;\n    }\n    this.handler.onResult({\n      number: this.number,\n      score: this.score,\n      negaScore: this.score\n        ? this.color === Color.BLACK\n          ? this.score\n          : -this.score\n        : undefined,\n      scoreDelta:\n        this.score !== undefined && this.lastScore !== undefined\n          ? this.color === Color.BLACK\n            ? this.score - this.lastScore\n            : -(this.score - this.lastScore)\n          : undefined,\n      mate: this.mate,\n      pv: this.pv,\n      isBestMove:\n        this.actualMove && this.pv\n          ? this.actualMove.equals(this.pv[0])\n          : undefined,\n    });\n  }\n\n  async goAsync(record: ImmutableRecord): Promise<void> {\n    if (this.researcher) {\n      await this.researcher.startResearch(record);\n    }\n  }\n\n  private async closeEngine(): Promise<void> {\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n  }\n\n  updateUSIInfo(position: ImmutablePosition, info: InfoCommand): void {\n    if (info.multipv !== undefined && info.multipv !== 1) {\n      return;\n    }\n    if (info.scoreCP !== undefined) {\n      this.score =\n        position.color === Color.BLACK ? info.scoreCP : -info.scoreCP;\n    }\n    if (info.scoreMate) {\n      this.mate = Math.abs(info.scoreMate);\n    }\n    if (info.pv && info.pv.length !== 0) {\n      this.pv = [];\n      const pos = position.clone();\n      for (const sfen of info.pv) {\n        const move = pos.createMoveBySFEN(sfen);\n        if (!move || !pos.doMove(move)) {\n          break;\n        }\n        this.pv.push(move);\n      }\n    } else if (info.currmove) {\n      const move = position.createMoveBySFEN(info.currmove);\n      if (move) {\n        this.pv = [move];\n      }\n    }\n  }\n}\n\nexport function buildRecordComment(\n  result: AnalysisResult,\n  appSetting: AppSetting\n): string {\n  let comment = \"\";\n  if (result.mate) {\n    comment += `${result.mate}手詰\\n`;\n  }\n  if (\n    result.scoreDelta !== undefined &&\n    result.negaScore !== undefined &&\n    !result.isBestMove\n  ) {\n    const text = getMoveAccuracyText(\n      result.negaScore - result.scoreDelta,\n      result.negaScore,\n      appSetting\n    );\n    if (text) {\n      comment += `【${text}】\\n`;\n    }\n  }\n  if (result.score !== undefined) {\n    comment += `#評価値=${result.score}\\n`;\n    comment += getSituationText(result.score) + \"\\n\";\n  }\n  if (result.pv && result.pv.length !== 0) {\n    for (const move of result.pv) {\n      comment += `${move.getDisplayText()}`;\n    }\n    comment += \"\\n\";\n  }\n  return comment;\n}\n","import {\n  openRecord,\n  saveAnalysisSetting,\n  saveAppSetting,\n  saveGameSetting,\n  saveRecord,\n  saveResearchSetting,\n  showOpenRecordDialog,\n  showSaveRecordDialog,\n} from \"@/ipc/renderer\";\nimport {\n  Color,\n  detectRecordFormat,\n  exportCSA,\n  ImmutableRecord,\n  importCSA,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n} from \"@/shogi\";\nimport { exportKakinoki, importKakinoki } from \"@/shogi\";\nimport { reactive, UnwrapNestedRefs } from \"vue\";\nimport iconv from \"iconv-lite\";\nimport { formatTimeLimitCSA, GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n  validateAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/store/usi\";\nimport { RecordEntryCustomData } from \"./record\";\nimport { GameManager } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { BussyStore } from \"./bussy\";\nimport { USIPlayerMonitor, USIMonitor } from \"./usi\";\nimport { Mode } from \"./mode\";\nimport { MessageStore } from \"./message\";\nimport { ErrorStore } from \"./error\";\nimport * as uri from \"@/uri\";\nimport { Confirmation } from \"./confirm\";\nimport { RecordFormatType } from \"@/shogi/detect\";\nimport { getDateString, getDateTimeString } from \"@/helpers/datetime\";\nimport {\n  AnalysisManager,\n  AnalysisResult,\n  buildRecordComment,\n} from \"./analysis\";\nimport { AnalysisSetting, appendAnalysisComment } from \"@/settings/analysis\";\nimport { USIPlayer } from \"@/players/usi\";\n\nclass Store {\n  private _bussy: BussyStore;\n  private _message: MessageStore;\n  private _error: ErrorStore;\n  private _appSetting: AppSetting;\n  private _mode: Mode;\n  private lastMode?: Mode;\n  private _displayAppSetting: boolean;\n  private _confirmation?: Confirmation;\n  private _usi: USIMonitor;\n  private game: GameManager;\n  private researcher?: USIPlayer;\n  private analysis?: AnalysisManager;\n  private unlimitedBeepHandler?: AudioEventHandler;\n  private _recordFilePath?: string;\n  private _record: Record;\n\n  constructor() {\n    this._bussy = new BussyStore();\n    this._message = new MessageStore();\n    this._error = new ErrorStore();\n    this._appSetting = defaultAppSetting();\n    this._mode = Mode.NORMAL;\n    this._displayAppSetting = false;\n    this._usi = new USIMonitor();\n    this.game = new GameManager(this);\n    this._record = new Record();\n  }\n\n  get isBussy(): boolean {\n    return this._bussy.isBussy;\n  }\n\n  retainBussyState(): void {\n    return this._bussy.retain();\n  }\n\n  releaseBussyState(): void {\n    return this._bussy.release();\n  }\n\n  get message(): string {\n    return this._message.message;\n  }\n\n  get hasMessage(): boolean {\n    return this._message.hasMessage;\n  }\n\n  enqueueMessage(message: string): void {\n    this._message.enqueue(message);\n  }\n\n  dequeueMessage(): void {\n    this._message.dequeue();\n  }\n\n  get errors(): Error[] {\n    return this._error.errors;\n  }\n\n  get hasError(): boolean {\n    return this._error.hasError;\n  }\n\n  pushError(e: unknown): void {\n    this._error.push(e);\n  }\n\n  clearErrors(): void {\n    this._error.clear();\n  }\n\n  get appSetting(): AppSetting {\n    return this._appSetting;\n  }\n\n  async updateAppSetting(update: AppSettingUpdate): Promise<void> {\n    const newAppSetting = {\n      ...this.appSetting,\n      ...update,\n    };\n    const error = validateAppSetting(newAppSetting);\n    if (error) {\n      throw error;\n    }\n    await saveAppSetting(newAppSetting);\n    this._appSetting = newAppSetting;\n  }\n\n  flipBoard(): void {\n    this._appSetting.boardFlipping = !this.appSetting.boardFlipping;\n    saveAppSetting(this.appSetting);\n  }\n\n  get mode(): Mode {\n    return this._mode;\n  }\n\n  get confirmation(): string | undefined {\n    return this._confirmation?.message;\n  }\n\n  showConfirmation(confirmation: Confirmation): void {\n    this._confirmation = confirmation;\n    this.lastMode = this.mode;\n    this._mode = Mode.TEMPORARY;\n  }\n\n  confirmationOk(): void {\n    const onOk = this._confirmation?.onOk;\n    this._confirmation = undefined;\n    if (this.lastMode) {\n      this._mode = this.lastMode;\n      this.lastMode = undefined;\n    }\n    if (onOk) {\n      onOk();\n    }\n  }\n\n  confirmationCancel(): void {\n    const onCancel = this._confirmation?.onCancel;\n    this._confirmation = undefined;\n    if (this.lastMode) {\n      this._mode = this.lastMode;\n      this.lastMode = undefined;\n    }\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  showPasteDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.PASTE_DIALOG;\n    }\n  }\n\n  closePasteDialog(): void {\n    if (this.mode === Mode.PASTE_DIALOG) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  showGameDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.GAME_DIALOG;\n    }\n  }\n\n  showResearchDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.RESEARCH_DIALOG;\n    }\n  }\n\n  showAnalysisDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.ANALYSIS_DIALOG;\n    }\n  }\n\n  get displayAppSetting(): boolean {\n    return this._displayAppSetting;\n  }\n\n  openAppSettingDialog(): void {\n    this._displayAppSetting = true;\n  }\n\n  closeAppSettingDialog(): void {\n    this._displayAppSetting = false;\n  }\n\n  openUsiEngineManagementDialog(): void {\n    if (this.mode === Mode.NORMAL) {\n      this._mode = Mode.USI_ENGINE_SETTING_DIALOG;\n    }\n  }\n\n  closeDialog(): void {\n    if (\n      this.mode === Mode.USI_ENGINE_SETTING_DIALOG ||\n      this.mode === Mode.GAME_DIALOG ||\n      this.mode === Mode.RESEARCH_DIALOG ||\n      this.mode === Mode.ANALYSIS_DIALOG\n    ) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  get usiBlackPlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.blackPlayer;\n  }\n\n  get usiWhitePlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.whitePlayer;\n  }\n\n  get usiResearcherMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.researcher;\n  }\n\n  updateUSIInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    if (this.record.usi != usi) {\n      return;\n    }\n    this._usi.update(sessionID, this.record.position, sender, name, info);\n    const entryData = new RecordEntryCustomData(this.record.current.customData);\n    entryData.updateUSIInfo(this.record.position.color, sender, info);\n    this.record.current.customData = entryData.stringify();\n    if (this.analysis) {\n      this.analysis.updateUSIInfo(this.record.position, info);\n    }\n  }\n\n  get gameSetting(): GameSetting {\n    return this.game.setting;\n  }\n\n  get blackTimeMs(): number {\n    return this.game.blackTimeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.game.blackByoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.game.whiteTimeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.game.whiteByoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this.game.elapsedMs;\n  }\n\n  startGame(setting: GameSetting): void {\n    this.startGameAsync(setting).catch((e) => {\n      this.pushError(\"対局の初期化中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async startGameAsync(setting: GameSetting): Promise<void> {\n    if (this.mode !== Mode.GAME_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await saveGameSetting(setting);\n      this.initializeRecordForGame(setting);\n      this.initializeDisplaySettingForGame(setting);\n      await this.game.startGame(setting);\n      this._mode = Mode.GAME;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  private initializeRecordForGame(setting: GameSetting): void {\n    if (setting.startPosition) {\n      const position = new Position();\n      position.reset(setting.startPosition);\n      this._record.clear(position);\n      this.onUpdatePosition();\n      this.clearRecordFilePath();\n    }\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.BLACK_NAME,\n      setting.black.name\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.WHITE_NAME,\n      setting.white.name\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.DATE,\n      getDateString()\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.START_DATETIME,\n      getDateTimeString()\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.TIME_LIMIT,\n      formatTimeLimitCSA(setting.timeLimit)\n    );\n  }\n\n  private initializeDisplaySettingForGame(setting: GameSetting): void {\n    if (setting.humanIsFront) {\n      let flip = this.appSetting.boardFlipping;\n      if (\n        setting.black.uri === uri.ES_HUMAN &&\n        setting.white.uri !== uri.ES_HUMAN\n      ) {\n        flip = false;\n      } else if (\n        setting.black.uri !== uri.ES_HUMAN &&\n        setting.white.uri === uri.ES_HUMAN\n      ) {\n        flip = true;\n      }\n      if (flip !== this.appSetting.boardFlipping) {\n        this.flipBoard();\n      }\n    }\n  }\n\n  stopGame(): void {\n    if (this.mode === Mode.GAME) {\n      this.game.endGame(SpecialMove.INTERRUPT);\n    }\n  }\n\n  onMove(move: Move): ImmutableRecord {\n    if (this.mode === Mode.GAME) {\n      this._record.append(move, {\n        ignoreValidation: true,\n      });\n      this.onUpdatePosition();\n      this.record.current.setElapsedMs(this.elapsedMs);\n      playPieceBeat(this.appSetting.pieceVolume);\n    }\n    return this.record;\n  }\n\n  onEndGame(specialMove?: SpecialMove): void {\n    if (this.mode !== Mode.GAME) {\n      return;\n    }\n    if (specialMove) {\n      this.enqueueMessage(\n        `対局終了（${specialMoveToDisplayString(specialMove)})`\n      );\n    }\n    this._record.append(specialMove || SpecialMove.INTERRUPT);\n    this.onUpdatePosition();\n    this._record.current.setElapsedMs(this.elapsedMs);\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.END_DATETIME,\n      getDateTimeString()\n    );\n    this._mode = Mode.NORMAL;\n  }\n\n  onBeepShort(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    beepShort({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onBeepUnlimited(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    this.unlimitedBeepHandler = beepUnlimited({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onStopBeep(): void {\n    if (this.unlimitedBeepHandler) {\n      this.unlimitedBeepHandler.stop();\n      this.unlimitedBeepHandler = undefined;\n    }\n  }\n\n  doMove(move: Move): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    this._record.append(move);\n    this.onUpdatePosition();\n    playPieceBeat(this.appSetting.pieceVolume);\n  }\n\n  onNext(number: number): ImmutableRecord | null {\n    if (this.mode === Mode.ANALYSIS) {\n      this._record.goto(number);\n      return this.record.current.number === number ? this.record : null;\n    }\n    return null;\n  }\n\n  onResult(result: AnalysisResult): void {\n    if (this.mode === Mode.ANALYSIS && this.analysis) {\n      const comment = buildRecordComment(result, this.appSetting);\n      if (comment) {\n        this._record.current.comment = appendAnalysisComment(\n          this._record.current.comment,\n          comment,\n          this.analysis.setting.commentBehavior\n        );\n      }\n    }\n  }\n\n  onFinish(): void {\n    if (this.mode === Mode.ANALYSIS) {\n      this._message.enqueue(\"棋譜解析が終了しました。\");\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  onError(e: unknown): void {\n    this.pushError(e);\n  }\n\n  startResearch(researchSetting: ResearchSetting): void {\n    this.startResearchAsync(researchSetting)\n      .then(() => {\n        this.onUpdatePosition();\n      })\n      .catch((e) => {\n        this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n      });\n  }\n\n  private async startResearchAsync(\n    researchSetting: ResearchSetting\n  ): Promise<void> {\n    if (this.mode !== Mode.RESEARCH_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await saveResearchSetting(researchSetting);\n      if (!researchSetting.usi) {\n        throw new Error(\"エンジンが設定されていません。\");\n      }\n      const researcher = new USIPlayer(researchSetting.usi);\n      await researcher.launch();\n      this.researcher = researcher;\n      this._mode = Mode.RESEARCH;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  stopResearch(): void {\n    if (this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n    this._mode = Mode.NORMAL;\n  }\n\n  startAnalysis(analysisSetting: AnalysisSetting): void {\n    this.startAnalysisAsync(analysisSetting).catch((e) => {\n      this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async startAnalysisAsync(analysisSetting: AnalysisSetting) {\n    if (this.mode !== Mode.ANALYSIS_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await saveAnalysisSetting(analysisSetting);\n      const analysis = new AnalysisManager(analysisSetting, this);\n      await analysis.start();\n      this.analysis = analysis;\n      this._mode = Mode.ANALYSIS;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  stopAnalysis(): void {\n    if (this.mode !== Mode.ANALYSIS) {\n      return;\n    }\n    if (this.analysis) {\n      this.analysis.close();\n      this.analysis = undefined;\n    }\n    this._mode = Mode.NORMAL;\n  }\n\n  private onUpdatePosition(): void {\n    if (this.researcher) {\n      this.researcher.startResearch(this.record);\n    }\n  }\n\n  get recordFilePath(): string | undefined {\n    return this._recordFilePath;\n  }\n\n  private updateRecordFilePath(recordFilePath: string): void {\n    this._recordFilePath = recordFilePath;\n  }\n\n  private clearRecordFilePath(): void {\n    this._recordFilePath = undefined;\n  }\n\n  get record(): ImmutableRecord {\n    return this._record;\n  }\n\n  newRecord(): void {\n    if (this.mode != Mode.NORMAL) {\n      return;\n    }\n    this._record.clear();\n    this.onUpdatePosition();\n    this.clearRecordFilePath();\n  }\n\n  updateRecordComment(comment: string): void {\n    this.record.current.comment = comment;\n  }\n\n  updateStandardRecordMetadata(update: {\n    key: RecordMetadataKey;\n    value: string;\n  }): void {\n    this._record.metadata.setStandardMetadata(update.key, update.value);\n  }\n\n  insertSpecialMove(specialMove: SpecialMove): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    this._record.append(specialMove);\n    this.onUpdatePosition();\n  }\n\n  startPositionEditing(): void {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の棋譜は削除されます。よろしいですか？\",\n      onOk: () => {\n        this._mode = Mode.POSITION_EDITING;\n        this._record.clear(this.record.position);\n        this.onUpdatePosition();\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  endPositionEditing(): void {\n    // FIXME: 局面整合性チェック\n    if (this.mode === Mode.POSITION_EDITING) {\n      this._mode = Mode.NORMAL;\n    }\n  }\n\n  initializePosition(initialPositionType: InitialPositionType): void {\n    if (this.mode != Mode.POSITION_EDITING) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の局面は破棄されます。よろしいですか？\",\n      onOk: () => {\n        const position = new Position();\n        position.reset(initialPositionType);\n        this._record.clear(position);\n        this.onUpdatePosition();\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  changeTurn(): void {\n    if (this.mode != Mode.POSITION_EDITING) {\n      return;\n    }\n    const position = this.record.position.clone();\n    position.setColor(reverseColor(position.color));\n    this._record.clear(position);\n    this.onUpdatePosition();\n    this.clearRecordFilePath();\n  }\n\n  editPosition(change: PositionChange): void {\n    if (this.mode === Mode.POSITION_EDITING) {\n      const position = this.record.position.clone();\n      position.edit(change);\n      this._record.clear(position);\n      this.onUpdatePosition();\n      this.clearRecordFilePath();\n    }\n  }\n\n  changeMoveNumber(number: number): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    this._record.goto(number);\n    this.onUpdatePosition();\n  }\n\n  changeBranch(index: number): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    if (this.record.current.branchIndex === index) {\n      return;\n    }\n    this._record.switchBranchByIndex(index);\n    this.onUpdatePosition();\n  }\n\n  removeRecordAfter(): void {\n    if (this.mode !== Mode.NORMAL && this.mode !== Mode.RESEARCH) {\n      return;\n    }\n    const next = this.record.current.next;\n    if (!next || !(next.move instanceof Move)) {\n      this._record.removeAfter();\n      this.onUpdatePosition();\n      return;\n    }\n    this.showConfirmation({\n      message: `${this.record.current.number}手目以降を削除します。よろしいですか？`,\n      onOk: () => {\n        this._record.removeAfter();\n        this.onUpdatePosition();\n      },\n    });\n  }\n\n  copyRecordKIF(): void {\n    const str = exportKakinoki(this._record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordCSA(): void {\n    const str = exportCSA(this._record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIBefore(): void {\n    const str = this._record.usi;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIAll(): void {\n    const str = this._record.usiAll;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyBoardSFEN(): void {\n    const str = this._record.sfen;\n    navigator.clipboard.writeText(str);\n  }\n\n  pasteRecord(data: string): void {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    let recordOrError: Record | Error;\n    switch (detectRecordFormat(data)) {\n      case RecordFormatType.SFEN: {\n        const position = Position.newBySFEN(data);\n        recordOrError = position\n          ? new Record(position)\n          : new Error(\"局面を読み込めませんでした。\");\n        break;\n      }\n      case RecordFormatType.USI:\n        recordOrError =\n          Record.newByUSI(data) || new Error(\"棋譜を読み込めませんでした。\");\n        break;\n      case RecordFormatType.KIF:\n        recordOrError = importKakinoki(data);\n        break;\n      case RecordFormatType.CSA:\n        recordOrError = importCSA(data);\n        break;\n      default:\n        recordOrError = new Error(\"棋譜フォーマットの検出ができませんでした。\");\n        break;\n    }\n    if (recordOrError instanceof Error) {\n      this.pushError(recordOrError);\n      return;\n    }\n    this.clearRecordFilePath();\n    this._record = recordOrError;\n    this.onUpdatePosition();\n  }\n\n  openRecord(path?: string): void {\n    this.openRecordAsync(path).catch((e) => {\n      this.pushError(\"棋譜の読み込み中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async openRecordAsync(path?: string): Promise<void> {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      if (!path) {\n        path = await showOpenRecordDialog();\n        if (!path) {\n          return;\n        }\n      }\n      const data = await openRecord(path);\n      let recordOrError: Record | Error;\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = path.match(/\\.kif$/)\n          ? iconv.decode(data as Buffer, \"Shift_JIS\")\n          : new TextDecoder().decode(data);\n        recordOrError = importKakinoki(str);\n      } else if (path.match(/\\.csa$/)) {\n        recordOrError = importCSA(new TextDecoder().decode(data));\n      } else {\n        recordOrError = new Error(\"不明なファイル形式: \" + path);\n      }\n      if (recordOrError instanceof Error) {\n        throw recordOrError;\n      }\n      this.updateRecordFilePath(path);\n      this._record = recordOrError;\n      this.onUpdatePosition();\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  saveRecord(options?: { overwrite: boolean }): void {\n    this.saveRecordAsync(options).catch((e) => {\n      this.pushError(\"棋譜の保存中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async saveRecordAsync(options?: {\n    overwrite: boolean;\n  }): Promise<void> {\n    if (this.mode !== Mode.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      let path = this.recordFilePath;\n      if (!options?.overwrite || !path) {\n        const defaultPath = defaultRecordFileName(this._record.metadata);\n        path = await showSaveRecordDialog(defaultPath);\n        if (!path) {\n          return;\n        }\n      }\n      let data: Uint8Array;\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = exportKakinoki(this.record, {\n          returnCode: this.appSetting.returnCode,\n        });\n        data = path.match(/\\.kif$/)\n          ? iconv.encode(str, \"Shift_JIS\")\n          : new TextEncoder().encode(str);\n      } else if (path.match(/\\.csa$/)) {\n        data = new TextEncoder().encode(\n          exportCSA(this.record, {\n            returnCode: this.appSetting.returnCode,\n          })\n        );\n      } else {\n        throw new Error(\"不明なファイル形式: \" + path);\n      }\n      await saveRecord(path, data);\n      this.updateRecordFilePath(path);\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  get isMovableByUser() {\n    switch (this.mode) {\n      case Mode.NORMAL:\n      case Mode.RESEARCH:\n        return true;\n      case Mode.GAME:\n        return (\n          (this.record.position.color === Color.BLACK\n            ? this.gameSetting.black.uri\n            : this.gameSetting.white.uri) === uri.ES_HUMAN\n        );\n    }\n    return false;\n  }\n}\n\nconst store = reactive<Store>(new Store());\n\nexport function useStore(): UnwrapNestedRefs<Store> {\n  return store;\n}\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  CHART = \"chart\",\n  PERCENT = \"percent\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n  QUESTION = \"question\",\n  ANALYSIS = \"analysis\",\n  DESCRIPTION = \"description\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.PERCENT]: \"icon/percent_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n  [Icon.QUESTION]: \"icon/help_white_24dp.svg\",\n  [Icon.ANALYSIS]: \"icon/query_stats_white_24dp.svg\",\n  [Icon.DESCRIPTION]: \"icon/description_white_24dp.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"ButtonIcon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./ButtonIcon.vue?vue&type=template&id=2be1683b&ts=true\"\nimport script from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport {\n  InitialPositionType,\n  Move,\n  PositionChange,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Mode } from \"@/store/mode\";\nimport { humanPlayer } from \"@/players/human\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  components: {\n    BoardView,\n    ButtonIcon,\n  },\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore();\n\n    const onMove = (move: Move) => {\n      if (store.mode === Mode.GAME) {\n        humanPlayer.doMove(move);\n      } else {\n        store.doMove(move);\n      }\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.editPosition(change);\n    };\n\n    const onGame = () => {\n      store.showGameDialog();\n    };\n\n    const onStop = () => {\n      store.stopGame();\n    };\n\n    const onResign = () => {\n      humanPlayer.resign();\n    };\n\n    const onResearch = () => {\n      store.showResearchDialog();\n    };\n\n    const onEndResearch = () => {\n      store.stopResearch();\n    };\n\n    const onAnalysis = () => {\n      store.showAnalysisDialog();\n    };\n\n    const onEndAnalysis = () => {\n      store.stopAnalysis();\n    };\n\n    const onStartEditPosition = () => {\n      store.startPositionEditing();\n    };\n\n    const onEndEditPosition = () => {\n      store.endPositionEditing();\n    };\n\n    const onInitPosition = (event: Event) => {\n      const select = event.target as HTMLSelectElement;\n      if (select.value) {\n        store.initializePosition(select.value as InitialPositionType);\n      }\n    };\n\n    const onChangeTurn = () => {\n      store.changeTurn();\n    };\n\n    const onOpenAppSettings = () => {\n      store.openAppSettingDialog();\n    };\n\n    const onOpenEngineSettings = () => {\n      store.openUsiEngineManagementDialog();\n    };\n\n    const onFlip = () => {\n      useStore().flipBoard();\n    };\n\n    const onPaste = () => {\n      store.showPasteDialog();\n    };\n\n    const onCopy = () => {\n      store.copyRecordKIF();\n    };\n\n    const onRemoveAfter = () => {\n      store.removeRecordAfter();\n    };\n\n    const allowEdit = computed(() => store.mode === Mode.POSITION_EDITING);\n\n    const allowMove = computed(() => store.isMovableByUser);\n\n    const position = computed(() => store.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.record.current.move;\n      return move instanceof Move ? move : undefined;\n    });\n\n    const pieceImageType = computed(() => store.appSetting.pieceImage);\n\n    const boardImageType = computed(() => store.appSetting.boardImage);\n\n    const flip = computed(() => store.appSetting.boardFlipping);\n\n    const blackPlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.mode === Mode.GAME ? store.blackTimeMs : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.mode === Mode.GAME ? store.blackByoyomi : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.mode === Mode.GAME ? store.whiteTimeMs : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.mode === Mode.GAME ? store.whiteByoyomi : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.mode === Mode.NORMAL,\n        stop: store.mode === Mode.GAME,\n        resign: store.mode === Mode.GAME && store.isMovableByUser,\n        research: store.mode === Mode.NORMAL,\n        endResearch: store.mode === Mode.RESEARCH,\n        analysis: store.mode === Mode.NORMAL,\n        endAnalysis: store.mode === Mode.ANALYSIS,\n        startEditPosition: store.mode === Mode.NORMAL,\n        endEditPosition: store.mode === Mode.POSITION_EDITING,\n        initPosition: store.mode === Mode.POSITION_EDITING,\n        removeAfter: store.mode === Mode.NORMAL || store.mode === Mode.RESEARCH,\n        paste: store.mode === Mode.NORMAL,\n        engineSettings: store.mode === Mode.NORMAL,\n      };\n    });\n\n    return {\n      pieceImageType,\n      boardImageType,\n      position,\n      lastMove,\n      flip,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onAnalysis,\n      onEndAnalysis,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPosition,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onPaste,\n      onCopy,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=038099f9&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=038099f9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-038099f9\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-97626832\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"options\" }\nconst _hoisted_3 = { class: \"option\" }\nconst _hoisted_4 = [\"checked\"]\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-elapsed-time\" }, \"消費時間\", -1))\nconst _hoisted_6 = { class: \"option\" }\nconst _hoisted_7 = [\"checked\"]\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-comment\" }, \"コメント\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordView = _resolveComponent(\"RecordView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_RecordView, {\n        class: \"record\",\n        record: _ctx.record,\n        operational: _ctx.isRecordOperational,\n        \"show-comment\": _ctx.showComment,\n        \"show-elapsed-time\": _ctx.showElapsedTime,\n        onGoBegin: _ctx.goBegin,\n        onGoBack: _ctx.goBack,\n        onGoForward: _ctx.goForward,\n        onGoEnd: _ctx.goEnd,\n        onSelectMove: _ctx.selectMove,\n        onSelectBranch: _ctx.selectBranch\n      }, null, 8, [\"record\", \"operational\", \"show-comment\", \"show-elapsed-time\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"input\", {\n            id: \"show-elapsed-time\",\n            type: \"checkbox\",\n            checked: _ctx.showElapsedTime,\n            onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onToggleElapsedTime && _ctx.onToggleElapsedTime(...args)))\n          }, null, 40, _hoisted_4),\n          _hoisted_5\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"input\", {\n            id: \"show-comment\",\n            type: \"checkbox\",\n            checked: _ctx.showComment,\n            onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onToggleComment && _ctx.onToggleComment(...args)))\n          }, null, 40, _hoisted_7),\n          _hoisted_8\n        ])\n      ])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-124bbb9b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"selected\", \"value\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"selected\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.FIRST\n          }, null, 8, [\"icon\"])\n        ], 8, _hoisted_3),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.BACK\n          }, null, 8, [\"icon\"])\n        ], 8, _hoisted_4),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.NEXT\n          }, null, 8, [\"icon\"])\n        ], 8, _hoisted_5),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.LAST\n          }, null, 8, [\"icon\"])\n        ], 8, _hoisted_6)\n      ]),\n      _createElementVNode(\"select\", {\n        ref: \"moveList\",\n        class: \"move-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeNumber()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: move.number,\n            class: _normalizeClass({ 'has-branch': move.hasBranch, selected: move.selected }),\n            selected: move.selected,\n            value: move.number\n          }, _toDisplayString(move.number !== 0 ? move.number : \"\") + \" \" + _toDisplayString(move.number !== 0 ? \" \" : \"\") + \" \" + _toDisplayString(move.text) + \" \" + _toDisplayString(_ctx.showComment && move.comment ? \"-- \" + move.comment : \"\"), 11, _hoisted_8))\n        }), 128))\n      ], 40, _hoisted_7),\n      _createElementVNode(\"select\", {\n        ref: \"branchList\",\n        class: \"branch-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeBranch()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: branch.index,\n            selected: branch.selected,\n            value: branch.index\n          }, _toDisplayString(branch.text) + \" \" + _toDisplayString(_ctx.showComment && branch.comment ? \"-- \" + branch.comment : \"\"), 9, _hoisted_10))\n        }), 128))\n      ], 40, _hoisted_9)\n    ])\n  ]))\n}","\nimport { ImmutableRecord, RecordEntry } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref, PropType } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"RecordView\",\n  components: {\n    ButtonIcon,\n  },\n  props: {\n    record: {\n      type: Object as PropType<ImmutableRecord>,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n    showElapsedTime: {\n      type: Boolean,\n      required: false,\n    },\n    showComment: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      context.emit(\"goBegin\");\n    };\n\n    const goBack = () => {\n      context.emit(\"goBack\");\n    };\n\n    const goForward = () => {\n      context.emit(\"goForward\");\n    };\n\n    const goEnd = () => {\n      context.emit(\"goEnd\");\n    };\n\n    const changeNumber = () => {\n      context.emit(\"selectMove\", Number(moveList.value.value));\n    };\n\n    const changeBranch = () => {\n      context.emit(\"selectBranch\", Number(branchList.value.value));\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        text: string;\n        number: number;\n        hasBranch: boolean;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: props.showElapsedTime ? elem.displayText : elem.displayMoveText,\n          hasBranch: elem.hasBranch,\n          comment: elem.comment,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      let p: RecordEntry | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayMoveText,\n          comment: p.comment,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./RecordView.vue?vue&type=template&id=124bbb9b&scoped=true&ts=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordView.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=124bbb9b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-124bbb9b\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordView from \"@/components/primitive/RecordView.vue\";\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\n\nexport const minWidth = 230;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    RecordView,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.changeMoveNumber(number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.changeBranch(index);\n    };\n\n    const onToggleElapsedTime = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showElapsedTimeInRecordView: checkbox.checked,\n      });\n    };\n\n    const onToggleComment = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showCommentInRecordView: checkbox.checked,\n      });\n    };\n\n    const isRecordOperational = computed(() => {\n      return store.mode === Mode.NORMAL || store.mode === Mode.RESEARCH;\n    });\n    const showComment = computed(\n      () => store.appSetting.showCommentInRecordView\n    );\n    const showElapsedTime = computed(\n      () => store.appSetting.showElapsedTimeInRecordView\n    );\n\n    const record = computed(() => store.record);\n\n    return {\n      isRecordOperational,\n      showElapsedTime,\n      showComment,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n      onToggleElapsedTime,\n      onToggleComment,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=97626832&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=97626832&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-97626832\"]])\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-11a9fa6b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 棋譜情報 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" コメント \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 評価値 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 期待勝率 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"tab-border\" }, null, -1))\nconst _hoisted_10 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_RecordInfo = _resolveComponent(\"RecordInfo\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.activeTab === 'invisible')\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            style: _normalizeStyle(`height: calc(100% - ${_ctx.headerHeight}px);`)\n          }, null, 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.RECORD_INFO)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.DESCRIPTION\n          }, null, 8, [\"icon\"]),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.COMMENT)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.COMMENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.SEARCH)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.BRAIN\n          }, null, 8, [\"icon\"]),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.CHART\n          }, null, 8, [\"icon\"]),\n          _hoisted_6\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.PERCENTAGE_CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.PERCENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_7\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.INVISIBLE }]),\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.INVISIBLE)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.ARROW_DROP\n          }, null, 8, [\"icon\"]),\n          _hoisted_8\n        ], 2)\n      ]),\n      _hoisted_9,\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(_component_RecordInfo, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.RAW\n        }, null, 8, [\"class\", \"size\", \"type\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.WIN_RATE\n        }, null, 8, [\"class\", \"size\", \"type\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-16ede82d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.record.current.comment);\n    const readonly = computed(() => store.mode != Mode.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.updateRecordComment(comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=16ede82d&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=16ede82d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-16ede82d\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3d2d2022\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            name: _ctx.blackPlayer.name,\n            info: _ctx.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            name: _ctx.whitePlayer.name,\n            info: _ctx.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            name: _ctx.researcher.name,\n            info: _ctx.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-182c61be\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-182c61be><div class=\\\"list-column time\\\" data-v-182c61be>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-182c61be>順位</div><div class=\\\"list-column depth\\\" data-v-182c61be>深さ</div><div class=\\\"list-column score\\\" data-v-182c61be>評価値</div></div>\", 1)\nconst _hoisted_19 = { class: \"list-column time\" }\nconst _hoisted_20 = { class: \"list-column multipv-index\" }\nconst _hoisted_21 = { class: \"list-column depth\" }\nconst _hoisted_22 = { class: \"list-column score\" }\nconst _hoisted_23 = { class: \"list-column score-flag\" }\nconst _hoisted_24 = { class: \"list-column text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_18,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 37}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.info.iterates, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: _normalizeClass([\"list-item\", { best: iterate.multiPV === 1 }])\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_21, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.text), 1)\n          ], 2))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}","\nimport { USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=182c61be&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=182c61be&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-182c61be\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/tab/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const blackPlayer = computed(() => store.usiBlackPlayerMonitor);\n    const whitePlayer = computed(() => store.usiWhitePlayerMonitor);\n    const researcher = computed(() => store.usiResearcherMonitor);\n    const elementHeight = computed(() => {\n      const n =\n        (store.usiBlackPlayerMonitor ? 1 : 0) +\n        (store.usiWhitePlayerMonitor ? 1 : 0) +\n        (store.usiResearcherMonitor ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      blackPlayer,\n      whitePlayer,\n      researcher,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=3d2d2022&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=3d2d2022&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d2d2022\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-65297975\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { RecordEntryCustomData } from \"@/store/record\";\nimport {\n  defineComponent,\n  onMounted,\n  onUnmounted,\n  PropType,\n  ref,\n  Ref,\n  watch,\n} from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/store/usi\";\nimport { ImmutableRecord } from \"@/shogi\";\nimport { scoreToPercentage } from \"@/store/score\";\nimport { AppSetting } from \"@/settings/app\";\n\nconst MAX_SCORE = 2000;\nconst MIN_SCORE = -MAX_SCORE;\n\nexport enum EvaluationChartType {\n  RAW = \"raw\",\n  WIN_RATE = \"winRate\",\n}\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n    type: {\n      type: String as PropType<EvaluationChartType>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n    let maxScore = MAX_SCORE;\n    let minScore = MIN_SCORE;\n    if (props.type === EvaluationChartType.WIN_RATE) {\n      maxScore = 100;\n      minScore = 0;\n    }\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: ImmutableRecord,\n      appSetting: AppSetting\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((entry) => {\n        const data = new RecordEntryCustomData(entry.customData);\n        let value = data.evaluation && data.evaluation[sender];\n        if (value !== undefined) {\n          switch (props.type) {\n            case EvaluationChartType.RAW:\n              value = Math.min(Math.max(value, MIN_SCORE), MAX_SCORE);\n              break;\n            case EvaluationChartType.WIN_RATE:\n              value = scoreToPercentage(value, appSetting);\n              break;\n          }\n          dataPoints.push({\n            x: entry.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: ImmutableRecord) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: \"red\",\n        data: [\n          { x: record.current.number, y: maxScore },\n          { x: record.current.number, y: minScore },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (record: ImmutableRecord, appSetting: AppSetting) => {\n      return [\n        verticalLine(record),\n        buildDataset(\n          \"royalblue\",\n          USIInfoSender.BLACK_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(\n          \"darkorange\",\n          USIInfoSender.WHITE_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(\"darkgreen\", USIInfoSender.RESEARCHER, record, appSetting),\n      ];\n    };\n\n    const buildScalesOption = (record: ImmutableRecord) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n        },\n        y: {\n          min: minScore,\n          max: maxScore,\n        },\n      };\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.changeMoveNumber(number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      const record = store.record;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: buildDatasets(record, store.appSetting),\n        },\n        options: {\n          color: \"black\",\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.record, store.appSetting],\n      ([record, appSetting]) => {\n        chart.data.datasets = buildDatasets(\n          record as ImmutableRecord,\n          appSetting as AppSetting\n        );\n        chart.options.scales = buildScalesOption(record as ImmutableRecord);\n        chart.update();\n      },\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=65297975&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=65297975&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65297975\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3b8399d9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"key\" }\nconst _hoisted_2 = [\"value\", \"onInput\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"root\",\n      style: _normalizeStyle(`height:${_ctx.size.height}px`)\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.list, (element) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: element.key,\n          class: \"element\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(element.displayName), 1),\n          _createElementVNode(\"input\", {\n            class: \"value-input\",\n            value: element.value,\n            onInput: ($event: any) => (_ctx.change($event, element.key))\n          }, null, 40, _hoisted_2)\n        ]))\n      }), 128))\n    ], 4)\n  ]))\n}","\nimport { getStandardMetadataDisplayName, RecordMetadataKey } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport { RectSize } from \"../primitive/Types\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore();\n    const list = computed(() => {\n      return Object.values(RecordMetadataKey).map((key) => {\n        const metadata = store.record.metadata;\n        return {\n          key: key,\n          displayName: getStandardMetadataDisplayName(key),\n          value: metadata.getStandardMetadata(key) || \"\",\n        };\n      });\n    });\n\n    const change = (event: Event, key: RecordMetadataKey) => {\n      const input = event.target as HTMLInputElement;\n      store.updateStandardRecordMetadata({\n        key,\n        value: input.value,\n      });\n    };\n\n    return {\n      list,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordInfo.vue?vue&type=template&id=3b8399d9&scoped=true&ts=true\"\nimport script from \"./RecordInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordInfo.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordInfo.vue?vue&type=style&index=0&id=3b8399d9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b8399d9\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/tab/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/tab/EngineAnalytics.vue\";\nimport EvaluationChart, {\n  EvaluationChartType,\n} from \"@/components/tab/EvaluationChart.vue\";\nimport RecordInfo from \"@/components/tab/RecordInfo.vue\";\nimport { useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Tab } from \"@/settings/app\";\nimport { Icon } from \"@/assets/icons\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"TabPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    RecordInfo,\n    ButtonIcon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: Tab) => {\n      store\n        .updateAppSetting({\n          tab: id,\n        })\n        .catch((e) => {\n          console.warn(e);\n        });\n    };\n    const activeTab = computed(() => store.appSetting.tab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      headerHeight,\n      changeSelect,\n      Icon,\n      Tab,\n      EvaluationChartType,\n    };\n  },\n});\n","import { render } from \"./TabPane.vue?vue&type=template&id=11a9fa6b&scoped=true&ts=true\"\nimport script from \"./TabPane.vue?vue&type=script&lang=ts\"\nexport * from \"./TabPane.vue?vue&type=script&lang=ts\"\n\nimport \"./TabPane.vue?vue&type=style&index=0&id=11a9fa6b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-11a9fa6b\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  Ref,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport TabPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minTabHeight,\n} from \"./TabPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { Tab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    TabPane,\n  },\n  setup() {\n    const windowSize = reactive(new RectSize(0, 0));\n    const topPaneHeight = ref(0);\n    const topPane: Ref = ref(null);\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    const topPaneResizeObserver = new ResizeObserver((entries) => {\n      topPaneHeight.value = entries[0].contentRect.height;\n    });\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.observe(topPane.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.disconnect();\n    });\n\n    const boardPaneMaxSize = computed(() => {\n      const minTabPaneHeight =\n        useStore().appSetting.tab !== Tab.INVISIBLE\n          ? minTabHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minTabPaneHeight\n      );\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - topPaneHeight.value\n      );\n    });\n\n    return {\n      topPane,\n      boardPaneMaxSize,\n      bottomPaneSize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=6355277e&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=6355277e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6355277e\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b2598600\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"player\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"players-control\" }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" 先後入れ替え \")\nconst _hoisted_15 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_16 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_17 = { class: \"dialog-form-item\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_19 = [\"value\"]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_23 = { class: \"dialog-form-item\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_25 = [\"value\"]\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_27 = { class: \"dialog-form-item\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_31 = { class: \"dialog-form-area flags\" }\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = [\"value\"]\nconst _hoisted_34 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-b2598600>現在の局面</option><option value=\\\"standard\\\" data-v-b2598600>平手</option><option value=\\\"handicapLance\\\" data-v-b2598600>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-b2598600>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-b2598600>角落ち</option><option value=\\\"handicapRook\\\" data-v-b2598600>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-b2598600>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-b2598600>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-b2598600>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-b2598600>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-b2598600>8枚落ち</option>\", 11)\nconst _hoisted_45 = [\n  _hoisted_34\n]\nconst _hoisted_46 = { class: \"dialog-form-item\" }\nconst _hoisted_47 = [\"checked\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_49 = { class: \"dialog-form-item\" }\nconst _hoisted_50 = [\"checked\"]\nconst _hoisted_51 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"人を手前に表示する\", -1))\nconst _hoisted_52 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createElementVNode(\"select\", {\n              ref: \"blackPlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.black.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ]),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _hoisted_10,\n            _createElementVNode(\"select\", {\n              ref: \"whitePlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.white.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_12))\n              }), 128))\n            ], 8, _hoisted_11)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SWAP_H\n            }, null, 8, [\"icon\"]),\n            _hoisted_14\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"div\", _hoisted_17, [\n            _hoisted_18,\n            _createElementVNode(\"input\", {\n              ref: \"hours\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.hours\n            }, null, 8, _hoisted_19),\n            _hoisted_20,\n            _createElementVNode(\"input\", {\n              ref: \"minutes\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"59\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.minutes\n            }, null, 8, _hoisted_21),\n            _hoisted_22\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _hoisted_24,\n            _createElementVNode(\"input\", {\n              ref: \"byoyomi\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"60\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.byoyomi\n            }, null, 8, _hoisted_25),\n            _hoisted_26\n          ]),\n          _createElementVNode(\"div\", _hoisted_27, [\n            _hoisted_28,\n            _createElementVNode(\"input\", {\n              ref: \"increment\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.increment\n            }, null, 8, _hoisted_29),\n            _hoisted_30\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createElementVNode(\"div\", _hoisted_32, [\n            _createElementVNode(\"select\", {\n              ref: \"startPosition\",\n              value: _ctx.defaultValues.startPosition\n            }, _hoisted_45, 8, _hoisted_33)\n          ]),\n          _createElementVNode(\"div\", _hoisted_46, [\n            _createElementVNode(\"input\", {\n              id: \"disable-engine-timeout\",\n              ref: \"enableEngineTimeout\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.enableEngineTimeout\n            }, null, 8, _hoisted_47),\n            _hoisted_48\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _createElementVNode(\"input\", {\n              id: \"human-is-front\",\n              ref: \"humanIsFront\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.humanIsFront\n            }, null, 8, _hoisted_50),\n            _hoisted_51\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_52, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","export function readInputAsNumber(input: HTMLInputElement): number {\n  let value = Number(input.value);\n  if (input.max) {\n    value = Math.min(value, Number(input.max));\n  }\n  if (input.min) {\n    value = Math.max(value, Number(input.min));\n  }\n  return value;\n}\n","\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport { loadGameSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const blackPlayerSelect: Ref = ref(null);\n    const whitePlayerSelect: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        gameSetting.value = await loadGameSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (uri.isUSIEngine(playerURI)) {\n        const engine = engineSetting.value.getEngine(playerURI);\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerSelect.value.value),\n        white: buildPlayerSetting(whitePlayerSelect.value.value),\n        timeLimit: {\n          timeSeconds:\n            (readInputAsNumber(hours.value) * 60 +\n              readInputAsNumber(minutes.value)) *\n            60,\n          byoyomi: readInputAsNumber(byoyomi.value),\n          increment: readInputAsNumber(increment.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        humanIsFront: humanIsFront.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.pushError(error);\n      } else {\n        store.startGame(gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeDialog();\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerSelect.value.value, whitePlayerSelect.value.value] = [\n        whitePlayerSelect.value.value,\n        blackPlayerSelect.value.value,\n      ];\n    };\n\n    const defaultValues = computed(() => {\n      return {\n        black: { type: gameSetting.value.black.uri },\n        white: { type: gameSetting.value.white.uri },\n        timeLimit: {\n          hours: Math.floor(gameSetting.value.timeLimit.timeSeconds / 3600),\n          minutes:\n            Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60,\n          byoyomi: gameSetting.value.timeLimit.byoyomi,\n          increment: gameSetting.value.timeLimit.increment,\n        },\n        startPosition:\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\",\n        enableEngineTimeout: gameSetting.value.enableEngineTimeout,\n        humanIsFront: gameSetting.value.humanIsFront,\n      };\n    });\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSetting.value.engineList,\n      ];\n    });\n\n    return {\n      dialog,\n      blackPlayerSelect,\n      whitePlayerSelect,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      humanIsFront,\n      defaultValues,\n      players,\n      onStart,\n      onCancel,\n      onSwapColor,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=b2598600&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=b2598600&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b2598600\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3adf5e2b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"エンジン\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            ref: \"engineSelect\",\n            class: \"engine-select\",\n            size: \"1\",\n            value: _ctx.defaultValue\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: engine.uri,\n                value: engine.uri\n              }, _toDisplayString(engine.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { loadResearchSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await loadResearchSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const researchSetting: ResearchSetting = {\n        usi: engine,\n      };\n      store.startResearch(researchSetting);\n    };\n\n    const onCancel = () => {\n      store.closeDialog();\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValue = computed(() => {\n      if (researchSetting.value.usi) {\n        return researchSetting.value.usi.uri;\n      }\n      return \"\";\n    });\n\n    return {\n      dialog,\n      engineSelect,\n      engines,\n      defaultValue,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=3adf5e2b&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=3adf5e2b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3adf5e2b\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e289221a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: engine.uri,\n              class: \"engine\",\n              value: engine.uri\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \" 設定 \", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.duplicate(engine.uri))\n              }, \" 複製 \", 8, _hoisted_8),\n              _createElementVNode(\"button\", {\n                class: \"dialog-narrow-button\",\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \" 削除 \", 8, _hoisted_9)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c4e7276c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  ref: \"engineNameInput\",\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: option.name,\n            class: \"option\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport {\n  getUSIEngineInfo,\n  sendUSISetOption,\n  showSelectFileDialog,\n} from \"@/ipc/renderer\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      required: true,\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.retainBussyState();\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.retainBussyState();\n      try {\n        const path = await showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.retainBussyState();\n      try {\n        await sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? readInputAsNumber(elem as HTMLInputElement)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=c4e7276c&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=c4e7276c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c4e7276c\"]])\n\nexport default __exports__","\nimport {\n  getUSIEngineInfo,\n  loadUSIEngineSetting,\n  saveUSIEngineSetting,\n  showSelectUSIEngineDialog,\n} from \"@/ipc/renderer\";\nimport {\n  duplicateEngineSetting,\n  USIEngineSetting,\n  USIEngineSettings,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.retainBussyState();\n        const path = await showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await getUSIEngineInfo(path));\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const duplicate = (uri: string) => {\n      const src = setting.value.getEngine(uri);\n      const engine = duplicateEngineSetting(src);\n      setting.value.addEngine(engine);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.retainBussyState();\n        await saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.closeDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeDialog();\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      duplicate,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=e289221a&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=e289221a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e289221a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-15498c5c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"section\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"画像\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒画像\", -1))\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = [\"value\"]\nconst _hoisted_10 = { class: \"dialog-form-item\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"盤画像\", -1))\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = { class: \"section\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"音\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_22 = [\"value\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_24 = { class: \"dialog-form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_26 = [\"value\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_30 = [\"value\"]\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_33 = [\n  _hoisted_31,\n  _hoisted_32\n]\nconst _hoisted_34 = { class: \"section\" }\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"ファイル\", -1))\nconst _hoisted_36 = { class: \"dialog-form-item\" }\nconst _hoisted_37 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"改行文字\", -1))\nconst _hoisted_38 = [\"value\"]\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"crlf\" }, \"CR + LF (Windows)\", -1))\nconst _hoisted_40 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"lf\" }, \"LF (UNIX/Mac)\", -1))\nconst _hoisted_41 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"cr\" }, \"CR (90年代Mac)\", -1))\nconst _hoisted_42 = [\n  _hoisted_39,\n  _hoisted_40,\n  _hoisted_41\n]\nconst _hoisted_43 = { class: \"section\" }\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"評価値・期待勝率\", -1))\nconst _hoisted_45 = { class: \"dialog-form-item\" }\nconst _hoisted_46 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"勝率換算係数\", -1))\nconst _hoisted_47 = [\"value\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"(推奨: 600 から 1500 まで)\", -1))\nconst _hoisted_49 = { class: \"dialog-form-item\" }\nconst _hoisted_50 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"緩手の閾値\", -1))\nconst _hoisted_51 = [\"value\"]\nconst _hoisted_52 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_53 = { class: \"dialog-form-item\" }\nconst _hoisted_54 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"疑問手の閾値\", -1))\nconst _hoisted_55 = [\"value\"]\nconst _hoisted_56 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_57 = { class: \"dialog-form-item\" }\nconst _hoisted_58 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"悪手の閾値\", -1))\nconst _hoisted_59 = [\"value\"]\nconst _hoisted_60 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_61 = { class: \"dialog-form-item\" }\nconst _hoisted_62 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"大悪手の閾値\", -1))\nconst _hoisted_63 = [\"value\"]\nconst _hoisted_64 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_65 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"select\", {\n              ref: \"pieceImage\",\n              value: _ctx.appSetting.pieceImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pieceImageTypes, (pieceImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: pieceImageType.value,\n                  value: pieceImageType.value\n                }, _toDisplayString(pieceImageType.name), 9, _hoisted_9))\n              }), 128))\n            ], 8, _hoisted_8)\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _hoisted_11,\n            _createElementVNode(\"select\", {\n              ref: \"boardImage\",\n              value: _ctx.appSetting.boardImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardImageTypes, (boardImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: boardImageType.value,\n                  value: boardImageType.value\n                }, _toDisplayString(boardImageType.name), 9, _hoisted_13))\n              }), 128))\n            ], 8, _hoisted_12)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, [\n          _hoisted_15,\n          _createElementVNode(\"div\", _hoisted_16, [\n            _hoisted_17,\n            _createElementVNode(\"input\", {\n              ref: \"pieceVolume\",\n              value: _ctx.appSetting.pieceVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_18),\n            _hoisted_19\n          ]),\n          _createElementVNode(\"div\", _hoisted_20, [\n            _hoisted_21,\n            _createElementVNode(\"input\", {\n              ref: \"clockVolume\",\n              value: _ctx.appSetting.clockVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_22),\n            _hoisted_23\n          ]),\n          _createElementVNode(\"div\", _hoisted_24, [\n            _hoisted_25,\n            _createElementVNode(\"input\", {\n              ref: \"clockPitch\",\n              value: _ctx.appSetting.clockPitch,\n              type: \"number\",\n              max: \"880\",\n              min: \"220\"\n            }, null, 8, _hoisted_26),\n            _hoisted_27\n          ]),\n          _createElementVNode(\"div\", _hoisted_28, [\n            _hoisted_29,\n            _createElementVNode(\"select\", {\n              ref: \"clockSoundTarget\",\n              value: _ctx.appSetting.clockSoundTarget\n            }, _hoisted_33, 8, _hoisted_30)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_34, [\n          _hoisted_35,\n          _createElementVNode(\"div\", _hoisted_36, [\n            _hoisted_37,\n            _createElementVNode(\"select\", {\n              ref: \"returnCode\",\n              value: _ctx.appSetting.returnCode\n            }, _hoisted_42, 8, _hoisted_38)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_43, [\n          _hoisted_44,\n          _createElementVNode(\"div\", _hoisted_45, [\n            _hoisted_46,\n            _createElementVNode(\"input\", {\n              ref: \"coefficientInSigmoid\",\n              value: _ctx.appSetting.coefficientInSigmoid,\n              type: \"number\",\n              max: \"10000\",\n              min: \"1\"\n            }, null, 8, _hoisted_47),\n            _hoisted_48\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _hoisted_50,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold1\",\n              value: _ctx.appSetting.badMoveLevelThreshold1,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_51),\n            _hoisted_52\n          ]),\n          _createElementVNode(\"div\", _hoisted_53, [\n            _hoisted_54,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold2\",\n              value: _ctx.appSetting.badMoveLevelThreshold2,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_55),\n            _hoisted_56\n          ]),\n          _createElementVNode(\"div\", _hoisted_57, [\n            _hoisted_58,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold3\",\n              value: _ctx.appSetting.badMoveLevelThreshold3,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_59),\n            _hoisted_60\n          ]),\n          _createElementVNode(\"div\", _hoisted_61, [\n            _hoisted_62,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold4\",\n              value: _ctx.appSetting.badMoveLevelThreshold4,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_63),\n            _hoisted_64\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_65, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport {\n  PieceImageType,\n  BoardImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate } from \"@/settings/app\";\nimport { useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nconst returnCodeToName: { [name: string]: string } = {\n  \"\\r\\n\": \"crlf\",\n  \"\\n\": \"lf\",\n  \"\\r\": \"cr\",\n};\n\nconst nameToReturnCode: { [name: string]: string } = {\n  crlf: \"\\r\\n\",\n  lf: \"\\n\",\n  cr: \"\\r\",\n};\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const pieceImage: Ref = ref(null);\n    const boardImage: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n    const returnCode: Ref = ref(null);\n    const coefficientInSigmoid: Ref = ref(null);\n    const badMoveLevelThreshold1: Ref = ref(null);\n    const badMoveLevelThreshold2: Ref = ref(null);\n    const badMoveLevelThreshold3: Ref = ref(null);\n    const badMoveLevelThreshold4: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        pieceImage: pieceImage.value.value,\n        boardImage: boardImage.value.value,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n        returnCode: nameToReturnCode[returnCode.value.value],\n        coefficientInSigmoid: readInputAsNumber(coefficientInSigmoid.value),\n        badMoveLevelThreshold1: readInputAsNumber(badMoveLevelThreshold1.value),\n        badMoveLevelThreshold2: readInputAsNumber(badMoveLevelThreshold2.value),\n        badMoveLevelThreshold3: readInputAsNumber(badMoveLevelThreshold3.value),\n        badMoveLevelThreshold4: readInputAsNumber(badMoveLevelThreshold4.value),\n      };\n      store.retainBussyState();\n      try {\n        await store.updateAppSetting(update);\n        store.closeAppSettingDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeAppSettingDialog();\n    };\n\n    const appSetting = computed(() => {\n      return {\n        ...store.appSetting,\n        returnCode: returnCodeToName[store.appSetting.returnCode],\n      };\n    });\n\n    const pieceImageTypes = [\n      {\n        name: \"一文字駒\",\n        value: PieceImageType.HITOMOJI,\n      },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: PieceImageType.HITOMOJI_GOTHIC,\n      },\n    ];\n\n    const boardImageTypes = [\n      {\n        name: \"木目（明るい）\",\n        value: BoardImageType.LIGHT,\n      },\n      {\n        name: \"木目（暖かい）\",\n        value: BoardImageType.WARM,\n      },\n      {\n        name: \"塩化ビニル\",\n        value: BoardImageType.RESIN,\n      },\n    ];\n\n    return {\n      dialog,\n      pieceImage,\n      boardImage,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      returnCode,\n      coefficientInSigmoid,\n      badMoveLevelThreshold1,\n      badMoveLevelThreshold2,\n      badMoveLevelThreshold3,\n      badMoveLevelThreshold4,\n      appSetting,\n      pieceImageTypes,\n      boardImageTypes,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=15498c5c&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=15498c5c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-15498c5c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-40322b95\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜(または局面)を取り込みます。\", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"※KIF形式/CSA形式/SFENに対応しています。\", -1))\nconst _hoisted_6 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_10 = [\n  _hoisted_7,\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = { ref: \"textarea\" }\nconst _hoisted_12 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _hoisted_5,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _hoisted_10))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_11, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/renderer\";\nimport { useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.retainBussyState();\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.closePasteDialog();\n      if (data) {\n        store.pasteRecord(data);\n      }\n    };\n\n    const onCancel = () => {\n      store.closePasteDialog();\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=40322b95&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=40322b95&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-40322b95\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-71bd87cb\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BUSSY\n        }, null, 8, [\"icon\"]),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"BussyMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BussyMessage.vue?vue&type=template&id=71bd87cb&scoped=true&ts=true\"\nimport script from \"./BussyMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./BussyMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./BussyMessage.vue?vue&type=style&index=0&id=71bd87cb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71bd87cb\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.QUESTION\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onOk()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onClose()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { useStore } from \"@/store\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const message = computed(() => store.confirmation);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const onOk = () => {\n      store.confirmationOk();\n    };\n\n    const onClose = () => {\n      store.confirmationCancel();\n    };\n\n    return {\n      dialog,\n      message,\n      onOk,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=e4d809ac&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.INFO\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.message);\n\n    const onClose = () => {\n      store.dequeueMessage();\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./InfoMessage.vue?vue&type=template&id=61456679&ts=true\"\nimport script from \"./InfoMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoMessage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4382663f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"error\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.ERROR\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: error.index,\n              class: \"item\"\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.errors.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.clearErrors();\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=4382663f&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=4382663f&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=4382663f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4382663f\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b01faaf\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"棋譜解析\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"エンジン\", -1))\nconst _hoisted_5 = { class: \"dialog-form-item\" }\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-form-area\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"開始条件\", -1))\nconst _hoisted_10 = { class: \"dialog-form-item\" }\nconst _hoisted_11 = [\"checked\"]\nconst _hoisted_12 = [\"disabled\", \"value\"]\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目から\", -1))\nconst _hoisted_14 = { class: \"dialog-form-area\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"終了条件\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = [\"checked\"]\nconst _hoisted_18 = [\"disabled\", \"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目まで\", -1))\nconst _hoisted_20 = { class: \"dialog-form-area\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"局面ごとの終了条件\", -1))\nconst _hoisted_22 = { class: \"dialog-form-item\" }\nconst _hoisted_23 = [\"value\"]\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒まで\", -1))\nconst _hoisted_25 = { class: \"dialog-form-area\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"出力設定\", -1))\nconst _hoisted_27 = { class: \"dialog-form-item\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-item-label\" }, \"指し手コメント:\", -1))\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"none\" }, \"出力しない\", -1))\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"insert\" }, \"前方に加筆する\", -1))\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"append\" }, \"末尾に加筆する\", -1))\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"overwrite\" }, \"上書きする\", -1))\nconst _hoisted_34 = [\n  _hoisted_30,\n  _hoisted_31,\n  _hoisted_32,\n  _hoisted_33\n]\nconst _hoisted_35 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"select\", {\n            ref: \"engineSelect\",\n            class: \"engine-select\",\n            size: \"1\",\n            value: _ctx.defaultValues.engineURI\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: engine.uri,\n                value: engine.uri\n              }, _toDisplayString(engine.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _hoisted_9,\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"input\", {\n            ref: \"enableStartNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableStartNumber,\n            onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_11),\n          _createElementVNode(\"input\", {\n            ref: \"startNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableStartNumber,\n            value: _ctx.defaultValues.startNumber\n          }, null, 8, _hoisted_12),\n          _hoisted_13\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _hoisted_15,\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"input\", {\n            ref: \"enableEndNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableEndNumber,\n            onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_17),\n          _createElementVNode(\"input\", {\n            ref: \"endNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableEndNumber,\n            value: _ctx.defaultValues.endNumber\n          }, null, 8, _hoisted_18),\n          _hoisted_19\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_20, [\n        _hoisted_21,\n        _createElementVNode(\"div\", _hoisted_22, [\n          _createElementVNode(\"input\", {\n            ref: \"maxSecondsPerMove\",\n            class: \"small\",\n            type: \"number\",\n            min: \"0\",\n            step: \"1\",\n            value: _ctx.defaultValues.maxSecondsPerMove\n          }, null, 8, _hoisted_23),\n          _hoisted_24\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_25, [\n        _hoisted_26,\n        _createElementVNode(\"div\", _hoisted_27, [\n          _hoisted_28,\n          _createElementVNode(\"select\", {\n            ref: \"commentBehavior\",\n            size: \"1\",\n            value: _ctx.defaultValues.commentBehavior\n          }, _hoisted_34, 8, _hoisted_29)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_35, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onStart()))\n        }, \"解析実行\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { loadAnalysisSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { AnalysisSetting, defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const enableStartNumber: Ref = ref(null);\n    const startNumber: Ref = ref(null);\n    const enableEndNumber: Ref = ref(null);\n    const endNumber: Ref = ref(null);\n    const maxSecondsPerMove: Ref = ref(null);\n    const commentBehavior: Ref = ref(null);\n    const analysisSetting = ref(defaultAnalysisSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        analysisSetting.value = await loadAnalysisSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.releaseBussyState();\n      } catch (e) {\n        store.pushError(e);\n        store.closeDialog();\n      }\n    });\n\n    const updateToggle = () => {\n      startNumber.value.disabled = !enableStartNumber.value.checked;\n      endNumber.value.disabled = !enableEndNumber.value.checked;\n    };\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const analysisSetting: AnalysisSetting = {\n        usi: engine,\n        startCriteria: {\n          enableNumber: enableStartNumber.value.checked,\n          number: readInputAsNumber(startNumber.value),\n        },\n        endCriteria: {\n          enableNumber: enableEndNumber.value.checked,\n          number: readInputAsNumber(endNumber.value),\n        },\n        perMoveCriteria: {\n          maxSeconds: readInputAsNumber(maxSecondsPerMove.value),\n        },\n        commentBehavior: commentBehavior.value.value,\n      };\n      store.startAnalysis(analysisSetting);\n    };\n\n    const onCancel = () => {\n      store.closeDialog();\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValues = computed(() => {\n      return {\n        engineURI: analysisSetting.value.usi\n          ? analysisSetting.value.usi.uri\n          : \"\",\n        enableStartNumber: analysisSetting.value.startCriteria.enableNumber,\n        startNumber: analysisSetting.value.startCriteria.number,\n        enableEndNumber: analysisSetting.value.endCriteria.enableNumber,\n        endNumber: analysisSetting.value.endCriteria.number,\n        maxSecondsPerMove: analysisSetting.value.perMoveCriteria.maxSeconds,\n        commentBehavior: analysisSetting.value.commentBehavior,\n      };\n    });\n\n    return {\n      dialog,\n      enableStartNumber,\n      engineSelect,\n      startNumber,\n      enableEndNumber,\n      endNumber,\n      maxSecondsPerMove,\n      commentBehavior,\n      engines,\n      defaultValues,\n      updateToggle,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./AnalysisDialog.vue?vue&type=template&id=4b01faaf&scoped=true&ts=true\"\nimport script from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AnalysisDialog.vue?vue&type=style&index=0&id=4b01faaf&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b01faaf\"]])\n\nexport default __exports__","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport BussyMessage from \"@/components/dialog/BussyMessage.vue\";\nimport ConfirmDialog from \"@/components/dialog/ConfirmDialog.vue\";\nimport InfoMessage from \"@/components/dialog/InfoMessage.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\nimport AnalysisDialog from \"./components/dialog/AnalysisDialog.vue\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    BussyMessage,\n    ConfirmDialog,\n    InfoMessage,\n    ErrorMessage,\n    AnalysisDialog,\n  },\n  setup() {\n    const store = useStore();\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.mode === Mode.GAME_DIALOG,\n        research: store.mode === Mode.RESEARCH_DIALOG,\n        analysis: store.mode === Mode.ANALYSIS_DIALOG,\n        usiEngineSetting: store.mode === Mode.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.displayAppSetting,\n        paste: store.mode === Mode.PASTE_DIALOG,\n        bussy: store.isBussy,\n        confirm: store.confirmation !== undefined,\n      };\n    });\n\n    const hasMessage = computed(() => store.hasMessage);\n\n    const hasErrors = computed(() => store.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.copyRecordKIF();\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.showPasteDialog();\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.openRecord(path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.changeMoveNumber(0);\n        },\n        onArrowRight(): void {\n          store.changeMoveNumber(Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=2ac401f3&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2ac401f3&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport {\n  getRecordPathFromProcArg,\n  loadAppSetting,\n  setup as setupIPC,\n} from \"./ipc/renderer\";\nimport { useStore } from \"./store\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\nsetupIPC();\n\nconst store = useStore();\nPromise.allSettled([\n  loadAppSetting()\n    .then((setting) => {\n      store.updateAppSetting(setting);\n    })\n    .catch((e) => {\n      store.pushError(\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await getRecordPathFromProcArg();\n    if (path) {\n      store.openRecord(path);\n    }\n  })(),\n]).finally(() => {\n  createApp(App).mount(\"#app\");\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelectron_shogi\"] = self[\"webpackChunkelectron_shogi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1346); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_AnalysisDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_BussyMessage","_component_ConfirmDialog","_component_InfoMessage","_component_ErrorMessage","_openBlock","_createElementBlock","_Fragment","_createVNode","class","dialogVisibilities","game","_createBlock","key","_createCommentVNode","research","analysis","usiEngineSetting","appSetting","paste","bussy","confirm","hasMessage","hasErrors","_hoisted_1","_hoisted_2","ref","_component_BoardPane","_component_RecordPane","_component_TabPane","_createElementVNode","boardPaneMaxSize","size","bottomPaneSize","_withScopeId","n","_pushScopeId","_popScopeId","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","value","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_component_ButtonIcon","_component_BoardView","pieceImageType","boardImageType","maxSize","position","lastMove","flip","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","onGame","icon","Icon","GAME","stop","onStop","STOP","resign","onResign","RESIGN","onResearch","RESEARCH","endResearch","onEndResearch","END","onAnalysis","ANALYSIS","endAnalysis","onEndAnalysis","startEditPosition","onStartEditPosition","EDIT","endEditPosition","onEndEditPosition","CHECK","initPosition","onChangeTurn","SWAP","onChange","onInitPosition","onOpenAppSettings","SETTINGS","disabled","engineSettings","onOpenEngineSettings","ENGINE_SETTINGS","onFlip","FLIP","onPaste","PASTE","onCopy","COPY","removeAfter","onRemoveAfter","DELETE","_","style","_normalizeStyle","layout","frame","$event","clickFrame","board","src","imagePath","_normalizeClass","active","color","_toDisplayString","blackPlayerTimeSeverity","blackClock","blackPlayerTimeText","whitePlayerTimeSeverity","whiteClock","whitePlayerTimeText","_renderList","square","id","backgroundStyle","piece","clickSquare","file","rank","onContextmenu","clickSquareR","blackHand","pointers","pointer","pieces","clickHand","Color","BLACK","type","whiteHand","WHITE","promotion","clickPromote","promoteImagePath","clickNotPromote","notPromoteImagePath","turn","control","left","_renderSlot","$slots","undefined","right","PieceType","reverseColor","colorToSFEN","isValidSFENColor","sfen","parseSFENColor","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","promotedPieceType","pieceType","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","p","l","s","g","b","r","k","sfenCharToColorMap","rotateMap","Map","set","Direction","Piece","this","withColor","get","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","MoveType","directions","movableDirectionMap","black","SHORT","LONG","white","movableDirections","Object","keys","resolveMoveType","direction","directionToDeltaMap","x","y","vectorToDirectionAndDistance","distance","ok","Math","abs","dx","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","arg0","arg1","index","trunc","all","push","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","from","to","promote","capturedPieceType","move","equals","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","length","InitialPositionType","sfenCharToNumber","Board","squares","Array","i","reset","STANDARD","square1","square2","tmp","removed","forEach","clear","EMPTY","TSUME_SHOGI","TSUME_SHOGI_2KINGS","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","at","newByXY","isValidSFEN","rows","split","c","find","target","option","step","neighbor","valid","filled","ignore","rdir","kingColor","findKing","hasPower","buildSFEN","Hand","count","handler","formatSFEN","hand","sfenBlack","w","sfenWhite","match","sections","section","Number","add","invalidRankMap","isInvalidRank","rule","isPromotableRank","pawnExists","Position","_board","_color","_blackHand","_whiteHand","_hand","isChecked","capturedPiece","m","createMove","withPromote","kingSquare","movable","listSquaresByColor","isMovable","captured","isPromotable","isPawnDropMate","opt","ignoreValidation","isValidMove","remove","promoted","unpromoted","reduce","change","isValidEditing","swap","rotate","getSfen","nextMoveNumber","shift","resetBySFEN","hands","parseSFEN","d","copyFrom","countExistingPieces","result","countNotExistingPieces","existed","RecordMetadataKey","millisecondsToHMMSS","ms","secondsToHMMSS","floor","millisecondsToMSS","secondsToMSS","seconds","h","String","padStart","getStandardMetadataDisplayName","BLACK_NAME","WHITE_NAME","START_DATETIME","END_DATETIME","DATE","TOURNAMENT","STRATEGY","TITLE","TIME_LIMIT","TIME_SPENT","PLACE","POSTED_ON","NOTE","BLACK_SHORT_NAME","WHITE_SHORT_NAME","OPUS_NO","OPUS_NAME","AUTHOR","PUBLISHED_ON","PUBLISHED_AT","SOURCE","LENGTH","INTEGRITY","CATEGORY","AWARD","SpecialMove","RecordMetadata","standard","custom","delete","specialMoveToDisplayStringMap","start","interrupt","draw","repetitionDraw","mate","timeout","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","specialMoveToDisplayString","RecordEntryImpl","number","branchIndex","activeBranch","isCheck","next","branch","comment","elapsedMs","totalElapsedMs","getDisplayText","displayMoveText","elapsed","totalElapsed","updateTotalElapsedMs","stack","pop","START","Record","metadata","_initialPosition","clone","_position","initialPosition","_first","newRootEntry","_current","repetitionCounts","repetitionStart","incrementRepetition","moves","movesBefore","_movesBefore","unshift","len","decrementRepetition","undoMove","doMove","goBack","goForward","_forEach","entry","isFirstBranch","checked","first","lastBranch","current","repetition","since","usi","data","prefixPositionStartpos","prefixPositionSfen","prefixStartpos","prefixSfen","prefixMoves","startsWith","newByUSIFromMoves","slice","newByUSIFromSFENPosition","Error","join","record","parsed","append","appendLine","base","newLines","endsWith","LineType","metadataKeyMap","先手","後手","開始日時","終了日時","対局日","棋戦","戦型","表題","持ち時間","消費時間","場所","掲載","備考","先手省略名","後手省略名","作品番号","作品名","作者","発表誌","発表年月","出典","手数","完全性","分類","受賞","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","date","tournament","strategy","title","timeLimit","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","linePatterns","prefix","PROGRAM_COMMENT","removePrefix","isPosition","HANDICAP","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","COMMENT","parseLine","line","pattern","matched","begin","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","trim","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","INTERRUPT","投了","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","TIMEOUT","反則勝ち","FOUL_WIN","反則負け","FOUL_LOSE","入玉勝ち","ENTERING_OF_KING","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","timeResult","exec","minutes","parseInt","setElapsedMs","readMove","num","time","goto","toStr","pieceTypeStr","promStr","fromStr","importKakinoki","lines","preMoveComment","inMoveSection","e","standardKey","setStandardMetadata","setCustomMetadata","setColor","resetAllBranchSelection","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","options","returnCode","standardMetadataKeys","getStandardMetadata","customMetadataKeys","getCustomMetadata","formatPosition","formatHand","formatMove","exportKakinoki","hasBranch","replaceAll","SectionType","VERSION","sectionType","HEADER","NEUTRAL","RANK","PIECES","FIRST_TURN","SPECIAL_MOVE","ELAPSED","results","args","csaNameToRecordMetadataKey","EVENT","SITE","START_TIME","END_TIME","OPENING","csaNameToPieceType","FU","KY","KE","GI","KI","KA","HI","OU","TO","NY","NK","NG","UM","RY","parseRank","parsePieces","counts","parseMove","fromFile","fromRank","toFile","toRank","basePiece","parseSpecialMove","importCSA","replace","error","moveOrError","specialMove","event","site","startTime","endTime","opening","RecordFormatType","pieceTypeToString","formatSquare","formatSpecialMove","exportCSA","detectRecordFormat","USI","SFEN","pattKIF","pattCSA","matchedKIF","matchedCSA","evalKIF","evalCSA","KIF","CSA","PieceImageType","BoardImageType","preloadedImages","preloadImage","path","img","document","createElement","layoutTemplate","width","height","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMoveTo","lastMoveFrom","fontSize","playerName","clock","pieceImageMap","HITOMOJI","king2","HITOMOJI_GOTHIC","boardImageMap","LIGHT","WARM","RESIN","handLaytoutRule","row","column","LayoutBuilder","pieceImages","boardImage","values","upperSizeLimit","reservedMoveForPromotion","ratio","buildFrameLayout","buildBoardLayout","top","buildPieceLayout","boardLayout","layouts","listNonEmptySquares","displayColor","opposite","buildSquareLayout","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","max","buildPromotionLayout","notPromoted","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","RectSize","defineComponent","name","props","required","default","Boolean","emits","setup","context","state","reactive","reservedMove","resetState","watch","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","stopPropagation","preventDefault","layoutBuilder","computed","builder","preload","build","formatTime","timeMs","byoyomi","ceil","timeSeverity","rem","__exports__","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","uri","issueEngineURI","now","Date","rand","random","MAX_SAFE_INTEGER","toString","getUSIEngineOptionCurrentValue","duplicateEngineSetting","engine","JSON","parse","stringify","mergeUSIEngineSetting","local","MenuEvent","CommentBehavior","Tab","ClockSoundTarget","STORAGE_KEY","USIEngineSettings","json","engines","sort","a","defaultName","defaultAnalysisSetting","startCriteria","enableNumber","endCriteria","perMoveCriteria","maxSeconds","commentBehavior","INSERT","appendAnalysisComment","org","behavior","sep","NONE","APPEND","OVERWRITE","defaultAppSetting","pieceImage","pieceVolume","clockVolume","clockPitch","clockSoundTarget","ONLY_USER","boardFlipping","tab","RECORD_INFO","coefficientInSigmoid","badMoveLevelThreshold1","badMoveLevelThreshold2","badMoveLevelThreshold3","badMoveLevelThreshold4","showElapsedTimeInRecordView","showCommentInRecordView","validateAppSetting","setting","formatTimeLimitCSA","timeSeconds","defaultGameSetting","increment","enableEngineTimeout","humanIsFront","validateGameSetting","gameSetting","defaultResearchSetting","webAPI","getRecordPathFromProcArg","updateMenuState","showOpenRecordDialog","openRecord","showSaveRecordDialog","saveRecord","showSelectFileDialog","loadAppSetting","localStorage","getItem","APP_SETTING","saveAppSetting","setItem","loadResearchSetting","RESEARCH_SETTING","saveResearchSetting","loadAnalysisSetting","ANALYSIS_SETTING","saveAnalysisSetting","loadGameSetting","GAME_SETTING","saveGameSetting","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","sendUSISetOption","usiLaunch","usiGo","usiGoInfinite","usiStop","usiGameover","usiQuit","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","USIPlayer","sessionID","usiPlayers","blackTimeMs","whiteTimeMs","searchHandler","catch","useStore","pushError","createMoveBySFEN","onWin","usiBestMove","player","onBestMove","HumanPlayer","humanPlayer","getWindowObject","window","isNative","electronShogiAPI","getAPI","defaultPath","jsonWithIndent","store","api","isBussy","NEW_RECORD","newRecord","OPEN_RECORD","SAVE_RECORD","overwrite","SAVE_RECORD_AS","COPY_RECORD","copyRecordKIF","COPY_RECORD_CSA","copyRecordCSA","COPY_RECORD_USI_BEFORE","copyRecordUSIBefore","COPY_RECORD_USI_ALL","copyRecordUSIAll","COPY_BOARD_SFEN","copyBoardSFEN","PASTE_RECORD","showPasteDialog","INSERT_INTERRUPT","insertSpecialMove","INSERT_RESIGN","INSERT_DRAW","INSERT_REPETITION_DRAW","INSERT_MATE","INSERT_TIMEOUT","INSERT_FOUL_WIN","INSERT_FOUL_LOSE","INSERT_ENTERING_OF_KING","INSERT_WIN_BY_DEFAULT","INSERT_LOSS_BY_DEFAULT","REMOVE_RECORD_AFTER","removeRecordAfter","START_POSITION_EDITING","startPositionEditing","END_POSITION_EDITING","endPositionEditing","CHANGE_TURN","changeTurn","INIT_POSITION_STANDARD","initializePosition","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","INIT_POSITION_TSUME_SHOGI_2KINGS","START_GAME","showGameDialog","STOP_GAME","stopGame","START_RESEARCH","showResearchDialog","STOP_RESEARCH","stopResearch","START_ANALYSIS","showAnalysisDialog","STOP_ANALYSIS","stopAnalysis","FLIP_BOARD","flipBoard","APP_SETTING_DIALOG","openAppSettingDialog","USI_ENGINE_SETTING_DIALOG","openUsiEngineManagementDialog","sender","updateUSIInfo","mode","lastPieceBeatTime","USIInfoSender","beep","frequency","volume","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","currentTime","beepShort","beepUnlimited","playPieceBeat","audio","Audio","play","stringifyUSIInfoSender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","formatPV","pv","GameResult","GameState","USIPlayerMonitor","iterates","update","iterate","depth","seldepth","selectiveDepth","nodes","multipv","multiPV","scoreCP","score","scoreMate","lowerbound","lowerBound","upperbound","upperBound","currmove","currentMove","currentMoveText","hashfullPerMill","hashfull","nps","string","USIMonitor","_blackPlayer","_whitePlayer","_researcher","info","_blackPosition","_whitePosition","_researchPosition","MATE_SCORE","RecordEntryCustomData","obj","evaluation","command","updateScore","GameManager","handlers","IDLE","blackState","whiteState","timerHandle","timerStart","lastTimeMs","_elapsedMs","_setting","lastEventID","buildPlayer","blackPlayer","whitePlayer","closePlayers","onError","ACTIVE","startTimer","getPlayer","eventID","issueEventID","startSearch","endGame","incrementTime","faulColor","perpetualCheck","console","warn","stopTimer","playerState","getPlayerState","setInterval","lastByoyomi","getTime","lastTime","onBeepUnlimited","onBeepShort","isEngine","onTimeout","PENDING","BUSSY","endGameAsync","then","sendGameResults","onEndGame","gameResult","getGameResult","gameover","currentColor","playerColor","WIN","LOSE","onStopBeep","clearInterval","playerSetting","launch","close","defaultRecordFileName","getDateString","toLocaleDateString","year","month","day","Mode","BussyStore","MessageStore","_queue","message","ErrorStore","getDateTimeString","toLocaleTimeString","hour","minute","second","hour12","getSituationText","scoreToPercentage","exp","getMoveAccuracyText","before","after","loss","AnalysisManager","setupEngine","setTimeout","closeEngine","researcher","onFinish","clearTimer","onResult","actualMove","lastScore","finish","onNext","goAsync","clearTimeout","negaScore","scoreDelta","isBestMove","startResearch","pos","buildRecordComment","Store","_bussy","_message","_error","_appSetting","_mode","NORMAL","_displayAppSetting","_usi","_record","retain","release","enqueue","dequeue","errors","hasError","newAppSetting","_confirmation","confirmation","lastMode","TEMPORARY","onOk","onCancel","PASTE_DIALOG","GAME_DIALOG","RESEARCH_DIALOG","ANALYSIS_DIALOG","entryData","customData","blackByoyomi","whiteByoyomi","startGameAsync","retainBussyState","initializeRecordForGame","initializeDisplaySettingForGame","startGame","releaseBussyState","startPosition","onUpdatePosition","clearRecordFilePath","enqueueMessage","isMovableByUser","unlimitedBeepHandler","researchSetting","startResearchAsync","analysisSetting","startAnalysisAsync","_recordFilePath","recordFilePath","showConfirmation","POSITION_EDITING","initialPositionType","edit","switchBranchByIndex","str","navigator","clipboard","writeText","usiAll","recordOrError","newByUSI","openRecordAsync","iconv","TextDecoder","decode","updateRecordFilePath","saveRecordAsync","TextEncoder","encode","iconSourceMap","ERROR","INFO","SWAP_H","BRAIN","CHART","PERCENT","ARROW_DROP","FIRST","BACK","NEXT","LAST","QUESTION","DESCRIPTION","components","BoardView","ButtonIcon","editPosition","select","for","_component_RecordView","operational","isRecordOperational","showComment","showElapsedTime","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onToggleElapsedTime","onToggleComment","changeNumber","changeBranch","branches","moveList","branchList","beginPosSelected","elem","displayText","branchBegin","minWidth","RecordView","changeMoveNumber","checkbox","updateAppSetting","_component_RecordInfo","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","activeTab","headerHeight","changeSelect","SEARCH","PERCENTAGE_CHART","INVISIBLE","contentSize","EvaluationChartType","RAW","WIN_RATE","readonly","onInput","textarea","updateRecordComment","onMounted","addEventListener","_component_EngineAnalyticsElement","elementHeight","_createStaticVNode","toFixed","best","EngineAnalyticsElement","usiBlackPlayerMonitor","usiWhitePlayerMonitor","usiResearcherMonitor","MAX_SCORE","MIN_SCORE","chart","canvasRef","maxScore","minScore","buildDataset","borderColor","dataPoints","min","label","showLine","verticalLine","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","scales","displayWidth","round","canvas","getContext","Chart","datasets","animation","duration","maintainAspectRatio","events","onUnmounted","destroy","deep","resize","list","element","displayName","map","input","updateStandardRecordMetadata","minHeight","RecordComment","EngineAnalytics","EvaluationChart","RecordInfo","BoardPane","RecordPane","TabPane","windowSize","topPaneHeight","topPane","updateSize","innerWidth","innerHeight","topPaneResizeObserver","ResizeObserver","entries","contentRect","observe","removeEventListener","minTabPaneHeight","minTabHeight","informationHeaderHeight","minRecordWidth","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","defaultValues","players","onSwapColor","hours","onStart","showModalDialog","dialog","showModal","getFormItemByID","getElementById","readInputAsNumber","blackPlayerSelect","whitePlayerSelect","engineSetting","closeDialog","buildPlayerSetting","playerURI","getEngine","engineList","defaultValue","engineSelect","hasEngine","_component_USIEngineOptionDialog","openOptions","duplicate","saveAndClose","cancel","optionDialog","optionOk","optionCancel","inputId","selectFile","vars","v","sendOption","latestEngineSetting","engineNameInput","latest","aIsUSI","bIsUSI","USIEngineOptionDialog","addEngine","removeEngine","updateEngine","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","pieceImageTypes","boardImageTypes","returnCodeToName","nameToReturnCode","crlf","lf","cr","closeAppSettingDialog","readText","closePasteDialog","pasteRecord","onClose","confirmationOk","confirmationCancel","dequeueMessage","clearErrors","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","engineURI","enableStartNumber","updateToggle","startNumber","enableEndNumber","endNumber","maxSecondsPerMove","startAnalysis","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","BussyMessage","ConfirmDialog","InfoMessage","ErrorMessage","AnalysisDialog","displayAppSetting","body","getElementsByTagName","dataTransfer","files","moveNumber","registerables","setupIPC","Promise","allSettled","finally","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}