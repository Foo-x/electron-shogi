{"version":3,"file":"js/index-legacy.84e18fd5.js","mappings":"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B,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,MAEvBvF,KAAM,CACJ0D,GAAIwB,GAASK,KACb5G,KAAMuG,GAASK,KACfxG,MAAOmG,GAASK,KAChB3B,KAAMsB,GAASK,MAEjBtF,KAAM,CACJmE,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnB1B,KAAMsB,GAASI,MACf3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfpF,SAAU,CACR8D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBnF,UAAW,CACT6D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBlF,WAAY,CACV4D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBjF,WAAY,CACV2D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBhF,MAAO,CACL0D,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,KACrB7B,GAAIwB,GAASI,MACb3G,KAAMuG,GAASI,MACfvG,MAAOmG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjB/E,OAAQ,CACNmD,GAAIwB,GAASK,KACb5G,KAAMuG,GAASK,KACfxG,MAAOmG,GAASK,KAChB3B,KAAMsB,GAASK,KACfvB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnBlB,UAAWc,GAASI,M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","sources":["webpack://electron-shogi/./src/App.vue?c17f","webpack://electron-shogi/./src/components/main/StandardLayout.vue?fccd","webpack://electron-shogi/./src/components/main/BoardPane.vue?37db","webpack://electron-shogi/./src/components/primitive/BoardView.vue?26c7","webpack://electron-shogi/./src/shogi/color.ts","webpack://electron-shogi/./src/shogi/piece.ts","webpack://electron-shogi/./src/shogi/direction.ts","webpack://electron-shogi/./src/shogi/square.ts","webpack://electron-shogi/./src/shogi/move.ts","webpack://electron-shogi/./src/shogi/board.ts","webpack://electron-shogi/./src/shogi/hand.ts","webpack://electron-shogi/./src/shogi/position.ts","webpack://electron-shogi/./src/shogi/record.ts","webpack://electron-shogi/./src/helpers/time.ts","webpack://electron-shogi/./src/shogi/kakinoki.ts","webpack://electron-shogi/./src/assets/preload.ts","webpack://electron-shogi/./src/components/primitive/BoardLayout.ts","webpack://electron-shogi/./src/components/primitive/Types.ts","webpack://electron-shogi/./src/components/primitive/BoardView.vue?53c8","webpack://electron-shogi/./src/components/primitive/BoardView.vue","webpack://electron-shogi/./src/settings/usi.ts","webpack://electron-shogi/./src/menu/event.ts","webpack://electron-shogi/./src/settings/app.ts","webpack://electron-shogi/./src/ipc/web.ts","webpack://electron-shogi/./src/uri.ts","webpack://electron-shogi/./src/settings/game.ts","webpack://electron-shogi/./src/settings/research.ts","webpack://electron-shogi/./src/ipc/renderer.ts","webpack://electron-shogi/./src/audio/index.ts","webpack://electron-shogi/./src/usi/info.ts","webpack://electron-shogi/./src/store/record.ts","webpack://electron-shogi/./src/store/mutation.ts","webpack://electron-shogi/./src/store/action.ts","webpack://electron-shogi/./src/store/game.ts","webpack://electron-shogi/./src/helpers/path.ts","webpack://electron-shogi/./src/store/bussy.ts","webpack://electron-shogi/./src/store/usi.ts","webpack://electron-shogi/./src/store/mode.ts","webpack://electron-shogi/./src/store/message.ts","webpack://electron-shogi/./src/store/error.ts","webpack://electron-shogi/./src/store/index.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?eb5b","webpack://electron-shogi/./src/assets/icons.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?3913","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue","webpack://electron-shogi/./src/components/main/BoardPane.vue?7d48","webpack://electron-shogi/./src/components/main/BoardPane.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?2c46","webpack://electron-shogi/./src/components/primitive/RecordView.vue?04d3","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f9e","webpack://electron-shogi/./src/components/primitive/RecordView.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?61e0","webpack://electron-shogi/./src/components/main/RecordPane.vue","webpack://electron-shogi/./src/components/main/InformationPane.vue?2242","webpack://electron-shogi/./src/components/analytics/RecordComment.vue?5479","webpack://electron-shogi/./src/components/analytics/RecordComment.vue?eb60","webpack://electron-shogi/./src/components/analytics/RecordComment.vue","webpack://electron-shogi/./src/components/analytics/EngineAnalytics.vue?48d7","webpack://electron-shogi/./src/components/analytics/EngineAnalyticsElement.vue?d8f5","webpack://electron-shogi/./src/components/analytics/EngineAnalyticsElement.vue?15e3","webpack://electron-shogi/./src/components/analytics/EngineAnalyticsElement.vue","webpack://electron-shogi/./src/components/analytics/EngineAnalytics.vue?fcfb","webpack://electron-shogi/./src/components/analytics/EngineAnalytics.vue","webpack://electron-shogi/./src/components/analytics/EvaluationChart.vue?6d70","webpack://electron-shogi/./src/components/analytics/EvaluationChart.vue?7f8d","webpack://electron-shogi/./src/components/analytics/EvaluationChart.vue","webpack://electron-shogi/./src/components/main/InformationPane.vue?0941","webpack://electron-shogi/./src/components/main/InformationPane.vue","webpack://electron-shogi/./src/components/main/StandardLayout.vue?15bf","webpack://electron-shogi/./src/components/main/StandardLayout.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?43c7","webpack://electron-shogi/./src/helpers/dialog.ts","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?4613","webpack://electron-shogi/./src/components/dialog/GameDialog.vue","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?de14","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?110e","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?856f","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?9a0f","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?6142","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?449c","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?0fad","webpack://electron-shogi/./src/helpers/form.ts","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?12ff","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?2d66","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?66a0","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?222e","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?f614","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?bbe7","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?f9a8","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?7e60","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?13c3","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue","webpack://electron-shogi/./src/helpers/key.ts","webpack://electron-shogi/./src/App.vue?847a","webpack://electron-shogi/./src/App.vue","webpack://electron-shogi/./src/main.ts","webpack://electron-shogi/webpack/bootstrap","webpack://electron-shogi/webpack/runtime/chunk loaded","webpack://electron-shogi/webpack/runtime/compat get default export","webpack://electron-shogi/webpack/runtime/define property getters","webpack://electron-shogi/webpack/runtime/global","webpack://electron-shogi/webpack/runtime/hasOwnProperty shorthand","webpack://electron-shogi/webpack/runtime/jsonp chunk loading","webpack://electron-shogi/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_BussyMessage = _resolveComponent(\"BussyMessage\")!\n  const _component_InfoMessage = _resolveComponent(\"InfoMessage\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.processing)\n      ? (_openBlock(), _createBlock(_component_BussyMessage, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_InfoMessage, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 7 }))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-8bad9680\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = {\n  ref: \"topPane\",\n  class: \"top-pane\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_InformationPane = _resolveComponent(\"InformationPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          \"max-size\": _ctx.boardPaneMaxSize\n        }, null, 8, [\"max-size\"]),\n        _createVNode(_component_RecordPane, { class: \"top-right-pane\" })\n      ], 512),\n      _createVNode(_component_InformationPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-50b0e606\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 中断 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_10 = { class: \"control bottom\" }\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_16 = [\"disabled\"]\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" 棋譜貼り付け \")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" 棋譜コピー \")\nconst _hoisted_19 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_BoardView, {\n      \"layout-type\": _ctx.layout,\n      \"max-size\": _ctx.maxSize,\n      position: _ctx.position,\n      \"last-move\": _ctx.lastMove,\n      flip: _ctx.flip,\n      \"allow-move\": _ctx.allowMove,\n      \"allow-edit\": _ctx.allowEdit,\n      \"black-player-name\": _ctx.blackPlayerName,\n      \"white-player-name\": _ctx.whitePlayerName,\n      \"black-player-time-ms\": _ctx.blackPlayerTimeMs,\n      \"black-player-byoyomi\": _ctx.blackPlayerByoyomi,\n      \"white-player-time-ms\": _ctx.whitePlayerTimeMs,\n      \"white-player-byoyomi\": _ctx.whitePlayerByoyomi,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"game\"\n                }),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"stop\"\n                }),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"resign\"\n                }),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"research\"\n                }),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"end\"\n                }),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"edit\"\n                }),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"check\"\n                }),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: \"swap\"\n                }),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionStandard && _ctx.onInitPositionStandard(...args)))\n              }, \" 平手 \"))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionTsumeShogi && _ctx.onInitPositionTsumeShogi(...args)))\n              }, \" 詰将棋 \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.appSettings,\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"settings\"\n            }),\n            _hoisted_12\n          ], 8, _hoisted_11),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.engineSettings,\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"engineSettings\"\n            }),\n            _hoisted_14\n          ], 8, _hoisted_13),\n          _createElementVNode(\"button\", {\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"flip\"\n            }),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.controlStates.paste,\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"paste\"\n            }),\n            _hoisted_17\n          ], 8, _hoisted_16),\n          _createElementVNode(\"button\", {\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onCopy && _ctx.onCopy(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"copy\"\n            }),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"delete\"\n            }),\n            _hoisted_19\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"layout-type\", \"max-size\", \"position\", \"last-move\", \"flip\", \"allow-move\", \"allow-edit\", \"black-player-name\", \"white-player-name\", \"black-player-time-ms\", \"black-player-byoyomi\", \"white-player-time-ms\", \"white-player-byoyomi\", \"onMove\", \"onEdit\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9c952172\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"▲\" + _toDisplayString(_ctx.blackPlayerName || \"先手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"△\" + _toDisplayString(_ctx.whitePlayerName || \"後手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: piece.id,\n          class: \"piece\",\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'black', pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'white', pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += ` (${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isCheck(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isCheck(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSfen(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color);\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isCheck(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isCheck(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isCheck(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    // FIXME: 連続王手の千日手チェック\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSfen(1);\n  }\n\n  getSfen(nextMoveNumber: number): string {\n    let ret = `sfen ${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    this._board.resetBySFEN(sections[1]);\n    this._color = parseSFENColor(sections[2]);\n    const hands = Hand.parseSFEN(sections[3]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length < 5) {\n      return false;\n    }\n    if (sections[0] !== \"sfen\") {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[1])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[2])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[3])) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n","import Position, { DoMoveOption, ImmutablePosition } from \"./position\";\nimport Move from \"./move\";\nimport { Color } from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TITLE = \"title\", // 表題\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport class RecordMetadata {\n  private metadata: Map<RecordMetadataKey, string>;\n  private customMetadata: Map<string, string>;\n\n  constructor() {\n    this.metadata = new Map<RecordMetadataKey, string>();\n    this.customMetadata = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.metadata.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.metadata.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    this.metadata.set(key, value);\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.customMetadata.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.customMetadata.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    this.customMetadata.set(key, value);\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface RecordEntry {\n  readonly number: number;\n  readonly prev: RecordEntry | null;\n  readonly next: RecordEntry | null;\n  readonly branch: RecordEntry | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  comment: string;\n  customData: string | undefined;\n  readonly displayMoveText: string;\n  readonly displayText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass RecordEntryImpl implements RecordEntry {\n  public next: RecordEntryImpl | null;\n  public branch: RecordEntryImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: RecordEntryImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayMoveText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get displayText(): string {\n    let ret = this.displayMoveText;\n    if (this.number !== 0) {\n      const elapsed = millisecondsToMSS(this.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n      ret += ` (${elapsed} / ${totalElapsed})`;\n    }\n    return ret;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport default class Record {\n  private _metadata: RecordMetadata;\n\n  private _initialPosition: ImmutablePosition;\n\n  private _position: Position;\n\n  private _first: RecordEntryImpl;\n\n  private _current: RecordEntryImpl;\n\n  constructor(position?: ImmutablePosition) {\n    this._metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = new RecordEntryImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START // move\n    );\n    this._current = this._first;\n  }\n\n  get metadata(): RecordMetadata {\n    return this._metadata;\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): RecordEntry {\n    return this._first;\n  }\n\n  get current(): RecordEntry {\n    return this._current;\n  }\n\n  get moves(): Array<RecordEntry> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<RecordEntry> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<RecordEntryImpl> {\n    const moves = new Array<RecordEntryImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): RecordEntry | null {\n    return this._current.prev ? this._current.prev.next : null;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first.next = null;\n    this._current = this._first;\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as RecordEntryImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((entry) => {\n      entry.activeBranch = entry.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new RecordEntryImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move // move\n      );\n      this._current = this._current.next;\n      return true;\n    }\n    let p: RecordEntryImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new RecordEntryImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move // move\n    );\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n  }\n\n  get usi(): string {\n    let ret = \"position \" + this.initialPosition.sfen + \" moves\";\n    this._movesBefore.forEach((entry) => {\n      if (entry.move instanceof Move) {\n        ret += \" \" + entry.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get sfen(): string {\n    return \"position \" + this.position.getSfen(this._current.number + 1);\n  }\n\n  forEach(handler: (entry: RecordEntry) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (entry: RecordEntryImpl) => void): void {\n    let p: RecordEntryImpl | null = this._first;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport { SpecialMove } from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手番/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手番/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  let end = line.indexOf(\"#\");\n  if (end === -1) {\n    end = line.length;\n  }\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin, end),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length, end),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line.substring(0, end),\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section || section === \"なし\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          record.metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          record.metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        record.current.comment +=\n          (record.current.comment.length !== 0 ? \"\\n\" : \"\") + parsed.data;\n        break;\n      case LineType.UNKNOWN:\n        console.log(\"skip\", line);\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: RecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"先手番\" + returnCode;\n  } else {\n    ret += \"後手番\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: Record,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((entry) => {\n    if (entry.move) {\n      if (!entry.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + entry.number + \"手\" + returnCode;\n      }\n      if (entry.move instanceof Move) {\n        ret += entry.number + \" \" + formatMove(entry.move);\n      } else {\n        ret += specialMoveToString[entry.move];\n      }\n      const elapsed = millisecondsToMSS(entry.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(entry.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (entry.isFirstBranch && entry.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (entry.comment.length !== 0) {\n      ret +=\n        \"*\" + entry.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","import { handPieceTypes, ImmutableHand, PieceType } from \"@/shogi\";\nimport {\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum BoardLayoutType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n}\n\ntype LayoutTemplate = {\n  images: {\n    board: string;\n    black: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n    white: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n  };\n  frame: {\n    width: number;\n    height: number;\n  };\n  board: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    squreWidth: number;\n    squreHeight: number;\n    leftSquarePadding: number;\n    topSquarePadding: number;\n    leftPiecePadding: number;\n    topPiecePadding: number;\n    highlight: {\n      selected: { [key: string]: string };\n      lastMove: { [key: string]: string };\n    };\n  };\n  piece: {\n    width: number;\n    height: number;\n  };\n  hand: {\n    color: string;\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    highlight: {\n      selected: { [key: string]: string };\n    };\n  };\n  turn: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  playerName: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  clock: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  control: {\n    left: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n    right: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n  };\n};\n\nconst templateCommon = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    // original image size: 878x960\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n      lastMove: { \"background-color\": \"#00ddff\", opacity: \"0.5\" },\n    },\n  },\n  piece: {\n    // original image size: 88x93\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    color: \"#8b4513\",\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst templates: { [key: string]: LayoutTemplate } = {\n  hitomoji: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji/black_pawn.png\",\n        lance: \"./piece/hitomoji/black_lance.png\",\n        knight: \"./piece/hitomoji/black_knight.png\",\n        silver: \"./piece/hitomoji/black_silver.png\",\n        gold: \"./piece/hitomoji/black_gold.png\",\n        bishop: \"./piece/hitomoji/black_bishop.png\",\n        rook: \"./piece/hitomoji/black_rook.png\",\n        king: \"./piece/hitomoji/black_king.png\",\n        king2: \"./piece/hitomoji/black_king2.png\",\n        promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n        horse: \"./piece/hitomoji/black_horse.png\",\n        dragon: \"./piece/hitomoji/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji/white_pawn.png\",\n        lance: \"./piece/hitomoji/white_lance.png\",\n        knight: \"./piece/hitomoji/white_knight.png\",\n        silver: \"./piece/hitomoji/white_silver.png\",\n        gold: \"./piece/hitomoji/white_gold.png\",\n        bishop: \"./piece/hitomoji/white_bishop.png\",\n        rook: \"./piece/hitomoji/white_rook.png\",\n        king: \"./piece/hitomoji/white_king.png\",\n        king2: \"./piece/hitomoji/white_king2.png\",\n        promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n        horse: \"./piece/hitomoji/white_horse.png\",\n        dragon: \"./piece/hitomoji/white_dragon.png\",\n      },\n    },\n  },\n  hitomojiGothic: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/black_lance.png\",\n        knight: \"./piece/hitomoji_gothic/black_knight.png\",\n        silver: \"./piece/hitomoji_gothic/black_silver.png\",\n        gold: \"./piece/hitomoji_gothic/black_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/black_rook.png\",\n        king: \"./piece/hitomoji_gothic/black_king.png\",\n        king2: \"./piece/hitomoji_gothic/black_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/black_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/white_lance.png\",\n        knight: \"./piece/hitomoji_gothic/white_knight.png\",\n        silver: \"./piece/hitomoji_gothic/white_silver.png\",\n        gold: \"./piece/hitomoji_gothic/white_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/white_rook.png\",\n        king: \"./piece/hitomoji_gothic/white_king.png\",\n        king2: \"./piece/hitomoji_gothic/white_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/white_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n      },\n    },\n  },\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: string;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nexport default class LayoutBuilder {\n  private template: LayoutTemplate;\n\n  constructor(layoutType: BoardLayoutType) {\n    this.template =\n      templates[layoutType] || templates[BoardLayoutType.HITOMOJI];\n  }\n\n  preload(): void {\n    preloadImage(this.template.images.board);\n    Object.values(this.template.images.black).forEach(preloadImage);\n    Object.values(this.template.images.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / this.template.frame.width;\n    if (this.template.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / this.template.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      return {\n        style: {\n          height: this.template.frame.height * ratio + \"px\",\n          width: this.template.frame.width * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.template.images.board;\n      const x = this.template.board.x * ratio;\n      const y = this.template.board.y * ratio;\n      const width = this.template.board.width * ratio;\n      const height = this.template.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.template.images[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (this.template.board.leftPiecePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topPiecePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.piece.width * ratio;\n        const height = this.template.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (this.template.board.leftSquarePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topSquarePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.board.squreWidth * ratio;\n        const height = this.template.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.lastMove,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = this.template.hand[displayColor].x * ratio;\n      const standY = this.template.hand[displayColor].y * ratio;\n      const standWidth = this.template.hand.width * ratio;\n      const standHeight = this.template.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": this.template.hand.color,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (this.template.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (this.template.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = this.template.piece.width * ratio;\n        const pieceHeight = this.template.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.template.images[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.template.images[color][promoted.type];\n      const notPromoteImagePath = this.template.images[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (this.template.board.leftSquarePadding +\n          this.template.board.squreWidth * (square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (this.template.board.topSquarePadding +\n          this.template.board.squreHeight * square.y) *\n          ratio;\n      const width = this.template.board.squreWidth * 2 * ratio;\n      const height = this.template.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left: this.template.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: this.template.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: this.template.turn.width * ratio - borderWidth + \"px\",\n          height: this.template.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": this.template.turn.fontSize * ratio + \"px\",\n          \"border-radius\": this.template.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.playerName[displayColor].x * ratio + \"px\",\n          top: this.template.playerName[displayColor].y * ratio + \"px\",\n          width: this.template.playerName.width * ratio + \"px\",\n          height: this.template.playerName.height * ratio + \"px\",\n          \"font-size\": this.template.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.clock[displayColor].x * ratio + \"px\",\n          top: this.template.clock[displayColor].y * ratio + \"px\",\n          width: this.template.clock.width * ratio + \"px\",\n          height: this.template.clock.height * ratio + \"px\",\n          \"font-size\": this.template.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: this.template.control.left.x * ratio + \"px\",\n            top: this.template.control.left.y * ratio + \"px\",\n            width: this.template.control.left.width * ratio + \"px\",\n            height: this.template.control.left.height * ratio + \"px\",\n            \"font-size\": this.template.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: this.template.control.right.x * ratio + \"px\",\n            top: this.template.control.right.y * ratio + \"px\",\n            width: this.template.control.right.width * ratio + \"px\",\n            height: this.template.control.right.height * ratio + \"px\",\n            \"font-size\": this.template.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","\nimport { PieceType } from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardLayoutType,\n} from \"@/components/primitive/BoardLayout\";\nimport { Square, Piece, Color, Move, ImmutablePosition } from \"@/shogi\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"BoardView\",\n  props: {\n    layoutType: {\n      type: String as PropType<BoardLayoutType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Move,\n      required: false,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n  },\n  emits: [\"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(props.layoutType);\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() =>\n      layoutBuilder.value.build(\n        props.maxSize.reduce(new RectSize(20, 20)),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      )\n    );\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n    };\n  },\n});\n","import { render } from \"./BoardView.vue?vue&type=template&id=9c952172&scoped=true&ts=true\"\nimport script from \"./BoardView.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardView.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=9c952172&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9c952172\"]])\n\nexport default __exports__","export type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption\n): string | number | undefined {\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      return a.name > b.name ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { BoardLayoutType } from \"@/components/primitive/BoardLayout\";\n\nexport enum InformationTab {\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  CHART = \"chart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  boardLayout: BoardLayoutType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  informationTab: InformationTab;\n};\n\nexport type AppSettingUpdate = {\n  boardLayout?: BoardLayoutType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  informationTab?: InformationTab;\n};\n\nexport function defaultAppSetting(): AppSetting {\n  return {\n    boardLayout: BoardLayoutType.HITOMOJI,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    informationTab: InformationTab.COMMENT,\n  };\n}\n","import { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { API } from \"./renderer\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: API = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Buffer> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async endResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startGame(): Promise<void> {\n    // Do Nothing\n  },\n  async endGame(): Promise<void> {\n    // Do Nothing\n  },\n  async updateUSIPosition(): Promise<void> {\n    // Do Nothing\n  },\n  async stopUSI(): Promise<void> {\n    // Do Nothing\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n};\n","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { InitialPositionType } from \"@/shogi\";\nimport { USIEngineSetting } from \"./usi\";\nimport * as uri from \"@/uri\";\n\nexport type PlayerSetting = {\n  name: string;\n  uri: string;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとフィッシャールールは併用できません。\");\n  }\n  return;\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","import { Color } from \"@/shogi\";\nimport { Action, Mutation, State } from \"@/store\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { watch } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { Store } from \"vuex\";\nimport { MenuEvent } from \"@/menu/event\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { USIInfoSender } from \"@/usi/info\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mode } from \"@/store/mode\";\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(mode: Mode, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Buffer>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Buffer): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  startResearch(json: string, sessionID: number): Promise<void>;\n  endResearch(): Promise<void>;\n  startGame(json: string, sessionID: number): Promise<void>;\n  endGame(usi: string, specialMove?: SpecialMove): Promise<void>;\n  updateUSIPosition(\n    usi: string,\n    gameSetting: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stopUSI(color: Color): Promise<void>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      color: Color,\n      sfen: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI: API;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n\nfunction getAPI(): API {\n  return getWindowObject().electronShogiAPI || webAPI;\n}\n\nexport async function getRecordPathFromProcArg(): Promise<string> {\n  return await getAPI().getRecordPathFromProcArg();\n}\n\nexport async function showOpenRecordDialog(): Promise<string> {\n  return await getAPI().showOpenRecordDialog();\n}\n\nexport async function openRecord(path: string): Promise<Buffer> {\n  return await getAPI().openRecord(path);\n}\n\nexport async function showSaveRecordDialog(\n  defaultPath: string\n): Promise<string> {\n  return await getAPI().showSaveRecordDialog(defaultPath);\n}\n\nexport async function saveRecord(path: string, data: Buffer): Promise<void> {\n  await getAPI().saveRecord(path, data);\n}\n\nexport async function showSelectFileDialog(): Promise<string> {\n  return await getAPI().showSelectFileDialog();\n}\n\nexport async function loadAppSetting(): Promise<AppSetting> {\n  return JSON.parse(await getAPI().loadAppSetting());\n}\n\nexport async function saveAppSetting(setting: AppSetting): Promise<void> {\n  await getAPI().saveAppSetting(JSON.stringify(setting));\n}\n\nexport async function loadResearchSetting(): Promise<ResearchSetting> {\n  return JSON.parse(await getAPI().loadResearchSetting());\n}\n\nexport async function saveResearchSetting(\n  setting: ResearchSetting\n): Promise<void> {\n  await getAPI().saveResearchSetting(JSON.stringify(setting));\n}\n\nexport async function loadGameSetting(): Promise<GameSetting> {\n  return JSON.parse(await getAPI().loadGameSetting());\n}\n\nexport async function saveGameSetting(setting: GameSetting): Promise<void> {\n  await getAPI().saveGameSetting(JSON.stringify(setting));\n}\n\nexport async function loadUSIEngineSetting(): Promise<USIEngineSettings> {\n  return new USIEngineSettings(await getAPI().loadUSIEngineSetting());\n}\n\nexport async function saveUSIEngineSetting(\n  setting: USIEngineSettings\n): Promise<void> {\n  await getAPI().saveUSIEngineSetting(setting.jsonWithIndent);\n}\n\nexport async function showSelectUSIEngineDialog(): Promise<string> {\n  return await getAPI().showSelectUSIEngineDialog();\n}\n\nexport async function getUSIEngineInfo(\n  path: string\n): Promise<USIEngineSetting> {\n  return JSON.parse(await getAPI().getUSIEngineInfo(path));\n}\n\nexport async function startResearch(\n  researchSetting: ResearchSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startResearch(JSON.stringify(researchSetting), sessionID);\n}\n\nexport async function endResearch(): Promise<void> {\n  await getAPI().endResearch();\n}\n\nexport async function startGame(\n  gameSetting: GameSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startGame(JSON.stringify(gameSetting), sessionID);\n}\n\nexport async function endGame(\n  usi: string,\n  specialMove?: SpecialMove\n): Promise<void> {\n  await getAPI().endGame(usi, specialMove);\n}\n\nexport async function updateUSIPosition(\n  usi: string,\n  gameSetting: GameSetting,\n  blackTimeMs: number,\n  whiteTimeMs: number\n): Promise<void> {\n  await getAPI().updateUSIPosition(\n    usi,\n    JSON.stringify(gameSetting),\n    blackTimeMs,\n    whiteTimeMs\n  );\n}\n\nexport async function stopUSI(color: Color): Promise<void> {\n  await getAPI().stopUSI(color);\n}\n\nexport async function sendUSISetOption(\n  path: string,\n  name: string\n): Promise<void> {\n  await getAPI().sendUSISetOption(path, name);\n}\n\nexport function setup(store: Store<State>): void {\n  const api = getAPI();\n  api.onSendError((e: Error) => {\n    store.commit(Mutation.PUSH_ERROR, e);\n  });\n  api.onMenuEvent((event: MenuEvent) => {\n    if (store.getters.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.commit(Mutation.NEW_RECORD);\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.dispatch(Action.OPEN_RECORD);\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.dispatch(Action.SAVE_RECORD, { overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.dispatch(Action.SAVE_RECORD);\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.dispatch(Action.COPY_RECORD);\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.commit(Mutation.REMOVE_RECORD_AFTER);\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.dispatch(Action.START_POSITION_EDITING);\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.dispatch(Action.END_POSITION_EDITING);\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.commit(Mutation.CHANGE_TURN);\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.STANDARD\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_RIGHT_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_BISHOP\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_2PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_4PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_6PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_8PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.TSUME_SHOGI\n        );\n        break;\n      case MenuEvent.START_GAME:\n        store.commit(Mutation.SHOW_GAME_DIALOG);\n        break;\n      case MenuEvent.STOP_GAME:\n        store.dispatch(Action.STOP_GAME);\n        break;\n      case MenuEvent.RESIGN:\n        store.dispatch(Action.RESIGN_BY_USER);\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.dispatch(Action.STOP_RESEARCH);\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.commit(Mutation.FLIP_BOARD);\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n        break;\n    }\n  });\n  api.onUSIBestMove(\n    (sessionID: number, usi: string, color: Color, sfen: string) => {\n      store.dispatch(Action.DO_MOVE_BY_USI_ENGINE, {\n        sessionID,\n        usi,\n        color,\n        sfen,\n      });\n    }\n  );\n  api.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.dispatch(Action.UPDATE_USI_INFO, {\n        sessionID,\n        usi,\n        sender,\n        name,\n        info: JSON.parse(json),\n      });\n    }\n  );\n  watch(\n    () => [store.state.mode, store.getters.isBussy],\n    ([mode, bussy]) => {\n      api.updateMenuState(mode as Mode, bussy as boolean);\n    }\n  );\n  api.updateMenuState(store.state.mode, store.getters.isBussy);\n}\n","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","export enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"先手\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"後手\";\n    case USIInfoSender.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n","import { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MAX_SCORE = 2000;\n\nexport const MIN_SCORE = -MAX_SCORE;\n\nexport class RecordEntryCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  private updateScore(\n    color: Color,\n    sender: USIInfoSender,\n    score: number\n  ): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] =\n          color === Color.BLACK ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.scoreCP) {\n      this.updateScore(\n        color,\n        sender,\n        Math.min(Math.max(command.scoreCP, MIN_SCORE), MAX_SCORE)\n      );\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MAX_SCORE : MIN_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n","export enum Mutation {\n  UPDATE_APP_SETTING = \"updateAppSetting\",\n  FLIP_BOARD = \"flipBoard\",\n\n  SHOW_PASTE_DIALOG = \"showPasteDialog\",\n  CLOSE_PASTE_DIALOG = \"closePasteDialog\",\n  SHOW_GAME_DIALOG = \"showGameDialog\",\n  SHOW_RESEARCH_DIALOG = \"showResearchDialog\",\n  OPEN_APP_SETTING_DIALOG = \"openAppSettingDialog\",\n  OPEN_USI_ENGINE_MANAGEMENT_DIALOG = \"openUSIEngineManagementDialog\",\n  CLOSE_DIALOG = \"closeDialog\",\n\n  NEW_RECORD = \"newRecord\",\n  UPDATE_RECORD_COMMENT = \"updateRecordComment\",\n\n  CHANGE_TURN = \"changeTurn\",\n  INITIALIZE_POSITION = \"initializePosition\",\n  EDIT_POSITION = \"editPosition\",\n\n  CHANGE_MOVE_NUMBER = \"changeMoveNumber\",\n  CHANGE_BRANCH = \"changeBranch\",\n  REMOVE_RECORD_AFTER = \"removeRecordAfter\",\n\n  DO_MOVE = \"move\",\n  CLEAR_GAME_TIMER = \"clearGameTimer\",\n\n  // usi\n  UPDATE_USI_INFO = \"updateUSIInfo\",\n\n  // message\n  PUSH_MESSAGE = \"pushMessage\",\n  SHIFT_MESSAGE = \"shiftMessage\",\n\n  // error\n  PUSH_ERROR = \"pushError\",\n  CLEAR_ERRORS = \"clearErrors\",\n\n  // bussy\n  RETAIN_BUSSY_STATE = \"retainBussyState\",\n  RELEASE_BUSSY_STATE = \"releaseBussyState\",\n}\n","export enum Action {\n  UPDATE_APP_SETTING = \"updateAppSetting\",\n\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n\n  UPDATE_USI_INFO = \"updateUsiInfo\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN_BY_USER = \"resign\",\n  DO_MOVE_BY_USER = \"doMoveByUser\",\n  DO_MOVE_BY_USI_ENGINE = \"doMoveByUSIEngine\",\n  RESET_GAME_TIMER = \"resetGameTimer\",\n\n  BEEP_UNLIMITED = \"beepUnlimited\",\n  BEEP_SHORT = \"beepShort\",\n}\n","import { defaultGameSetting, GameSetting } from \"@/settings/game\";\nimport { Color } from \"@/shogi\";\n\nexport type PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\ntype TimerHandlers = {\n  timeout: () => void;\n  onBeepShort: () => void;\n  onBeepUnlimited: () => void;\n};\n\nexport class GameState {\n  private black: PlayerState;\n  private white: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private _setting: GameSetting;\n\n  constructor() {\n    this.black = { timeMs: 0, byoyomi: 0 };\n    this.white = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this._setting = defaultGameSetting();\n  }\n\n  get blackTimeMs(): number {\n    return this.black.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.black.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.white.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.white.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  setup(setting: GameSetting): void {\n    this.black.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.black.byoyomi = setting.timeLimit.byoyomi;\n    this.white.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.white.byoyomi = setting.timeLimit.byoyomi;\n    this._setting = setting;\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.black;\n      case Color.WHITE:\n        return this.white;\n    }\n  }\n\n  startTimer(color: Color, handlers: TimerHandlers): void {\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.setting.timeLimit.byoyomi;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.setting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        handlers.timeout();\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          handlers.onBeepShort();\n        }\n      } else if (!this.setting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  increment(color: Color): void {\n    this.getPlayerState(color).timeMs += this.setting.timeLimit.increment * 1e3;\n  }\n\n  clearTimer(): void {\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n    this._elapsedMs = 0;\n  }\n}\n","import { Record, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(record: Record): string {\n  const date = record.metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return (\n      date.trim().replaceAll(\" \", \"_\").replaceAll(\"/\", \"\").replaceAll(\":\", \"\") +\n      \".kif\"\n    );\n  }\n  return (\n    new Date()\n      .toLocaleDateString(undefined, {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n      })\n      .replaceAll(\"/\", \"\") + \".kif\"\n  );\n}\n","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type BussyState = {\n  count: number;\n};\n\nexport const bussyState: Module<BussyState, State> = {\n  state: {\n    count: 0,\n  },\n  getters: {\n    isBussy(state): boolean {\n      return state.count !== 0;\n    },\n  },\n  mutations: {\n    [Mutation.RETAIN_BUSSY_STATE](state) {\n      state.count += 1;\n    },\n    [Mutation.RELEASE_BUSSY_STATE](state) {\n      state.count -= 1;\n    },\n  },\n};\n","import { ImmutablePosition, Move } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type USIIteration = {\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n\n  constructor(public name: string) {\n    this.iterates = [];\n  }\n\n  update(position: ImmutablePosition, update: USIInfoCommand): void {\n    const iterate: USIIteration = {};\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = formatPV(position, update.pv);\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      this.iterates.unshift(iterate);\n    }\n  }\n}\n\nexport type USIState = {\n  sessionID?: number;\n  blackPlayer?: USIPlayerMonitor;\n  blackPosition?: string;\n  whitePlayer?: USIPlayerMonitor;\n  whitePosition?: string;\n  researcher?: USIPlayerMonitor;\n  researchPosition?: string;\n};\n\nexport const usiState: Module<USIState, State> = {\n  mutations: {\n    [Mutation.UPDATE_USI_INFO](\n      state,\n      payload: {\n        sessionID: number;\n        position: ImmutablePosition;\n        sender: USIInfoSender;\n        name: string;\n        info: USIInfoCommand;\n      }\n    ) {\n      if (state.sessionID != payload.sessionID) {\n        state.blackPlayer = undefined;\n        state.whitePlayer = undefined;\n        state.researcher = undefined;\n        state.sessionID = payload.sessionID;\n      }\n\n      switch (payload.sender) {\n        case USIInfoSender.BLACK_PLAYER:\n          if (\n            !state.blackPlayer ||\n            state.blackPosition !== payload.position.sfen\n          ) {\n            state.blackPlayer = new USIPlayerMonitor(payload.name);\n            state.blackPosition = payload.position.sfen;\n          }\n          state.blackPlayer.update(payload.position, payload.info);\n          break;\n        case USIInfoSender.WHITE_PLAYER:\n          if (\n            !state.whitePlayer ||\n            state.whitePosition !== payload.position.sfen\n          ) {\n            state.whitePlayer = new USIPlayerMonitor(payload.name);\n            state.whitePosition = payload.position.sfen;\n          }\n          state.whitePlayer.update(payload.position, payload.info);\n          break;\n        case USIInfoSender.RESEARCHER:\n          if (\n            !state.researcher ||\n            state.researchPosition !== payload.position.sfen\n          ) {\n            state.researcher = new USIPlayerMonitor(payload.name);\n            state.researchPosition = payload.position.sfen;\n          }\n          state.researcher.update(payload.position, payload.info);\n          break;\n      }\n    },\n  },\n};\n","export enum Mode {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  APP_SETTING_DIALOG = \"appSettingDialog\",\n}\n","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type MessageState = {\n  queue: string[];\n};\n\nexport const messageState: Module<MessageState, State> = {\n  state: {\n    queue: [],\n  },\n  getters: {\n    hasMessage(state): boolean {\n      return state.queue.length !== 0;\n    },\n    message(state): string {\n      return state.queue[0];\n    },\n  },\n  mutations: {\n    [Mutation.PUSH_MESSAGE](state, message: string) {\n      state.queue.push(message);\n    },\n    [Mutation.SHIFT_MESSAGE](state) {\n      state.queue.shift();\n    },\n  },\n};\n","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type ErrorState = {\n  queue: Error[];\n};\n\nexport const errorState: Module<ErrorState, State> = {\n  state: {\n    queue: [],\n  },\n  getters: {\n    hasError(state): boolean {\n      return state.queue.length !== 0;\n    },\n  },\n  mutations: {\n    [Mutation.PUSH_ERROR](state, e) {\n      if (e instanceof Error) {\n        state.queue.push(e);\n      } else {\n        state.queue.push(new Error(e));\n      }\n    },\n    [Mutation.CLEAR_ERRORS](state) {\n      state.queue = [];\n    },\n  },\n};\n","import {\n  endGame,\n  endResearch,\n  openRecord,\n  saveAppSetting,\n  saveGameSetting,\n  saveRecord,\n  saveResearchSetting,\n  showOpenRecordDialog,\n  showSaveRecordDialog,\n  startGame,\n  startResearch,\n  stopUSI,\n  updateUSIPosition,\n} from \"@/ipc/renderer\";\nimport {\n  Color,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n} from \"@/shogi\";\nimport { exportKakinoki, importKakinoki } from \"@/shogi\";\nimport { InjectionKey, watch } from \"vue\";\nimport {\n  CommitOptions,\n  createStore,\n  DispatchOptions,\n  useStore as baseUseStore,\n} from \"vuex\";\nimport iconv from \"iconv-lite\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { RecordEntryCustomData } from \"./record\";\nimport { GameState } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mutation } from \"./mutation\";\nimport { Action } from \"./action\";\nimport { BussyState, bussyState } from \"./bussy\";\nimport { USIState, usiState } from \"./usi\";\nimport { Mode } from \"./mode\";\nimport { messageState, MessageState } from \"./message\";\nimport { errorState, ErrorState } from \"./error\";\nimport * as uri from \"@/uri\";\n\nexport { Mutation } from \"./mutation\";\nexport { Action } from \"./action\";\n\nexport type State = {\n  appSetting: AppSetting;\n  recordFilePath?: string;\n  record: Record;\n  mode: Mode;\n  usiSessionID: number;\n  game: GameState;\n  beep5sHandler?: AudioEventHandler;\n};\n\ninterface Store {\n  readonly state: State & {\n    readonly usi: USIState;\n    readonly message: MessageState;\n    readonly error: ErrorState;\n    readonly bussy: BussyState;\n  };\n  readonly getters: {\n    readonly isMovableByUser: boolean;\n    readonly hasMessage: boolean;\n    readonly message: string;\n    readonly hasError: boolean;\n    readonly isBussy: boolean;\n  };\n  dispatch(\n    type: Action,\n    payload?: any,\n    options?: DispatchOptions\n  ): Promise<any>;\n  commit(type: Mutation, payload?: any, options?: CommitOptions): void;\n}\n\nexport const key: InjectionKey<Store> = Symbol();\n\nexport function useStore(): Store {\n  return baseUseStore(key);\n}\n\nexport const store = createStore<State>({\n  state: {\n    appSetting: defaultAppSetting(),\n    record: new Record(),\n    mode: Mode.NORMAL,\n    usiSessionID: 0,\n    game: new GameState(),\n  },\n  modules: {\n    usi: usiState,\n    message: messageState,\n    error: errorState,\n    bussy: bussyState,\n  },\n  getters: {\n    isMovableByUser(state): boolean {\n      switch (state.mode) {\n        case Mode.NORMAL:\n        case Mode.RESEARCH:\n          return true;\n        case Mode.GAME:\n          return (\n            (state.record.position.color === Color.BLACK\n              ? state.game.setting.black.uri\n              : state.game.setting.white.uri) === uri.ES_HUMAN\n          );\n      }\n      return false;\n    },\n  },\n  mutations: {\n    [Mutation.UPDATE_APP_SETTING](state, update: AppSettingUpdate) {\n      state.appSetting = {\n        ...state.appSetting,\n        ...update,\n      };\n    },\n    [Mutation.FLIP_BOARD](state) {\n      state.appSetting.boardFlipping = !state.appSetting.boardFlipping;\n      saveAppSetting(state.appSetting);\n    },\n    [Mutation.SHOW_PASTE_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.PASTE_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_PASTE_DIALOG](state) {\n      if (state.mode === Mode.PASTE_DIALOG) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.SHOW_GAME_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.GAME_DIALOG;\n      }\n    },\n    [Mutation.SHOW_RESEARCH_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.RESEARCH_DIALOG;\n      }\n    },\n    [Mutation.OPEN_APP_SETTING_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.APP_SETTING_DIALOG;\n      }\n    },\n    [Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.USI_ENGINE_SETTING_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_DIALOG](state) {\n      if (\n        state.mode === Mode.USI_ENGINE_SETTING_DIALOG ||\n        state.mode === Mode.APP_SETTING_DIALOG ||\n        state.mode === Mode.GAME_DIALOG ||\n        state.mode === Mode.RESEARCH_DIALOG\n      ) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.NEW_RECORD](state) {\n      if (state.mode != Mode.NORMAL) {\n        return;\n      }\n      state.record.clear(new Position());\n      state.recordFilePath = undefined;\n    },\n    [Mutation.UPDATE_RECORD_COMMENT](state, comment: string) {\n      state.record.current.comment = comment;\n    },\n    [Mutation.CHANGE_TURN](state) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = state.record.position.clone();\n      position.setColor(reverseColor(position.color));\n      state.record.clear(position);\n    },\n    [Mutation.INITIALIZE_POSITION](\n      state,\n      initialPositionType: InitialPositionType\n    ) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = new Position();\n      position.reset(initialPositionType);\n      state.record.clear(position);\n    },\n    [Mutation.EDIT_POSITION](state, change: PositionChange) {\n      if (state.mode === Mode.POSITION_EDITING) {\n        const position = state.record.position.clone();\n        position.edit(change);\n        state.record.clear(position);\n      }\n    },\n    [Mutation.CHANGE_MOVE_NUMBER](state, number: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.goto(number);\n    },\n    [Mutation.CHANGE_BRANCH](state, index: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      if (state.record.current.branchIndex === index) {\n        return;\n      }\n      state.record.switchBranchByIndex(index);\n    },\n    [Mutation.REMOVE_RECORD_AFTER](state) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.removeAfter();\n    },\n    [Mutation.DO_MOVE](state, move: Move) {\n      state.record.append(move, {\n        ignoreValidation: true,\n      });\n      state.record.current.setElapsedMs(state.game.elapsedMs);\n      playPieceBeat(state.appSetting.pieceVolume);\n    },\n    [Mutation.CLEAR_GAME_TIMER](state) {\n      state.game.clearTimer();\n      if (state.beep5sHandler) {\n        state.beep5sHandler.stop();\n        state.beep5sHandler = undefined;\n      }\n    },\n  },\n  actions: {\n    async [Action.UPDATE_APP_SETTING](\n      { commit, state },\n      update: AppSettingUpdate\n    ) {\n      await saveAppSetting({\n        ...state.appSetting,\n        ...update,\n      });\n      commit(Mutation.UPDATE_APP_SETTING, update);\n    },\n    async [Action.OPEN_RECORD]({ commit, state }, path) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        if (!path) {\n          path = await showOpenRecordDialog();\n          if (!path) {\n            return false;\n          }\n        }\n        const data = await openRecord(path);\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = path.match(/\\.kif$/)\n            ? iconv.decode(data, \"Shift_JIS\")\n            : data.toString();\n          const recordOrError = importKakinoki(str);\n          if (recordOrError instanceof Record) {\n            state.recordFilePath = path;\n            state.record = recordOrError;\n          } else {\n            commit(Mutation.PUSH_ERROR, recordOrError);\n          }\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の読み込み中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.SAVE_RECORD](\n      { commit, state },\n      options: {\n        overwrite: boolean;\n      }\n    ) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        let path = state.recordFilePath;\n        if (!options?.overwrite || !path) {\n          const defaultPath = defaultRecordFileName(state.record);\n          path = await showSaveRecordDialog(defaultPath);\n          if (!path) {\n            return false;\n          }\n        }\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = exportKakinoki(state.record, {\n            returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n          });\n          const data = path.match(/\\.kif$/)\n            ? iconv.encode(str, \"Shift_JIS\")\n            : Buffer.from(str);\n          await saveRecord(path, data);\n          state.recordFilePath = path;\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の保存中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.COPY_RECORD]({ state }) {\n      const str = exportKakinoki(state.record, {\n        returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n      });\n      navigator.clipboard.writeText(str);\n    },\n    [Action.PASTE_RECORD]({ state, commit }, data: string) {\n      if (state.mode !== Mode.NORMAL) {\n        return;\n      }\n      const recordOrError = importKakinoki(data);\n      if (recordOrError instanceof Record) {\n        state.recordFilePath = undefined;\n        state.record = recordOrError;\n      } else {\n        commit(Mutation.PUSH_ERROR, recordOrError);\n      }\n    },\n    [Action.START_POSITION_EDITING]({ state }) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.POSITION_EDITING;\n        state.record.clear(state.record.position);\n        state.recordFilePath = undefined;\n      }\n    },\n    [Action.END_POSITION_EDITING]({ state }) {\n      // FIXME: 局面整合性チェック\n      if (state.mode === Mode.POSITION_EDITING) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Action.UPDATE_USI_INFO](\n      { state, commit },\n      payload: {\n        sessionID: number;\n        usi: string;\n        sender: USIInfoSender;\n        name: string;\n        info: InfoCommand;\n      }\n    ) {\n      if (\n        state.usiSessionID !== payload.sessionID ||\n        state.record.usi != payload.usi\n      ) {\n        return;\n      }\n      commit(Mutation.UPDATE_USI_INFO, {\n        sessionID: payload.sessionID,\n        position: state.record.position,\n        sender: payload.sender,\n        name: payload.name,\n        info: payload.info,\n      });\n      const entryData = new RecordEntryCustomData(\n        state.record.current.customData\n      );\n      entryData.updateUSIInfo(\n        state.record.position.color,\n        payload.sender,\n        payload.info\n      );\n      state.record.current.customData = entryData.stringify();\n    },\n    async [Action.START_RESEARCH](\n      { commit, state },\n      researchSetting: ResearchSetting\n    ) {\n      if (state.mode !== Mode.RESEARCH_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveResearchSetting(researchSetting);\n        state.usiSessionID += 1;\n        await startResearch(researchSetting, state.usiSessionID);\n        state.mode = Mode.RESEARCH;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_RESEARCH]({ commit, state }) {\n      if (state.mode !== Mode.RESEARCH) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endResearch();\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.START_GAME]({ commit, state }, setting: GameSetting) {\n      if (state.mode !== Mode.GAME_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveGameSetting(setting);\n        if (setting.startPosition) {\n          const position = new Position();\n          position.reset(setting.startPosition);\n          state.record.clear(position);\n          state.recordFilePath = undefined;\n        }\n        state.usiSessionID += 1;\n        await startGame(setting, state.usiSessionID);\n        state.game.setup(setting);\n        state.mode = Mode.GAME;\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.BLACK_NAME,\n          setting.black.name\n        );\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.WHITE_NAME,\n          setting.white.name\n        );\n        if (setting.humanIsFront) {\n          let flip = state.appSetting.boardFlipping;\n          if (\n            setting.black.uri === uri.ES_HUMAN &&\n            setting.white.uri !== uri.ES_HUMAN\n          ) {\n            flip = false;\n          } else if (\n            setting.black.uri !== uri.ES_HUMAN &&\n            setting.white.uri === uri.ES_HUMAN\n          ) {\n            flip = true;\n          }\n          if (flip !== state.appSetting.boardFlipping) {\n            commit(Mutation.FLIP_BOARD);\n          }\n        }\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_GAME]({ commit, state }, specialMove?: SpecialMove) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (specialMove) {\n        commit(\n          Mutation.PUSH_MESSAGE,\n          `対局終了（${specialMoveToDisplayString(specialMove)})`\n        );\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endGame(state.record.usi, specialMove);\n        state.record.append(specialMove || SpecialMove.INTERRUPT);\n        state.record.current.setElapsedMs(state.game.elapsedMs);\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.RESIGN_BY_USER]({ state, getters, dispatch }) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (!getters.isMovableByUser) {\n        return;\n      }\n      return dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n    },\n    [Action.DO_MOVE_BY_USER]({ commit, state, getters }, move: Move) {\n      if (!getters.isMovableByUser) {\n        return false;\n      }\n      if (state.mode === Mode.GAME) {\n        state.game.increment(state.record.position.color);\n      }\n      commit(Mutation.DO_MOVE, move);\n      return true;\n    },\n    [Action.DO_MOVE_BY_USI_ENGINE](\n      { commit, dispatch, state },\n      payload: {\n        sessionID: number;\n        usi: string;\n        color: Color;\n        sfen: string;\n      }\n    ) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (state.usiSessionID !== payload.sessionID) {\n        return false;\n      }\n      if (state.record.usi !== payload.usi) {\n        return false;\n      }\n      if (payload.color !== state.record.position.color) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"手番ではないエンジンから指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      if (payload.sfen === \"resign\") {\n        dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n        return true;\n      }\n      if (payload.sfen === \"win\") {\n        // TODO: 勝ち宣言が正当かどうかをチェックする。\n        dispatch(Action.STOP_GAME, SpecialMove.ENTERING_OF_KING);\n        return true;\n      }\n      const move = state.record.position.createMoveBySFEN(payload.sfen);\n      if (!move || !state.record.position.isValidMove(move)) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"エンジンから不明な指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      state.game.increment(state.record.position.color);\n      commit(Mutation.DO_MOVE, move);\n      return true;\n    },\n    [Action.RESET_GAME_TIMER]({ dispatch, getters, state }) {\n      const color = state.record.position.color;\n      state.game.startTimer(color, {\n        timeout: () => {\n          if (\n            getters.isMovableByUser ||\n            state.game.setting.enableEngineTimeout\n          ) {\n            dispatch(Action.STOP_GAME, SpecialMove.TIMEOUT);\n          } else {\n            stopUSI(color);\n          }\n        },\n        onBeepShort: () => {\n          dispatch(Action.BEEP_SHORT);\n        },\n        onBeepUnlimited: () => {\n          dispatch(Action.BEEP_UNLIMITED);\n        },\n      });\n    },\n    [Action.BEEP_UNLIMITED]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      state.beep5sHandler = beepUnlimited({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n    [Action.BEEP_SHORT]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      beepShort({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n  },\n});\n\nwatch(\n  [() => store.state.mode, () => store.state.record.position],\n  () => {\n    store.commit(Mutation.CLEAR_GAME_TIMER);\n    if (store.state.mode === Mode.GAME) {\n      store.dispatch(Action.RESET_GAME_TIMER);\n    }\n    if (store.state.mode === Mode.GAME || store.state.mode === Mode.RESEARCH) {\n      updateUSIPosition(\n        store.state.record.usi,\n        store.state.game.setting,\n        store.state.game.blackTimeMs,\n        store.state.game.whiteTimeMs\n      );\n    }\n  },\n  { deep: true }\n);\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  CHART = \"chart\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"ButtonIcon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./ButtonIcon.vue?vue&type=template&id=2be1683b&ts=true\"\nimport script from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport {\n  InitialPositionType,\n  Move,\n  PositionChange,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Mode } from \"@/store/mode\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  components: {\n    BoardView,\n    ButtonIcon,\n  },\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore();\n\n    const onMove = (move: Move) => {\n      store.dispatch(Action.DO_MOVE_BY_USER, move);\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.commit(Mutation.EDIT_POSITION, change);\n    };\n\n    const onGame = () => {\n      store.commit(Mutation.SHOW_GAME_DIALOG);\n    };\n\n    const onStop = () => {\n      store.dispatch(Action.STOP_GAME);\n    };\n\n    const onResign = () => {\n      store.dispatch(Action.RESIGN_BY_USER);\n    };\n\n    const onResearch = () => {\n      store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n    };\n\n    const onEndResearch = () => {\n      store.dispatch(Action.STOP_RESEARCH);\n    };\n\n    const onStartEditPosition = () => {\n      store.dispatch(Action.START_POSITION_EDITING);\n    };\n\n    const onEndEditPosition = () => {\n      store.dispatch(Action.END_POSITION_EDITING);\n    };\n\n    const onInitPositionStandard = () => {\n      store.commit(Mutation.INITIALIZE_POSITION, InitialPositionType.STANDARD);\n    };\n\n    const onInitPositionTsumeShogi = () => {\n      store.commit(\n        Mutation.INITIALIZE_POSITION,\n        InitialPositionType.TSUME_SHOGI\n      );\n    };\n\n    const onChangeTurn = () => {\n      store.commit(Mutation.CHANGE_TURN);\n    };\n\n    const onOpenAppSettings = () => {\n      store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n    };\n\n    const onOpenEngineSettings = () => {\n      store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n    };\n\n    const onFlip = () => {\n      store.commit(Mutation.FLIP_BOARD);\n    };\n\n    const onPaste = () => {\n      store.commit(Mutation.SHOW_PASTE_DIALOG);\n    };\n\n    const onCopy = () => {\n      store.dispatch(Action.COPY_RECORD);\n    };\n\n    const onRemoveAfter = () => {\n      store.commit(Mutation.REMOVE_RECORD_AFTER);\n    };\n\n    const allowEdit = computed(\n      () => store.state.mode === Mode.POSITION_EDITING\n    );\n\n    const allowMove = computed(() => store.getters.isMovableByUser);\n\n    const position = computed(() => store.state.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.state.record.current.move;\n      return move instanceof Move ? move : null;\n    });\n\n    const layout = computed(() => store.state.appSetting.boardLayout);\n\n    const flip = computed(() => store.state.appSetting.boardFlipping);\n\n    const blackPlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.blackTimeMs : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.blackByoyomi : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.whiteTimeMs : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.whiteByoyomi : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.state.mode === Mode.NORMAL,\n        stop: store.state.mode === Mode.GAME,\n        resign: store.state.mode === Mode.GAME && store.getters.isMovableByUser,\n        research: store.state.mode === Mode.NORMAL,\n        endResearch: store.state.mode === Mode.RESEARCH,\n        startEditPosition: store.state.mode === Mode.NORMAL,\n        endEditPosition: store.state.mode === Mode.POSITION_EDITING,\n        initPosition: store.state.mode === Mode.POSITION_EDITING,\n        paste: store.state.mode === Mode.NORMAL,\n        appSettings: store.state.mode === Mode.NORMAL,\n        engineSettings: store.state.mode === Mode.NORMAL,\n      };\n    });\n\n    return {\n      layout,\n      position,\n      lastMove,\n      flip,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPositionStandard,\n      onInitPositionTsumeShogi,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onPaste,\n      onCopy,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=50b0e606&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=50b0e606&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50b0e606\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordView = _resolveComponent(\"RecordView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_RecordView, {\n      class: \"record\",\n      record: _ctx.record,\n      operational: _ctx.isRecordOperational,\n      onGoBegin: _ctx.goBegin,\n      onGoBack: _ctx.goBack,\n      onGoForward: _ctx.goForward,\n      onGoEnd: _ctx.goEnd,\n      onSelectMove: _ctx.selectMove,\n      onSelectBranch: _ctx.selectBranch\n    }, null, 8, [\"record\", \"operational\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-77f25fc0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"selected\", \"value\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"selected\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"first\"\n          })\n        ], 8, _hoisted_3),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"back\"\n          })\n        ], 8, _hoisted_4),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"next\"\n          })\n        ], 8, _hoisted_5),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          disabled: !_ctx.operational,\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd()))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"last\"\n          })\n        ], 8, _hoisted_6)\n      ]),\n      _createElementVNode(\"select\", {\n        ref: \"moveList\",\n        class: \"move-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeNumber()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: move.number,\n            selected: move.selected,\n            value: move.number\n          }, _toDisplayString(move.number !== 0 ? move.number + \" \" : \"\") + \" \" + _toDisplayString(move.text) + \" \" + _toDisplayString(move.hasBranch ? \" 分岐\" : \"\"), 9, _hoisted_8))\n        }), 128))\n      ], 40, _hoisted_7),\n      _createElementVNode(\"select\", {\n        ref: \"branchList\",\n        class: \"branch-list\",\n        size: \"2\",\n        disabled: !_ctx.operational,\n        onChange: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeBranch()))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: branch.index,\n            selected: branch.selected,\n            value: branch.index\n          }, _toDisplayString(branch.text), 9, _hoisted_10))\n        }), 128))\n      ], 40, _hoisted_9)\n    ])\n  ]))\n}","\nimport { Record, RecordEntry } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"RecordView\",\n  components: {\n    ButtonIcon,\n  },\n  props: {\n    record: {\n      type: Record,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      context.emit(\"goBegin\");\n    };\n\n    const goBack = () => {\n      context.emit(\"goBack\");\n    };\n\n    const goForward = () => {\n      context.emit(\"goForward\");\n    };\n\n    const goEnd = () => {\n      context.emit(\"goEnd\");\n    };\n\n    const changeNumber = () => {\n      context.emit(\"selectMove\", Number(moveList.value.value));\n    };\n\n    const changeBranch = () => {\n      context.emit(\"selectBranch\", Number(branchList.value.value));\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        text: string;\n        number: number;\n        hasBranch: boolean;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          hasBranch: elem.hasBranch,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin?.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        selected: boolean;\n      }[] = [];\n      let p: RecordEntry | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayMoveText,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n    };\n  },\n});\n","import { render } from \"./RecordView.vue?vue&type=template&id=77f25fc0&scoped=true&ts=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordView.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=77f25fc0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-77f25fc0\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordView from \"@/components/primitive/RecordView.vue\";\nimport { Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    RecordView,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.commit(Mutation.CHANGE_MOVE_NUMBER, number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.state.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.state.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.commit(Mutation.CHANGE_BRANCH, index);\n    };\n\n    const isRecordOperational = computed(() => {\n      return (\n        store.state.mode === Mode.NORMAL || store.state.mode === Mode.RESEARCH\n      );\n    });\n\n    const record = computed(() => store.state.record);\n\n    return {\n      isRecordOperational,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=24ce2f02&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=24ce2f02&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24ce2f02\"]])\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-deb9d856\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 棋譜コメント \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 形勢グラフ \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"tab-border\" }, null, -1))\nconst _hoisted_8 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"minimize-padding\", { enabled: _ctx.activeTab === 'invisible' }])\n      }, null, 2),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'comment' }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect('comment')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"comment\"\n          }),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'search' }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect('search')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"brain\"\n          }),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'chart' }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect('chart')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"chart\"\n          }),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'invisible' }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect('invisible')))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: \"arrowDrop\"\n          }),\n          _hoisted_6\n        ], 2)\n      ]),\n      _hoisted_7,\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'comment' }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'search' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'chart' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-37121ece\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.state.record.current.comment);\n    const readonly = computed(() => store.state.mode != Mode.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.commit(Mutation.UPDATE_RECORD_COMMENT, comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=37121ece&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=37121ece&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37121ece\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-dbaf3902\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.infos.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            name: _ctx.infos.blackPlayer.name,\n            info: _ctx.infos.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            name: _ctx.infos.whitePlayer.name,\n            info: _ctx.infos.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            name: _ctx.infos.researcher.name,\n            info: _ctx.infos.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-a0197d80\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-a0197d80><div class=\\\"list-column time\\\" data-v-a0197d80>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-a0197d80>順位</div><div class=\\\"list-column depth\\\" data-v-a0197d80>深さ</div><div class=\\\"list-column score\\\" data-v-a0197d80>評価値</div></div>\", 1)\nconst _hoisted_19 = { class: \"list-column time\" }\nconst _hoisted_20 = { class: \"list-column multipv-index\" }\nconst _hoisted_21 = { class: \"list-column depth\" }\nconst _hoisted_22 = { class: \"list-column score\" }\nconst _hoisted_23 = { class: \"list-column score-flag\" }\nconst _hoisted_24 = { class: \"list-column text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_18,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 36}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.info.iterates, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: \"list-item\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_21, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.text), 1)\n          ]))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}","\nimport { USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=a0197d80&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=a0197d80&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a0197d80\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/analytics/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const infos = computed(() => store.state.usi);\n    const elementHeight = computed(() => {\n      const n =\n        (store.state.usi.blackPlayer ? 1 : 0) +\n        (store.state.usi.whitePlayer ? 1 : 0) +\n        (store.state.usi.researcher ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      infos,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=dbaf3902&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=dbaf3902&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dbaf3902\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4e9d2ad3\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { Mutation, useStore } from \"@/store\";\nimport { MAX_SCORE, MIN_SCORE, RecordEntryCustomData } from \"@/store/record\";\nimport { defineComponent, onMounted, onUnmounted, ref, Ref, watch } from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/usi/info\";\nimport { Record } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: Record\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((entry) => {\n        const data = new RecordEntryCustomData(entry.customData);\n        const value = data.evaluation && data.evaluation[sender];\n        if (value) {\n          dataPoints.push({\n            x: entry.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: Record) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: \"red\",\n        data: [\n          { x: record.current.number, y: MAX_SCORE },\n          { x: record.current.number, y: MIN_SCORE },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (record: Record) => {\n      return [\n        verticalLine(record),\n        buildDataset(\"royalblue\", USIInfoSender.BLACK_PLAYER, record),\n        buildDataset(\"darkorange\", USIInfoSender.WHITE_PLAYER, record),\n        buildDataset(\"darkgreen\", USIInfoSender.RESEARCHER, record),\n      ];\n    };\n\n    const buildScalesOption = (record: Record) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n        },\n        y: {\n          min: MIN_SCORE,\n          max: MAX_SCORE,\n        },\n      };\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.commit(Mutation.CHANGE_MOVE_NUMBER, number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: buildDatasets(store.state.record),\n        },\n        options: {\n          color: \"black\",\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.state.record],\n      ([record]) => {\n        chart.data.datasets = buildDatasets(record);\n        chart.options.scales = buildScalesOption(record);\n        chart.update();\n      },\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=4e9d2ad3&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=4e9d2ad3&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e9d2ad3\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/analytics/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/analytics/EngineAnalytics.vue\";\nimport EvaluationChart from \"@/components/analytics/EvaluationChart.vue\";\nimport { Action, useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"InformationPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    ButtonIcon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: string) => {\n      store.dispatch(Action.UPDATE_APP_SETTING, {\n        informationTab: id,\n      });\n    };\n    const activeTab = computed(() => store.state.appSetting.informationTab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      changeSelect,\n    };\n  },\n});\n","import { render } from \"./InformationPane.vue?vue&type=template&id=deb9d856&scoped=true&ts=true\"\nimport script from \"./InformationPane.vue?vue&type=script&lang=ts\"\nexport * from \"./InformationPane.vue?vue&type=script&lang=ts\"\n\nimport \"./InformationPane.vue?vue&type=style&index=0&id=deb9d856&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-deb9d856\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  Ref,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport InformationPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minInformationHeight,\n} from \"./InformationPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { InformationTab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    InformationPane,\n  },\n  setup() {\n    const store = useStore();\n    const windowSize = reactive(new RectSize(0, 0));\n    const topPaneHeight = ref(0);\n    const topPane: Ref = ref(null);\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    const topPaneResizeObserver = new ResizeObserver((entries) => {\n      topPaneHeight.value = entries[0].contentRect.height;\n    });\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.observe(topPane.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.disconnect();\n    });\n\n    const boardPaneMaxSize = computed(() => {\n      const minInformationPaneHeight =\n        store.state.appSetting.informationTab !== InformationTab.INVISIBLE\n          ? minInformationHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minInformationPaneHeight\n      );\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - topPaneHeight.value\n      );\n    });\n\n    return {\n      topPane,\n      boardPaneMaxSize,\n      bottomPaneSize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=8bad9680&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=8bad9680&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8bad9680\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-dfe3350c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"player\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"players-control\" }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" 先後入れ替え \")\nconst _hoisted_15 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_16 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_17 = { class: \"dialog-form-item\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_19 = [\"value\"]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_23 = { class: \"dialog-form-item\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_25 = [\"value\"]\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_27 = { class: \"dialog-form-item\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_31 = { class: \"dialog-form-area flags\" }\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = [\"value\"]\nconst _hoisted_34 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-dfe3350c>現在の局面</option><option value=\\\"standard\\\" data-v-dfe3350c>平手</option><option value=\\\"handicapLance\\\" data-v-dfe3350c>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-dfe3350c>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-dfe3350c>角落ち</option><option value=\\\"handicapRook\\\" data-v-dfe3350c>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-dfe3350c>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-dfe3350c>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-dfe3350c>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-dfe3350c>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-dfe3350c>8枚落ち</option>\", 11)\nconst _hoisted_45 = [\n  _hoisted_34\n]\nconst _hoisted_46 = { class: \"dialog-form-item\" }\nconst _hoisted_47 = [\"checked\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_49 = { class: \"dialog-form-item\" }\nconst _hoisted_50 = [\"checked\"]\nconst _hoisted_51 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"人を手前に表示する\", -1))\nconst _hoisted_52 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createElementVNode(\"select\", {\n              ref: \"blackPlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.black.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ]),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _hoisted_10,\n            _createElementVNode(\"select\", {\n              ref: \"whitePlayerSelect\",\n              class: \"player-select\",\n              size: \"1\",\n              value: _ctx.defaultValues.white.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_12))\n              }), 128))\n            ], 8, _hoisted_11)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: \"swap_h\"\n            }),\n            _hoisted_14\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"div\", _hoisted_17, [\n            _hoisted_18,\n            _createElementVNode(\"input\", {\n              ref: \"hours\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.hours\n            }, null, 8, _hoisted_19),\n            _hoisted_20,\n            _createElementVNode(\"input\", {\n              ref: \"minutes\",\n              class: \"time-input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"59\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.minutes\n            }, null, 8, _hoisted_21),\n            _hoisted_22\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _hoisted_24,\n            _createElementVNode(\"input\", {\n              ref: \"byoyomi\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"60\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.byoyomi\n            }, null, 8, _hoisted_25),\n            _hoisted_26\n          ]),\n          _createElementVNode(\"div\", _hoisted_27, [\n            _hoisted_28,\n            _createElementVNode(\"input\", {\n              ref: \"increment\",\n              class: \"time-input single\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.increment\n            }, null, 8, _hoisted_29),\n            _hoisted_30\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createElementVNode(\"div\", _hoisted_32, [\n            _createElementVNode(\"select\", {\n              ref: \"startPosition\",\n              value: _ctx.defaultValues.startPosition\n            }, _hoisted_45, 8, _hoisted_33)\n          ]),\n          _createElementVNode(\"div\", _hoisted_46, [\n            _createElementVNode(\"input\", {\n              id: \"disable-engine-timeout\",\n              ref: \"enableEngineTimeout\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.enableEngineTimeout\n            }, null, 8, _hoisted_47),\n            _hoisted_48\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _createElementVNode(\"input\", {\n              id: \"human-is-front\",\n              ref: \"humanIsFront\",\n              type: \"checkbox\",\n              checked: _ctx.defaultValues.humanIsFront\n            }, null, 8, _hoisted_50),\n            _hoisted_51\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_52, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport { loadGameSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const blackPlayerSelect: Ref = ref(null);\n    const whitePlayerSelect: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        gameSetting.value = await loadGameSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (uri.isUSIEngine(playerURI)) {\n        const engine = engineSetting.value.getEngine(playerURI);\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerSelect.value.value),\n        white: buildPlayerSetting(whitePlayerSelect.value.value),\n        timeLimit: {\n          timeSeconds: (hours.value.value * 60 + minutes.value.value) * 60,\n          byoyomi: Number(byoyomi.value.value),\n          increment: Number(increment.value.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        humanIsFront: humanIsFront.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.commit(Mutation.PUSH_ERROR, error);\n      } else {\n        store.dispatch(Action.START_GAME, gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerSelect.value.value, whitePlayerSelect.value.value] = [\n        whitePlayerSelect.value.value,\n        blackPlayerSelect.value.value,\n      ];\n    };\n\n    const defaultValues = computed(() => {\n      return {\n        black: { type: gameSetting.value.black.uri },\n        white: { type: gameSetting.value.white.uri },\n        timeLimit: {\n          hours: Math.floor(gameSetting.value.timeLimit.timeSeconds / 3600),\n          minutes:\n            Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60,\n          byoyomi: gameSetting.value.timeLimit.byoyomi,\n          increment: gameSetting.value.timeLimit.increment,\n        },\n        startPosition:\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\",\n        enableEngineTimeout: gameSetting.value.enableEngineTimeout,\n        humanIsFront: gameSetting.value.humanIsFront,\n      };\n    });\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSetting.value.engineList,\n      ];\n    });\n\n    return {\n      dialog,\n      blackPlayerSelect,\n      whitePlayerSelect,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      humanIsFront,\n      defaultValues,\n      players,\n      onStart,\n      onCancel,\n      onSwapColor,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=dfe3350c&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=dfe3350c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dfe3350c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-35a19322\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"エンジン\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item-unit\" }\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"select\", {\n              ref: \"engineSelect\",\n              class: \"engine-select\",\n              size: \"1\",\n              value: _ctx.defaultValue\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: engine.uri,\n                  value: engine.uri\n                }, _toDisplayString(engine.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { loadResearchSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await loadResearchSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.commit(Mutation.PUSH_ERROR, \"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const researchSetting: ResearchSetting = {\n        usi: engine,\n      };\n      store.dispatch(Action.START_RESEARCH, researchSetting);\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValue = computed(() => {\n      if (researchSetting.value.usi) {\n        return researchSetting.value.usi.uri;\n      }\n      return \"\";\n    });\n\n    return {\n      dialog,\n      engineSelect,\n      engines,\n      defaultValue,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=35a19322&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=35a19322&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35a19322\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-38652cd0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: engine.uri,\n              class: \"engine\",\n              value: engine.uri\n            }, [\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \" 設定 \", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \" 削除 \", 8, _hoisted_8)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-50433d61\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  ref: \"engineNameInput\",\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: option.name,\n            class: \"option\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport {\n  getUSIEngineInfo,\n  sendUSISetOption,\n  showSelectFileDialog,\n} from \"@/ipc/renderer\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      rquired: true,\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const store = useStore();\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        const path = await showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? Number(elem.value)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=50433d61&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=50433d61&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50433d61\"]])\n\nexport default __exports__","\nimport {\n  getUSIEngineInfo,\n  loadUSIEngineSetting,\n  saveUSIEngineSetting,\n  showSelectUSIEngineDialog,\n} from \"@/ipc/renderer\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n    const store = useStore();\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        const path = await showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await getUSIEngineInfo(path));\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        await saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.commit(Mutation.CLOSE_DIALOG);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=38652cd0&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=38652cd0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-38652cd0\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d8bd35ec\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"デザイン\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_12 = { class: \"dialog-form-item\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_22 = [\"value\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_25 = [\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            ref: \"boardLayout\",\n            value: _ctx.appSetting.boardLayout\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardLayouts, (layout) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: layout,\n                value: layout.value\n              }, _toDisplayString(layout.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _createElementVNode(\"input\", {\n            ref: \"pieceVolume\",\n            value: _ctx.appSetting.pieceVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\"\n          }, null, 8, _hoisted_10),\n          _hoisted_11\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"input\", {\n            ref: \"clockVolume\",\n            value: _ctx.appSetting.clockVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\"\n          }, null, 8, _hoisted_14),\n          _hoisted_15\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"input\", {\n            ref: \"clockPitch\",\n            value: _ctx.appSetting.clockPitch,\n            type: \"number\",\n            max: \"880\",\n            min: \"220\"\n          }, null, 8, _hoisted_18),\n          _hoisted_19\n        ]),\n        _createElementVNode(\"div\", _hoisted_20, [\n          _hoisted_21,\n          _createElementVNode(\"select\", {\n            ref: \"clockSoundTarget\",\n            value: _ctx.appSetting.clockSoundTarget\n          }, _hoisted_25, 8, _hoisted_22)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_26, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","export function readInputAsNumber(input: HTMLInputElement): number {\n  const value = Number(input.value);\n  const max = Number(input.max);\n  const min = Number(input.min);\n  return Math.min(Math.max(value, min), max);\n}\n","\nimport { BoardLayoutType } from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate } from \"@/settings/app\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const boardLayout: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        boardLayout: boardLayout.value.value,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n      };\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await store.dispatch(Action.UPDATE_APP_SETTING, update);\n        store.commit(Mutation.CLOSE_DIALOG);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const appSetting = computed(() => store.state.appSetting);\n\n    const boardLayouts = [\n      { name: \"一文字駒\", value: BoardLayoutType.HITOMOJI },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: BoardLayoutType.HITOMOJI_GOTHIC,\n      },\n    ];\n\n    return {\n      dialog,\n      boardLayout,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      appSetting,\n      boardLayouts,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=d8bd35ec&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=d8bd35ec&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d8bd35ec\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-01a25e3a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜を取り込みます。\", -1))\nconst _hoisted_5 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_9 = [\n  _hoisted_6,\n  _hoisted_7,\n  _hoisted_8\n]\nconst _hoisted_10 = { ref: \"textarea\" }\nconst _hoisted_11 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _hoisted_9))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_10, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n      if (data) {\n        store.dispatch(Action.PASTE_RECORD, data);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=01a25e3a&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=01a25e3a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01a25e3a\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4939dcf2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"bussy\"\n        }),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"BussyMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n    };\n  },\n});\n","import { render } from \"./BussyMessage.vue?vue&type=template&id=4939dcf2&scoped=true&ts=true\"\nimport script from \"./BussyMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./BussyMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./BussyMessage.vue?vue&type=style&index=0&id=4939dcf2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4939dcf2\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-619a2b23\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"messagebox\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"info\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.getters.message);\n\n    const onClose = () => {\n      store.commit(Mutation.SHIFT_MESSAGE);\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./InfoMessage.vue?vue&type=template&id=619a2b23&scoped=true&ts=true\"\nimport script from \"./InfoMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./InfoMessage.vue?vue&type=style&index=0&id=619a2b23&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-619a2b23\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-520b2a4a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"error\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: \"error\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: error.index,\n              class: \"item\"\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.state.error.queue.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.commit(Mutation.CLEAR_ERRORS);\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=520b2a4a&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=520b2a4a&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=520b2a4a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-520b2a4a\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport BussyMessage from \"@/components/dialog/BussyMessage.vue\";\nimport InfoMessage from \"@/components/dialog/InfoMessage.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    BussyMessage,\n    InfoMessage,\n    ErrorMessage,\n  },\n  setup() {\n    const store = useStore();\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.state.mode === Mode.GAME_DIALOG,\n        research: store.state.mode === Mode.RESEARCH_DIALOG,\n        usiEngineSetting: store.state.mode === Mode.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.state.mode === Mode.APP_SETTING_DIALOG,\n        paste: store.state.mode === Mode.PASTE_DIALOG,\n        processing: store.getters.isBussy,\n      };\n    });\n\n    const hasMessage = computed(() => store.getters.hasMessage);\n\n    const hasErrors = computed(() => store.getters.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.dispatch(Action.COPY_RECORD);\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.dispatch(Action.OPEN_RECORD, path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.state.record.current.number;\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.state.record.current.number;\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, 0);\n        },\n        onArrowRight(): void {\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=36e93dae&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=36e93dae&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi-npm-update\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport {\n  getRecordPathFromProcArg,\n  loadAppSetting,\n  setup as setupIPC,\n} from \"./ipc/renderer\";\nimport { store, key, Mutation, Action } from \"./store\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\nsetupIPC(store);\n\nPromise.allSettled([\n  loadAppSetting()\n    .then((setting) => {\n      store.commit(Mutation.UPDATE_APP_SETTING, setting);\n    })\n    .catch((e) => {\n      store.commit(\n        Mutation.PUSH_ERROR,\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await getRecordPathFromProcArg();\n    if (path) {\n      await store.dispatch(Action.OPEN_RECORD, path);\n    }\n  })(),\n]).finally(() => {\n  createApp(App).use(store, key).mount(\"#app\");\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelectron_shogi\"] = self[\"webpackChunkelectron_shogi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2971); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_BussyMessage","_component_InfoMessage","_component_ErrorMessage","_openBlock","_createElementBlock","_Fragment","_createVNode","class","dialogVisibilities","game","_createBlock","key","_createCommentVNode","research","usiEngineSetting","appSetting","paste","processing","hasMessage","hasErrors","_hoisted_1","_hoisted_2","ref","_component_BoardPane","_component_RecordPane","_component_InformationPane","_createElementVNode","boardPaneMaxSize","size","bottomPaneSize","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_ButtonIcon","_component_BoardView","layout","maxSize","position","lastMove","flip","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","onGame","icon","stop","onStop","resign","onResign","onResearch","endResearch","onEndResearch","startEditPosition","onStartEditPosition","endEditPosition","onEndEditPosition","initPosition","onChangeTurn","onInitPositionStandard","onInitPositionTsumeShogi","disabled","appSettings","onOpenAppSettings","engineSettings","onOpenEngineSettings","onFlip","onPaste","onCopy","onRemoveAfter","_","style","_normalizeStyle","frame","$event","clickFrame","board","src","imagePath","_normalizeClass","active","color","_toDisplayString","blackPlayerTimeSeverity","blackClock","blackPlayerTimeText","whitePlayerTimeSeverity","whiteClock","whitePlayerTimeText","_renderList","square","id","backgroundStyle","piece","clickSquare","file","rank","onContextmenu","clickSquareR","blackHand","pointers","pointer","pieces","clickHand","type","whiteHand","promotion","clickPromote","promoteImagePath","clickNotPromote","notPromoteImagePath","turn","control","left","_renderSlot","$slots","undefined","right","Color","PieceType","reverseColor","BLACK","WHITE","colorToSFEN","isValidSFENColor","sfen","parseSFENColor","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","p","l","n","s","g","b","r","k","sfenCharToColorMap","rotateMap","Map","set","Direction","Piece","this","withColor","get","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","MoveType","directions","movableDirectionMap","black","SHORT","LONG","white","movableDirections","Object","keys","resolveMoveType","direction","directionToDeltaMap","x","y","vectorToDirectionAndDistance","distance","ok","Math","abs","dx","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","arg0","arg1","index","trunc","all","push","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","from","to","promote","pieceType","capturedPieceType","move","equals","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","length","InitialPositionType","sfenCharToNumber","Board","squares","Array","i","reset","STANDARD","square1","square2","tmp","removed","forEach","clear","EMPTY","TSUME_SHOGI","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","at","newByXY","isValidSFEN","rows","split","c","find","target","option","step","neighbor","valid","filled","ignore","rdir","kingColor","findKing","hasPower","buildSFEN","Hand","count","handler","formatSFEN","hand","sfenBlack","w","sfenWhite","match","sections","section","Number","add","invalidRankMap","isInvalidRank","rule","isPromotableRank","pawnExists","RecordMetadataKey","Position","_board","_color","_blackHand","_whiteHand","_hand","capturedPiece","m","createMove","withPromote","kingSquare","movable","listSquaresByColor","isMovable","isCheck","captured","isPromotable","isPawnDropMate","opt","ignoreValidation","isValidMove","remove","promoted","unpromoted","reduce","change","isValidEditing","swap","rotate","getSfen","nextMoveNumber","resetBySFEN","hands","parseSFEN","d","copyFrom","millisecondsToHMMSS","ms","secondsToHMMSS","floor","millisecondsToMSS","secondsToMSS","seconds","h","String","padStart","SpecialMove","RecordMetadata","metadata","customMetadata","value","specialMoveToDisplayStringMap","start","interrupt","draw","repetitionDraw","mate","timeout","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","specialMoveToDisplayString","RecordEntryImpl","number","branchIndex","activeBranch","next","branch","comment","elapsedMs","totalElapsedMs","getDisplayText","displayMoveText","elapsed","totalElapsed","updateTotalElapsedMs","stack","pop","Record","_metadata","_initialPosition","clone","_position","initialPosition","_first","START","_current","moves","movesBefore","_movesBefore","unshift","len","undoMove","doMove","goBack","goForward","_forEach","entry","isFirstBranch","first","lastBranch","LineType","metadataKeyMap","先手","BLACK_NAME","後手","WHITE_NAME","開始日時","START_DATETIME","終了日時","END_DATETIME","対局日","DATE","棋戦","TOURNAMENT","戦型","STRATEGY","表題","TITLE","持ち時間","TIME_LIMIT","消費時間","TIME_SPENT","場所","PLACE","掲載","POSTED_ON","備考","NOTE","先手省略名","BLACK_SHORT_NAME","後手省略名","WHITE_SHORT_NAME","作品番号","OPUS_NO","作品名","OPUS_NAME","作者","AUTHOR","発表誌","PUBLISHED_ON","発表年月","PUBLISHED_AT","出典","SOURCE","手数","LENGTH","完全性","INTEGRITY","分類","CATEGORY","受賞","AWARD","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","date","tournament","strategy","title","timeLimit","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","linePatterns","prefix","HANDICAP","removePrefix","isPosition","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","COMMENT","parseLine","line","end","indexOf","pattern","matched","begin","data","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","trim","Error","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","INTERRUPT","投了","RESIGN","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","TIMEOUT","反則勝ち","FOUL_WIN","反則負け","FOUL_LOSE","入玉勝ち","ENTERING_OF_KING","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","record","timeResult","exec","minutes","parseInt","current","setElapsedMs","readMove","result","num","time","goto","append","toStr","pieceTypeStr","promStr","fromStr","importKakinoki","lines","inMoveSection","parsed","e","standardKey","setStandardMetadata","setCustomMetadata","setColor","console","log","resetAllBranchSelection","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","options","returnCode","standardMetadataKeys","getStandardMetadata","customMetadataKeys","getCustomMetadata","formatPosition","formatHand","formatMove","exportKakinoki","hasBranch","replaceAll","BoardLayoutType","preloadedImages","preloadImage","path","img","document","createElement","templateCommon","width","height","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","fontSize","playerName","clock","templates","hitomoji","images","king2","hitomojiGothic","handLaytoutRule","row","column","LayoutBuilder","layoutType","template","HITOMOJI","values","upperSizeLimit","reservedMoveForPromotion","ratio","buildFrameLayout","buildBoardLayout","top","buildPieceLayout","boardLayout","layouts","listNonEmptySquares","displayColor","opposite","buildSquareLayout","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","max","buildPromotionLayout","notPromoted","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","RectSize","defineComponent","name","props","required","Boolean","emits","setup","context","state","reactive","reservedMove","resetState","watch","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","event","stopPropagation","preventDefault","layoutBuilder","computed","builder","preload","build","formatTime","timeMs","byoyomi","ceil","timeSeverity","rem","__exports__","getUSIEngineOptionCurrentValue","default","mergeUSIEngineSetting","engine","local","uri","MenuEvent","InformationTab","ClockSoundTarget","USIEngineSettings","json","engines","JSON","parse","sort","a","stringify","defaultAppSetting","pieceVolume","clockVolume","clockPitch","clockSoundTarget","ONLY_USER","boardFlipping","informationTab","STORAGE_KEY","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","startsWith","defaultGameSetting","timeSeconds","increment","enableEngineTimeout","humanIsFront","validateGameSetting","gameSetting","defaultResearchSetting","webAPI","getRecordPathFromProcArg","updateMenuState","showOpenRecordDialog","openRecord","showSaveRecordDialog","saveRecord","showSelectFileDialog","loadAppSetting","localStorage","getItem","APP_SETTING","saveAppSetting","setItem","loadResearchSetting","RESEARCH_SETTING","saveResearchSetting","loadGameSetting","GAME_SETTING","saveGameSetting","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","startResearch","startGame","endGame","updateUSIPosition","stopUSI","sendUSISetOption","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","getWindowObject","window","isNative","electronShogiAPI","getAPI","defaultPath","setting","jsonWithIndent","researchSetting","sessionID","usi","specialMove","blackTimeMs","whiteTimeMs","store","api","commit","Mutation","PUSH_ERROR","getters","isBussy","NEW_RECORD","OPEN_RECORD","dispatch","Action","SAVE_RECORD","overwrite","SAVE_RECORD_AS","COPY_RECORD","PASTE_RECORD","SHOW_PASTE_DIALOG","REMOVE_RECORD_AFTER","START_POSITION_EDITING","END_POSITION_EDITING","CHANGE_TURN","INIT_POSITION_STANDARD","INITIALIZE_POSITION","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","START_GAME","SHOW_GAME_DIALOG","STOP_GAME","RESIGN_BY_USER","START_RESEARCH","SHOW_RESEARCH_DIALOG","STOP_RESEARCH","FLIP_BOARD","APP_SETTING_DIALOG","OPEN_APP_SETTING_DIALOG","USI_ENGINE_SETTING_DIALOG","OPEN_USI_ENGINE_MANAGEMENT_DIALOG","DO_MOVE_BY_USI_ENGINE","sender","UPDATE_USI_INFO","info","mode","bussy","lastPieceBeatTime","USIInfoSender","beep","frequency","volume","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","currentTime","beepShort","beepUnlimited","playPieceBeat","Date","now","audio","Audio","play","stringifyUSIInfoSender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","MAX_SCORE","MIN_SCORE","RecordEntryCustomData","obj","evaluation","score","command","scoreCP","updateScore","min","scoreMate","GameState","timerHandle","timerStart","lastTimeMs","_elapsedMs","_setting","handlers","playerState","getPlayerState","setInterval","lastByoyomi","getTime","lastTime","onBeepUnlimited","onBeepShort","clearInterval","defaultRecordFileName","toLocaleDateString","year","month","day","bussyState","mutations","RETAIN_BUSSY_STATE","RELEASE_BUSSY_STATE","formatPV","pv","createMoveBySFEN","Mode","USIPlayerMonitor","iterates","update","iterate","depth","seldepth","selectiveDepth","nodes","multipv","multiPV","lowerbound","lowerBound","upperbound","upperBound","currmove","currentMove","currentMoveText","hashfullPerMill","hashfull","nps","string","usiState","payload","blackPlayer","whitePlayer","researcher","blackPosition","whitePosition","researchPosition","messageState","queue","message","PUSH_MESSAGE","SHIFT_MESSAGE","shift","errorState","hasError","CLEAR_ERRORS","Symbol","useStore","baseUseStore","createStore","NORMAL","usiSessionID","modules","error","isMovableByUser","RESEARCH","GAME","UPDATE_APP_SETTING","PASTE_DIALOG","CLOSE_PASTE_DIALOG","GAME_DIALOG","RESEARCH_DIALOG","CLOSE_DIALOG","recordFilePath","UPDATE_RECORD_COMMENT","POSITION_EDITING","initialPositionType","EDIT_POSITION","edit","CHANGE_MOVE_NUMBER","CHANGE_BRANCH","switchBranchByIndex","removeAfter","DO_MOVE","CLEAR_GAME_TIMER","clearTimer","beep5sHandler","actions","str","iconv","toString","recordOrError","Buffer","navigator","clipboard","writeText","entryData","customData","updateUSIInfo","startPosition","DO_MOVE_BY_USER","RESET_GAME_TIMER","startTimer","BEEP_SHORT","BEEP_UNLIMITED","deep","Icon","iconSourceMap","BUSSY","ERROR","INFO","STOP","END","EDIT","CHECK","SWAP","SWAP_H","SETTINGS","ENGINE_SETTINGS","FLIP","PASTE","COPY","DELETE","BRAIN","CHART","ARROW_DROP","FIRST","BACK","NEXT","LAST","components","BoardView","ButtonIcon","blackByoyomi","whiteByoyomi","_component_RecordView","operational","isRecordOperational","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","changeNumber","changeBranch","branches","moveList","branchList","beginPosSelected","elem","displayText","branchBegin","minWidth","RecordView","MAX_SAFE_INTEGER","_withScopeId","_pushScopeId","_popScopeId","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","enabled","activeTab","changeSelect","contentSize","readonly","textarea","onMounted","addEventListener","_component_EngineAnalyticsElement","infos","elementHeight","_createStaticVNode","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","toFixed","EngineAnalyticsElement","chart","canvasRef","buildDataset","borderColor","dataPoints","label","showLine","verticalLine","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","scales","displayWidth","round","canvas","getContext","Chart","datasets","animation","duration","maintainAspectRatio","events","onUnmounted","destroy","resize","headerHeight","minHeight","RecordComment","EngineAnalytics","EvaluationChart","BoardPane","RecordPane","InformationPane","windowSize","topPaneHeight","topPane","updateSize","innerWidth","innerHeight","topPaneResizeObserver","ResizeObserver","entries","contentRect","observe","removeEventListener","minInformationPaneHeight","INVISIBLE","minInformationHeight","informationHeaderHeight","minRecordWidth","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","for","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","defaultValues","players","player","onSwapColor","hours","checked","onStart","onCancel","showModalDialog","dialog","showModal","getFormItemByID","getElementById","blackPlayerSelect","whitePlayerSelect","engineSetting","buildPlayerSetting","playerURI","getEngine","engineList","defaultValue","engineSelect","hasEngine","_component_USIEngineOptionDialog","openOptions","saveAndClose","cancel","optionDialog","onOk","optionOk","optionCancel","defaultName","inputId","selectFile","vars","v","sendOption","latestEngineSetting","rquired","engineNameInput","latest","aIsUSI","bIsUSI","map","USIEngineOptionDialog","addEngine","removeEngine","updateEngine","boardLayouts","readInputAsNumber","input","HITOMOJI_GOTHIC","readText","onClose","errors","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","BussyMessage","InfoMessage","ErrorMessage","body","getElementsByTagName","dataTransfer","files","moveNumber","registerables","setupIPC","Promise","allSettled","then","catch","finally","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}