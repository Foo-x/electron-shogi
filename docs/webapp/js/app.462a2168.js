(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],d=0,b=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&b.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return R})),n.d(t,"e",(function(){return T})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return y}));var r,i,a,o,c=n("1da1"),s=n("ade3"),u=n("5530"),l=(n("96cf"),n("a4d3"),n("e01a"),n("d3b7"),n("d9e2"),n("ac1f"),n("466d"),n("25f0"),n("b0c0"),n("a2af")),d=n("8811"),b=n("3f98"),p=n("5502"),f=n("acf9"),h=n.n(f),O=n("b5d8"),m=n("1922"),g=n("4d9c"),v=n("19c1"),_=n("6c70"),E=n("ed5a"),S=n("2247"),j=n("835e"),I=n("39fb"),R=Symbol();function T(){return Object(p["b"])(R)}(function(e){e["UPDATE_APP_SETTING"]="updateAppSetting",e["SHOW_PASTE_DIALOG"]="showPasteDialog",e["CLOSE_PASTE_DIALOG"]="closePasteDialog",e["SHOW_GAME_DIALOG"]="showGameDialog",e["SHOW_RESEARCH_DIALOG"]="showResearchDialog",e["UPDATE_USI_POSITION"]="updateUSIPosition",e["NEW_RECORD"]="newRecord",e["DO_MOVE"]="move",e["EDIT_POSITION"]="editPosition",e["CHANGE_TURN"]="changeTurn",e["INITIALIZE_POSITION"]="initializePosition",e["UPDATE_RECORD_COMMENT"]="updateRecordComment",e["RECEIVE_USI_INFO"]="receiveUsiInfo",e["CLEAR_GAME_TIMER"]="clearGameTimer",e["FLIP_BOARD"]="flipBoard",e["OPEN_APP_SETTING_DIALOG"]="openAppSettingDialog",e["OPEN_USI_ENGINE_MANAGEMENT_DIALOG"]="openUSIEngineManagementDialog",e["CLOSE_DIALOG"]="closeDialog",e["RETAIN_BUSSY_STATE"]="retainBussyState",e["RELEASE_BUSSY_STATE"]="releaseBussyState",e["PUSH_MESSAGE"]="pushMessage",e["SHIFT_MESSAGE"]="shiftMessage",e["PUSH_ERROR"]="pushError",e["CLEAR_ERRORS"]="clearErrors"})(a||(a={})),function(e){e["UPDATE_AND_SAVE_APP_SETTING"]="updateAndSaveAppSetting",e["UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND"]="updateAndSaveAppSettingOnBackground",e["OPEN_RECORD"]="openRecord",e["SAVE_RECORD"]="saveRecord",e["COPY_RECORD"]="copyRecord",e["PASTE_RECORD"]="pasteRecord",e["CHANGE_MOVE_NUMBER"]="changeMoveNumber",e["CHANGE_BRANCH"]="changeBranch",e["REMOVE_RECORD_AFTER"]="removeRecordAfter",e["START_POSITION_EDITING"]="startPositionEditing",e["END_POSITION_EDITING"]="endPositionEditing",e["START_RESEARCH"]="startResearch",e["STOP_RESEARCH"]="stopResearch",e["START_GAME"]="startGame",e["STOP_GAME"]="stopGame",e["RESIGN_BY_USER"]="resign",e["DO_MOVE_BY_USER"]="doMoveByUser",e["DO_MOVE_BY_USI_ENGINE"]="doMoveByUSIEngine",e["RESET_GAME_TIMER"]="resetGameTimer",e["BEEP_UNLIMITED"]="beepUnlimited",e["BEEP_SHORT"]="beepShort"}(o||(o={}));var y=Object(p["a"])({state:{record:new d["g"],mode:b["a"].NORMAL,bussyState:new v["a"],usiSessionID:0,researchSetting:Object(I["a"])(),gameSetting:Object(O["b"])(),gameState:new S["a"],usiMonitor:new E["a"],appSetting:Object(m["c"])(),messages:[],errors:[]},getters:{isMovableByUser:function(e){switch(e.mode){case b["a"].NORMAL:case b["a"].RESEARCH:return!0;case b["a"].GAME:return(e.record.position.color===d["a"].BLACK?e.gameSetting.black.type:e.gameSetting.white.type)===O["a"].HUMAN}return!1}},mutations:(r={},Object(s["a"])(r,a.UPDATE_APP_SETTING,(function(e,t){e.appSetting=Object(u["a"])(Object(u["a"])({},e.appSetting),t)})),Object(s["a"])(r,a.SHOW_PASTE_DIALOG,(function(e){e.mode===b["a"].NORMAL&&(e.mode=b["a"].PASTE_DIALOG)})),Object(s["a"])(r,a.CLOSE_PASTE_DIALOG,(function(e){e.mode===b["a"].PASTE_DIALOG&&(e.mode=b["a"].NORMAL)})),Object(s["a"])(r,a.SHOW_GAME_DIALOG,(function(e){e.mode===b["a"].NORMAL&&(e.mode=b["a"].GAME_DIALOG)})),Object(s["a"])(r,a.SHOW_RESEARCH_DIALOG,(function(e){e.mode===b["a"].NORMAL&&(e.mode=b["a"].RESEARCH_DIALOG)})),Object(s["a"])(r,a.UPDATE_USI_POSITION,(function(e){Object(l["y"])(e.record.usi,e.gameSetting,e.gameState.blackTimeMs,e.gameState.whiteTimeMs)})),Object(s["a"])(r,a.NEW_RECORD,(function(e){e.mode==b["a"].NORMAL&&(e.record.clear(new d["f"]),e.recordFilePath=void 0)})),Object(s["a"])(r,a.CHANGE_TURN,(function(e){if(e.mode==b["a"].POSITION_EDITING){var t=e.record.position.clone();t.setTurn(Object(d["n"])(t.color)),e.record.clear(t)}})),Object(s["a"])(r,a.INITIALIZE_POSITION,(function(e,t){if(e.mode==b["a"].POSITION_EDITING){var n=new d["f"];n.reset(t),e.record.clear(n)}})),Object(s["a"])(r,a.DO_MOVE,(function(e,t){e.record.append(t),e.record.current.setElapsedMs(e.gameState.elapsedMs),Object(g["c"])(e.appSetting.pieceVolume)})),Object(s["a"])(r,a.EDIT_POSITION,(function(e,t){if(y.state.mode===b["a"].POSITION_EDITING){var n=e.record.position.clone();n.edit(t),e.record.clear(n)}})),Object(s["a"])(r,a.UPDATE_RECORD_COMMENT,(function(e,t){e.record.current.comment=t})),Object(s["a"])(r,a.RECEIVE_USI_INFO,(function(e,t){if(e.usiSessionID===t.sessionID&&e.record.usi==t.usi){e.usiMonitor.update(t.sessionID,e.record.position,t.sender,t.info);var n=new _["c"](e.record.current.customData);n.updateUSIInfo(e.record.position.color,t.sender,t.info),e.record.current.customData=n.stringify()}})),Object(s["a"])(r,a.CLEAR_GAME_TIMER,(function(e){e.gameState.clearTimer(),e.beep5sHandler&&(e.beep5sHandler.stop(),e.beep5sHandler=void 0)})),Object(s["a"])(r,a.FLIP_BOARD,(function(e){e.appSetting.boardFlipping=!e.appSetting.boardFlipping,Object(l["k"])(e.appSetting)})),Object(s["a"])(r,a.OPEN_APP_SETTING_DIALOG,(function(e){e.mode===b["a"].NORMAL&&(e.mode=b["a"].APP_SETTING_DIALOG)})),Object(s["a"])(r,a.OPEN_USI_ENGINE_MANAGEMENT_DIALOG,(function(e){e.mode===b["a"].NORMAL&&(e.mode=b["a"].USI_ENGINE_SETTING_DIALOG)})),Object(s["a"])(r,a.CLOSE_DIALOG,(function(e){e.mode!==b["a"].USI_ENGINE_SETTING_DIALOG&&e.mode!==b["a"].APP_SETTING_DIALOG&&e.mode!==b["a"].GAME_DIALOG&&e.mode!==b["a"].RESEARCH_DIALOG||(e.mode=b["a"].NORMAL)})),Object(s["a"])(r,a.RETAIN_BUSSY_STATE,(function(e){e.bussyState.retain()})),Object(s["a"])(r,a.RELEASE_BUSSY_STATE,(function(e){e.bussyState.release()})),Object(s["a"])(r,a.PUSH_MESSAGE,(function(e,t){e.messages.push(t)})),Object(s["a"])(r,a.SHIFT_MESSAGE,(function(e){e.messages.shift()})),Object(s["a"])(r,a.PUSH_ERROR,(function(e,t){t instanceof Error?e.errors.push(t):e.errors.push(new Error(t))})),Object(s["a"])(r,a.CLEAR_ERRORS,(function(e){e.errors=[]})),r),actions:(i={},Object(s["a"])(i,o.UPDATE_AND_SAVE_APP_SETTING,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,r(a.RETAIN_BUSSY_STATE),n.prev=2,n.next=5,Object(l["k"])(Object(u["a"])(Object(u["a"])({},i.appSetting),t));case 5:return r(a.UPDATE_APP_SETTING,t),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n["catch"](2),y.commit(a.PUSH_ERROR),n.abrupt("return",!1);case 13:return n.prev=13,r(a.RELEASE_BUSSY_STATE),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,9,13,16]])})))()})),Object(s["a"])(i,o.UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,r(a.UPDATE_APP_SETTING,t),n.next=4,Object(l["k"])(i.appSetting);case 4:case"end":return n.stop()}}),n)})))()})),Object(s["a"])(i,o.OPEN_RECORD,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,o,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===b["a"].NORMAL){n.next=3;break}return n.abrupt("return",!1);case 3:if(r(a.RETAIN_BUSSY_STATE),n.prev=4,t){n.next=11;break}return n.next=8,Object(l["r"])();case 8:if(t=n.sent,t){n.next=11;break}return n.abrupt("return",!1);case 11:return n.next=13,Object(l["j"])(t);case 13:if(o=n.sent,!t.match(/\.kif$/)&&!t.match(/\.kifu$/)){n.next=21;break}return c=t.match(/\.kif$/)?h.a.decode(o,"Shift_JIS"):o.toString(),s=Object(d["m"])(c),s instanceof d["g"]?(i.recordFilePath=t,i.record=s):r(a.PUSH_ERROR,s),n.abrupt("return",!0);case 21:return r(a.PUSH_ERROR,"不明なファイル形式: "+t),n.abrupt("return",!1);case 23:n.next=29;break;case 25:return n.prev=25,n.t0=n["catch"](4),r(a.PUSH_ERROR,"棋譜の読み込み中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 29:return n.prev=29,r(a.RELEASE_BUSSY_STATE),n.finish(29);case 32:case"end":return n.stop()}}),n,null,[[4,25,29,32]])})))()})),Object(s["a"])(i,o.SAVE_RECORD,(function(t,n){return Object(c["a"])(regeneratorRuntime.mark((function r(){var i,o,c,s,u,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.commit,o=t.state,o.mode===b["a"].NORMAL){r.next=3;break}return r.abrupt("return",!1);case 3:if(i(a.RETAIN_BUSSY_STATE),r.prev=4,c=o.recordFilePath,null!==n&&void 0!==n&&n.overwrite&&c){r.next=13;break}return s=Object(j["a"])(o.record),r.next=10,Object(l["s"])(s);case 10:if(c=r.sent,c){r.next=13;break}return r.abrupt("return",!1);case 13:if(!c.match(/\.kif$/)&&!c.match(/\.kifu$/)){r.next=22;break}return u=Object(d["k"])(o.record,{returnCode:"\r\n"}),p=c.match(/\.kif$/)?h.a.encode(u,"Shift_JIS"):e.from(u),r.next=18,Object(l["m"])(c,p);case 18:return o.recordFilePath=c,r.abrupt("return",!0);case 22:return i(a.PUSH_ERROR,"不明なファイル形式: "+c),r.abrupt("return",!1);case 24:r.next=30;break;case 26:return r.prev=26,r.t0=r["catch"](4),i(a.PUSH_ERROR,"棋譜の保存中にエラーが出ました: "+r.t0),r.abrupt("return",!1);case 30:return r.prev=30,i(a.RELEASE_BUSSY_STATE),r.finish(30);case 33:case"end":return r.stop()}}),r,null,[[4,26,30,33]])})))()})),Object(s["a"])(i,o.COPY_RECORD,(function(e){var t=e.state,n=Object(d["k"])(t.record,{returnCode:"\r\n"});navigator.clipboard.writeText(n)})),Object(s["a"])(i,o.PASTE_RECORD,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,i=e.commit,r.mode===b["a"].NORMAL){n.next=3;break}return n.abrupt("return");case 3:o=Object(d["m"])(t),o instanceof d["g"]?(r.recordFilePath=void 0,r.record=o):i(a.PUSH_ERROR,o);case 5:case"end":return n.stop()}}),n)})))()})),Object(s["a"])(i,o.CHANGE_MOVE_NUMBER,(function(e,t){var n=e.state,r=e.commit;n.mode!==b["a"].NORMAL&&n.mode!==b["a"].RESEARCH||(n.record.goto(t),r(a.UPDATE_USI_POSITION))})),Object(s["a"])(i,o.CHANGE_BRANCH,(function(e,t){var n=e.state,r=e.commit;n.mode!==b["a"].NORMAL&&n.mode!==b["a"].RESEARCH||n.record.current.branchIndex!==t&&(n.record.switchBranchByIndex(t),r(a.UPDATE_USI_POSITION))})),Object(s["a"])(i,o.REMOVE_RECORD_AFTER,(function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,n.mode===b["a"].NORMAL||n.mode===b["a"].RESEARCH){t.next=3;break}return t.abrupt("return");case 3:n.record.removeAfter(),r(a.UPDATE_USI_POSITION);case 5:case"end":return t.stop()}}),t)})))()})),Object(s["a"])(i,o.START_POSITION_EDITING,(function(e){var t=e.state;t.mode===b["a"].NORMAL&&(t.mode=b["a"].POSITION_EDITING,t.record.clear(t.record.position),t.recordFilePath=void 0)})),Object(s["a"])(i,o.END_POSITION_EDITING,(function(e){var t=e.state;t.mode===b["a"].POSITION_EDITING&&(t.mode=b["a"].NORMAL)})),Object(s["a"])(i,o.START_RESEARCH,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===b["a"].RESEARCH_DIALOG){n.next=3;break}return n.abrupt("return",!1);case 3:return r(a.RETAIN_BUSSY_STATE),n.prev=4,n.next=7,Object(l["n"])(t);case 7:return i.usiSessionID+=1,n.next=10,Object(l["w"])(t,i.usiSessionID);case 10:return i.researchSetting=t,i.mode=b["a"].RESEARCH,r(a.UPDATE_USI_POSITION),n.abrupt("return",!0);case 16:return n.prev=16,n.t0=n["catch"](4),r(a.PUSH_ERROR,"検討の初期化中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 20:return n.prev=20,r(a.RELEASE_BUSSY_STATE),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[4,16,20,23]])})))()})),Object(s["a"])(i,o.STOP_RESEARCH,(function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.state,r.mode===b["a"].RESEARCH){t.next=3;break}return t.abrupt("return",!1);case 3:return n(a.RETAIN_BUSSY_STATE),t.prev=4,t.next=7,Object(l["b"])();case 7:return r.mode=b["a"].NORMAL,t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t["catch"](4),n(a.PUSH_ERROR,"検討の終了中にエラーが出ました: "+t.t0),t.abrupt("return",!1);case 15:return t.prev=15,n(a.RELEASE_BUSSY_STATE),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,11,15,18]])})))()})),Object(s["a"])(i,o.START_GAME,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.dispatch,c=e.state,c.mode===b["a"].GAME_DIALOG){n.next=3;break}return n.abrupt("return",!1);case 3:return r(a.RETAIN_BUSSY_STATE),n.prev=4,n.next=7,Object(l["l"])(t);case 7:return t.startPosition&&(s=new d["f"],s.reset(t.startPosition),c.record.clear(s),c.recordFilePath=void 0),c.usiSessionID+=1,n.next=11,Object(l["v"])(t,c.usiSessionID);case 11:return c.gameSetting=t,c.gameState.setup(t),c.mode=b["a"].GAME,c.record.metadata.setStandardMetadata(d["h"].BLACK_NAME,t.black.name),c.record.metadata.setStandardMetadata(d["h"].WHITE_NAME,t.white.name),t.humanIsFront&&(u=c.appSetting.boardFlipping,c.gameSetting.black.type===O["a"].HUMAN&&c.gameSetting.white.type!==O["a"].HUMAN?u=!1:c.gameSetting.black.type!==O["a"].HUMAN&&c.gameSetting.white.type===O["a"].HUMAN&&(u=!0),u!==c.appSetting.boardFlipping&&r(a.FLIP_BOARD)),n.next=19,i(o.RESET_GAME_TIMER);case 19:return r(a.UPDATE_USI_POSITION),n.abrupt("return",!0);case 23:return n.prev=23,n.t0=n["catch"](4),r(a.PUSH_ERROR,"対局の初期化中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 27:return n.prev=27,r(a.RELEASE_BUSSY_STATE),n.finish(27);case 30:case"end":return n.stop()}}),n,null,[[4,23,27,30]])})))()})),Object(s["a"])(i,o.STOP_GAME,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===b["a"].GAME){n.next=3;break}return n.abrupt("return",!1);case 3:return t&&r(a.PUSH_MESSAGE,"対局終了（".concat(Object(d["o"])(t),")")),r(a.RETAIN_BUSSY_STATE),n.prev=5,n.next=8,Object(l["a"])(i.record.usi,t);case 8:return i.record.append(t||d["i"].INTERRUPT),i.record.current.setElapsedMs(i.gameState.elapsedMs),r(a.CLEAR_GAME_TIMER),i.mode=b["a"].NORMAL,n.abrupt("return",!0);case 15:return n.prev=15,n.t0=n["catch"](5),r(a.PUSH_ERROR,"対局の終了中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 19:return n.prev=19,r(a.RELEASE_BUSSY_STATE),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[5,15,19,22]])})))()})),Object(s["a"])(i,o.RESIGN_BY_USER,(function(e){var t=e.state,n=e.getters,r=e.dispatch;return t.mode===b["a"].GAME&&(n.isMovableByUser?r(o.STOP_GAME,d["i"].RESIGN):void 0)})),Object(s["a"])(i,o.DO_MOVE_BY_USER,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.dispatch,c=e.state,s=e.getters,s.isMovableByUser){n.next=3;break}return n.abrupt("return",!1);case 3:return c.mode===b["a"].GAME&&c.gameState.increment(c.record.position.color),r(a.DO_MOVE,t),c.mode===b["a"].GAME&&i(o.RESET_GAME_TIMER),r(a.UPDATE_USI_POSITION),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()})),Object(s["a"])(i,o.DO_MOVE_BY_USI_ENGINE,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.dispatch,c=e.state,c.mode===b["a"].GAME){n.next=3;break}return n.abrupt("return",!1);case 3:if(c.usiSessionID===t.sessionID){n.next=5;break}return n.abrupt("return",!1);case 5:if(c.record.usi===t.usi){n.next=7;break}return n.abrupt("return",!1);case 7:if(t.color===c.record.position.color){n.next=11;break}return r(a.PUSH_ERROR,"手番ではないエンジンから指し手を受信しました:"+t.sfen),i(o.STOP_GAME,d["i"].FOUL_LOSE),n.abrupt("return",!1);case 11:if("resign"!==t.sfen){n.next=14;break}return i(o.STOP_GAME,d["i"].RESIGN),n.abrupt("return",!0);case 14:if("win"!==t.sfen){n.next=17;break}return i(o.STOP_GAME,d["i"].ENTERING_OF_KING),n.abrupt("return",!0);case 17:if(s=c.record.position.createMoveBySFEN(t.sfen),s&&c.record.position.isValidMove(s)){n.next=22;break}return r(a.PUSH_ERROR,"エンジンから不明な指し手を受信しました:"+t.sfen),i(o.STOP_GAME,d["i"].FOUL_LOSE),n.abrupt("return",!1);case 22:return c.gameState.increment(c.record.position.color),r(a.DO_MOVE,s),i(o.RESET_GAME_TIMER),r(a.UPDATE_USI_POSITION),n.abrupt("return",!0);case 27:case"end":return n.stop()}}),n)})))()})),Object(s["a"])(i,o.RESET_GAME_TIMER,(function(e){var t=e.commit,n=e.dispatch,r=e.getters,i=e.state;t(a.CLEAR_GAME_TIMER);var c=i.record.position.color;i.gameState.startTimer(c,{timeout:function(){r.isMovableByUser||i.gameSetting.enableEngineTimeout?n(o.STOP_GAME,d["i"].TIMEOUT):Object(l["x"])(c)},onBeepShort:function(){n(o.BEEP_SHORT)},onBeepUnlimited:function(){n(o.BEEP_UNLIMITED)}})})),Object(s["a"])(i,o.BEEP_UNLIMITED,(function(e){var t=e.state,n=e.getters;(t.appSetting.clockSoundTarget!==m["a"].ONLY_USER||n.isMovableByUser)&&(t.beep5sHandler||(t.beep5sHandler=Object(g["b"])({frequency:t.appSetting.clockPitch,volume:t.appSetting.clockVolume})))})),Object(s["a"])(i,o.BEEP_SHORT,(function(e){var t=e.state,n=e.getters;(t.appSetting.clockSoundTarget!==m["a"].ONLY_USER||n.isMovableByUser)&&(t.beep5sHandler||Object(g["a"])({frequency:t.appSetting.clockPitch,volume:t.appSetting.clockVolume}))})),i)})}).call(this,n("1c35").Buffer)},"06e0":function(e,t,n){"use strict";n("b575")},"088d":function(e,t,n){"use strict";n("ff22")},"0b8e":function(e,t,n){"use strict";n("c033")},"0be2":function(e,t,n){},"0c1f":function(e,t,n){"use strict";n("141a")},"0c59":function(e,t,n){"use strict";n("ef3d")},"0ccc":function(e,t,n){},1:function(e,t){},1139:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),i=n("bee2"),a=(n("b65f"),n("c13f"));function o(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function c(e){switch(e){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}var s=["a","b","c","d","e","f","g","h","i"],u=function(){function e(t,n){Object(r["a"])(this,e),this.file=t,this.rank=n}return Object(i["a"])(e,[{key:"x",get:function(){return 9-this.file}},{key:"y",get:function(){return this.rank-1}},{key:"index",get:function(){return 9*this.y+this.x}},{key:"opposite",get:function(){return new e(10-this.file,10-this.rank)}},{key:"neighbor",value:function(t,n){switch(t){case a["a"].UP:return new e(this.file,this.rank-1);case a["a"].DOWN:return new e(this.file,this.rank+1);case a["a"].LEFT:return new e(this.file+1,this.rank);case a["a"].RIGHT:return new e(this.file-1,this.rank);case a["a"].LEFT_UP:return new e(this.file+1,this.rank-1);case a["a"].RIGHT_UP:return new e(this.file-1,this.rank-1);case a["a"].LEFT_DOWN:return new e(this.file+1,this.rank+1);case a["a"].RIGHT_DOWN:return new e(this.file-1,this.rank+1);case a["a"].LEFT_UP_KNIGHT:return new e(this.file+1,this.rank-2);case a["a"].RIGHT_UP_KNIGHT:return new e(this.file-1,this.rank-2);case a["a"].LEFT_DOWN_KNIGHT:return new e(this.file+1,this.rank+2);case a["a"].RIGHT_DOWN_KNIGHT:return new e(this.file-1,this.rank+2)}var r=t,i=n;return new e(this.file-r,this.rank+i)}},{key:"valid",get:function(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}},{key:"equals",value:function(e){return!!e&&this.file===e.file&&this.rank===e.rank}},{key:"sfen",get:function(){return this.file+s[this.rank-1]}}],[{key:"newByXY",value:function(t,n){return new e(9-t,n+1)}},{key:"newByIndex",value:function(t){return new e(9-t%9,Math.trunc(t/9)+1)}},{key:"parseSFENSquare",value:function(t){var n=o(t[0]),r=c(t[1]);return n&&r?new e(n,r):null}}]),e}();u.all=[];for(var l=0;l<81;l+=1)u.all.push(u.newByIndex(l))},1286:function(e,t,n){},"141a":function(e,t,n){},"14a0":function(e,t,n){"use strict";n("eb26")},1605:function(e,t,n){},1922:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o}));var r,i,a=n("21a3");function o(){return{boardLayout:a["a"].HITOMOJI,pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:i.ONLY_USER,boardFlipping:!1,informationTab:r.COMMENT}}(function(e){e["COMMENT"]="comment",e["SEARCH"]="search",e["CHART"]="chart",e["INVISIBLE"]="invisible"})(r||(r={})),function(e){e["ALL"]="all",e["ONLY_USER"]="onlyUser"}(i||(i={}))},"19c1":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("d4ec"),i=n("bee2"),a=function(){function e(){Object(r["a"])(this,e),this.count=0}return Object(i["a"])(e,[{key:"isBussy",get:function(){return 0!==this.count}},{key:"retain",value:function(){this.count+=1}},{key:"release",value:function(){this.count-=1}}]),e}()},"21a3":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return b}));var r,i=n("d4ec"),a=n("bee2"),o=n("5530"),c=(n("d3b7"),n("159b"),n("07ac"),n("33d1"),n("ea98"),n("8811")),s=n("dac8");(function(e){e["HITOMOJI"]="hitomoji",e["HITOMOJI_GOTHIC"]="hitomojiGothic"})(r||(r={}));var u={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"},lastMove:{"background-color":"#00ddff",opacity:"0.5"}}},piece:{width:88,height:93},hand:{color:"#8b4513",black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},l={hitomoji:Object(o["a"])(Object(o["a"])({},u),{},{images:{board:"./board/default.png",black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}}}),hitomojiGothic:Object(o["a"])(Object(o["a"])({},u),{},{images:{board:"./board/default.png",black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}}})},d={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},b=function(){function e(t){Object(i["a"])(this,e),this.template=l[t]||l[r.HITOMOJI]}return Object(a["a"])(e,[{key:"preload",value:function(){Object(s["a"])(this.template.images.board),Object.values(this.template.images.black).forEach(s["a"]),Object.values(this.template.images.white).forEach(s["a"])}},{key:"build",value:function(e,t,n,r,i,a){var s=this,u=e.width/this.template.frame.width;this.template.frame.height*u>e.height&&(u=e.height/this.template.frame.height);var l=function(){return{style:{height:s.template.frame.height*u+"px",width:s.template.frame.width*u+"px"}}},b=function(){var e=s.template.images.board,t=s.template.board.x*u,n=s.template.board.y*u,r=s.template.board.width*u,i=s.template.board.height*u,a={left:t+"px",top:n+"px",height:i+"px",width:r+"px"};return{imagePath:e,x:t,y:n,style:a}},p=function(e){var n=[];return t.board.listNonEmptySquares().forEach((function(r){var i=t.board.at(r),o=i.id+r.index,l=a?Object(c["n"])(i.color):i.color,d=i.type==c["e"].KING&&i.color==c["a"].BLACK?"king2":i.type,b=s.template.images[l][d],p=e.x+(s.template.board.leftPiecePadding+s.template.board.squreWidth*(a?r.opposite:r).x)*u,f=e.y+(s.template.board.topPiecePadding+s.template.board.squreHeight*(a?r.opposite:r).y)*u,h=s.template.piece.width*u,O=s.template.piece.height*u;n.push({id:o,imagePath:b,style:{left:p+"px",top:f+"px",width:h+"px",height:O+"px"}})})),n},f=function(e){var t=[];return c["j"].all.forEach((function(i){var l=i.index,d=i.file,b=i.rank,p=e.x+(s.template.board.leftSquarePadding+s.template.board.squreWidth*(a?i.opposite:i).x)*u,f=e.y+(s.template.board.topSquarePadding+s.template.board.squreHeight*(a?i.opposite:i).y)*u,h=s.template.board.squreWidth*u,O=s.template.board.squreHeight*u,m={left:p+"px",top:f+"px",width:h+"px",height:O+"px"},g=m;n&&i.equals(n.to)&&(g=Object(o["a"])(Object(o["a"])({},g),s.template.board.highlight.lastMove)),r instanceof c["j"]&&r.equals(i)&&(g=Object(o["a"])(Object(o["a"])({},g),s.template.board.highlight.selected)),t.push({id:l,file:d,rank:b,style:m,backgroundStyle:g})})),t},h=function(e,t){var n=a?Object(c["n"])(e):e,i=s.template.hand[n].x*u,l=s.template.hand[n].y*u,b=s.template.hand.width*u,p=s.template.hand.height*u,f={"background-color":s.template.hand.color,left:i+"px",top:l+"px",width:b+"px",height:p+"px"},h=[],O=[];return c["l"].forEach((function(i){for(var a=t.count(i),l=d[n][i],b=s.template.hand.width/2*l.width*u,p=s.template.hand.height/4*u,f=b*l.column,m=p*l.row,g=s.template.piece.width*u,v=s.template.piece.height*u,_=Math.max(b-g*a,0)/(2*a),E=(b-g-2*_)/Math.max(a-1,1),S=a-1;S>=0;S-=1){var j=i+S,I=s.template.images[n][i],R=f+_+E*S,T=m;h.push({id:j,imagePath:I,style:{left:R+"px",top:T+"px",width:g+"px",height:v+"px"}})}var y=i,w={left:f+"px",top:m+"px",width:b+"px",height:p+"px"},A=w;r&&r instanceof c["d"]&&r.color===e&&r.type===i&&(A=Object(o["a"])(Object(o["a"])({},A),s.template.hand.highlight.selected)),O.push({id:y,type:i,style:w,backgroundStyle:A})})),{style:f,pieces:h,pointers:O}},O=function(e,t){if(!t)return null;var n=a?Object(c["n"])(t.color):t.color,r=a?t.to.opposite:t.to,i=new c["d"](n,t.pieceType),o=i.promoted(),l=i.unpromoted(),d=s.template.images[n][o.type],b=s.template.images[n][l.type],p=e.x+(s.template.board.leftSquarePadding+s.template.board.squreWidth*(r.x-.5))*u,f=e.y+(s.template.board.topSquarePadding+s.template.board.squreHeight*r.y)*u,h=2*s.template.board.squreWidth*u,O=s.template.board.squreHeight*u,m={left:p+"px",top:f+"px",width:h+"px",height:O+"px","font-size":O/4+"px"};return{promoteImagePath:d,notPromoteImagePath:b,style:m}},m=function(){var e=t.color,n=a?Object(c["n"])(e):e,r=2;return{style:{left:s.template.turn[n].x*u-r+"px",top:s.template.turn[n].y*u-r+"px",width:s.template.turn.width*u-r+"px",height:s.template.turn.height*u-r+"px","font-size":s.template.turn.fontSize*u+"px","border-radius":s.template.turn.height*u*.4+"px","border-width":r+"px","border-style":"solid"}}},g=function(e){var t=a?Object(c["n"])(e):e;return{style:{left:s.template.playerName[t].x*u+"px",top:s.template.playerName[t].y*u+"px",width:s.template.playerName.width*u+"px",height:s.template.playerName.height*u+"px","font-size":s.template.playerName.fontSize*u+"px"}}},v=function(e){var t=a?Object(c["n"])(e):e;return{style:{left:s.template.clock[t].x*u+"px",top:s.template.clock[t].y*u+"px",width:s.template.clock.width*u+"px",height:s.template.clock.height*u+"px","font-size":s.template.clock.fontSize*u+"px"}}},_=function(){return{left:{style:{left:s.template.control.left.x*u+"px",top:s.template.control.left.y*u+"px",width:s.template.control.left.width*u+"px",height:s.template.control.left.height*u+"px","font-size":s.template.control.left.fontSize*u+"px"}},right:{style:{left:s.template.control.right.x*u+"px",top:s.template.control.right.y*u+"px",width:s.template.control.right.width*u+"px",height:s.template.control.right.height*u+"px","font-size":s.template.control.right.fontSize*u+"px"}}}},E=l(),S=b(),j=p(S),I=f(S),R=h(c["a"].BLACK,t.hand(c["a"].BLACK)),T=h(c["a"].WHITE,t.hand(c["a"].WHITE)),y=O(S,i),w=m(),A=g(c["a"].BLACK),N=g(c["a"].WHITE),k=v(c["a"].BLACK),P=v(c["a"].WHITE),H=_();return{frame:E,board:S,piece:j,square:I,blackHand:R,whiteHand:T,promotion:y,turn:w,blackPlayerName:A,whitePlayerName:N,blackClock:k,whiteClock:P,control:H}}}]),e}()},2247:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("d4ec"),i=n("bee2"),a=n("b5d8"),o=n("8811"),c=function(){function e(){Object(r["a"])(this,e),this.black={timeMs:0,byoyomi:0},this.white={timeMs:0,byoyomi:0},this.timerHandle=0,this.timerStart=new Date,this.lastTimeMs=0,this._elapsedMs=0,this.gameSetting=Object(a["b"])()}return Object(i["a"])(e,[{key:"blackTimeMs",get:function(){return this.black.timeMs}},{key:"blackByoyomi",get:function(){return this.black.byoyomi}},{key:"whiteTimeMs",get:function(){return this.white.timeMs}},{key:"whiteByoyomi",get:function(){return this.white.byoyomi}},{key:"elapsedMs",get:function(){return this._elapsedMs}},{key:"setup",value:function(e){this.black.timeMs=1e3*e.timeLimit.timeSeconds,this.black.byoyomi=e.timeLimit.byoyomi,this.white.timeMs=1e3*e.timeLimit.timeSeconds,this.white.byoyomi=e.timeLimit.byoyomi,this.gameSetting=e}},{key:"getPlayerState",value:function(e){switch(e){case o["a"].BLACK:return this.black;case o["a"].WHITE:return this.white}}},{key:"startTimer",value:function(e,t){var n=this,r=this.getPlayerState(e);this.timerStart=new Date,this.lastTimeMs=r.timeMs,r.byoyomi=this.gameSetting.timeLimit.byoyomi,this.timerHandle=window.setInterval((function(){var e=r.timeMs,i=r.byoyomi,a=new Date;n._elapsedMs=a.getTime()-n.timerStart.getTime();var o=n.lastTimeMs-n._elapsedMs;if(o>=0?r.timeMs=o:(r.timeMs=0,r.byoyomi=Math.max(Math.ceil(n.gameSetting.timeLimit.byoyomi+o/1e3),0)),0!==r.timeMs||0!==r.byoyomi){var c=Math.ceil(e/1e3),s=Math.ceil(r.timeMs/1e3),u=r.byoyomi;0===s&&(e>0||u!==i)?u<=5?t.onBeepUnlimited():(u<=10||u%10===0)&&t.onBeepShort():n.gameSetting.timeLimit.byoyomi||s===c||(s<=5?t.onBeepUnlimited():(s<=10||20===s||30===s||60===s)&&t.onBeepShort())}else t.timeout()}),100)}},{key:"increment",value:function(e){this.getPlayerState(e).timeMs+=1e3*this.gameSetting.timeLimit.increment}},{key:"clearTimer",value:function(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this._elapsedMs=0}}]),e}()},"224f":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n("d4ec"),i=n("bee2");n("b0c0"),n("d3b7"),n("159b"),n("b64b"),n("4e82"),n("07ac"),n("e9c4"),n("25f0"),n("aff5"),n("a9e3"),n("99af");function a(e){return void 0!==e.value?e.value:void 0!==e.default?"string"===e.type&&"<empty>"===e.default?"":e.default:void 0}function o(e,t){e.uri=t.uri,e.name=t.name,Object.keys(t.options).forEach((function(n){e.options[n]&&(e.options[n].value=t.options[n].value)}))}var c=function(){function e(t){if(Object(r["a"])(this,e),this.engines={},t){var n=JSON.parse(t);n.engines instanceof Object&&(this.engines=n.engines)}}return Object(i["a"])(e,[{key:"hasEngine",value:function(e){return!!this.engines[e]}},{key:"addEngine",value:function(e){this.engines[e.uri]=e}},{key:"updateEngine",value:function(e){return!!this.engines[e.uri]&&(this.engines[e.uri]=e,!0)}},{key:"removeEngine",value:function(e){return!!this.engines[e]&&(delete this.engines[e],!0)}},{key:"getEngine",value:function(e){return this.engines[e]}},{key:"engineList",get:function(){return Object.values(this.engines).sort((function(e,t){return e.name>t.name?1:-1}))}},{key:"json",get:function(){return JSON.stringify(this)}},{key:"jsonWithIndent",get:function(){return JSON.stringify(this,void 0,2)}}]),e}()},3298:function(e,t,n){"use strict";n("c017")},"336f":function(e,t,n){"use strict";n("e7ff")},"39fb":function(e,t,n){"use strict";function r(){return{}}n.d(t,"a",(function(){return r}))},"3f98":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["NORMAL"]="normal",e["PASTE_DIALOG"]="pasteDialog",e["POSITION_EDITING"]="positionEditing",e["GAME"]="game",e["GAME_DIALOG"]="gameDialog",e["RESEARCH"]="research",e["RESEARCH_DIALOG"]="researchDialog",e["USI_ENGINE_SETTING_DIALOG"]="usiEngineSettingDialog",e["APP_SETTING_DIALOG"]="appSettingDialog"}(r||(r={}))},"403b":function(e,t,n){"use strict";n("665a")},"452a":function(e,t,n){"use strict";n("8a14")},4691:function(e,t,n){},4947:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return v}));var r,i=n("d4ec"),a=n("bee2"),o=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("567e"));(function(e){e["PAWN"]="pawn",e["LANCE"]="lance",e["KNIGHT"]="knight",e["SILVER"]="silver",e["GOLD"]="gold",e["BISHOP"]="bishop",e["ROOK"]="rook",e["KING"]="king",e["PROM_PAWN"]="promPawn",e["PROM_LANCE"]="promLance",e["PROM_KNIGHT"]="promKnight",e["PROM_SILVER"]="promSilver",e["HORSE"]="horse",e["DRAGON"]="dragon"})(r||(r={}));var c={pawn:"歩",lance:"香",knight:"桂",silver:"銀",gold:"金",bishop:"角",rook:"飛",king:"玉",promPawn:"と",promLance:"成香",promKnight:"成桂",promSilver:"成銀",horse:"馬",dragon:"竜"};function s(e){var t=c[e];return t||""}r.PAWN,r.LANCE,r.KNIGHT,r.SILVER,r.GOLD,r.BISHOP,r.ROOK,r.KING,r.PROM_PAWN,r.PROM_LANCE,r.PROM_KNIGHT,r.PROM_SILVER,r.HORSE,r.DRAGON;var u=[r.PAWN,r.LANCE,r.KNIGHT,r.SILVER,r.GOLD,r.BISHOP,r.ROOK],l={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},d={pawn:r.PROM_PAWN,lance:r.PROM_LANCE,knight:r.PROM_KNIGHT,silver:r.PROM_SILVER,bishop:r.HORSE,rook:r.DRAGON},b={promPawn:r.PAWN,promLance:r.LANCE,promKnight:r.KNIGHT,promSilver:r.SILVER,horse:r.BISHOP,dragon:r.ROOK},p={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function f(e){return p[e]}var h={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},O={P:r.PAWN,L:r.LANCE,N:r.KNIGHT,S:r.SILVER,G:r.GOLD,B:r.BISHOP,R:r.ROOK,K:r.KING,"+P":r.PROM_PAWN,"+L":r.PROM_LANCE,"+N":r.PROM_KNIGHT,"+S":r.PROM_SILVER,"+B":r.HORSE,"+R":r.DRAGON,p:r.PAWN,l:r.LANCE,n:r.KNIGHT,s:r.SILVER,g:r.GOLD,b:r.BISHOP,r:r.ROOK,k:r.KING,"+p":r.PROM_PAWN,"+l":r.PROM_LANCE,"+n":r.PROM_KNIGHT,"+s":r.PROM_SILVER,"+b":r.HORSE,"+r":r.DRAGON},m={P:o["a"].BLACK,L:o["a"].BLACK,N:o["a"].BLACK,S:o["a"].BLACK,G:o["a"].BLACK,B:o["a"].BLACK,R:o["a"].BLACK,K:o["a"].BLACK,"+P":o["a"].BLACK,"+L":o["a"].BLACK,"+N":o["a"].BLACK,"+S":o["a"].BLACK,"+B":o["a"].BLACK,"+R":o["a"].BLACK,p:o["a"].WHITE,l:o["a"].WHITE,n:o["a"].WHITE,s:o["a"].WHITE,g:o["a"].WHITE,b:o["a"].WHITE,r:o["a"].WHITE,k:o["a"].WHITE,"+p":o["a"].WHITE,"+l":o["a"].WHITE,"+n":o["a"].WHITE,"+s":o["a"].WHITE,"+b":o["a"].WHITE,"+r":o["a"].WHITE},g=new Map;g.set(r.PAWN,{type:r.PROM_PAWN,reverseColor:!1}),g.set(r.LANCE,{type:r.PROM_LANCE,reverseColor:!1}),g.set(r.KNIGHT,{type:r.PROM_KNIGHT,reverseColor:!1}),g.set(r.SILVER,{type:r.PROM_SILVER,reverseColor:!1}),g.set(r.GOLD,{type:r.GOLD,reverseColor:!0}),g.set(r.BISHOP,{type:r.HORSE,reverseColor:!1}),g.set(r.ROOK,{type:r.DRAGON,reverseColor:!1}),g.set(r.KING,{type:r.KING,reverseColor:!0}),g.set(r.PROM_PAWN,{type:r.PAWN,reverseColor:!0}),g.set(r.PROM_LANCE,{type:r.LANCE,reverseColor:!0}),g.set(r.PROM_KNIGHT,{type:r.KNIGHT,reverseColor:!0}),g.set(r.PROM_SILVER,{type:r.SILVER,reverseColor:!0}),g.set(r.HORSE,{type:r.BISHOP,reverseColor:!0}),g.set(r.DRAGON,{type:r.ROOK,reverseColor:!0});var v=function(){function e(t,n){Object(i["a"])(this,e),this.type=n,this.color=t}return Object(a["a"])(e,[{key:"black",value:function(){return this.withColor(o["a"].BLACK)}},{key:"white",value:function(){return this.withColor(o["a"].WHITE)}},{key:"withColor",value:function(t){return new e(t,this.type)}},{key:"equals",value:function(e){return this.type===e.type&&this.color===e.color}},{key:"promoted",value:function(){var t=d[this.type];return new e(this.color,t||this.type)}},{key:"unpromoted",value:function(){var t=b[this.type];return new e(this.color,t||this.type)}},{key:"isPromotable",value:function(){return!!l[this.type]}},{key:"rotate",value:function(){var t=g.get(this.type),n=new e(this.color,t?t.type:this.type);return t&&t.reverseColor&&(n.color=Object(o["e"])(this.color)),n}},{key:"id",get:function(){return this.color+"_"+this.type}},{key:"sfen",get:function(){switch(this.color){default:case o["a"].BLACK:return p[this.type];case o["a"].WHITE:return h[this.type]}}}],[{key:"isValidSFEN",value:function(e){return!!O[e]}},{key:"newBySFEN",value:function(t){var n=O[t];if(!n)return null;var r=m[t];return r?new e(r,n):null}}]),e}()},"4d9c":function(e,t,n){"use strict";function r(e){var t=(null===e||void 0===e?void 0:e.type)||"sine",n=(null===e||void 0===e?void 0:e.frequency)||440,r=(null===e||void 0===e?void 0:e.volume)||2,i=new AudioContext,a=i.createOscillator(),o=i.createGain();return a.connect(o),o.connect(i.destination),a.type=t,a.frequency.value=n,o.gain.value=.005*r,a.onended=function(){o.disconnect(i.destination),a.disconnect(o)},a.start(i.currentTime),null!==e&&void 0!==e&&e.time&&a.stop(i.currentTime+e.time),{stop:function(){null!==e&&void 0!==e&&e.time||a.stop()}}}function i(e){r({type:"sine",frequency:e.frequency,time:.1,volume:e.volume})}function a(e){return r({type:"sine",frequency:e.frequency,volume:e.volume})}var o;function c(e){var t=Date.now();if(!(o&&t<o+200)){var n=new Audio("sound/piece.mp3");n.volume=.01*e,n.play(),o=t}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}))},"559f":function(e,t,n){},"567e":function(e,t,n){"use strict";var r;function i(e){return e===r.BLACK?r.WHITE:r.BLACK}function a(e){return e===r.BLACK?"b":"w"}function o(e){return"b"===e||"w"===e}function c(e){return"b"===e?r.BLACK:r.WHITE}n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),function(e){e["BLACK"]="black",e["WHITE"]="white"}(r||(r={}))},"62eb":function(e,t,n){"use strict";n("1286")},"665a":function(e,t,n){},"6c70":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n("d4ec"),i=n("bee2"),a=(n("e9c4"),n("8811")),o=n("95b4"),c=2e3,s=-c,u=function(){function e(t){if(Object(r["a"])(this,e),t){var n=JSON.parse(t);this.evaluation=n.evaluation}}return Object(i["a"])(e,[{key:"updateScore",value:function(e,t,n){switch(this.evaluation||(this.evaluation={}),t){case o["a"].BLACK_PLAYER:this.evaluation[o["a"].BLACK_PLAYER]=n;break;case o["a"].WHITE_PLAYER:this.evaluation[o["a"].WHITE_PLAYER]=-n;break;case o["a"].RESEARCHER:this.evaluation[o["a"].RESEARCHER]=e===a["a"].BLACK?n:-n;break}}},{key:"updateUSIInfo",value:function(e,t,n){n.scoreCP?this.updateScore(e,t,Math.min(Math.max(n.scoreCP,s),c)):n.scoreMate&&this.updateScore(e,t,n.scoreMate>=0?c:s)}},{key:"stringify",value:function(){return JSON.stringify(this)}}]),e}()},"706f":function(e,t,n){},"714d":function(e,t,n){"use strict";n("0ccc")},"749b":function(e,t,n){"use strict";n("4691")},8035:function(e,t,n){"use strict";n("b917")},8071:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}));var r,i=n("d4ec"),a=n("bee2"),o=(n("d3b7"),n("159b"),n("33d1"),n("ea98"),n("ac1f"),n("1276"),n("7db0"),n("8811")),c=n("c13f"),s=n("4947"),u=n("1139");function l(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}(function(e){e["STANDARD"]="standard",e["EMPTY"]="empty",e["HANDICAP_LANCE"]="handicapLance",e["HANDICAP_RIGHT_LANCE"]="handicapRightLance",e["HANDICAP_BISHOP"]="handicapBishop",e["HANDICAP_ROOK"]="handicapRook",e["HANDICAP_ROOK_LANCE"]="handicapRookLance",e["HANDICAP_2PIECES"]="handicap2Pieces",e["HANDICAP_4PIECES"]="handicap4Pieces",e["HANDICAP_6PIECES"]="handicap6Pieces",e["HANDICAP_8PIECES"]="handicap8Pieces",e["TSUME_SHOGI"]="tsumeShogi"})(r||(r={}));var d=function(){function e(){Object(i["a"])(this,e),this.squares=new Array;for(var t=0;t<81;t+=1)this.squares.push(null);this.reset(r.STANDARD)}return Object(a["a"])(e,[{key:"at",value:function(e){return this.squares[e.index]}},{key:"set",value:function(e,t){this.squares[e.index]=t}},{key:"swap",value:function(e,t){var n=this.squares[e.index];this.squares[e.index]=this.squares[t.index],this.squares[t.index]=n}},{key:"remove",value:function(e){var t=this.squares[e.index];return this.squares[e.index]=null,t}},{key:"listNonEmptySquares",value:function(){var e=this,t=new Array;return u["a"].all.forEach((function(n){e.squares[n.index]&&t.push(n)})),t}},{key:"clear",value:function(){var e=this;u["a"].all.forEach((function(t){e.squares[t.index]=null}))}},{key:"reset",value:function(e){if(this.clear(),e!==r.EMPTY&&(this.squares[new u["a"](5,1).index]=new s["a"](o["a"].WHITE,s["b"].KING),e!==r.TSUME_SHOGI))switch(this.squares[new u["a"](5,9).index]=new s["a"](o["a"].BLACK,s["b"].KING),this.squares[new u["a"](2,8).index]=new s["a"](o["a"].BLACK,s["b"].ROOK),this.squares[new u["a"](8,2).index]=new s["a"](o["a"].WHITE,s["b"].ROOK),this.squares[new u["a"](8,8).index]=new s["a"](o["a"].BLACK,s["b"].BISHOP),this.squares[new u["a"](2,2).index]=new s["a"](o["a"].WHITE,s["b"].BISHOP),this.squares[new u["a"](4,9).index]=new s["a"](o["a"].BLACK,s["b"].GOLD),this.squares[new u["a"](6,9).index]=new s["a"](o["a"].BLACK,s["b"].GOLD),this.squares[new u["a"](6,1).index]=new s["a"](o["a"].WHITE,s["b"].GOLD),this.squares[new u["a"](4,1).index]=new s["a"](o["a"].WHITE,s["b"].GOLD),this.squares[new u["a"](3,9).index]=new s["a"](o["a"].BLACK,s["b"].SILVER),this.squares[new u["a"](7,9).index]=new s["a"](o["a"].BLACK,s["b"].SILVER),this.squares[new u["a"](7,1).index]=new s["a"](o["a"].WHITE,s["b"].SILVER),this.squares[new u["a"](3,1).index]=new s["a"](o["a"].WHITE,s["b"].SILVER),this.squares[new u["a"](2,9).index]=new s["a"](o["a"].BLACK,s["b"].KNIGHT),this.squares[new u["a"](8,9).index]=new s["a"](o["a"].BLACK,s["b"].KNIGHT),this.squares[new u["a"](8,1).index]=new s["a"](o["a"].WHITE,s["b"].KNIGHT),this.squares[new u["a"](2,1).index]=new s["a"](o["a"].WHITE,s["b"].KNIGHT),this.squares[new u["a"](1,9).index]=new s["a"](o["a"].BLACK,s["b"].LANCE),this.squares[new u["a"](9,9).index]=new s["a"](o["a"].BLACK,s["b"].LANCE),this.squares[new u["a"](9,1).index]=new s["a"](o["a"].WHITE,s["b"].LANCE),this.squares[new u["a"](1,1).index]=new s["a"](o["a"].WHITE,s["b"].LANCE),this.squares[new u["a"](1,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](2,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](3,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](4,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](5,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](6,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](7,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](8,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](9,7).index]=new s["a"](o["a"].BLACK,s["b"].PAWN),this.squares[new u["a"](1,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](2,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](3,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](4,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](5,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](6,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](7,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](8,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),this.squares[new u["a"](9,3).index]=new s["a"](o["a"].WHITE,s["b"].PAWN),e){default:case r.STANDARD:return;case r.HANDICAP_LANCE:return void(this.squares[new u["a"](1,1).index]=null);case r.HANDICAP_RIGHT_LANCE:return void(this.squares[new u["a"](9,1).index]=null);case r.HANDICAP_BISHOP:return void(this.squares[new u["a"](2,2).index]=null);case r.HANDICAP_ROOK:return void(this.squares[new u["a"](8,2).index]=null);case r.HANDICAP_ROOK_LANCE:return this.squares[new u["a"](8,2).index]=null,void(this.squares[new u["a"](1,1).index]=null);case r.HANDICAP_2PIECES:return this.squares[new u["a"](8,2).index]=null,void(this.squares[new u["a"](2,2).index]=null);case r.HANDICAP_4PIECES:return this.squares[new u["a"](8,2).index]=null,this.squares[new u["a"](2,2).index]=null,this.squares[new u["a"](1,1).index]=null,void(this.squares[new u["a"](9,1).index]=null);case r.HANDICAP_6PIECES:return this.squares[new u["a"](8,2).index]=null,this.squares[new u["a"](2,2).index]=null,this.squares[new u["a"](1,1).index]=null,this.squares[new u["a"](2,1).index]=null,this.squares[new u["a"](8,1).index]=null,void(this.squares[new u["a"](9,1).index]=null);case r.HANDICAP_8PIECES:return this.squares[new u["a"](8,2).index]=null,this.squares[new u["a"](2,2).index]=null,this.squares[new u["a"](1,1).index]=null,this.squares[new u["a"](2,1).index]=null,this.squares[new u["a"](3,1).index]=null,this.squares[new u["a"](7,1).index]=null,this.squares[new u["a"](8,1).index]=null,void(this.squares[new u["a"](9,1).index]=null)}}},{key:"sfen",get:function(){for(var e="",t=0,n=0;n<9;n+=1){for(var r=0;r<9;r+=1){var i=this.at(u["a"].newByXY(r,n));i?(t&&(e+=t,t=0),e+=i.sfen):t+=1}t&&(e+=t,t=0),8!==n&&(e+="/")}return e}},{key:"resetBySFEN",value:function(t){if(!e.isValidSFEN(t))return!1;this.clear();for(var n=t.split("/"),r=0;r<9;r+=1)for(var i=0,a=0;a<n[r].length;a+=1){var o=n[r][a];"+"===o&&(a+=1,o+=n[r][a]);var c=l(o);c?i+=c:(this.set(u["a"].newByXY(i,r),s["a"].newBySFEN(o)),i+=1)}return!0}},{key:"findKing",value:function(e){var t=this,n=new s["a"](e,s["b"].KING);return u["a"].all.find((function(e){var r=t.at(e);if(r&&n.equals(r))return!0}))}},{key:"isCheck",value:function(e,t,n,r){var i=this,a=r||this.findKing(e);return!!a&&!!c["d"].find((function(r){for(var o=0,s=a.neighbor(r);s.valid;s=s.neighbor(r)){if(o+=1,t&&s.equals(t))break;if(!n||!s.equals(n)){var u=i.at(s);if(u){if(u.color===e)return!1;var l=Object(c["f"])(r),d=Object(c["e"])(u,l);return d===c["b"].LONG||d===c["b"].SHORT&&1===o}}}return!1}))}},{key:"copyFrom",value:function(e){var t=this;u["a"].all.forEach((function(n){t.squares[n.index]=e.at(n)}))}}],[{key:"isValidSFEN",value:function(e){var t=e.split("/");if(9!==t.length)return!1;for(var n=0;n<9;n+=1){for(var r=0,i=0;i<t[n].length;i+=1){var a=t[n][i];"+"===a&&(i+=1,a+=t[n][i]);var o=l(a);if(o)r+=o;else{if(!s["a"].isValidSFEN(a))return!1;r+=1}}if(9!==r)return!1}return!0}}]),e}()},"835e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("5319"),n("5b81"),n("498a");var r=n("8811");function i(e){var t=e.metadata.getStandardMetadata(r["h"].DATE);return t?t.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":","")+".kif":(new Date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/","")+".kif"}},"842d":function(e,t,n){"use strict";n("0be2")},8811:function(e,t,n){"use strict";n.d(t,"d",(function(){return r["a"]})),n.d(t,"e",(function(){return r["b"]})),n.d(t,"l",(function(){return r["c"]})),n.d(t,"a",(function(){return i["a"]})),n.d(t,"n",(function(){return i["e"]})),n.d(t,"j",(function(){return a["a"]})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return b["a"]})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"i",(function(){return j})),n.d(t,"h",(function(){return _})),n.d(t,"o",(function(){return T})),n.d(t,"k",(function(){return ae})),n.d(t,"m",(function(){return z}));var r=n("4947"),i=n("567e"),a=n("1139"),o=n("d4ec"),c=n("bee2"),s=(n("99af"),["１","２","３","４","５","６","７","８","９"]),u=["一","二","三","四","五","六","七","八","九"],l=function(){function e(t,n,r,i,a,c){Object(o["a"])(this,e),this.from=t,this.to=n,this.promote=r,this.color=i,this.pieceType=a,this.capturedPieceType=c}return Object(c["a"])(e,[{key:"equals",value:function(e){return!!e&&((this.from instanceof a["a"]&&e.from instanceof a["a"]&&this.from.equals(e.from)||!(this.from instanceof a["a"])&&!(e.from instanceof a["a"])&&this.from===e.from)&&this.to.equals(e.to)&&this.promote===e.promote&&this.color===e.color&&this.pieceType===e.pieceType&&this.capturedPieceType===e.capturedPieceType)}},{key:"withPromote",value:function(){return new e(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}},{key:"getDisplayText",value:function(e){var t="";if(t+=this.color===i["a"].BLACK?"▲":"△",e&&e.to.equals(this.to)?t+="同":(t+=s[this.to.file-1],t+=u[this.to.rank-1]),t+=Object(r["e"])(this.pieceType),this.promote&&(t+="成"),this.from instanceof a["a"]){var n=this.from;t+=" (".concat(n.file).concat(n.rank,")")}else t+="打";return t}},{key:"sfen",get:function(){var e="";return this.from instanceof a["a"]?e+=this.from.sfen:e+=Object(r["d"])(this.from)+"*",e+=this.to.sfen,this.promote&&(e+="+"),e}}]),e}();function d(e){var t;if("*"===e[1]){var n=r["a"].newBySFEN(e[0]);if(!n)return null;t=n.type}else{var i=a["a"].parseSFENSquare(e);if(!i)return null;t=i}var o=a["a"].parseSFENSquare(e.substring(2));if(!o)return null;var c=e.length>=5&&"+"===e[4];return{from:t,to:o,promote:c}}var b=n("8071");n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("ac1f"),n("466d"),n("a9e3");function p(e,t){return 0===e?"":(1!==e?e:"")+t.sfen}var f=function(){function e(){Object(o["a"])(this,e),this.pieces=new Map,this.pieces.set(r["b"].PAWN,0),this.pieces.set(r["b"].LANCE,0),this.pieces.set(r["b"].KNIGHT,0),this.pieces.set(r["b"].SILVER,0),this.pieces.set(r["b"].GOLD,0),this.pieces.set(r["b"].BISHOP,0),this.pieces.set(r["b"].ROOK,0)}return Object(c["a"])(e,[{key:"count",value:function(e){return this.pieces.get(e)}},{key:"set",value:function(e,t){this.pieces.set(e,t)}},{key:"add",value:function(e,t){var n=this.pieces.get(e);return n+=t,this.pieces.set(e,n),n}},{key:"reduce",value:function(e,t){var n=this.pieces.get(e);return n-=t,this.pieces.set(e,n),n}},{key:"forEach",value:function(e){e(r["b"].PAWN,this.pieces.get(r["b"].PAWN)),e(r["b"].LANCE,this.pieces.get(r["b"].LANCE)),e(r["b"].KNIGHT,this.pieces.get(r["b"].KNIGHT)),e(r["b"].SILVER,this.pieces.get(r["b"].SILVER)),e(r["b"].GOLD,this.pieces.get(r["b"].GOLD)),e(r["b"].BISHOP,this.pieces.get(r["b"].BISHOP)),e(r["b"].ROOK,this.pieces.get(r["b"].ROOK))}},{key:"sfenBlack",get:function(){return this.formatSFEN(i["a"].BLACK)}},{key:"sfenWhite",get:function(){return this.formatSFEN(i["a"].WHITE)}},{key:"formatSFEN",value:function(e){var t="";return t+=p(this.count(r["b"].ROOK),new r["a"](e,r["b"].ROOK)),t+=p(this.count(r["b"].BISHOP),new r["a"](e,r["b"].BISHOP)),t+=p(this.count(r["b"].GOLD),new r["a"](e,r["b"].GOLD)),t+=p(this.count(r["b"].SILVER),new r["a"](e,r["b"].SILVER)),t+=p(this.count(r["b"].KNIGHT),new r["a"](e,r["b"].KNIGHT)),t+=p(this.count(r["b"].LANCE),new r["a"](e,r["b"].LANCE)),t+=p(this.count(r["b"].PAWN),new r["a"](e,r["b"].PAWN)),""===t?"-":t}},{key:"copyFrom",value:function(e){var t=this;e.pieces.forEach((function(e,n){t.pieces.set(n,e)}))}}],[{key:"formatSFEN",value:function(e,t){var n=e.sfenBlack,r=t.sfenWhite;return"-"===n&&"-"===r?"-":"-"===r?n:"-"===n?r:n+r}},{key:"isValidSFEN",value:function(e){return"-"===e||!!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}},{key:"parseSFEN",value:function(t){if("-"===t)return{black:new e,white:new e};if(!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;for(var n=t.match(/([0-9]*[PLNSGBRplnsgbr])/g),a=new e,o=new e,c=0;c<n.length;c+=1){var s=n[c],u=1;s.length>=2&&(u=Number(s.substring(0,s.length-1)));var l=r["a"].newBySFEN(s[s.length-1]);l.color===i["a"].BLACK?a.add(l.type,u):o.add(l.type,u)}return{black:a,white:o}}}]),e}(),h=(n("33d1"),n("ea98"),n("1276"),n("c13f")),O={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function m(e,t,n){var r=O[e][t];return!!r&&r[n]}function g(e,t){return e===i["a"].BLACK?t<=3:t>=7}function v(e,t,n){for(var i=1;i<=9;i+=1){var o=t.at(new a["a"](n,i));if(o&&o.type===r["b"].PAWN&&o.color===e)return!0}return!1}var _,E=function(){function e(){Object(o["a"])(this,e),this._board=new b["b"],this._color=i["a"].BLACK,this._blackHand=new f,this._whiteHand=new f}return Object(c["a"])(e,[{key:"board",get:function(){return this._board}},{key:"color",get:function(){return this._color}},{key:"blackHand",get:function(){return this._blackHand}},{key:"whiteHand",get:function(){return this._whiteHand}},{key:"reset",value:function(e){switch(this._board.reset(e),this._blackHand=new f,this._whiteHand=new f,e){case b["a"].STANDARD:case b["a"].EMPTY:case b["a"].TSUME_SHOGI:this._color=i["a"].BLACK;break;case b["a"].HANDICAP_LANCE:case b["a"].HANDICAP_RIGHT_LANCE:case b["a"].HANDICAP_BISHOP:case b["a"].HANDICAP_ROOK:case b["a"].HANDICAP_ROOK_LANCE:case b["a"].HANDICAP_2PIECES:case b["a"].HANDICAP_4PIECES:case b["a"].HANDICAP_6PIECES:case b["a"].HANDICAP_8PIECES:this._color=i["a"].WHITE;break}e===b["a"].TSUME_SHOGI&&(this._whiteHand.set(r["b"].PAWN,18),this._whiteHand.set(r["b"].LANCE,4),this._whiteHand.set(r["b"].KNIGHT,4),this._whiteHand.set(r["b"].SILVER,4),this._whiteHand.set(r["b"].GOLD,4),this._whiteHand.set(r["b"].BISHOP,2),this._whiteHand.set(r["b"].ROOK,2))}},{key:"hand",value:function(e){return this._hand(e)}},{key:"_hand",value:function(e){return e===i["a"].BLACK?this._blackHand:this._whiteHand}},{key:"createMove",value:function(e,t){var n;if(e instanceof a["a"]){var r=this._board.at(e);if(!r)return null;n=r.type}else n=e;var i=this._board.at(t);return new l(e,t,!1,this.color,n,i?i.type:null)}},{key:"createMoveBySFEN",value:function(e){var t=d(e);if(!t)return null;var n=this.createMove(t.from,t.to);return n?(t.promote&&(n=n.withPromote()),n):null}},{key:"isValidMove",value:function(e){if(e.from instanceof a["a"]){var t=this._board.at(e.from);if(!t||t.color!==this.color)return!1;if(!this.isMovable(e.from,e.to))return!1;var n=this._board.at(e.to);if(n&&n.color===this.color)return!1;if(e.promote){if(!t.isPromotable())return!1;if(!g(this.color,e.from.rank)&&!g(this.color,e.to.rank))return!1}else if(m(this.color,t.type,e.to.rank))return!1;if(e.pieceType!==r["b"].KING?this._board.isCheck(this.color,e.to,e.from):this._board.isCheck(this.color,void 0,e.from,e.to))return!1}else{if(e.promote)return!1;if(e.color!==this.color)return!1;if(0===this.hand(this.color).count(e.from))return!1;if(this._board.at(e.to))return!1;if(m(this.color,e.from,e.to.rank))return!1;if(e.from===r["b"].PAWN&&v(this.color,this._board,e.to.file))return!1;if(this._board.isCheck(this.color,e.to))return!1}return!0}},{key:"doMove",value:function(e){if(!this.isValidMove(e))return!1;if(e.from instanceof a["a"]){var t=this._board.at(e.from),n=this._board.at(e.to);this._board.remove(e.from),this._board.set(e.to,e.promote?t.promoted():t),n&&n.type!==r["b"].KING&&this._hand(this.color).add(n.unpromoted().type,1)}else this._hand(this.color).reduce(e.from,1),this._board.set(e.to,new r["a"](this.color,e.from));return this._color=Object(i["e"])(this.color),!0}},{key:"undoMove",value:function(e){if(this._color=Object(i["e"])(this.color),e.from instanceof a["a"])if(this._board.set(e.from,new r["a"](this.color,e.pieceType)),e.capturedPieceType){var t=new r["a"](Object(i["e"])(this.color),e.capturedPieceType);this._board.set(e.to,t),t.type!==r["b"].KING&&this._hand(this.color).reduce(t.unpromoted().type,1)}else this._board.remove(e.to);else this._hand(this.color).add(e.from,1),this._board.remove(e.to)}},{key:"isValidEditing",value:function(e,t){if(e instanceof a["a"]){var n=this._board.at(e);if(!n)return!1;if(t instanceof a["a"]){if(e.equals(t))return!1}else if(n.type===r["b"].KING)return!1}else{if(!e.color)return!1;if(0===this.hand(e.color).count(e.type))return!1;if(t instanceof a["a"]){if(this._board.at(t))return!1}else if(e.color===t)return!1}return!0}},{key:"edit",value:function(e){if(e.move){if(!this.isValidEditing(e.move.from,e.move.to))return!1;if(e.move.from instanceof a["a"])if(e.move.to instanceof a["a"])this._board.swap(e.move.from,e.move.to);else{var t=this._board.remove(e.move.from);this._hand(e.move.to).add(t.unpromoted().type,1)}else this._hand(e.move.from.color).reduce(e.move.from.type,1),e.move.to instanceof a["a"]?this._board.set(e.move.to,e.move.from):this._hand(e.move.to).add(e.move.from.type,1)}if(e.rotate){var n=this._board.at(e.rotate);n&&this._board.set(e.rotate,n.rotate())}return!0}},{key:"sfen",get:function(){return this.getSfen(1)}},{key:"getSfen",value:function(e){var t="sfen ".concat(this._board.sfen," ").concat(Object(i["b"])(this.color)," ");return t+=f.formatSFEN(this._blackHand,this._whiteHand),t+=" "+e,t}},{key:"resetBySFEN",value:function(t){if(!e.isValidSFEN(t))return!1;var n=t.split(" ");this._board.resetBySFEN(n[1]),this._color=Object(i["d"])(n[2]);var r=f.parseSFEN(n[3]);return this._blackHand=r.black,this._whiteHand=r.white,!0}},{key:"setTurn",value:function(e){this._color=e}},{key:"isMovable",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Object(h["g"])(n,r),a=i.direction,o=i.distance,c=i.ok;if(!c)return!1;var s=this._board.at(e);if(!s)return!1;switch(Object(h["e"])(s,a)){default:return!1;case h["b"].SHORT:return 1===o;case h["b"].LONG:for(var u=h["c"][a],l=e.neighbor(u.x,u.y);l.valid;l=l.neighbor(u.x,u.y)){if(l.equals(t))return!0;if(this._board.at(l))return!1}return!1}}},{key:"copyFrom",value:function(e){this._board.copyFrom(e._board),this._color=e.color,this._blackHand.copyFrom(e._blackHand),this._whiteHand.copyFrom(e._whiteHand)}},{key:"clone",value:function(){var t=new e;return t.copyFrom(this),t}}],[{key:"isValidSFEN",value:function(e){var t=e.split(" ");return!(t.length<5)&&("sfen"===t[0]&&(!!b["b"].isValidSFEN(t[1])&&(!!Object(i["c"])(t[2])&&!!f.isValidSFEN(t[3]))))}},{key:"newBySFEN",value:function(t){var n=new e;return n.resetBySFEN(t)?n:null}}]),e}(),S=(n("498a"),n("d2ca"));(function(e){e["BLACK_NAME"]="blackName",e["WHITE_NAME"]="whiteName",e["START_DATETIME"]="startDatetime",e["END_DATETIME"]="endDatetime",e["DATE"]="date",e["TOURNAMENT"]="tournament",e["STRATEGY"]="strategy",e["TITLE"]="title",e["TIME_LIMIT"]="timeLimit",e["TIME_SPENT"]="timeSpent",e["PLACE"]="place",e["POSTED_ON"]="postedOn",e["NOTE"]="note",e["BLACK_SHORT_NAME"]="blackShortName",e["WHITE_SHORT_NAME"]="whiteShortName",e["OPUS_NO"]="opusNo",e["OPUS_NAME"]="opusName",e["AUTHOR"]="author",e["PUBLISHED_ON"]="publishedOn",e["PUBLISHED_AT"]="publishedAt",e["SOURCE"]="source",e["LENGTH"]="length",e["INTEGRITY"]="integrity",e["CATEGORY"]="category",e["AWARD"]="award"})(_||(_={}));var j,I=function(){function e(){Object(o["a"])(this,e),this.metadata=new Map,this.customMetadata=new Map}return Object(c["a"])(e,[{key:"standardMetadataKeys",get:function(){return this.metadata.keys()}},{key:"getStandardMetadata",value:function(e){return this.metadata.get(e)}},{key:"setStandardMetadata",value:function(e,t){this.metadata.set(e,t)}},{key:"customMetadataKeys",get:function(){return this.customMetadata.keys()}},{key:"getCustomMetadata",value:function(e){return this.customMetadata.get(e)}},{key:"setCustomMetadata",value:function(e,t){this.customMetadata.set(e,t)}}]),e}();(function(e){e["START"]="start",e["INTERRUPT"]="interrupt",e["RESIGN"]="resign",e["DRAW"]="draw",e["REPETITION_DRAW"]="repetitionDraw",e["MATE"]="mate",e["TIMEOUT"]="timeout",e["FOUL_WIN"]="foulWin",e["FOUL_LOSE"]="foulLose",e["ENTERING_OF_KING"]="enteringOfKing",e["WIN_BY_DEFAULT"]="winByDefault",e["LOSS_BY_DEFAULT"]="lossByDefault"})(j||(j={}));var R={start:"開始局面",resign:"投了",interrupt:"中断",draw:"持将棋",repetitionDraw:"千日手",mate:"詰み",timeout:"切れ負け",foulWin:"反則勝ち",foulLose:"反則負け",enteringOfKing:"入玉",winByDefault:"不戦勝",lossByDefault:"不戦敗"};function T(e){return R[e]}var y=function(){function e(t,n,r,i,a){Object(o["a"])(this,e),this.number=t,this.prev=n,this.branchIndex=r,this.activeBranch=i,this.move=a,this.next=null,this.branch=null,this.comment="",this.elapsedMs=0,this.totalElapsedMs=0}return Object(c["a"])(e,[{key:"displayMoveText",get:function(){var e=this.prev instanceof l?this.prev:null;return this.move instanceof l?this.move.getDisplayText(e):T(this.move)}},{key:"displayText",get:function(){var e=this.displayMoveText;if(0!==this.number){var t=Object(S["b"])(this.elapsedMs),n=Object(S["a"])(this.totalElapsedMs);e+=" (".concat(t," / ").concat(n,")")}return e}},{key:"hasBranch",get:function(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}},{key:"isFirstBranch",get:function(){return!this.prev||this.prev.next===this}},{key:"updateTotalElapsedMs",value:function(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}},{key:"setElapsedMs",value:function(e){this.elapsedMs=e,this.updateTotalElapsedMs();var t=this.next,n=[];while(t)t.updateTotalElapsedMs(),t.branch&&n.push(t.branch),t=t.next?t.next:n.pop()||null}}]),e}(),w=function(){function e(t){Object(o["a"])(this,e),this._metadata=new I,this._initialPosition=t?t.clone():new E,this._position=this.initialPosition.clone(),this._first=new y(0,null,0,!0,j.START),this._current=this._first}return Object(c["a"])(e,[{key:"metadata",get:function(){return this._metadata}},{key:"initialPosition",get:function(){return this._initialPosition}},{key:"position",get:function(){return this._position}},{key:"first",get:function(){return this._first}},{key:"current",get:function(){return this._current}},{key:"moves",get:function(){for(var e=this.movesBefore,t=this._current.next;t;t=t.next){while(!t.activeBranch)t=t.branch;e.push(t)}return e}},{key:"movesBefore",get:function(){return this._movesBefore}},{key:"_movesBefore",get:function(){var e=new Array;e.unshift(this._current);for(var t=this._current.prev;t;t=t.prev)e.unshift(t);return e}},{key:"length",get:function(){for(var e=this._current.number,t=this._current.next;t;t=t.next){while(!t.activeBranch)t=t.branch;e=t.number}return e}},{key:"branchBegin",get:function(){return this._current.prev?this._current.prev.next:null}},{key:"clear",value:function(e){e&&(this._initialPosition=e.clone()),this._position=this.initialPosition.clone(),this._first.next=null,this._current=this._first}},{key:"goBack",value:function(){return!!this._current.prev&&(this._current.move instanceof l&&this._position.undoMove(this._current.move),this._current=this._current.prev,!0)}},{key:"goForward",value:function(){if(this._current.next){this._current=this._current.next;while(!this._current.activeBranch)this._current=this._current.branch;return this._current.move instanceof l&&this._position.doMove(this._current.move),!0}return!1}},{key:"goto",value:function(e){while(e<this._current.number)if(!this.goBack())break;while(e>this._current.number)if(!this.goForward())break}},{key:"resetAllBranchSelection",value:function(){this._forEach((function(e){e.activeBranch=e.isFirstBranch}))}},{key:"switchBranchByIndex",value:function(e){if(!this._current.prev)return!1;for(var t=!1,n=this._current.prev.next;n;n=n.branch)n.branchIndex===e?(n.activeBranch=!0,this._current.move instanceof l&&this._position.undoMove(this._current.move),this._current=n,this._current.move instanceof l&&this._position.doMove(this._current.move),t=!0):n.activeBranch=!1;return t}},{key:"append",value:function(e){if(e instanceof l){if(!this.position.isValidMove(e))return!1;this._position.doMove(e)}if(this._current===this.first||this._current.move instanceof l||this.goBack(),!this._current.next)return this._current.next=new y(this._current.number+1,this._current,0,!0,e),this._current=this._current.next,!0;var t;for(t=this._current.next;t;t=t.branch)t.activeBranch=!1;var n=this._current.next;for(t=this._current.next;t;t=t.branch){if(t.move instanceof l&&e instanceof l&&e.equals(t.move)||e===t.move)return this._current=t,this._current.activeBranch=!0,!0;n=t}return this._current=new y(this._current.number+1,this._current,n.branchIndex+1,!0,e),n.branch=this._current,!0}},{key:"removeAfter",value:function(){var e=this._current;if(this.goBack()){if(this._current.next===e)this._current.next=e.branch;else for(var t=this._current.next;t;t=t.branch)if(t.branch===e){t.branch=e.branch;break}for(var n=0,r=this._current.next;r;r=r.branch)r.branchIndex=n,n+=1;this._current.next&&(this._current.next.activeBranch=!0)}else this._current.next=null}},{key:"usi",get:function(){var e="position "+this.initialPosition.sfen+" moves";return this._movesBefore.forEach((function(t){t.move instanceof l&&(e+=" "+t.move.sfen)})),e}},{key:"sfen",get:function(){return"position "+this.position.getSfen(this._current.number+1)}},{key:"forEach",value:function(e){this._forEach(e)}},{key:"_forEach",value:function(e){var t=this._first,n=[];while(t)e(t),t.branch&&n.push(t.branch),t=t.next?t.next:n.pop()||null}}]),e}();var A,N=n("b85c"),k=(n("d9e2"),n("25eb"),n("5319"),n("5b81"),{"先手":_.BLACK_NAME,"後手":_.WHITE_NAME,"開始日時":_.START_DATETIME,"終了日時":_.END_DATETIME,"対局日":_.DATE,"棋戦":_.TOURNAMENT,"戦型":_.STRATEGY,"表題":_.TITLE,"持ち時間":_.TIME_LIMIT,"消費時間":_.TIME_SPENT,"場所":_.PLACE,"掲載":_.POSTED_ON,"備考":_.NOTE,"先手省略名":_.BLACK_SHORT_NAME,"後手省略名":_.WHITE_SHORT_NAME,"作品番号":_.OPUS_NO,"作品名":_.OPUS_NAME,"作者":_.AUTHOR,"発表誌":_.PUBLISHED_ON,"発表年月":_.PUBLISHED_AT,"出典":_.SOURCE,"手数":_.LENGTH,"完全性":_.INTEGRITY,"分類":_.CATEGORY,"受賞":_.AWARD}),P={blackName:"先手",whiteName:"後手",startDatetime:"開始日時",endDatetime:"終了日時",date:"対局日",tournament:"棋戦",strategy:"戦型",title:"表題",timeLimit:"持ち時間",timeSpent:"消費時間",place:"場所",postedOn:"掲載",note:"備考",blackShortName:"先手省略名",whiteShortName:"後手省略名",opusNo:"作品番号",opusName:"作品名",author:"作者",publishedOn:"発表誌",publishedAt:"発表年月",source:"出典",length:"手数",integrity:"完全性",category:"分類",award:"受賞"};(function(e){e[e["METADATA"]=0]="METADATA",e[e["HANDICAP"]=1]="HANDICAP",e[e["BLACK_HAND"]=2]="BLACK_HAND",e[e["WHITE_HAND"]=3]="WHITE_HAND",e[e["BOARD"]=4]="BOARD",e[e["MOVE"]=5]="MOVE",e[e["COMMENT"]=6]="COMMENT",e[e["UNKNOWN"]=7]="UNKNOWN"})(A||(A={}));var H=[{prefix:/^手合割：/,type:A.HANDICAP,removePrefix:!0,isPosition:!0},{prefix:/^先手の持駒：/,type:A.BLACK_HAND,removePrefix:!0,isPosition:!0},{prefix:/^後手の持駒：/,type:A.WHITE_HAND,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:A.BOARD,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:A.MOVE,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:A.COMMENT,removePrefix:!0,isPosition:!1}];function L(e){var t=e.indexOf("#");-1===t&&(t=e.length);for(var n=0;n<H.length;n++){var r=H[n],i=e.match(r.prefix);if(i){var a=r.removePrefix?i[0].length:0;return{type:r.type,data:e.substring(a,t),isPosition:r.isPosition,metadataKey:""}}}var o=e.match(/^[^ ]+：/);if(o){var c=o[0];return{type:A.METADATA,data:e.substring(c.length,t),isPosition:!1,metadataKey:c.substring(0,c.length-1)}}return{type:A.UNKNOWN,data:e.substring(0,t),isPosition:!1,metadataKey:""}}function x(e,t){switch(t.trim()){case"平手":return void e.reset(b["a"].STANDARD);case"香落ち":return void e.reset(b["a"].HANDICAP_LANCE);case"右香落ち":return void e.reset(b["a"].HANDICAP_RIGHT_LANCE);case"角落ち":return void e.reset(b["a"].HANDICAP_BISHOP);case"飛車落ち":return void e.reset(b["a"].HANDICAP_ROOK);case"飛香落ち":return void e.reset(b["a"].HANDICAP_ROOK_LANCE);case"二枚落ち":return void e.reset(b["a"].HANDICAP_2PIECES);case"四枚落ち":return void e.reset(b["a"].HANDICAP_4PIECES);case"六枚落ち":return void e.reset(b["a"].HANDICAP_6PIECES);case"八枚落ち":return void e.reset(b["a"].HANDICAP_8PIECES);case"その他":return void e.reset(b["a"].EMPTY)}return new Error("不正なデータ:"+t)}var C={"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9},M={"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},D={"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"十一":11,"十二":12,"十三":13,"十四":14,"十五":15,"十六":16,"十七":17,"十八":18},G={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},B={"王":r["b"].KING,"玉":r["b"].KING,"飛":r["b"].ROOK,"龍":r["b"].DRAGON,"竜":r["b"].DRAGON,"角":r["b"].BISHOP,"馬":r["b"].HORSE,"金":r["b"].GOLD,"銀":r["b"].SILVER,"成銀":r["b"].PROM_SILVER,"全":r["b"].PROM_SILVER,"桂":r["b"].KNIGHT,"成桂":r["b"].PROM_KNIGHT,"圭":r["b"].PROM_KNIGHT,"香":r["b"].LANCE,"成香":r["b"].PROM_LANCE,"杏":r["b"].PROM_LANCE,"歩":r["b"].PAWN,"と":r["b"].PROM_PAWN},U={"中断":j.INTERRUPT,"投了":j.RESIGN,"持将棋":j.DRAW,"千日手":j.REPETITION_DRAW,"詰み":j.MATE,"切れ負け":j.TIMEOUT,"反則勝ち":j.FOUL_WIN,"反則負け":j.FOUL_LOSE,"入玉勝ち":j.ENTERING_OF_KING,"不戦勝":j.WIN_BY_DEFAULT,"不戦敗":j.LOSS_BY_DEFAULT},q=/^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\u3000)(玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\([1-9][1-9]\)) *(.*)$/,K=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,W=/^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗)( |$)/;function F(e,t){if(t.length<21)return new Error("不正な盤面:"+t);var n=t[20],o=M[n];if(!o)return new Error("不正な盤面:"+t);for(var c=0;c<9;c+=1){var s=9-c,u=new a["a"](s,o),l=2*c+1,d=t[l+1],b=B[d];if(b){var p="v"!==t[l]?i["a"].BLACK:i["a"].WHITE;e.set(u,new r["a"](p,b))}else e.remove(u)}}function V(e,t){var n,r=t.split(/[ 　]/),i=Object(N["a"])(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a){var o=a[0],c=a.substring(1),s=B[o],u=D[c]||1;if(!s)return new Error("不正な持ち駒: "+a);e.add(s,u)}}}catch(l){i.e(l)}finally{i.f()}}function Y(e,t){var n=W.exec(t);if(n){var r=Number(n[1]),i=U[n[2]];return e.goto(r-1),void e.append(i)}if(n=q.exec(t),!n)return new Error("不正な指し手形式:"+t);var o,c,s=Number(n[1]),u=n[2],d=n[3],b=n[4],p=n[5],f=n[6];if(0===s)return new Error("不正な手数:"+t);if(e.goto(s-1),"同　"===u){if(!(e.current.move instanceof l))return new Error("不明な移動先: "+t);o=e.current.move.to}else{var h=C[u[0]],O=M[u[1]];o=new a["a"](h,O)}if("打"===p)c=B[d];else{var m=G[p[1]],g=G[p[2]];c=new a["a"](m,g)}var v=e.position.createMove(c,o);if(!v)return new Error("不正な指し手: "+t);if("成"===b&&(v=v.withPromote()),!e.append(v))return new Error("無効な指し手: "+t);var _=K.exec(f);if(_){var E=_[1],S=_[2],j=60*Number.parseInt(E)+Number.parseInt(S);e.current.setElapsedMs(1e3*j)}}function z(e){var t,n=new w,r=e.split(/\r?\n/),i=new E,a=!1,o=Object(N["a"])(r);try{for(o.s();!(t=o.n()).done;){var c=t.value,s=L(c);if(a&&s.isPosition)return new Error("不正なデータ: "+c);var u=void 0;switch(s.type){case A.METADATA:var l=k[s.metadataKey];l?n.metadata.setStandardMetadata(l,s.data):n.metadata.setCustomMetadata(s.metadataKey,s.data);break;case A.HANDICAP:u=x(i,s.data);break;case A.BLACK_HAND:u=V(i.blackHand,s.data);break;case A.WHITE_HAND:u=V(i.whiteHand,s.data);break;case A.BOARD:u=F(i.board,s.data);break;case A.MOVE:a||(n.clear(i),a=!0),u=Y(n,s.data);break;case A.COMMENT:n.current.comment+=(0!==n.current.comment.length?"\n":"")+s.data;break;case A.UNKNOWN:console.log("skip",c);break}if(u)return u}}catch(d){o.e(d)}finally{o.f()}return a||n.clear(i),n.goto(0),n.resetAllBranchSelection(),n}var J=["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八"],Z=["１","２","３","４","５","６","７","８","９"],$=J,X={king:"玉",rook:"飛",dragon:"龍",bishop:"角",horse:"馬",gold:"金",silver:"銀",promSilver:"成銀",knight:"桂",promKnight:"成桂",lance:"香",promLance:"成香",pawn:"歩",promPawn:"と"},Q={king:"玉",rook:"飛",dragon:"龍",bishop:"角",horse:"馬",gold:"金",silver:"銀",promSilver:"全",knight:"桂",promKnight:"圭",lance:"香",promLance:"杏",pawn:"歩",promPawn:"と"},ee={start:"",resign:"投了",interrupt:"中断",draw:"持将棋",repetitionDraw:"千日手",mate:"詰み",timeout:"切れ負け",foulWin:"反則勝ち",foulLose:"反則負け",enteringOfKing:"入玉勝ち",winByDefault:"不戦勝",lossByDefault:"不戦敗"};function te(e,t){var n,r="",i=t.returnCode?t.returnCode:"\n",a=Object(N["a"])(e.standardMetadataKeys);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+=P[o]+"："+e.getStandardMetadata(o)+i}}catch(l){a.e(l)}finally{a.f()}var c,s=Object(N["a"])(e.customMetadataKeys);try{for(s.s();!(c=s.n()).done;){var u=c.value;r+=u+"："+e.getCustomMetadata(u)+i}}catch(l){s.e(l)}finally{s.f()}return r}function ne(e,t){var n="",r=t.returnCode?t.returnCode:"\n";n+="後手の持駒："+ie(e.whiteHand)+r,n+="  ９ ８ ７ ６ ５ ４ ３ ２ １"+r,n+="+---------------------------+"+r;for(var o=0;o<9;o++){n+="|";for(var c=0;c<9;c++){var s=a["a"].newByXY(c,o),u=e.board.at(s);u?u.color===i["a"].BLACK?n+=" "+Q[u.type]:n+="v"+Q[u.type]:n+=" ・"}n+="|"+$[o]+r}return n+="+---------------------------+"+r,n+="先手の持駒："+ie(e.blackHand)+r,n}function re(e){var t="";return t+=Z[e.to.file-1],t+=$[e.to.rank-1],t+=X[e.pieceType],e.promote&&(t+="成"),e.from instanceof a["a"]?t+="("+e.from.file+e.from.rank+")":t+="打",t}function ie(e){var t="";return e.forEach((function(e,n){n>=1&&(t+=Q[e],n>=2&&(t+=J[n-1]),t+="　")})),t}function ae(e,t){var n="",r=t.returnCode?t.returnCode:"\n";return n+="# KIF形式棋譜ファイル Generated by Electron Shogi"+r,n+=te(e.metadata,t),n+=ne(e.initialPosition,t),n+="手数----指手---------消費時間--"+r,e.forEach((function(e){if(e.move){e.isFirstBranch||(n+=r,n+="変化："+e.number+"手"+r),e.move instanceof l?n+=e.number+" "+re(e.move):n+=ee[e.move];var t=Object(S["b"])(e.elapsedMs),i=Object(S["a"])(e.totalElapsedMs);n+=" (".concat(t,"/").concat(i,")"),e.isFirstBranch&&e.hasBranch&&(n+="+"),n+=r}0!==e.comment.length&&(n+="*"+e.comment.replaceAll("\n",r+"*")+r)})),n}},"8a14":function(e,t,n){},9375:function(e,t,n){"use strict";n("ed7d")},"95b4":function(e,t,n){"use strict";var r;function i(e){switch(e){case r.BLACK_PLAYER:return"先手";case r.WHITE_PLAYER:return"後手";case r.RESEARCHER:return"検討"}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e["BLACK_PLAYER"]="blackPlayer",e["WHITE_PLAYER"]="whitePlayer",e["RESEARCHER"]="researcher"}(r||(r={}))},9635:function(e,t,n){"use strict";n("559f")},"97d0":function(e,t,n){"use strict";n("706f")},a2af:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"r",(function(){return E})),n.d(t,"j",(function(){return j})),n.d(t,"s",(function(){return R})),n.d(t,"m",(function(){return y})),n.d(t,"t",(function(){return A})),n.d(t,"f",(function(){return k})),n.d(t,"k",(function(){return H})),n.d(t,"h",(function(){return x})),n.d(t,"n",(function(){return M})),n.d(t,"g",(function(){return G})),n.d(t,"l",(function(){return U})),n.d(t,"i",(function(){return K})),n.d(t,"o",(function(){return F})),n.d(t,"u",(function(){return Y})),n.d(t,"d",(function(){return J})),n.d(t,"w",(function(){return $})),n.d(t,"b",(function(){return Q})),n.d(t,"v",(function(){return te})),n.d(t,"a",(function(){return re})),n.d(t,"y",(function(){return ae})),n.d(t,"x",(function(){return ce})),n.d(t,"p",(function(){return ue})),n.d(t,"q",(function(){return de}));var r,i=n("3835"),a=n("1da1"),o=(n("e9c4"),n("96cf"),n("0613")),c=n("224f"),s=n("7a23");(function(e){e["NEW_RECORD"]="newRecord",e["OPEN_RECORD"]="openRecord",e["SAVE_RECORD"]="saveRecord",e["SAVE_RECORD_AS"]="saveRecordAs",e["COPY_RECORD"]="copyRecord",e["PASTE_RECORD"]="pasteRecord",e["REMOVE_RECORD_AFTER"]="remvoeRecordAfter",e["START_POSITION_EDITING"]="startPositionEditing",e["END_POSITION_EDITING"]="endPositionEditing",e["CHANGE_TURN"]="changeTurn",e["INIT_POSITION_STANDARD"]="initPositionStandard",e["INIT_POSITION_HANDICAP_LANCE"]="initPositionHandicapLance",e["INIT_POSITION_HANDICAP_RIGHT_LANCE"]="initPositionHandicapRightLance",e["INIT_POSITION_HANDICAP_BISHOP"]="initPositionHandicapBishop",e["INIT_POSITION_HANDICAP_ROOK"]="initPositionHandicapRook",e["INIT_POSITION_HANDICAP_ROOK_LANCE"]="initPositionHandicapRookLance",e["INIT_POSITION_HANDICAP_2PIECES"]="initPositionHandicap2Pieces",e["INIT_POSITION_HANDICAP_4PIECES"]="initPositionHandicap4Pieces",e["INIT_POSITION_HANDICAP_6PIECES"]="initPositionHandicap6Pieces",e["INIT_POSITION_HANDICAP_8PIECES"]="initPositionHandicap8Pieces",e["INIT_POSITION_TSUME_SHOGI"]="initPositionTsumeShogi",e["START_RESEARCH"]="startResearch",e["STOP_RESEARCH"]="stopResearch",e["START_GAME"]="startGame",e["STOP_GAME"]="stopGame",e["RESIGN"]="resign",e["FLIP_BOARD"]="flipBoard",e["APP_SETTING_DIALOG"]="appSetting",e["USI_ENGINE_SETTING_DIALOG"]="usiEngineSetting"})(r||(r={}));var u,l=n("8071"),d=n("5530"),b=n("1922"),p=n("b5d8"),f=n("39fb");(function(e){e["APP_SETTING"]="appSetting",e["RESEARCH_SETTING"]="researchSetting",e["GAME_SETTING"]="gameSetting"})(u||(u={}));var h={getRecordPathFromProcArg:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)})))()},updateMenuState:function(){},showOpenRecordDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},openRecord:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},showSaveRecordDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},saveRecord:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},showSelectFileDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},loadAppSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.APP_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(b["c"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(b["c"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveAppSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.APP_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadResearchSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.RESEARCH_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(f["a"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(f["a"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveResearchSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.RESEARCH_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadGameSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.GAME_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(p["b"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(p["b"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveGameSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.GAME_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadUSIEngineSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(new c["a"]).json);case 1:case"end":return e.stop()}}),e)})))()},saveUSIEngineSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},showSelectUSIEngineDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},getUSIEngineInfo:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},startResearch:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},endResearch:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},startGame:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},endGame:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},updateUSIPosition:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},stopUSI:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},sendUSISetOption:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onSendError:function(){},onMenuEvent:function(){},onUSIBestMove:function(){},onUSIInfo:function(){}};function O(){return window}function m(){return!!O().electronShogiAPI}function g(){return O().electronShogiAPI||h}function v(){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().getRecordPathFromProcArg();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showOpenRecordDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function j(e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().openRecord(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function R(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSaveRecordDialog(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveRecord(t,n);case 2:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function A(){return N.apply(this,arguments)}function N(){return N=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSelectFileDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function k(){return P.apply(this,arguments)}function P(){return P=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadAppSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function H(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveAppSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadResearchSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function M(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveResearchSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function G(){return B.apply(this,arguments)}function B(){return B=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadGameSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function U(e){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveGameSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return W=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=c["a"],e.next=3,g().loadUSIEngineSetting();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function F(e){return V.apply(this,arguments)}function V(){return V=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveUSIEngineSetting(t.jsonWithIndent);case 2:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function Y(){return z.apply(this,arguments)}function z(){return z=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSelectUSIEngineDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function J(e){return Z.apply(this,arguments)}function Z(){return Z=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().getUSIEngineInfo(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function $(e,t){return X.apply(this,arguments)}function X(){return X=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().startResearch(JSON.stringify(t),n);case 2:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Q(){return ee.apply(this,arguments)}function ee(){return ee=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().endResearch();case 2:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return ne=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().startGame(JSON.stringify(t),n);case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().endGame(t,n);case 2:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ae(e,t,n,r){return oe.apply(this,arguments)}function oe(){return oe=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().updateUSIPosition(t,JSON.stringify(n),r,i);case 2:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return se=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().stopUSI(t);case 2:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return le=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().sendUSISetOption(t,n);case 2:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function de(e){var t=e.state,n=g();n.onSendError((function(t){e.commit(o["b"].PUSH_ERROR,t)})),n.onMenuEvent((function(n){if(!t.bussyState.isBussy)switch(n){case r.NEW_RECORD:e.commit(o["b"].NEW_RECORD);break;case r.OPEN_RECORD:e.dispatch(o["a"].OPEN_RECORD);break;case r.SAVE_RECORD:e.dispatch(o["a"].SAVE_RECORD,{overwrite:!0});break;case r.SAVE_RECORD_AS:e.dispatch(o["a"].SAVE_RECORD);break;case r.COPY_RECORD:e.dispatch(o["a"].COPY_RECORD);break;case r.PASTE_RECORD:e.commit(o["b"].SHOW_PASTE_DIALOG);break;case r.REMOVE_RECORD_AFTER:e.dispatch(o["a"].REMOVE_RECORD_AFTER);break;case r.START_POSITION_EDITING:e.dispatch(o["a"].START_POSITION_EDITING);break;case r.END_POSITION_EDITING:e.dispatch(o["a"].END_POSITION_EDITING);break;case r.CHANGE_TURN:e.commit(o["b"].CHANGE_TURN);break;case r.INIT_POSITION_STANDARD:e.commit(o["b"].INITIALIZE_POSITION,l["a"].STANDARD);break;case r.INIT_POSITION_HANDICAP_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_LANCE);break;case r.INIT_POSITION_HANDICAP_RIGHT_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_RIGHT_LANCE);break;case r.INIT_POSITION_HANDICAP_BISHOP:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_BISHOP);break;case r.INIT_POSITION_HANDICAP_ROOK:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_ROOK);break;case r.INIT_POSITION_HANDICAP_ROOK_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_ROOK_LANCE);break;case r.INIT_POSITION_HANDICAP_2PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_2PIECES);break;case r.INIT_POSITION_HANDICAP_4PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_4PIECES);break;case r.INIT_POSITION_HANDICAP_6PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_6PIECES);break;case r.INIT_POSITION_HANDICAP_8PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["a"].HANDICAP_8PIECES);break;case r.INIT_POSITION_TSUME_SHOGI:e.commit(o["b"].INITIALIZE_POSITION,l["a"].TSUME_SHOGI);break;case r.START_GAME:e.commit(o["b"].SHOW_GAME_DIALOG);break;case r.STOP_GAME:e.dispatch(o["a"].STOP_GAME);break;case r.RESIGN:e.dispatch(o["a"].RESIGN_BY_USER);break;case r.START_RESEARCH:e.commit(o["b"].SHOW_RESEARCH_DIALOG);break;case r.STOP_RESEARCH:e.dispatch(o["a"].STOP_RESEARCH);break;case r.FLIP_BOARD:e.commit(o["b"].FLIP_BOARD);break;case r.APP_SETTING_DIALOG:e.commit(o["b"].OPEN_APP_SETTING_DIALOG);break;case r.USI_ENGINE_SETTING_DIALOG:e.commit(o["b"].OPEN_USI_ENGINE_MANAGEMENT_DIALOG);break}})),n.onUSIBestMove((function(t,n,r,i){e.dispatch(o["a"].DO_MOVE_BY_USI_ENGINE,{sessionID:t,usi:n,color:r,sfen:i})})),n.onUSIInfo((function(t,n,r,i){e.commit(o["b"].RECEIVE_USI_INFO,{sessionID:t,usi:n,sender:r,info:JSON.parse(i)})})),Object(s["z"])((function(){return[t.mode,t.bussyState.isBussy]}),(function(e){var t=Object(i["a"])(e,2),r=t[0],a=t[1];n.updateMenuState(r,a)})),n.updateMenuState(t.mode,t.bussyState.isBussy)}},add1:function(e,t,n){"use strict";n("d58e")},b575:function(e,t,n){},b5d8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r;n("d9e2");function i(){return{black:{name:"人",type:r.HUMAN},white:{name:"人",type:r.HUMAN},timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0}}function a(e){return 0===e.timeLimit.timeSeconds&&0===e.timeLimit.byoyomi?new Error("持ち時間と秒読みが両方とも0です。"):0!==e.timeLimit.byoyomi&&0!==e.timeLimit.increment?new Error("秒読みとはフィッシャールールと併用できません。"):void 0}(function(e){e["HUMAN"]="human",e["USI"]="usi"})(r||(r={}))},b917:function(e,t,n){},c017:function(e,t,n){},c033:function(e,t,n){},c13f:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d})),function(e){e["UP"]="up",e["DOWN"]="down",e["LEFT"]="left",e["RIGHT"]="right",e["LEFT_UP"]="left_up",e["RIGHT_UP"]="right_up",e["LEFT_DOWN"]="left_down",e["RIGHT_DOWN"]="right_down",e["LEFT_UP_KNIGHT"]="left_up_knight",e["RIGHT_UP_KNIGHT"]="right_up_knight",e["LEFT_DOWN_KNIGHT"]="left_down_knight",e["RIGHT_DOWN_KNIGHT"]="right_down_knight"}(r||(r={}));var i={up:r.DOWN,down:r.UP,left:r.RIGHT,right:r.LEFT,left_up:r.RIGHT_DOWN,right_up:r.LEFT_DOWN,left_down:r.RIGHT_UP,right_down:r.LEFT_UP,left_up_knight:r.RIGHT_DOWN_KNIGHT,right_up_knight:r.LEFT_DOWN_KNIGHT,left_down_knight:r.RIGHT_UP_KNIGHT,right_down_knight:r.LEFT_UP_KNIGHT};function a(e){return i[e]}var o,c=[r.UP,r.DOWN,r.LEFT,r.RIGHT,r.LEFT_UP,r.RIGHT_UP,r.LEFT_DOWN,r.RIGHT_DOWN,r.LEFT_UP_KNIGHT,r.RIGHT_UP_KNIGHT,r.LEFT_DOWN_KNIGHT,r.RIGHT_DOWN_KNIGHT];(function(e){e["SHORT"]="short",e["LONG"]="long"})(o||(o={}));var s={black:{pawn:{up:o.SHORT},lance:{up:o.LONG},knight:{left_up_knight:o.SHORT,right_up_knight:o.SHORT},silver:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left_down:o.SHORT,right_down:o.SHORT},gold:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},bishop:{left_up:o.LONG,right_up:o.LONG,left_down:o.LONG,right_down:o.LONG},rook:{up:o.LONG,left:o.LONG,right:o.LONG,down:o.LONG},king:{left_down:o.SHORT,right_down:o.SHORT,left_up:o.SHORT,right_up:o.SHORT,down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},promPawn:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},promLance:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},promKnight:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},promSilver:{left_up:o.SHORT,up:o.SHORT,right_up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},horse:{left_up:o.LONG,right_up:o.LONG,left_down:o.LONG,right_down:o.LONG,up:o.SHORT,left:o.SHORT,right:o.SHORT,down:o.SHORT},dragon:{up:o.LONG,left:o.LONG,right:o.LONG,down:o.LONG,left_up:o.SHORT,right_up:o.SHORT,left_down:o.SHORT,right_down:o.SHORT}},white:{pawn:{down:o.SHORT},lance:{down:o.LONG},knight:{left_down_knight:o.SHORT,right_down_knight:o.SHORT},silver:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left_up:o.SHORT,right_up:o.SHORT},gold:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},bishop:{left_down:o.LONG,right_down:o.LONG,left_up:o.LONG,right_up:o.LONG},rook:{down:o.LONG,left:o.LONG,right:o.LONG,up:o.LONG},king:{left_down:o.SHORT,right_down:o.SHORT,left_up:o.SHORT,right_up:o.SHORT,down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},promPawn:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},promLance:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},promKnight:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},promSilver:{left_down:o.SHORT,down:o.SHORT,right_down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},horse:{left_down:o.LONG,right_down:o.LONG,left_up:o.LONG,right_up:o.LONG,down:o.SHORT,left:o.SHORT,right:o.SHORT,up:o.SHORT},dragon:{down:o.LONG,left:o.LONG,right:o.LONG,up:o.LONG,left_down:o.SHORT,right_down:o.SHORT,left_up:o.SHORT,right_up:o.SHORT}}};function u(e,t){return s[e.color][e.type][t]}var l={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function d(e,t){if(1===e&&-2===t)return{direction:r.RIGHT_UP_KNIGHT,distance:1,ok:!0};if(-1===e&&-2===t)return{direction:r.LEFT_UP_KNIGHT,distance:1,ok:!0};if(1===e&&2===t)return{direction:r.RIGHT_DOWN_KNIGHT,distance:1,ok:!0};if(-1===e&&2===t)return{direction:r.LEFT_DOWN_KNIGHT,distance:1,ok:!0};if(0!==e&&0!==t&&Math.abs(e)!==Math.abs(t))return{direction:"",distance:0,ok:!1};var n=e,i=t,a=0;return 0!==n&&(a=Math.abs(n),n/=a),0!==i&&(a=Math.abs(i),i/=a),-1===n&&-1===i?{direction:r.LEFT_UP,distance:a,ok:!0}:0===n&&-1===i?{direction:r.UP,distance:a,ok:!0}:1===n&&-1===i?{direction:r.RIGHT_UP,distance:a,ok:!0}:-1===n&&0===i?{direction:r.LEFT,distance:a,ok:!0}:1===n&&0===i?{direction:r.RIGHT,distance:a,ok:!0}:-1===n&&1===i?{direction:r.LEFT_DOWN,distance:a,ok:!0}:0===n&&1===i?{direction:r.DOWN,distance:a,ok:!0}:1===n&&1===i?{direction:r.RIGHT_DOWN,distance:a,ok:!0}:{direction:"",distance:0,ok:!1}}},cd49:function(e,t,n){"use strict";n.r(t);var r=n("1da1"),i=n("2909"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("d3b7"),n("820e"),n("3ca3"),n("ddb0"),n("d9e2"),n("7a23"));function o(e,t,n,r,i,o){var c=Object(a["x"])("StandardLayout"),s=Object(a["x"])("GameDialog"),u=Object(a["x"])("ResearchDialog"),l=Object(a["x"])("USIEngineManagementDialog"),d=Object(a["x"])("AppSettingDialog"),b=Object(a["x"])("PasteDialog"),p=Object(a["x"])("Bussy"),f=Object(a["x"])("Message"),h=Object(a["x"])("ErrorMessage");return Object(a["q"])(),Object(a["f"])(a["a"],null,[Object(a["j"])(c,{class:"main"}),e.dialogVisibilities.game?(Object(a["q"])(),Object(a["d"])(s,{key:0})):Object(a["e"])("",!0),e.dialogVisibilities.research?(Object(a["q"])(),Object(a["d"])(u,{key:1})):Object(a["e"])("",!0),e.dialogVisibilities.usiEngineSetting?(Object(a["q"])(),Object(a["d"])(l,{key:2})):Object(a["e"])("",!0),e.dialogVisibilities.appSetting?(Object(a["q"])(),Object(a["d"])(d,{key:3})):Object(a["e"])("",!0),e.dialogVisibilities.paste?(Object(a["q"])(),Object(a["d"])(b,{key:4})):Object(a["e"])("",!0),e.dialogVisibilities.processing?(Object(a["q"])(),Object(a["d"])(p,{key:5})):Object(a["e"])("",!0),e.hasMessage?(Object(a["q"])(),Object(a["d"])(f,{key:6})):Object(a["e"])("",!0),e.hasErrors?(Object(a["q"])(),Object(a["d"])(h,{key:7})):Object(a["e"])("",!0)],64)}n("aff5"),n("a9e3");var c={class:"main"},s={class:"top-pane",ref:"topPane"};function u(e,t,n,r,i,o){var u=Object(a["x"])("BoardPane"),l=Object(a["x"])("RecordPane"),d=Object(a["x"])("InformationPane");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",c,[Object(a["g"])("div",s,[Object(a["j"])(u,{class:"top-left-pane",maxSize:e.boardPaneMaxSize},null,8,["maxSize"]),Object(a["j"])(l,{class:"top-right-pane"})],512),Object(a["j"])(d,{class:"bottom-pane",size:e.bottomPaneSize},null,8,["size"])])])}var l={class:"control top"},d=Object(a["i"])(" 対局 "),b=Object(a["i"])(" 中断 "),p=Object(a["i"])(" 投了 "),f=Object(a["i"])(" 検討 "),h=Object(a["i"])(" 検討終了 "),O=Object(a["i"])(" 局面編集 "),m=Object(a["i"])(" 局面編集終了 "),g=Object(a["i"])(" 手番変更 "),v={class:"control bottom"},_=["disabled"],E=Object(a["i"])(" アプリ設定 "),S=["disabled"],j=Object(a["i"])(" エンジン設定 "),I=Object(a["i"])(" 盤面反転 "),R=["disabled"],T=Object(a["i"])(" 棋譜貼り付け "),y=Object(a["i"])(" 棋譜コピー "),w=Object(a["i"])(" 指し手削除 ");function A(e,t,n,r,i,o){var c=Object(a["x"])("Icon"),s=Object(a["x"])("Board");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["j"])(s,{layoutType:e.layout,maxSize:e.maxSize,position:e.position,lastMove:e.lastMove,flip:e.flip,allowMove:e.allowMove,allowEdit:e.allowEdit,blackPlayerName:e.blackPlayerName,whitePlayerName:e.whitePlayerName,blackPlayerTimeMs:e.blackPlayerTimeMs,blackPlayerByoyomi:e.blackPlayerByoyomi,whitePlayerTimeMs:e.whitePlayerTimeMs,whitePlayerByoyomi:e.whitePlayerByoyomi,onMove:e.onMove,onEdit:e.onEdit},{"right-control":Object(a["A"])((function(){return[Object(a["g"])("div",l,[e.controlStates.game?(Object(a["q"])(),Object(a["f"])("button",{key:0,onClick:t[0]||(t[0]=function(){return e.onGame&&e.onGame.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"game"}),d])):Object(a["e"])("",!0),e.controlStates.stop?(Object(a["q"])(),Object(a["f"])("button",{key:1,onClick:t[1]||(t[1]=function(){return e.onStop&&e.onStop.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"stop"}),b])):Object(a["e"])("",!0),e.controlStates.resign?(Object(a["q"])(),Object(a["f"])("button",{key:2,onClick:t[2]||(t[2]=function(){return e.onResign&&e.onResign.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"resign"}),p])):Object(a["e"])("",!0),e.controlStates.research?(Object(a["q"])(),Object(a["f"])("button",{key:3,onClick:t[3]||(t[3]=function(){return e.onResearch&&e.onResearch.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"research"}),f])):Object(a["e"])("",!0),e.controlStates.endResearch?(Object(a["q"])(),Object(a["f"])("button",{key:4,onClick:t[4]||(t[4]=function(){return e.onEndResearch&&e.onEndResearch.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"end"}),h])):Object(a["e"])("",!0),e.controlStates.startEditPosition?(Object(a["q"])(),Object(a["f"])("button",{key:5,onClick:t[5]||(t[5]=function(){return e.onStartEditPosition&&e.onStartEditPosition.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"edit"}),O])):Object(a["e"])("",!0),e.controlStates.endEditPosition?(Object(a["q"])(),Object(a["f"])("button",{key:6,onClick:t[6]||(t[6]=function(){return e.onEndEditPosition&&e.onEndEditPosition.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"check"}),m])):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:7,onClick:t[7]||(t[7]=function(){return e.onChangeTurn&&e.onChangeTurn.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"swap"}),g])):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:8,onClick:t[8]||(t[8]=function(){return e.onInitPositionStandard&&e.onInitPositionStandard.apply(e,arguments)})}," 平手 ")):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:9,onClick:t[9]||(t[9]=function(){return e.onInitPositionTsumeShogi&&e.onInitPositionTsumeShogi.apply(e,arguments)})}," 詰将棋 ")):Object(a["e"])("",!0)])]})),"left-control":Object(a["A"])((function(){return[Object(a["g"])("div",v,[Object(a["g"])("button",{onClick:t[10]||(t[10]=function(){return e.onOpenAppSettings&&e.onOpenAppSettings.apply(e,arguments)}),disabled:!e.controlStates.appSettings},[Object(a["j"])(c,{class:"icon",icon:"settings"}),E],8,_),Object(a["g"])("button",{onClick:t[11]||(t[11]=function(){return e.onOpenEngineSettings&&e.onOpenEngineSettings.apply(e,arguments)}),disabled:!e.controlStates.engineSettings},[Object(a["j"])(c,{class:"icon",icon:"engineSettings"}),j],8,S),Object(a["g"])("button",{onClick:t[12]||(t[12]=function(){return e.onFlip&&e.onFlip.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"flip"}),I]),Object(a["g"])("button",{onClick:t[13]||(t[13]=function(){return e.onPaste&&e.onPaste.apply(e,arguments)}),disabled:!e.controlStates.paste},[Object(a["j"])(c,{class:"icon",icon:"paste"}),T],8,R),Object(a["g"])("button",{onClick:t[14]||(t[14]=function(){return e.onCopy&&e.onCopy.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"copy"}),y]),Object(a["g"])("button",{onClick:t[15]||(t[15]=function(){return e.onRemoveAfter&&e.onRemoveAfter.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"delete"}),w])])]})),_:1},8,["layoutType","maxSize","position","lastMove","flip","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit"])])}var N=["src"],k={class:"player-name-text"},P={class:"clock-text"},H={class:"player-name-text"},L={class:"clock-text"},x=["src"],C=["onClick","onContextmenu"],M=["src"],D=["onClick"],G=["src"],B=["onClick"],U=["src"],q=["src"];function K(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",{class:"frame",style:Object(a["n"])(e.layout.frame.style),onClick:t[2]||(t[2]=function(t){return e.clickFrame()})},[Object(a["g"])("div",{class:"board",style:Object(a["n"])(e.layout.board.style)},[Object(a["g"])("img",{class:"board-image",src:e.layout.board.imagePath},null,8,N)],4),Object(a["g"])("div",{class:Object(a["m"])(["player-name",{active:"black"==e.position.color}]),style:Object(a["n"])(e.layout.blackPlayerName.style)},[Object(a["g"])("span",k,"▲"+Object(a["y"])(e.blackPlayerName||"先手"),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["clock",e.blackPlayerTimeSeverity]),style:Object(a["n"])(e.layout.blackClock.style)},[Object(a["g"])("span",P,Object(a["y"])(e.blackPlayerTimeText),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["player-name",{active:"white"==e.position.color}]),style:Object(a["n"])(e.layout.whitePlayerName.style)},[Object(a["g"])("span",H,"△"+Object(a["y"])(e.whitePlayerName||"後手"),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["clock",e.whitePlayerTimeSeverity]),style:Object(a["n"])(e.layout.whiteClock.style)},[Object(a["g"])("span",L,Object(a["y"])(e.whitePlayerTimeText),1)],6),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.square,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"square",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.piece,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,x)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.square,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"square",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickSquare(n,t.file,t.rank)},onContextmenu:function(n){return e.clickSquareR(n,t.file,t.rank)}},null,44,C)})),128)),Object(a["g"])("div",{class:"hand",style:Object(a["n"])(e.layout.blackHand.style)},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pointers,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pieces,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,M)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pointers,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickHand(n,"black",t.type)}},null,12,D)})),128))],4),Object(a["g"])("div",{class:"hand",style:Object(a["n"])(e.layout.whiteHand.style)},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pointers,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pieces,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,G)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pointers,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickHand(n,"white",t.type)}},null,12,B)})),128))],4),e.layout.promotion?(Object(a["q"])(),Object(a["f"])("div",{key:0,class:"promotion-selector",style:Object(a["n"])(e.layout.promotion.style)},[Object(a["g"])("div",{class:"select-button promote",onClick:t[0]||(t[0]=function(t){return e.clickPromote(t)})},[Object(a["g"])("img",{class:"piece-image",src:e.layout.promotion.promoteImagePath},null,8,U)]),Object(a["g"])("div",{class:"select-button not-promote",onClick:t[1]||(t[1]=function(t){return e.clickNotPromote(t)})},[Object(a["g"])("img",{class:"piece-image",src:e.layout.promotion.notPromoteImagePath},null,8,q)])],4)):Object(a["e"])("",!0),Object(a["g"])("div",{class:"turn",style:Object(a["n"])(e.layout.turn.style)},"手番",4),Object(a["g"])("div",{style:Object(a["n"])(e.layout.control.left.style)},[Object(a["w"])(e.$slots,"left-control",{},void 0,!0)],4),Object(a["g"])("div",{style:Object(a["n"])(e.layout.control.right.style)},[Object(a["w"])(e.$slots,"right-control",{},void 0,!0)],4)],4)])}n("33d1"),n("ea98");var W=n("21a3"),F=n("8811"),V=n("d4ec"),Y=n("bee2"),z=function(){function e(t,n){Object(V["a"])(this,e),this.width=t,this.height=n}return Object(Y["a"])(e,[{key:"add",value:function(t){return new e(this.width+t.width,this.height+t.height)}},{key:"reduce",value:function(t){return new e(this.width-t.width,this.height-t.height)}}]),e}(),J=n("d2ca"),Z=Object(a["k"])({name:"Board",props:{layoutType:{type:String,required:!0},maxSize:{type:z,required:!0},position:{type:Object,required:!0},lastMove:{type:F["c"],required:!1},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1},whitePlayerName:{type:String,required:!1},blackPlayerTimeMs:{type:Number,required:!1},blackPlayerByoyomi:{type:Number,required:!1},whitePlayerTimeMs:{type:Number,required:!1},whitePlayerByoyomi:{type:Number,required:!1}},emits:["move","edit"],setup:function(e,t){var n=Object(a["t"])({pointer:null,reservedMove:null}),r=function(){n.pointer=null,n.reservedMove=null};Object(a["z"])([function(){return e.position},function(){return e.allowEdit},function(){return e.allowMove}],(function(){r()}));var i=function(){r()},o=function(i,a,o){var c=n.pointer;if(r(),!(i instanceof F["j"]&&c instanceof F["j"]&&i.equals(c))&&!(i instanceof F["d"]&&c instanceof F["d"]&&i.equals(c))){if(c){var s=c,u=i instanceof F["j"]?i:i.color;if(e.allowEdit&&e.position.isValidEditing(s,u))return void t.emit("edit",{move:{from:c,to:u}});if(e.allowMove&&i instanceof F["j"]){var l=c instanceof F["j"]?c:c.type,d=i,b=e.position.createMove(l,d);if(!b)return;var p=e.position.isValidMove(b),f=e.position.isValidMove(b.withPromote());if(p&&f)return void(n.reservedMove=b);if(p)return void t.emit("move",b);if(f)return void t.emit("move",b.withPromote())}}!e.allowMove&&!e.allowEdit||a||(e.allowEdit||o===e.position.color)&&(n.pointer=i)}},c=function(t,n,r){t.stopPropagation(),t.preventDefault();var i=new F["j"](n,r),a=e.position.board.at(i),c=!a;o(i,c,null===a||void 0===a?void 0:a.color)},s=function(t,n,r){t.stopPropagation(),t.preventDefault();var i=0===e.position.hand(n).count(r);o(new F["d"](n,r),i,n)},u=function(n,i,a){n.stopPropagation(),n.preventDefault(),r();var o=new F["j"](i,a);e.allowEdit&&e.position.board.at(o)&&t.emit("edit",{rotate:o})},l=function(i){i.stopPropagation(),i.preventDefault();var a=n.reservedMove;r(),a&&e.position.isValidMove(a.withPromote())&&t.emit("move",a.withPromote())},d=function(i){i.stopPropagation(),i.preventDefault();var a=n.reservedMove;r(),a&&e.position.isValidMove(a)&&t.emit("move",a)},b=Object(a["b"])((function(){var t=new W["b"](e.layoutType);return t.preload(),t})),p=Object(a["b"])((function(){return b.value.build(e.maxSize.reduce(new z(20,20)),e.position,e.lastMove,n.pointer,n.reservedMove,e.flip)})),f=function(e,t){return e?Object(J["c"])(Math.ceil(e/1e3)):void 0!==t?""+t:"0:00:00"},h=function(e,t){if(!e&&!t)return"normal";var n=(e||0)/1e3+(t||0);return n<=5?"danger":n<=10?"warning":"normal"},O=Object(a["b"])((function(){return f(e.blackPlayerTimeMs,e.blackPlayerByoyomi)})),m=Object(a["b"])((function(){return h(e.blackPlayerTimeMs,e.blackPlayerByoyomi)})),g=Object(a["b"])((function(){return f(e.whitePlayerTimeMs,e.whitePlayerByoyomi)})),v=Object(a["b"])((function(){return h(e.whitePlayerTimeMs,e.whitePlayerByoyomi)}));return{clickFrame:i,clickSquare:c,clickHand:s,clickSquareR:u,clickPromote:l,clickNotPromote:d,layout:p,blackPlayerTimeText:O,blackPlayerTimeSeverity:m,whitePlayerTimeText:g,whitePlayerTimeSeverity:v}}}),$=(n("452a"),n("6b0d")),X=n.n($);const Q=X()(Z,[["render",K],["__scopeId","data-v-6ddcd49e"]]);var ee=Q,te=n("0613"),ne=n("3f98"),re=["src"];function ie(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("img",{class:"icon",src:e.source},null,8,re)}var ae,oe,ce=n("ade3"),se=(n("159b"),n("07ac"),n("dac8"));(function(e){e["BUSSY"]="bussy",e["ERROR"]="error",e["INFO"]="info",e["GAME"]="game",e["STOP"]="stop",e["RESIGN"]="resign",e["RESEARCH"]="research",e["END"]="end",e["EDIT"]="edit",e["CHECK"]="check",e["SWAP"]="swap",e["SETTINGS"]="settings",e["ENGINE_SETTINGS"]="engineSettings",e["FLIP"]="flip",e["PASTE"]="paste",e["COPY"]="copy",e["DELETE"]="delete",e["COMMENT"]="comment",e["BRAIN"]="brain",e["CHART"]="chart",e["ARROW_DROP"]="arrowDrop",e["FIRST"]="first",e["BACK"]="back",e["NEXT"]="next",e["LAST"]="last"})(oe||(oe={}));var ue=(ae={},Object(ce["a"])(ae,oe.BUSSY,"icon/hourglass_empty_white_24dp.svg"),Object(ce["a"])(ae,oe.ERROR,"icon/error_outline_white_24dp.svg"),Object(ce["a"])(ae,oe.INFO,"icon/info_white_24dp.svg"),Object(ce["a"])(ae,oe.GAME,"icon/sports_esports_white_24dp.svg"),Object(ce["a"])(ae,oe.STOP,"icon/block_white_24dp.svg"),Object(ce["a"])(ae,oe.RESIGN,"icon/flag_white_24dp.svg"),Object(ce["a"])(ae,oe.RESEARCH,"icon/science_white_24dp.svg"),Object(ce["a"])(ae,oe.END,"icon/do_disturb_on_white_24dp.svg"),Object(ce["a"])(ae,oe.EDIT,"icon/app_registration_white_24dp.svg"),Object(ce["a"])(ae,oe.CHECK,"icon/check_circle_white_24dp.svg"),Object(ce["a"])(ae,oe.SWAP,"icon/swap_vert_white_24dp.svg"),Object(ce["a"])(ae,oe.SETTINGS,"icon/settings_white_24dp.svg"),Object(ce["a"])(ae,oe.ENGINE_SETTINGS,"icon/settings_input_component_white_24dp.svg"),Object(ce["a"])(ae,oe.FLIP,"icon/flip_camera_android_white_24dp.svg"),Object(ce["a"])(ae,oe.PASTE,"icon/content_paste_white_24dp.svg"),Object(ce["a"])(ae,oe.COPY,"icon/content_copy_white_24dp.svg"),Object(ce["a"])(ae,oe.DELETE,"icon/backspace_white_24dp.svg"),Object(ce["a"])(ae,oe.COMMENT,"icon/edit_note_white_24dp.svg"),Object(ce["a"])(ae,oe.BRAIN,"icon/psychology_white_24dp.svg"),Object(ce["a"])(ae,oe.CHART,"icon/show_chart_white_24dp.svg"),Object(ce["a"])(ae,oe.ARROW_DROP,"icon/arrow_drop_down_white_24dp.svg"),Object(ce["a"])(ae,oe.FIRST,"icon/first_page_white_24dp.svg"),Object(ce["a"])(ae,oe.BACK,"icon/chevron_left_white_24dp.svg"),Object(ce["a"])(ae,oe.NEXT,"icon/chevron_right_white_24dp.svg"),Object(ce["a"])(ae,oe.LAST,"icon/last_page_white_24dp.svg"),ae);Object.values(ue).forEach((function(e){Object(se["a"])(e)}));var le=Object(a["k"])({name:"Icon",props:{icon:{type:String,required:!0}},setup:function(e){return{source:ue[e.icon]}}});const de=X()(le,[["render",ie]]);var be=de,pe=Object(a["k"])({name:"BoardPane",props:{maxSize:{type:z,required:!0}},components:{Board:ee,Icon:be},setup:function(){var e=Object(te["e"])(),t=function(t){e.dispatch(te["a"].DO_MOVE_BY_USER,t)},n=function(t){e.commit(te["b"].EDIT_POSITION,t)},r=function(){e.commit(te["b"].SHOW_GAME_DIALOG)},i=function(){e.dispatch(te["a"].STOP_GAME)},o=function(){e.dispatch(te["a"].RESIGN_BY_USER)},c=function(){e.commit(te["b"].SHOW_RESEARCH_DIALOG)},s=function(){e.dispatch(te["a"].STOP_RESEARCH)},u=function(){e.dispatch(te["a"].START_POSITION_EDITING)},l=function(){e.dispatch(te["a"].END_POSITION_EDITING)},d=function(){e.commit(te["b"].INITIALIZE_POSITION,F["b"].STANDARD)},b=function(){e.commit(te["b"].INITIALIZE_POSITION,F["b"].TSUME_SHOGI)},p=function(){e.commit(te["b"].CHANGE_TURN)},f=function(){e.commit(te["b"].OPEN_APP_SETTING_DIALOG)},h=function(){e.commit(te["b"].OPEN_USI_ENGINE_MANAGEMENT_DIALOG)},O=function(){e.commit(te["b"].FLIP_BOARD)},m=function(){e.commit(te["b"].SHOW_PASTE_DIALOG)},g=function(){e.dispatch(te["a"].COPY_RECORD)},v=function(){e.dispatch(te["a"].REMOVE_RECORD_AFTER)},_=Object(a["b"])((function(){return e.state.mode===ne["a"].POSITION_EDITING})),E=Object(a["b"])((function(){return e.getters.isMovableByUser})),S=Object(a["b"])((function(){return e.state.record.position})),j=Object(a["b"])((function(){var t=e.state.record.current.move;return t instanceof F["c"]?t:null})),I=Object(a["b"])((function(){return e.state.appSetting.boardLayout})),R=Object(a["b"])((function(){return e.state.appSetting.boardFlipping})),T=Object(a["b"])((function(){return e.state.record.metadata.getStandardMetadata(F["h"].BLACK_NAME)})),y=Object(a["b"])((function(){return e.state.record.metadata.getStandardMetadata(F["h"].WHITE_NAME)})),w=Object(a["b"])((function(){return e.state.mode===ne["a"].GAME?e.state.gameState.blackTimeMs:void 0})),A=Object(a["b"])((function(){return e.state.mode===ne["a"].GAME?e.state.gameState.blackByoyomi:void 0})),N=Object(a["b"])((function(){return e.state.mode===ne["a"].GAME?e.state.gameState.whiteTimeMs:void 0})),k=Object(a["b"])((function(){return e.state.mode===ne["a"].GAME?e.state.gameState.whiteByoyomi:void 0})),P=Object(a["b"])((function(){return{game:e.state.mode===ne["a"].NORMAL,stop:e.state.mode===ne["a"].GAME,resign:e.state.mode===ne["a"].GAME&&e.getters.isMovableByUser,research:e.state.mode===ne["a"].NORMAL,endResearch:e.state.mode===ne["a"].RESEARCH,startEditPosition:e.state.mode===ne["a"].NORMAL,endEditPosition:e.state.mode===ne["a"].POSITION_EDITING,initPosition:e.state.mode===ne["a"].POSITION_EDITING,paste:e.state.mode===ne["a"].NORMAL,appSettings:e.state.mode===ne["a"].NORMAL,engineSettings:e.state.mode===ne["a"].NORMAL}}));return{layout:I,position:S,lastMove:j,flip:R,blackPlayerName:T,whitePlayerName:y,blackPlayerTimeMs:w,blackPlayerByoyomi:A,whitePlayerTimeMs:N,whitePlayerByoyomi:k,controlStates:P,onMove:t,onEdit:n,onGame:r,onStop:i,onResign:o,onResearch:c,onEndResearch:s,onStartEditPosition:u,onEndEditPosition:l,onInitPositionStandard:d,onInitPositionTsumeShogi:b,onChangeTurn:p,onOpenAppSettings:f,onOpenEngineSettings:h,onFlip:O,onPaste:m,onCopy:g,onRemoveAfter:v,allowEdit:_,allowMove:E}}});n("8035");const fe=X()(pe,[["render",A],["__scopeId","data-v-0be8c853"]]);var he=fe;function Oe(e,t,n,r,i,o){var c=Object(a["x"])("Record");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["j"])(c,{class:"record",record:e.record,operational:e.isRecordOperational,onGoBegin:e.goBegin,onGoBack:e.goBack,onGoForward:e.goForward,onGoEnd:e.goEnd,onSelectMove:e.selectMove,onSelectBranch:e.selectBranch},null,8,["record","operational","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch"])])}var me={class:"frame"},ge={class:"controller"},ve=["disabled"],_e=["disabled"],Ee=["disabled"],Se=["disabled"],je=["disabled"],Ie=["selected","value"],Re=["disabled"],Te=["selected","value"];function ye(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",me,[Object(a["g"])("div",ge,[Object(a["g"])("button",{class:"control-button",onClick:t[0]||(t[0]=function(t){return e.goBegin()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"first"})],8,ve),Object(a["g"])("button",{class:"control-button",onClick:t[1]||(t[1]=function(t){return e.goBack()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"back"})],8,_e),Object(a["g"])("button",{class:"control-button",onClick:t[2]||(t[2]=function(t){return e.goForward()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"next"})],8,Ee),Object(a["g"])("button",{class:"control-button",onClick:t[3]||(t[3]=function(t){return e.goEnd()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"last"})],8,Se)]),Object(a["g"])("select",{class:"move-list",size:"2",ref:"moveList",onChange:t[4]||(t[4]=function(t){return e.changeNumber()}),disabled:!e.operational},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.moves,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.number,selected:e.selected,value:e.number},Object(a["y"])(0!==e.number?e.number+" ":"")+" "+Object(a["y"])(e.text)+" "+Object(a["y"])(e.hasBranch?" 分岐":""),9,Ie)})),128))],40,je),Object(a["g"])("select",{class:"branch-list",size:"2",ref:"branchList",onChange:t[5]||(t[5]=function(t){return e.changeBranch()}),disabled:!e.operational},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.branches,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.index,selected:e.selected,value:e.index},Object(a["y"])(e.text),9,Te)})),128))],40,Re)])])}var we=Object(a["k"])({name:"Record",components:{Icon:be},props:{record:{type:F["g"],required:!0},operational:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch"],setup:function(e,t){var n=Object(a["u"])(null),r=Object(a["u"])(null),i=function(){t.emit("goBegin")},o=function(){t.emit("goBack")},c=function(){t.emit("goForward")},s=function(){t.emit("goEnd")},u=function(){t.emit("selectMove",Number(n.value.value))},l=function(){t.emit("selectBranch",Number(r.value.value))},d=Object(a["b"])((function(){return 0===e.record.current.number})),b=Object(a["b"])((function(){var t=[];return e.record.moves.forEach((function(n){t.push({number:n.number,text:n.displayText,hasBranch:n.hasBranch,selected:n===e.record.current})})),t})),p=Object(a["b"])((function(){var t;if(null===(t=e.record.branchBegin)||void 0===t||!t.branch)return null;var n,r=[];for(n=e.record.branchBegin;n&&n.move;n=n.branch)r.push({index:r.length,text:n.displayMoveText,selected:n.activeBranch});return r}));return{beginPosSelected:d,moves:b,branches:p,moveList:n,branchList:r,goBegin:i,goBack:o,goForward:c,goEnd:s,changeNumber:u,changeBranch:l}}});n("9375");const Ae=X()(we,[["render",ye],["__scopeId","data-v-f15d1ab0"]]);var Ne=Ae,ke=200,Pe=Object(a["k"])({name:"RecordPane",components:{Record:Ne},setup:function(){var e=Object(te["e"])(),t=function(t){e.dispatch(te["a"].CHANGE_MOVE_NUMBER,t)},n=function(){t(0)},r=function(){t(e.state.record.current.number-1)},i=function(){t(e.state.record.current.number+1)},o=function(){t(Number.MAX_SAFE_INTEGER)},c=function(e){t(e)},s=function(t){e.dispatch(te["a"].CHANGE_BRANCH,t)},u=Object(a["b"])((function(){return e.state.mode===ne["a"].NORMAL||e.state.mode===ne["a"].RESEARCH})),l=Object(a["b"])((function(){return e.state.record}));return{isRecordOperational:u,record:l,goBegin:n,goBack:r,goForward:i,goEnd:o,selectMove:c,selectBranch:s}}});n("336f");const He=X()(Pe,[["render",Oe],["__scopeId","data-v-a8ae60cc"]]);var Le=He,xe=function(e){return Object(a["s"])("data-v-31e8c732"),e=e(),Object(a["r"])(),e},Ce={class:"root"},Me={class:"tabs"},De=Object(a["i"])(" 棋譜コメント "),Ge=Object(a["i"])(" 思考 "),Be=Object(a["i"])(" 形勢グラフ "),Ue=Object(a["i"])(" 最小化 "),qe=xe((function(){return Object(a["g"])("div",{class:"tab-border"},null,-1)})),Ke={class:"tab-contents"};function We(e,t,n,r,i,o){var c=Object(a["x"])("Icon"),s=Object(a["x"])("RecordComment"),u=Object(a["x"])("EngineAnalytics"),l=Object(a["x"])("EvaluationChart");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",Ce,[Object(a["g"])("div",{class:Object(a["m"])(["minimize-padding",{enabled:"invisible"===e.activeTab}])},null,2),Object(a["g"])("div",Me,[Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"comment"===e.activeTab}]),onClick:t[0]||(t[0]=function(t){return e.changeSelect("comment")})},[Object(a["j"])(c,{class:"icon",icon:"comment"}),De],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"search"===e.activeTab}]),onClick:t[1]||(t[1]=function(t){return e.changeSelect("search")})},[Object(a["j"])(c,{class:"icon",icon:"brain"}),Ge],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"chart"===e.activeTab}]),onClick:t[2]||(t[2]=function(t){return e.changeSelect("chart")})},[Object(a["j"])(c,{class:"icon",icon:"chart"}),Be],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"invisible"===e.activeTab}]),onClick:t[3]||(t[3]=function(t){return e.changeSelect("invisible")})},[Object(a["j"])(c,{class:"icon",icon:"arrowDrop"}),Ue],2)]),qe,Object(a["g"])("div",Ke,[Object(a["j"])(s,{class:Object(a["m"])(["tab-content",{selected:"comment"===e.activeTab}])},null,8,["class"]),Object(a["j"])(u,{class:Object(a["m"])(["tab-content",{selected:"search"===e.activeTab}]),size:e.contentSize},null,8,["class","size"]),Object(a["j"])(l,{class:Object(a["m"])(["tab-content",{selected:"chart"===e.activeTab}]),size:e.contentSize},null,8,["class","size"])])])])}var Fe={class:"root"},Ve=["value","readonly"];function Ye(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",Fe,[Object(a["g"])("textarea",{ref:"textarea",class:"text",value:e.comment,readonly:!!e.readonly,onChange:t[0]||(t[0]=function(){return e.change&&e.change.apply(e,arguments)})},null,40,Ve)])])}var ze=Object(a["k"])({name:"RecordComment",setup:function(){var e=Object(te["e"])(),t=Object(a["b"])((function(){return e.state.record.current.comment})),n=Object(a["b"])((function(){return e.state.mode!=ne["a"].NORMAL})),r=Object(a["u"])(null),i=function(t){var n=t.target.value;e.commit(te["b"].UPDATE_RECORD_COMMENT,n)};return Object(a["o"])((function(){r.value.addEventListener("copy",(function(e){e.stopPropagation()})),r.value.addEventListener("paste",(function(e){e.stopPropagation()}))})),{textarea:r,comment:t,readonly:n,change:i}}});n("62eb");const Je=X()(ze,[["render",Ye],["__scopeId","data-v-3c930ba2"]]);var Ze=Je,$e={class:"root"};function Xe(e,t,n,r,i,o){var c=Object(a["x"])("EngineAnalyticsElement");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",$e,[e.infos.blackPlayer?(Object(a["q"])(),Object(a["d"])(c,{key:0,name:e.blackPlayerName,info:e.infos.blackPlayer,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0),e.infos.whitePlayer?(Object(a["q"])(),Object(a["d"])(c,{key:1,name:e.whitePlayerName,info:e.infos.whitePlayer,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0),e.infos.researcher?(Object(a["q"])(),Object(a["d"])(c,{key:2,name:e.researcherName,info:e.infos.researcher,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0)])])}n("b0c0"),n("b680");var Qe=function(e){return Object(a["s"])("data-v-61f1257a"),e=e(),Object(a["r"])(),e},et={class:"root"},tt={class:"headers"},nt={class:"header"},rt=Qe((function(){return Object(a["g"])("span",{class:"label"},"エンジン名: ",-1)})),it={class:"value"},at={class:"header"},ot=Qe((function(){return Object(a["g"])("span",{class:"label"},"最善手: ",-1)})),ct={class:"value"},st={class:"header"},ut=Qe((function(){return Object(a["g"])("span",{class:"label"},"秒間探索ノード(NPS): ",-1)})),lt={class:"value"},dt={class:"header"},bt=Qe((function(){return Object(a["g"])("span",{class:"label"},"探索ノード数: ",-1)})),pt={class:"value"},ft={class:"header"},ht=Qe((function(){return Object(a["g"])("span",{class:"label"},"ハッシュ使用率: ",-1)})),Ot={class:"value"},mt=Object(a["h"])('<div class="list-header" data-v-61f1257a><div class="list-column time" data-v-61f1257a>経過時間</div><div class="list-column multipv-index" data-v-61f1257a>順位</div><div class="list-column depth" data-v-61f1257a>深さ</div><div class="list-column score" data-v-61f1257a>評価値</div></div>',1),gt={class:"list-column time"},vt={class:"list-column multipv-index"},_t={class:"list-column depth"},Et={class:"list-column score"},St={class:"list-column score-flag"},jt={class:"list-column text"};function It(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",et,[Object(a["g"])("div",tt,[Object(a["g"])("div",nt,[rt,Object(a["g"])("span",it,Object(a["y"])(e.name),1)]),Object(a["g"])("div",at,[ot,Object(a["g"])("span",ct,Object(a["y"])(e.info.currentMoveText||"---"),1)]),Object(a["g"])("div",st,[ut,Object(a["g"])("span",lt,Object(a["y"])(e.info.nps||"---"),1)]),Object(a["g"])("div",dt,[bt,Object(a["g"])("span",pt,Object(a["y"])(e.info.nodes||"---"),1)]),Object(a["g"])("div",ft,[ht,Object(a["g"])("span",Ot,Object(a["y"])(e.info.hashfull?(100*e.info.hashfull).toFixed(1):"---")+" % ",1)])]),mt,Object(a["g"])("div",{class:"list",style:Object(a["n"])("height:".concat(e.height-36,"px"))},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.info.iterates,(function(e,t){return Object(a["q"])(),Object(a["f"])("div",{class:"list-item",key:t},[Object(a["g"])("div",gt,Object(a["y"])(e.timeMs?(e.timeMs/1e3).toFixed(1)+"s":""),1),Object(a["g"])("div",vt,Object(a["y"])(e.multiPV||""),1),Object(a["g"])("div",_t,Object(a["y"])(e.depth)+Object(a["y"])(e.selectiveDepth&&e.depth?"/":"")+Object(a["y"])(e.selectiveDepth),1),Object(a["g"])("div",Et,Object(a["y"])(e.score)+" "+Object(a["y"])(e.scoreMate?e.scoreMate:""),1),Object(a["g"])("div",St,Object(a["y"])(e.lowerBound?"++":"")+" "+Object(a["y"])(e.upperBound?"--":"")+" "+Object(a["y"])(e.scoreMate?"詰":""),1),Object(a["g"])("div",jt,Object(a["y"])(e.text),1)])})),128))],4)])])}var Rt=n("ed5a"),Tt=Object(a["k"])({name:"EngineAnalyticsElement",props:{name:{type:String,required:!0},info:{type:Rt["b"],required:!0},height:{type:Number,required:!0}}});n("0c59");const yt=X()(Tt,[["render",It],["__scopeId","data-v-61f1257a"]]);var wt=yt,At=Object(a["k"])({name:"EngineAnalytics",components:{EngineAnalyticsElement:wt},props:{size:{type:z,required:!0}},setup:function(e){var t=Object(te["e"])(),n=Object(a["b"])((function(){return t.state.usiMonitor})),r=Object(a["b"])((function(){var n=t.state.usiMonitor,r=(n.blackPlayer?1:0)+(n.whitePlayer?1:0)+(n.researcher?1:0);return 0!==r?e.size.height/r:0})),i=Object(a["b"])((function(){return t.state.gameSetting.black.name})),o=Object(a["b"])((function(){return t.state.gameSetting.white.name})),c=Object(a["b"])((function(){var e;return null===(e=t.state.researchSetting.usi)||void 0===e?void 0:e.name}));return{infos:n,blackPlayerName:i,whitePlayerName:o,researcherName:c,elementHeight:r}}});n("0b8e");const Nt=X()(At,[["render",Xe],["__scopeId","data-v-e5ed2da8"]]);var kt=Nt,Pt={class:"root"},Ht=["width","height"];function Lt(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",Pt,[Object(a["g"])("canvas",{ref:"canvas",width:e.size.width.toFixed(0),height:e.size.height.toFixed(0)},null,8,Ht)])])}var xt=n("3835"),Ct=n("6c70"),Mt=n("9b4a"),Dt=n("95b4"),Gt=Object(a["k"])({name:"EvaluationChart",props:{size:{type:z,required:!0}},setup:function(e){var t,n=Object(a["u"])(null),r=Object(te["e"])(),i=function(e,t,n){var r=[];return n.moves.forEach((function(e){var n=new Ct["c"](e.customData),i=n.evaluation&&n.evaluation[t];i&&r.push({x:e.number,y:i})})),{label:Object(Dt["b"])(t),borderColor:e,data:r,showLine:!0}},o=function(e){return{label:"現在の局面",borderColor:"red",data:[{x:e.current.number,y:Ct["a"]},{x:e.current.number,y:Ct["b"]}],showLine:!0,pointBorderWidth:0,pointRadius:0}},c=function(e){return[o(e),i("royalblue",Dt["a"].BLACK_PLAYER,e),i("darkorange",Dt["a"].WHITE_PLAYER,e),i("darkgreen",Dt["a"].RESEARCHER,e)]},s=function(e){return{x:{min:0,max:e.length+10},y:{min:Ct["b"],max:Ct["a"]}}},u=function(e,t,n){if(null!==e.x){var i=n.scales.x.max-n.scales.x.min,a=n.scales.x.right-n.scales.x.left,o=(e.x-n.scales.x.left)/a*i+n.scales.x.min,c=Math.round(o);r.dispatch(te["a"].CHANGE_MOVE_NUMBER,c)}};return Object(a["o"])((function(){var e=n.value,i=e.getContext("2d");t=new Mt["a"](i,{type:"scatter",data:{datasets:c(r.state.record)},options:{color:"black",animation:{duration:0},maintainAspectRatio:!1,events:["click"],onClick:u}}),t.draw()})),Object(a["p"])((function(){t.destroy()})),Object(a["z"])((function(){return[r.state.record]}),(function(e){var n=Object(xt["a"])(e,1),r=n[0];t.data.datasets=c(r),t.options.scales=s(r),t.update()}),{deep:!0}),Object(a["z"])((function(){return[e.size]}),(function(e){var n=Object(xt["a"])(e,1),r=n[0];t.resize(r.width,r.height)}),{deep:!0}),{canvas:n}}});n("97d0");const Bt=X()(Gt,[["render",Lt],["__scopeId","data-v-61eb2036"]]);var Ut=Bt,qt=30,Kt=240+qt,Wt=Object(a["k"])({name:"InformationPane",components:{RecordComment:Ze,EngineAnalytics:kt,EvaluationChart:Ut,Icon:be},props:{size:{type:z,required:!0}},setup:function(e){var t=Object(te["e"])(),n=function(e){t.dispatch(te["a"].UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND,{informationTab:e})},r=Object(a["b"])((function(){return t.state.appSetting.informationTab})),i=Object(a["b"])((function(){return e.size.reduce(new z(0,qt))}));return{activeTab:r,contentSize:i,changeSelect:n}}});n("749b");const Ft=X()(Wt,[["render",We],["__scopeId","data-v-31e8c732"]]);var Vt=Ft,Yt=n("1922"),zt=Object(a["k"])({name:"StandardLayout",components:{BoardPane:he,RecordPane:Le,InformationPane:Vt},setup:function(){var e=Object(te["e"])(),t=Object(a["t"])(new z(0,0)),n=Object(a["u"])(0),r=Object(a["u"])(null),i=function(){t.width=window.innerWidth,t.height=window.innerHeight},o=new ResizeObserver((function(e){n.value=e[0].contentRect.height}));Object(a["o"])((function(){i(),window.addEventListener("resize",i),o.observe(r.value)})),Object(a["p"])((function(){window.removeEventListener("resize",i),o.disconnect()}));var c=Object(a["b"])((function(){var n=e.state.appSetting.informationTab!==Yt["b"].INVISIBLE?Kt:qt;return new z(t.width-ke,t.height-n)})),s=Object(a["b"])((function(){return new z(t.width,t.height-n.value)}));return{topPane:r,boardPaneMaxSize:c,bottomPaneSize:s}}});n("d02d");const Jt=X()(zt,[["render",u],["__scopeId","data-v-df1473a6"]]);var Zt=Jt,$t=function(e){return Object(a["s"])("data-v-35cedfed"),e=e(),Object(a["r"])(),e},Xt={ref:"dialog"},Qt=$t((function(){return Object(a["g"])("div",{class:"dialog-title"},"対局",-1)})),en={class:"dialog-form-area players"},tn={class:"player"},nn=$t((function(){return Object(a["g"])("div",{class:"top-label"},"先手（下手）",-1)})),rn=["value"],an=$t((function(){return Object(a["g"])("option",{value:"es://human"},"人",-1)})),on=["value"],cn={class:"player"},sn=$t((function(){return Object(a["g"])("div",{class:"top-label"},"後手（上手）",-1)})),un=["value"],ln=$t((function(){return Object(a["g"])("option",{value:"es://human"},"人",-1)})),dn=["value"],bn={class:"dialog-form-areas-h"},pn={class:"dialog-form-area time-limit"},fn={class:"dialog-form-item"},hn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"持ち時間",-1)})),On=["value"],mn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"時間",-1)})),gn=["value"],vn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"分",-1)})),_n={class:"dialog-form-item"},En=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"秒読み",-1)})),Sn=["value"],jn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"秒",-1)})),In={class:"dialog-form-item"},Rn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"増加",-1)})),Tn=["value"],yn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"秒",-1)})),wn={class:"dialog-form-area flags"},An={class:"dialog-form-item"},Nn=["value"],kn=Object(a["h"])('<option value="current" data-v-35cedfed>現在の局面</option><option value="standard" data-v-35cedfed>平手</option><option value="handicapLance" data-v-35cedfed>香落ち</option><option value="handicapRightLance" data-v-35cedfed>右香落ち</option><option value="handicapBishop" data-v-35cedfed>角落ち</option><option value="handicapRook" data-v-35cedfed>飛車落ち</option><option value="handicapRookLance" data-v-35cedfed>飛車香落ち</option><option value="handicap2Pieces" data-v-35cedfed>2枚落ち</option><option value="handicap4Pieces" data-v-35cedfed>4枚落ち</option><option value="handicap6Pieces" data-v-35cedfed>6枚落ち</option><option value="handicap8Pieces" data-v-35cedfed>8枚落ち</option>',11),Pn=[kn],Hn={class:"dialog-form-item"},Ln=["checked"],xn=$t((function(){return Object(a["g"])("label",{for:"disable-engine-timeout"},"エンジンの時間切れあり",-1)})),Cn={class:"dialog-form-item"},Mn=["checked"],Dn=$t((function(){return Object(a["g"])("label",{for:"human-is-front"},"人を手前に表示する",-1)})),Gn={class:"dialog-main-buttons"};function Bn(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Xt,[Qt,Object(a["g"])("div",en,[Object(a["g"])("div",tn,[nn,Object(a["g"])("select",{class:"player-select",size:"1",ref:"blackPlayerSelect",value:e.defaultValues.black.type},[an,(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,on)})),128))],8,rn)]),Object(a["g"])("div",cn,[sn,Object(a["g"])("select",{class:"player-select",size:"1",ref:"whitePlayerSelect",value:e.defaultValues.white.type},[ln,(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,dn)})),128))],8,un)])]),Object(a["g"])("div",bn,[Object(a["g"])("div",pn,[Object(a["g"])("div",fn,[hn,Object(a["g"])("input",{class:"time-input",ref:"hours",type:"number",min:"0",max:"99",step:"1",value:e.defaultValues.timeLimit.hours},null,8,On),mn,Object(a["g"])("input",{class:"time-input",ref:"minutes",type:"number",min:"0",max:"59",step:"1",value:e.defaultValues.timeLimit.minutes},null,8,gn),vn]),Object(a["g"])("div",_n,[En,Object(a["g"])("input",{class:"time-input single",ref:"byoyomi",type:"number",min:"0",max:"60",step:"1",value:e.defaultValues.timeLimit.byoyomi},null,8,Sn),jn]),Object(a["g"])("div",In,[Rn,Object(a["g"])("input",{class:"time-input single",ref:"increment",type:"number",min:"0",max:"99",step:"1",value:e.defaultValues.timeLimit.increment},null,8,Tn),yn])]),Object(a["g"])("div",wn,[Object(a["g"])("div",An,[Object(a["g"])("select",{ref:"startPosition",value:e.defaultValues.startPosition},Pn,8,Nn)]),Object(a["g"])("div",Hn,[Object(a["g"])("input",{ref:"enableEngineTimeout",type:"checkbox",id:"disable-engine-timeout",checked:e.defaultValues.enableEngineTimeout},null,8,Ln),xn]),Object(a["g"])("div",Cn,[Object(a["g"])("input",{ref:"humanIsFront",type:"checkbox",id:"human-is-front",checked:e.defaultValues.humanIsFront},null,8,Mn),Dn])])]),Object(a["g"])("div",Gn,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(t){return e.onStart()})},"対局開始"),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.onCancel()})},"キャンセル")])],512)])}var Un=n("224f"),qn=n("a2af"),Kn=n("b5d8");function Wn(e){e.addEventListener("cancel",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("copy",(function(e){e.stopPropagation()})),e.addEventListener("paste",(function(e){e.stopPropagation()})),e.showModal()}function Fn(e){return document.getElementById(e)}var Vn=Object(a["k"])({name:"GameDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),i=Object(a["u"])(null),o=Object(a["u"])(null),c=Object(a["u"])(null),s=Object(a["u"])(null),u=Object(a["u"])(null),l=Object(a["u"])(null),d=Object(a["u"])(null),b=Object(a["u"])(null),p=Object(a["u"])(Object(Kn["b"])()),f=Object(a["u"])(new Un["a"]);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Wn(t.value),n.prev=1,n.next=4,Object(qn["g"])();case 4:return p.value=n.sent,n.next=7,Object(qn["i"])();case 7:f.value=n.sent,e.commit(te["b"].RELEASE_BUSSY_STATE),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),e.commit(te["b"].PUSH_ERROR,n.t0),e.commit(te["b"].CLOSE_DIALOG);case 15:case"end":return n.stop()}}),n,null,[[1,11]])}))));var h=function(e){if("es://human"===e)return{name:"人",type:Kn["a"].HUMAN};var t=f.value.getEngine(e);return{name:t.name,type:Kn["a"].USI,usi:t}},O=function(){var t={black:h(n.value.value),white:h(i.value.value),timeLimit:{timeSeconds:60*(60*o.value.value+c.value.value),byoyomi:Number(s.value.value),increment:Number(u.value.value)},startPosition:"current"!==l.value.value?l.value.value:void 0,enableEngineTimeout:d.value.checked,humanIsFront:b.value.checked},r=Object(Kn["c"])(t);r?e.commit(te["b"].PUSH_ERROR,r):e.dispatch(te["a"].START_GAME,t)},m=function(){e.commit(te["b"].CLOSE_DIALOG)},g=Object(a["b"])((function(){var e,t;return{black:{type:p.value.black.type===Kn["a"].HUMAN?"es://human":null===(e=p.value.black.usi)||void 0===e?void 0:e.uri},white:{type:p.value.white.type===Kn["a"].HUMAN?"es://human":null===(t=p.value.white.usi)||void 0===t?void 0:t.uri},timeLimit:{hours:Math.floor(p.value.timeLimit.timeSeconds/3600),minutes:Math.floor(p.value.timeLimit.timeSeconds/60)%60,byoyomi:p.value.timeLimit.byoyomi,increment:p.value.timeLimit.increment},startPosition:void 0!==p.value.startPosition?p.value.startPosition:"current",enableEngineTimeout:p.value.enableEngineTimeout,humanIsFront:p.value.humanIsFront}})),v=Object(a["b"])((function(){return f.value.engineList}));return{dialog:t,blackPlayerSelect:n,whitePlayerSelect:i,hours:o,minutes:c,byoyomi:s,increment:u,startPosition:l,enableEngineTimeout:d,humanIsFront:b,defaultValues:g,engines:v,onStart:O,onCancel:m}}});n("088d");const Yn=X()(Vn,[["render",Bn],["__scopeId","data-v-35cedfed"]]);var zn=Yn,Jn=function(e){return Object(a["s"])("data-v-23a86a08"),e=e(),Object(a["r"])(),e},Zn={ref:"dialog"},$n=Jn((function(){return Object(a["g"])("div",{class:"dialog-title"},"検討",-1)})),Xn={class:"dialog-form-area"},Qn={class:"dialog-form-item"},er=Jn((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"エンジン",-1)})),tr={class:"dialog-form-item-unit"},nr=["value"],rr=["value"],ir={class:"dialog-main-buttons"};function ar(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Zn,[$n,Object(a["g"])("div",Xn,[Object(a["g"])("div",Qn,[er,Object(a["g"])("div",tr,[Object(a["g"])("select",{class:"engine-select",size:"1",ref:"engineSelect",value:e.defaultValue},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,rr)})),128))],8,nr)])])]),Object(a["g"])("div",ir,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(t){return e.onStart()})},"検討開始"),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.onCancel()})},"キャンセル")])],512)])}var or=n("39fb"),cr=Object(a["k"])({name:"ResearchDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),i=Object(a["u"])(Object(or["a"])()),o=Object(a["u"])(new Un["a"]);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Wn(t.value),n.prev=1,n.next=4,Object(qn["h"])();case 4:return i.value=n.sent,n.next=7,Object(qn["i"])();case 7:o.value=n.sent,e.commit(te["b"].RELEASE_BUSSY_STATE),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),e.commit(te["b"].PUSH_ERROR,n.t0),e.commit(te["b"].CLOSE_DIALOG);case 15:case"end":return n.stop()}}),n,null,[[1,11]])}))));var c=function(){var t=n.value.value;if(o.value.hasEngine(t)){var r=o.value.getEngine(t),i={usi:r};e.dispatch(te["a"].START_RESEARCH,i)}else e.commit(te["b"].PUSH_ERROR,"エンジンを選択してください。")},s=function(){e.commit(te["b"].CLOSE_DIALOG)},u=Object(a["b"])((function(){return o.value.engineList})),l=Object(a["b"])((function(){return i.value.usi?i.value.usi.uri:""}));return{dialog:t,engineSelect:n,engines:u,defaultValue:l,onStart:c,onCancel:s}}});n("714d");const sr=X()(cr,[["render",ar],["__scopeId","data-v-23a86a08"]]);var ur=sr,lr=function(e){return Object(a["s"])("data-v-5c5214f8"),e=e(),Object(a["r"])(),e},dr={ref:"dialog"},br=lr((function(){return Object(a["g"])("div",{class:"dialog-title"},"エンジン管理",-1)})),pr={class:"dialog-form-area engine-list"},fr={key:0,class:"engine"},hr=["value"],Or={class:"engine-name"},mr=["onClick"],gr=["onClick"],vr={class:"dialog-main-buttons"};function _r(e,t,n,r,i,o){var c=Object(a["x"])("USIEngineOptionDialog");return Object(a["q"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",null,[Object(a["g"])("dialog",dr,[br,Object(a["g"])("div",pr,[0===e.engines.length?(Object(a["q"])(),Object(a["f"])("div",fr," エンジンが登録されていません。 ")):Object(a["e"])("",!0),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"engine",key:t.uri,value:t.uri},[Object(a["g"])("span",Or,Object(a["y"])(t.name),1),Object(a["g"])("button",{class:"dialog-button",onClick:function(n){return e.openOptions(t.uri)}}," 設定 ",8,mr),Object(a["g"])("button",{class:"dialog-button",onClick:function(n){return e.remove(t.uri)}}," 削除 ",8,gr)],8,hr)})),128))]),Object(a["g"])("button",{class:"dialog-wide-button",onClick:t[0]||(t[0]=function(t){return e.add()})},"追加"),Object(a["g"])("div",vr,[Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.saveAndClose()})}," 保存して閉じる "),Object(a["g"])("button",{class:"dialog-button",onClick:t[2]||(t[2]=function(t){return e.cancel()})},"キャンセル")])],512)]),e.optionDialog?(Object(a["q"])(),Object(a["d"])(c,{key:0,latestEngineSetting:e.optionDialog,onOk:e.optionOk,onCancel:e.optionCancel},null,8,["latestEngineSetting","onOk","onCancel"])):Object(a["e"])("",!0)],64)}var Er=function(e){return Object(a["s"])("data-v-0ba3d664"),e=e(),Object(a["r"])(),e},Sr={ref:"dialog"},jr=Er((function(){return Object(a["g"])("div",{class:"dialog-title"},"エンジン設定",-1)})),Ir={class:"dialog-form-area option-list"},Rr={class:"option"},Tr=Er((function(){return Object(a["g"])("div",{class:"option-name"},"エンジン名",-1)})),yr={class:"option-unchangeable"},wr={class:"option"},Ar=Er((function(){return Object(a["g"])("div",{class:"option-name"},"作者",-1)})),Nr={class:"option-unchangeable"},kr={class:"option"},Pr=Er((function(){return Object(a["g"])("div",{class:"option-name"},"場所",-1)})),Hr={class:"option-unchangeable"},Lr={class:"option"},xr=Er((function(){return Object(a["g"])("div",{class:"option-name"},"表示名",-1)})),Cr={class:"option-value-text",type:"text",name:"es://engine_name",ref:"engineNameInput"},Mr={class:"option-name"},Dr=["id","min","max","name"],Gr=["id","name"],Br=["id","name"],Ur=["onClick"],qr=["id"],Kr=Er((function(){return Object(a["g"])("option",{value:""},"既定値",-1)})),Wr=Er((function(){return Object(a["g"])("option",{value:"true"},"ON",-1)})),Fr=Er((function(){return Object(a["g"])("option",{value:"false"},"OFF",-1)})),Vr=[Kr,Wr,Fr],Yr=["id"],zr=Er((function(){return Object(a["g"])("option",{value:""},"既定値",-1)})),Jr=["value"],Zr=["onClick"],$r={class:"dialog-main-buttons"};function Xr(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Sr,[jr,Object(a["g"])("div",Ir,[Object(a["g"])("div",Rr,[Tr,Object(a["g"])("div",yr,Object(a["y"])(e.engine.defaultName),1)]),Object(a["g"])("div",wr,[Ar,Object(a["g"])("div",Nr,Object(a["y"])(e.engine.author),1)]),Object(a["g"])("div",kr,[Pr,Object(a["g"])("div",Hr,Object(a["y"])(e.engine.path),1)]),Object(a["g"])("div",Lr,[xr,Object(a["g"])("input",Cr,null,512)]),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.options,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"option",key:t.name},[Object(a["g"])("div",Mr,Object(a["y"])(t.name),1),"spin"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:0,id:t.inputId,class:"option-value-number",type:"number",min:t.min,max:t.max,step:"1",name:t.name},null,8,Dr)):Object(a["e"])("",!0),"string"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:1,id:t.inputId,class:"option-value-text",type:"text",name:t.name},null,8,Gr)):Object(a["e"])("",!0),"filename"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:2,id:t.inputId,class:"option-value-filename",type:"text",name:t.name},null,8,Br)):Object(a["e"])("",!0),"filename"===t.type?(Object(a["q"])(),Object(a["f"])("button",{key:3,class:"dialog-button",onClick:function(n){return e.selectFile(t.inputId)}}," 選択 ",8,Ur)):Object(a["e"])("",!0),"check"===t.type?(Object(a["q"])(),Object(a["f"])("select",{key:4,id:t.inputId,class:"option-value-check"},Vr,8,qr)):Object(a["e"])("",!0),"combo"===t.type?(Object(a["q"])(),Object(a["f"])("select",{key:5,id:t.inputId,class:"option-value-combo"},[zr,(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(t.vars,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e,value:e},Object(a["y"])(e),9,Jr)})),128))],8,Yr)):Object(a["e"])("",!0),"button"===t.type?(Object(a["q"])(),Object(a["f"])("button",{key:6,class:"dialog-button",onClick:function(n){return e.sendOption(t.name)}}," 実行 ",8,Zr)):Object(a["e"])("",!0)])})),128))]),Object(a["g"])("button",{class:"dialog-wide-button",onClick:t[0]||(t[0]=function(t){return e.reset()})}," エンジンの既定値に戻す "),Object(a["g"])("div",$r,[Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.ok()})},"OK"),Object(a["g"])("button",{class:"dialog-button",onClick:t[2]||(t[2]=function(t){return e.cancel()})},"キャンセル")])],512)])}var Qr=n("b85c"),ei=n("5530"),ti=(n("d81d"),n("4e82"),n("2ca0"),Object(a["k"])({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,rquired:!0}},emits:["ok","cancel"],setup:function(e,t){var n=Object(a["u"])(null),i=Object(a["u"])(null),o=Object(te["e"])(),c=e.latestEngineSetting,s=Object(a["u"])(c),u=Object(a["b"])((function(){return Object.values(s.value.options).sort((function(e,t){var n=e.name.startsWith("USI_"),r=t.name.startsWith("USI_");return n!==r?n?-1:1:e.name<t.name?-1:1})).map((function(e,t){return Object(ei["a"])(Object(ei["a"])({},e),{},{inputId:"usiEngineOptionDialogOption"+t,value:Object(Un["b"])(e)})}))}));o.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Wn(n.value),e.prev=1,e.next=4,Object(qn["d"])(c.path);case 4:s.value=e.sent,Object(Un["c"])(s.value,c),i.value.value=s.value.name,t=Object(Qr["a"])(u.value);try{for(t.s();!(r=t.n()).done;)a=r.value,l=Fn(a.inputId),l&&void 0!==a.value&&(l.value=a.value+"")}catch(d){t.e(d)}finally{t.f()}e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 14:return e.prev=14,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))));var l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.commit(te["b"].RETAIN_BUSSY_STATE),e.prev=1,e.next=4,Object(qn["t"])();case 4:n=e.sent,r=Fn(t),n&&r&&(r.value=n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 12:return e.prev=12,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.commit(te["b"].RETAIN_BUSSY_STATE),e.prev=1,e.next=4,Object(qn["p"])(s.value.path,t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 9:return e.prev=9,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){i.value.value=s.value.defaultName;var e,t=Object(Qr["a"])(u.value);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=Fn(n.inputId);r&&(void 0!==s.value.options[n.name].default?r.value=s.value.options[n.name].default+"":r.value="")}}catch(a){t.e(a)}finally{t.f()}},p=function(){s.value.name=i.value.value;var e,n=Object(Qr["a"])(u.value);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=Fn(r.inputId);a&&(s.value.options[r.name].value=a.value?"spin"===r.type?Number(a.value):a.value:void 0)}}catch(o){n.e(o)}finally{n.f()}t.emit("ok",s.value)},f=function(){t.emit("cancel")};return{engine:s,dialog:n,engineNameInput:i,options:u,selectFile:l,sendOption:d,reset:b,ok:p,cancel:f}}}));n("3298");const ni=X()(ti,[["render",Xr],["__scopeId","data-v-0ba3d664"]]);var ri=ni,ii=Object(a["k"])({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:ri},setup:function(){var e=Object(a["u"])(null),t=Object(a["u"])(null),n=Object(a["u"])(new Un["a"]),i=Object(te["e"])();i.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Wn(e.value),t.prev=1,t.next=4,Object(qn["i"])();case 4:n.value=t.sent,i.commit(te["b"].RELEASE_BUSSY_STATE),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),i.commit(te["b"].PUSH_ERROR,t.t0),i.commit(te["b"].CLOSE_DIALOG);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))));var o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i.commit(te["b"].RETAIN_BUSSY_STATE),e.next=4,Object(qn["u"])();case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return");case 7:return e.t0=n.value,e.next=10,Object(qn["d"])(t);case 10:e.t1=e.sent,e.t0.addEngine.call(e.t0,e.t1),e.next=17;break;case 14:e.prev=14,e.t2=e["catch"](0),i.commit(te["b"].PUSH_ERROR,e.t2);case 17:return e.prev=17,i.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){n.value.removeEngine(e)},s=function(e){t.value=n.value.getEngine(e)},u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i.commit(te["b"].RETAIN_BUSSY_STATE),e.next=4,Object(qn["o"])(n.value);case 4:i.commit(te["b"].CLOSE_DIALOG),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),i.commit(te["b"].PUSH_ERROR,e.t0);case 10:return e.prev=10,i.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),l=function(){i.commit(te["b"].CLOSE_DIALOG)},d=function(e){n.value.updateEngine(e),t.value=null},b=function(){t.value=null},p=Object(a["b"])((function(){return n.value.engineList}));return{optionDialog:t,dialog:e,engines:p,add:o,remove:c,openOptions:s,saveAndClose:u,cancel:l,optionOk:d,optionCancel:b}}});n("403b");const ai=X()(ii,[["render",_r],["__scopeId","data-v-5c5214f8"]]);var oi=ai,ci=function(e){return Object(a["s"])("data-v-34db2774"),e=e(),Object(a["r"])(),e},si={ref:"dialog"},ui=ci((function(){return Object(a["g"])("div",{class:"dialog-title"},"アプリ設定",-1)})),li={class:"dialog-form-area settings"},di={class:"dialog-form-item"},bi=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"デザイン",-1)})),pi=["value"],fi=["value"],hi={class:"dialog-form-item"},Oi=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"駒音の大きさ",-1)})),mi=["value"],gi=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"%",-1)})),vi={class:"dialog-form-item"},_i=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の大きさ",-1)})),Ei=["value"],Si=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"%",-1)})),ji={class:"dialog-form-item"},Ii=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の高さ",-1)})),Ri=["value"],Ti=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"Hz (220 ~ 880)",-1)})),yi={class:"dialog-form-item"},wi=ci((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の対象",-1)})),Ai=["value"],Ni=ci((function(){return Object(a["g"])("option",{value:"all"},"全ての手番",-1)})),ki=ci((function(){return Object(a["g"])("option",{value:"onlyUser"},"人の手番のみ",-1)})),Pi=[Ni,ki],Hi={class:"dialog-main-buttons"};function Li(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",si,[ui,Object(a["g"])("div",li,[Object(a["g"])("div",di,[bi,Object(a["g"])("select",{value:e.appSetting.boardLayout,ref:"boardLayout"},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.boardLayouts,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e,value:e.value},Object(a["y"])(e.name),9,fi)})),128))],8,pi)]),Object(a["g"])("div",hi,[Oi,Object(a["g"])("input",{value:e.appSetting.pieceVolume,type:"number",max:"100",min:"0",ref:"pieceVolume"},null,8,mi),gi]),Object(a["g"])("div",vi,[_i,Object(a["g"])("input",{value:e.appSetting.clockVolume,type:"number",max:"100",min:"0",ref:"clockVolume"},null,8,Ei),Si]),Object(a["g"])("div",ji,[Ii,Object(a["g"])("input",{value:e.appSetting.clockPitch,type:"number",max:"880",min:"220",ref:"clockPitch"},null,8,Ri),Ti]),Object(a["g"])("div",yi,[wi,Object(a["g"])("select",{value:e.appSetting.clockSoundTarget,ref:"clockSoundTarget"},Pi,8,Ai)])]),Object(a["g"])("div",Hi,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(t){return e.saveAndClose()})}," 保存して閉じる "),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.cancel()})},"キャンセル")])],512)])}function xi(e){var t=Number(e.value),n=Number(e.max),r=Number(e.min);return Math.min(Math.max(t,r),n)}var Ci=Object(a["k"])({name:"AppSettingDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),r=Object(a["u"])(null),i=Object(a["u"])(null),o=Object(a["u"])(null),c=Object(a["u"])(null);Object(a["o"])((function(){Wn(t.value)}));var s=function(){var t={boardLayout:n.value.value,pieceVolume:xi(r.value),clockVolume:xi(i.value),clockPitch:xi(o.value),clockSoundTarget:c.value.value};e.dispatch(te["a"].UPDATE_AND_SAVE_APP_SETTING,t).then((function(){e.commit(te["b"].CLOSE_DIALOG)}))},u=function(){e.commit(te["b"].CLOSE_DIALOG)},l=Object(a["b"])((function(){return e.state.appSetting})),d=[{name:"一文字駒",value:W["a"].HITOMOJI},{name:"一文字駒（ゴシック体）",value:W["a"].HITOMOJI_GOTHIC}];return{dialog:t,boardLayout:n,pieceVolume:r,clockVolume:i,clockPitch:o,clockSoundTarget:c,appSetting:l,boardLayouts:d,saveAndClose:s,cancel:u}}});n("842d");const Mi=X()(Ci,[["render",Li],["__scopeId","data-v-34db2774"]]);var Di=Mi,Gi=function(e){return Object(a["s"])("data-v-7a20f62c"),e=e(),Object(a["r"])(),e},Bi={ref:"dialog"},Ui={ref:"content"},qi={class:"dialog-form-area"},Ki=Gi((function(){return Object(a["g"])("div",{class:"message"},"以下の棋譜を取り込みます。",-1)})),Wi={key:0,class:"message"},Fi=Object(a["i"])(" ※テキストエリアに棋譜を貼り付けてください。"),Vi=Gi((function(){return Object(a["g"])("br",null,null,-1)})),Yi=Object(a["i"])(" ※インストールアプリ版では自動的に貼り付けられます。 "),zi=[Fi,Vi,Yi],Ji={ref:"textarea"},Zi={class:"dialog-main-buttons"};function $i(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Bi,[Object(a["g"])("div",Ui,[Object(a["g"])("div",qi,[Ki,e.isNative?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["f"])("div",Wi,zi)),Object(a["g"])("textarea",Ji,null,512)])],512),Object(a["g"])("div",Zi,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},"取り込む"),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},"キャンセル")])],512)])}var Xi=Object(a["k"])({name:"PasteDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,Wn(t.value),!Object(qn["e"])()){r.next=6;break}return r.next=5,navigator.clipboard.readText();case 5:n.value.value=r.sent;case 6:return r.prev=6,e.commit(te["b"].RELEASE_BUSSY_STATE),r.finish(6);case 9:case"end":return r.stop()}}),r,null,[[0,,6,9]])}))));var i=function(){var t=n.value.value;e.commit(te["b"].CLOSE_PASTE_DIALOG),t&&e.dispatch(te["a"].PASTE_RECORD,t)},o=function(){e.commit(te["b"].CLOSE_PASTE_DIALOG)};return{dialog:t,textarea:n,onOk:i,onCancel:o,isNative:Object(qn["e"])()}}});n("add1");const Qi=X()(Xi,[["render",$i],["__scopeId","data-v-7a20f62c"]]);var ea=Qi,ta=function(e){return Object(a["s"])("data-v-9afd096a"),e=e(),Object(a["r"])(),e},na={class:"bussy",ref:"dialog"},ra={class:"content"},ia=ta((function(){return Object(a["g"])("div",{class:"message"},"処理中です。お待ち下さい。",-1)}));function aa(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",na,[Object(a["g"])("div",ra,[Object(a["j"])(c,{class:"icon",icon:"bussy"}),ia])],512)])}var oa=Object(a["k"])({name:"Bussy",components:{Icon:be},setup:function(){var e=Object(a["u"])(null);return Object(a["o"])((function(){Wn(e.value)})),{dialog:e}}});n("06e0");const ca=X()(oa,[["render",aa],["__scopeId","data-v-9afd096a"]]);var sa=ca,ua={class:"messagebox",ref:"dialog"},la={class:"content"},da={class:"message"},ba={class:"dialog-main-buttons"};function pa(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",ua,[Object(a["g"])("div",la,[Object(a["j"])(c,{class:"icon",icon:"info"}),Object(a["g"])("div",da,Object(a["y"])(e.message),1)]),Object(a["g"])("div",ba,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.onClose()})},"閉じる")])],512)])}var fa=Object(a["k"])({name:"ErrorMessage",components:{Icon:be},setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null);Object(a["o"])((function(){Wn(t.value)}));var n=Object(a["b"])((function(){return e.state.messages[0]})),r=function(){e.commit(te["b"].SHIFT_MESSAGE)};return{dialog:t,message:n,onClose:r}}});n("f88b");const ha=X()(fa,[["render",pa],["__scopeId","data-v-05262e45"]]);var Oa=ha,ma={class:"error",ref:"dialog"},ga={class:"content"},va={class:"items"},_a={class:"notice"},Ea={class:"index"},Sa={class:"message"},ja={class:"dialog-main-buttons"};function Ia(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",ma,[Object(a["g"])("div",ga,[Object(a["j"])(c,{class:"icon",icon:"error"}),Object(a["g"])("div",va,[Object(a["g"])("div",_a,Object(a["y"])(e.errors.length)+" 件のエラーが発生しました。 ",1),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.errors,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"item",key:e.index},[Object(a["g"])("p",Ea,Object(a["y"])(e.index+1)+" 件目",1),Object(a["g"])("p",Sa,Object(a["y"])(e.message),1)])})),128))])]),Object(a["g"])("div",ja,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.onClose()})},"閉じる")])],512)])}var Ra=Object(a["k"])({name:"ErrorMessage",components:{Icon:be},setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null);Object(a["o"])((function(){Wn(t.value)}));var n=Object(a["b"])((function(){return e.state.errors.map((function(e,t){return{message:e.message,index:t}}))})),r=function(){e.commit(te["b"].CLEAR_ERRORS)};return{dialog:t,errors:n,onClose:r}}});n("9635"),n("14a0");const Ta=X()(Ra,[["render",Ia],["__scopeId","data-v-bc225ea8"]]);var ya=Ta,wa=Object(a["k"])({name:"App",components:{StandardLayout:Zt,GameDialog:zn,ResearchDialog:ur,USIEngineManagementDialog:oi,AppSettingDialog:Di,PasteDialog:ea,Bussy:sa,Message:Oa,ErrorMessage:ya},setup:function(){var e=Object(te["e"])(),t=Object(a["b"])((function(){return{game:e.state.mode===ne["a"].GAME_DIALOG,research:e.state.mode===ne["a"].RESEARCH_DIALOG,usiEngineSetting:e.state.mode===ne["a"].USI_ENGINE_SETTING_DIALOG,appSetting:e.state.mode===ne["a"].APP_SETTING_DIALOG,paste:e.state.mode===ne["a"].PASTE_DIALOG,processing:e.state.bussyState.isBussy}})),n=Object(a["b"])((function(){return 0!==e.state.messages.length})),r=Object(a["b"])((function(){return 0!==e.state.errors.length}));return Object(a["o"])((function(){var t=document.getElementsByTagName("body")[0];t.addEventListener("copy",(function(t){e.dispatch(te["a"].COPY_RECORD),t.preventDefault()})),t.addEventListener("paste",(function(t){e.commit(te["b"].SHOW_PASTE_DIALOG),t.preventDefault()})),t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("drop",(function(t){if(t.dataTransfer&&t.dataTransfer.files[0]){var n=t.dataTransfer.files[0].path;e.dispatch(te["a"].OPEN_RECORD,n)}t.preventDefault()})),document.addEventListener("keydown",(function(t){var n=document.activeElement;if(!(n instanceof HTMLTextAreaElement||n instanceof HTMLInputElement)){var r=e.state.record.current.number;switch(t.key){default:return;case"ArrowUp":e.dispatch(te["a"].CHANGE_MOVE_NUMBER,r-1);break;case"ArrowDown":e.dispatch(te["a"].CHANGE_MOVE_NUMBER,r+1);break;case"ArrowLeft":e.dispatch(te["a"].CHANGE_MOVE_NUMBER,0);break;case"ArrowRight":e.dispatch(te["a"].CHANGE_MOVE_NUMBER,Number.MAX_SAFE_INTEGER);break}t.preventDefault(),t.stopPropagation()}}))})),{dialogVisibilities:t,hasMessage:n,hasErrors:r}}});n("0c1f");const Aa=X()(wa,[["render",o]]);var Na=Aa;Mt["a"].register.apply(Mt["a"],Object(i["a"])(Mt["b"])),Object(qn["q"])(te["d"]),Promise.allSettled([Object(qn["f"])().then((function(e){te["d"].commit(te["b"].UPDATE_APP_SETTING,e)})).catch((function(e){te["d"].commit(te["b"].PUSH_ERROR,new Error("アプリ設定の読み込み中にエラーが発生しました :"+e))})),Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(qn["c"])();case 2:if(t=e.sent,!t){e.next=6;break}return e.next=6,te["d"].dispatch(te["a"].OPEN_RECORD,t);case 6:case"end":return e.stop()}}),e)})))()]).finally((function(){Object(a["c"])(Na).use(te["d"],te["c"]).mount("#app")}))},d02d:function(e,t,n){"use strict";n("fcd3")},d2ca:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));n("4d90");function r(e){return a(Math.floor(e/1e3))}function i(e){return o(Math.floor(e/1e3))}function a(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=e%60;return t+":"+String(n).padStart(2,"0")+":"+String(r).padStart(2,"0")}function o(e){var t=Math.floor(e/60),n=e%60;return String(t).padStart(2," ")+":"+String(n).padStart(2,"0")}},d58e:function(e,t,n){},dac8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={};function i(e){if(!r[e]){var t=document.createElement("img");t.src=e,r[e]=t}}},e7ff:function(e,t,n){},eb26:function(e,t,n){},ed5a:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("d4ec"),i=n("bee2"),a=n("b85c"),o=(n("b64b"),n("95b4"));function c(e,t){var n,r,i=e.clone(),o="",c=Object(a["a"])(t);try{for(c.s();!(r=c.n()).done;){var s=r.value,u=i.createMoveBySFEN(s);if(!u)break;i.doMove(u),o+=u.getDisplayText(n),n=u}}catch(l){c.e(l)}finally{c.f()}return o}var s=function(){function e(){Object(r["a"])(this,e),this.iterates=[]}return Object(i["a"])(e,[{key:"update",value:function(e,t){var n={};if(void 0!==t.depth&&(n.depth=t.depth),void 0!==t.seldepth&&(n.selectiveDepth=t.seldepth),void 0!==t.timeMs&&(n.timeMs=t.timeMs),void 0!==t.nodes&&(this.nodes=t.nodes),t.pv&&(n.pv=t.pv,n.text=c(e,t.pv)),void 0!==t.multipv&&(n.multiPV=t.multipv),void 0!==t.scoreCP&&(n.score=t.scoreCP),void 0!==t.scoreMate&&(n.scoreMate=t.scoreMate),void 0!==t.lowerbound&&(n.lowerBound=t.lowerbound),void 0!==t.upperbound&&(n.upperBound=t.upperbound),void 0!==t.currmove){this.currentMove=t.currmove;var r=e.createMoveBySFEN(t.currmove);r&&(this.currentMoveText=r.getDisplayText())}void 0!==t.hashfullPerMill&&(this.hashfull=t.hashfullPerMill/1e3),void 0!==t.nps&&(this.nps=t.nps),t.string&&(n.text=t.string),0!==Object.keys(n).length&&this.iterates.unshift(n)}}]),e}(),u=function(){function e(){Object(r["a"])(this,e)}return Object(i["a"])(e,[{key:"update",value:function(e,t,n,r){switch(this.sessionID!=e&&(this.blackPlayer=void 0,this.whitePlayer=void 0,this.researcher=void 0,this.sessionID=e),n){case o["a"].BLACK_PLAYER:this.blackPlayer&&this.blackPosition===t.sfen||(this.blackPlayer=new s,this.blackPosition=t.sfen),this.blackPlayer.update(t,r);break;case o["a"].WHITE_PLAYER:this.whitePlayer&&this.whitePosition===t.sfen||(this.whitePlayer=new s,this.whitePosition=t.sfen),this.whitePlayer.update(t,r);break;case o["a"].RESEARCHER:this.researcher&&this.researchPosition===t.sfen||(this.researcher=new s,this.researchPosition=t.sfen),this.researcher.update(t,r);break}}}]),e}()},ed7d:function(e,t,n){},ef3d:function(e,t,n){},f88b:function(e,t,n){"use strict";n("1605")},fcd3:function(e,t,n){},ff22:function(e,t,n){}});
//# sourceMappingURL=app.462a2168.js.map