{"version":3,"file":"js/index-legacy.7836455f.js","mappings":"4LAEM,SAAUA,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMC,GAA4BC,EAAAA,EAAAA,IAAkB,kBAC9CC,GAAwBD,EAAAA,EAAAA,IAAkB,cAC1CE,GAA4BF,EAAAA,EAAAA,IAAkB,kBAC9CG,GAA4BH,EAAAA,EAAAA,IAAkB,kBAC9CI,GAAuCJ,EAAAA,EAAAA,IAAkB,6BACzDK,GAA8BL,EAAAA,EAAAA,IAAkB,oBAChDM,GAAyBN,EAAAA,EAAAA,IAAkB,eAC3CO,GAA0BP,EAAAA,EAAAA,IAAkB,gBAC5CQ,GAA2BR,EAAAA,EAAAA,IAAkB,iBAC7CS,GAAyBT,EAAAA,EAAAA,IAAkB,eAC3CU,GAA0BV,EAAAA,EAAAA,IAAkB,gBAElD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CC,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,OAAQrB,EAAKsB,SACpC,EACDC,EAAAA,EAAAA,IAAajB,EAA2B,CAAEc,MAAO,SAChDpB,EAAKwB,mBAAmBC,OACpBP,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAalB,EAAuB,CAAEmB,IAAK,MAC1DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBK,WACpBX,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAajB,EAA2B,CAAEkB,IAAK,MAC9DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBM,WACpBZ,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAahB,EAA2B,CAAEiB,IAAK,MAC9DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBO,mBACpBb,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAaf,EAAsC,CAAEgB,IAAK,MACzEC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBQ,aACpBd,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAad,EAA6B,CAAEe,IAAK,MAChEC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBS,QACpBf,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAab,EAAwB,CAAEc,IAAK,MAC3DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBU,QACpBhB,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAaZ,EAAyB,CAAEa,IAAK,MAC5DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKwB,mBAAmBW,UACpBjB,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAaX,EAA0B,CAAEY,IAAK,MAC7DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKoC,aACDlB,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAaV,EAAwB,CAAEW,IAAK,MAC3DC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKqC,YACDnB,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAaT,EAAyB,CAAEU,IAAK,MAC5DC,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,G,oBC9CCU,EAAa,CAAElB,MAAO,QACtBmB,EAAa,CAAEnB,MAAO,YAEtB,SAAUrB,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMmC,GAAuBjC,EAAAA,EAAAA,IAAkB,aACzCkC,GAAwBlC,EAAAA,EAAAA,IAAkB,cAC1CmC,GAAqBnC,EAAAA,EAAAA,IAAkB,WAE7C,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,EAAY,EACrCK,EAAAA,EAAAA,GAAoB,MAAOJ,EAAY,EACrChB,EAAAA,EAAAA,IAAaiB,EAAsB,CACjCpB,MAAO,gBACP,WAAYpB,EAAK4C,iBACjBC,SAAU7C,EAAK8C,mBACd,KAAM,EAAG,CAAC,WAAY,cACzBvB,EAAAA,EAAAA,IAAakB,EAAuB,CAClCrB,MAAO,iBACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAKiD,kBAC3B,KAAM,EAAG,CAAC,aAEf1B,EAAAA,EAAAA,IAAamB,EAAoB,CAC/BtB,MAAO,cACP8B,KAAMlD,EAAKmD,gBACV,KAAM,EAAG,CAAC,a,cCxBbb,EAAa,CAAElB,MAAO,eACtBmB,GAA0Ba,EAAAA,EAAAA,IAAiB,QAC3CC,GAA0BD,EAAAA,EAAAA,IAAiB,UAC3CE,GAA0BF,EAAAA,EAAAA,IAAiB,QAC3CG,GAA0BH,EAAAA,EAAAA,IAAiB,QAC3CI,GAA0BJ,EAAAA,EAAAA,IAAiB,UAC3CK,GAA0BL,EAAAA,EAAAA,IAAiB,QAC3CM,GAA0BN,EAAAA,EAAAA,IAAiB,UAC3CO,GAA0BP,EAAAA,EAAAA,IAAiB,UAC3CQ,GAA2BR,EAAAA,EAAAA,IAAiB,YAC5CS,GAA2BT,EAAAA,EAAAA,IAAiB,UAC5CU,EAAc,CAAE1C,MAAO,kBACvB2C,GAA2BX,EAAAA,EAAAA,IAAiB,WAC5CY,EAAc,CAAC,YACfC,GAA2Bb,EAAAA,EAAAA,IAAiB,YAC5Cc,GAA2Bd,EAAAA,EAAAA,IAAiB,UAC5Ce,GAA2Bf,EAAAA,EAAAA,IAAiB,UAC5CgB,EAAc,CAAC,YACfC,GAA2BjB,EAAAA,EAAAA,IAAiB,WAE5C,SAAUrD,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAC1CgE,GAAuBhE,EAAAA,EAAAA,IAAkB,aACzCiE,GAAsBjE,EAAAA,EAAAA,IAAkB,YACxCkE,GAAiClE,EAAAA,EAAAA,IAAkB,uBAEzD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDI,EAAAA,EAAAA,IAAagD,EAAsB,CACjC,mBAAoBvE,EAAKgC,WAAW0C,WACpC,mBAAoB1E,EAAKgC,WAAW2C,WACpC,mBAAoB3E,EAAKgC,WAAW4C,eACpC,WAAY5E,EAAK6E,QACjBC,SAAU9E,EAAK8E,SACf,YAAa9E,EAAK+E,SAClBC,KAAMhF,EAAKgC,WAAWiD,cACtB,aAAcjF,EAAKkF,UACnB,aAAclF,EAAKmF,UACnB,oBAAqBnF,EAAKoF,gBAC1B,oBAAqBpF,EAAKqF,gBAC1B,uBAAwBrF,EAAKsF,kBAC7B,uBAAwBtF,EAAKuF,mBAC7B,uBAAwBvF,EAAKwF,kBAC7B,uBAAwBxF,EAAKyF,mBAC7B5C,SAAU7C,EAAK6C,SACf6C,OAAQ1F,EAAK0F,OACbC,OAAQ3F,EAAK2F,QACZ,CACD,iBAAiBC,EAAAA,EAAAA,KAAS,iBAAM,EAC9BjD,EAAAA,EAAAA,GAAoB,MAAOL,EAAY,CACpCtC,EAAK6F,cAAcpE,OACfP,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK+F,QAAU/F,EAAK+F,OAAL,MAAA/F,EAAI,cAChB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACb3D,MAEFX,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcM,OACfjF,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKoG,QAAUpG,EAAKoG,OAAL,MAAApG,EAAI,cAChB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKI,MACf,KAAM,EAAG,CAAC,SACbhD,MAEFzB,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcS,SACfpF,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKuG,UAAYvG,EAAKuG,SAAL,MAAAvG,EAAI,cAClB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKO,QACf,KAAM,EAAG,CAAC,SACblD,MAEF1B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAchE,WACfX,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKyG,YAAczG,EAAKyG,WAAL,MAAAzG,EAAI,cACpB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKS,UACf,KAAM,EAAG,CAAC,SACbnD,MAEF3B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcc,cACfzF,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK4G,eAAiB5G,EAAK4G,cAAL,MAAA5G,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKY,KACf,KAAM,EAAG,CAAC,SACbrD,MAEF5B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAc/D,WACfZ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK8G,YAAc9G,EAAK8G,WAAL,MAAA9G,EAAI,cACpB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKc,UACf,KAAM,EAAG,CAAC,SACbtD,MAEF7B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcmB,cACf9F,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKiH,eAAiBjH,EAAKiH,cAAL,MAAAjH,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKI,MACf,KAAM,EAAG,CAAC,SACb3C,MAEF9B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcqB,oBACfhG,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKmH,qBAAuBnH,EAAKmH,oBAAL,MAAAnH,EAAI,cAC7B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKmB,MACf,KAAM,EAAG,CAAC,SACbzD,MAEF/B,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAcwB,kBACfnG,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKsH,mBAAqBtH,EAAKsH,kBAAL,MAAAtH,EAAI,cAC3B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKsB,OACf,KAAM,EAAG,CAAC,SACb3D,MAEFhC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAc2B,eACftG,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKyH,cAAgBzH,EAAKyH,aAAL,MAAAzH,EAAI,cACtB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKyB,MACf,KAAM,EAAG,CAAC,SACb7D,MAEFjC,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6F,cAAc2B,eACftG,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,GACLP,MAAO,eACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE/C,kBAAcD,EAAK2H,gBAAkB3H,EAAK2H,eAAL,MAAA3H,EAAI,cACxB,cACH4B,EAAAA,EAAAA,IAAoB,IAAI,SAGhC,gBAAgBgE,EAAAA,EAAAA,KAAS,iBAAM,EAC7BjD,EAAAA,EAAAA,GAAoB,MAAOmB,EAAa,EACtCnB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAK4H,mBAAqB5H,EAAK4H,kBAAL,MAAA5H,EAAI,cAC/B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK4B,UACf,KAAM,EAAG,CAAC,SACb9D,KAEFpB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0G,UAAW9H,EAAK6F,cAAckC,eAC9BjC,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKgI,sBAAwBhI,EAAKgI,qBAAL,MAAAhI,EAAI,cAClC,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKgC,iBACf,KAAM,EAAG,CAAC,SACbhE,GACC,EAAGD,IACNrB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKkI,QAAUlI,EAAKkI,OAAL,MAAAlI,EAAI,cACpB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKkC,MACf,KAAM,EAAG,CAAC,SACbjE,KAEFvB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKoI,cAAgBpI,EAAKoI,aAAL,MAAApI,EAAI,cAC1B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKoC,MACf,KAAM,EAAG,CAAC,SACblE,KAEFxB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0G,UAAW9H,EAAK6F,cAAcyC,YAC9BxC,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKuI,eAAiBvI,EAAKuI,cAAL,MAAAvI,EAAI,cAC3B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKuC,QACf,KAAM,EAAG,CAAC,SACbnE,GACC,EAAGD,SAGVqE,EAAG,GACF,EAAG,CAAC,mBAAoB,mBAAoB,mBAAoB,WAAY,WAAY,YAAa,OAAQ,aAAc,aAAc,oBAAqB,oBAAqB,uBAAwB,uBAAwB,uBAAwB,uBAAwB,WAAY,SAAU,WAC3SzI,EAAK0I,oBACDxH,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAa8C,EAAqB,CAC/C7C,IAAK,EACLgH,QAAS1I,EAAO,MAAQA,EAAO,IAAM,SAAC2I,GAAD,OAAkB5I,EAAK0I,mBAAoB,QAElF9G,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK6I,+BACD3H,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAa+C,EAAgC,CAC1D9C,IAAK,EACLgH,QAAS1I,EAAO,MAAQA,EAAO,IAAM,SAAC2I,GAAD,OAAkB5I,EAAK6I,8BAA+B,QAE7FjH,EAAAA,EAAAA,IAAoB,IAAI,KClShC,IACMU,EAAa,CAAC,OACdC,EAAa,CAAEnB,MAAO,oBACtBiC,EAAa,CAAEjC,MAAO,cACtBkC,EAAa,CAAElC,MAAO,oBACtBmC,EAAa,CAAEnC,MAAO,cACtBoC,EAAa,CAAC,OACdC,EAAa,CAAC,UAAW,iBACzBC,EAAa,CAAC,OACdC,EAAa,CAAC,WACdC,EAAc,CAAC,OACfC,EAAc,CAAC,WACfC,EAAc,CAAC,OACfC,EAAc,CAAC,OAEf,SAAUhE,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOC,MAAMhG,OACzC+C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKgJ,gBACzD,EACDrG,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOG,MAAMlG,QACxC,EACDJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKlJ,EAAK8I,OAAOG,MAAME,WACtB,KAAM,EAAG7G,IACX,IACHK,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAE+H,OAA+B,SAAvBpJ,EAAK8E,SAASuE,SAC/DtG,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAO1D,gBAAgBrC,QAClD,EACDJ,EAAAA,EAAAA,GAAoB,OAAQJ,EAAY,KAAM+G,EAAAA,EAAAA,IAAiBtJ,EAAKoF,iBAAkB,IACrF,IACHzC,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,QAASrB,EAAKuJ,0BACtCxG,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOU,WAAWzG,QAC7C,EACDJ,EAAAA,EAAAA,GAAoB,OAAQU,GAAYiG,EAAAA,EAAAA,IAAiBtJ,EAAKyJ,qBAAsB,IACnF,IACH9G,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAE+H,OAA+B,SAAvBpJ,EAAK8E,SAASuE,SAC/DtG,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOzD,gBAAgBtC,QAClD,EACDJ,EAAAA,EAAAA,GAAoB,OAAQW,EAAY,KAAMgG,EAAAA,EAAAA,IAAiBtJ,EAAKqF,iBAAkB,IACrF,IACH1C,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,QAASrB,EAAK0J,0BACtC3G,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOa,WAAW5G,QAC7C,EACDJ,EAAAA,EAAAA,GAAoB,OAAQY,GAAY+F,EAAAA,EAAAA,IAAiBtJ,EAAK4J,qBAAsB,IACnF,KACF1I,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOiB,QAAQ,SAACA,GACvF,OAAQ7I,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKoI,EAAOC,GACZ5I,MAAO,SACP2B,OAAOC,EAAAA,EAAAA,IAAgB+G,EAAOE,kBAC7B,KAAM,MACP,QACH/I,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOoB,OAAO,SAACA,GACtF,OAAQhJ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKuI,EAAMF,GACX5I,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBkH,EAAMnH,QAC5B,EACDJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKgB,EAAMf,WACV,KAAM,EAAG3F,IACX,MACD,QACHtC,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOqB,QAAQ,SAACC,GACvF,OAAQlJ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKyI,EAAMJ,GACX5I,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBoH,EAAMrH,SAC5BuG,EAAAA,EAAAA,IAAiBc,EAAMC,WAAY,MACpC,QACHnJ,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOiB,QAAQ,SAACA,GACvF,OAAQ7I,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKoI,EAAOC,GACZ5I,MAAO,SACP2B,OAAOC,EAAAA,EAAAA,IAAgB+G,EAAOhH,OAC9B+C,QAAS,SAAC8C,GAAD,OAAkB5I,EAAKsK,YAAY1B,EAAQmB,EAAOQ,KAAMR,EAAOS,OACxEC,cAAe,SAAC7B,GAAD,OAAkB5I,EAAK0K,aAAa9B,EAAQmB,EAAOQ,KAAMR,EAAOS,QAC9E,KAAM,GAAI/G,MACX,OACJd,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,OACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAO6B,UAAU5H,QAC5C,GACA7B,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAO6B,UAAUC,UAAU,SAACC,GACnG,OAAQ3J,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKkJ,EAAQb,GACb5I,MAAO,eACP2B,OAAOC,EAAAA,EAAAA,IAAgB6H,EAAQZ,kBAC9B,KAAM,MACP,QACH/I,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAO6B,UAAUG,QAAQ,SAACZ,GACjG,OAAQhJ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKuI,EAAMF,GACX5I,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBkH,EAAMnH,QAC5B,EACDJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKgB,EAAMf,WACV,KAAM,EAAGzF,IACX,MACD,QACHxC,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAO6B,UAAUC,UAAU,SAACC,GACnG,OAAQ3J,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKkJ,EAAQb,GACb5I,MAAO,eACP2B,OAAOC,EAAAA,EAAAA,IAAgB6H,EAAQ9H,OAC/B+C,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK+K,UAAUnC,EAAQ5I,EAAKgL,MAAMC,MAAOJ,EAAQK,QAC3E,KAAM,GAAIvH,MACX,OACH,IACHhB,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,OACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOqC,UAAUpI,QAC5C,GACA7B,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOqC,UAAUP,UAAU,SAACC,GACnG,OAAQ3J,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKkJ,EAAQb,GACb5I,MAAO,eACP2B,OAAOC,EAAAA,EAAAA,IAAgB6H,EAAQZ,kBAC9B,KAAM,MACP,QACH/I,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOqC,UAAUL,QAAQ,SAACZ,GACjG,OAAQhJ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKuI,EAAMF,GACX5I,MAAO,QACP2B,OAAOC,EAAAA,EAAAA,IAAgBkH,EAAMnH,QAC5B,EACDJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKgB,EAAMf,WACV,KAAM,EAAGvF,IACX,MACD,QACH1C,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK8I,OAAOqC,UAAUP,UAAU,SAACC,GACnG,OAAQ3J,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKkJ,EAAQb,GACb5I,MAAO,eACP2B,OAAOC,EAAAA,EAAAA,IAAgB6H,EAAQ9H,OAC/B+C,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK+K,UAAUnC,EAAQ5I,EAAKgL,MAAMI,MAAOP,EAAQK,QAC3E,KAAM,GAAIrH,MACX,OACH,GACF7D,EAAK8I,OAAOuC,YACRnK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CACxCQ,IAAK,EACLP,MAAO,qBACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAOuC,UAAUtI,QAC5C,EACDJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,wBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKsL,aAAa1C,MACtE,EACDjG,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKlJ,EAAK8I,OAAOuC,UAAUE,kBAC1B,KAAM,EAAGzH,MAEdnB,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,4BACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKwL,gBAAgB5C,MACzE,EACDjG,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,cACP8H,IAAKlJ,EAAK8I,OAAOuC,UAAUI,qBAC1B,KAAM,EAAG1H,MAEb,KACHnC,EAAAA,EAAAA,IAAoB,IAAI,IAC5Be,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,OACP2B,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAO4C,KAAK3I,QACvC,KAAM,IACTJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBI,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAO6C,QAAQC,KAAK7I,QAC/C,EACD8I,EAAAA,EAAAA,IAAY7L,EAAK8L,OAAQ,eAAgB,QAAIC,GAAW,IACvD,IACHpJ,EAAAA,EAAAA,GAAoB,MAAO,CACzBI,OAAOC,EAAAA,EAAAA,IAAgBhD,EAAK8I,OAAO6C,QAAQK,MAAMjJ,QAChD,EACD8I,EAAAA,EAAAA,IAAY7L,EAAK8L,OAAQ,gBAAiB,QAAIC,GAAW,IACxD,IACF,K,oBCpMKf,ECEAiB,E,sCDGN,SAAUC,EAAa7C,GAC3B,OAAIA,IAAU2B,EAAMC,MACXD,EAAMI,MAERJ,EAAMC,MAGT,SAAUkB,EAAY9C,GAC1B,OAAIA,IAAU2B,EAAMC,MACX,IAEF,IAGH,SAAUmB,GAAiBC,GAC/B,MAAgB,MAATA,GAAyB,MAATA,EAGnB,SAAUC,GAAeD,GAC7B,MAAgB,MAATA,EAAerB,EAAMC,MAAQD,EAAMI,OAxB5C,SAAYJ,GACVA,EAAAA,SAAAA,QACAA,EAAAA,SAAAA,SAFF,CAAYA,IAAAA,EAAK,KCEjB,SAAYiB,GACVA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,QACAA,EAAAA,UAAAA,SACAA,EAAAA,UAAAA,SACAA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,aAAAA,WACAA,EAAAA,cAAAA,YACAA,EAAAA,eAAAA,aACAA,EAAAA,eAAAA,aACAA,EAAAA,SAAAA,QACAA,EAAAA,UAAAA,SAdF,CAAYA,IAAAA,EAAS,KAiBrB,IAAMM,GAAwD,CAC5DC,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,OAAQ,IACRC,KAAM,IACNC,OAAQ,IACRC,KAAM,IACNC,KAAM,IACNC,SAAU,IACVC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,MAAO,IACPC,OAAQ,KAGJ,SAAUC,GAAkBpC,GAChC,IAAMqC,EAAMhB,GAAqBrB,GACjC,OAAOqC,GAAO,GAIdtB,EAAUuB,KACVvB,EAAUwB,MACVxB,EAAUyB,OACVzB,EAAU0B,OACV1B,EAAU2B,KACV3B,EAAU4B,OACV5B,EAAU6B,KACV7B,EAAU8B,KACV9B,EAAU+B,UACV/B,EAAUgC,WACVhC,EAAUiC,YACVjC,EAAUkC,YACVlC,EAAUmC,MACVnC,EAAUoC,OAdL,IAiBMC,GAA8B,CACzCrC,EAAUuB,KACVvB,EAAUwB,MACVxB,EAAUyB,OACVzB,EAAU0B,OACV1B,EAAU2B,KACV3B,EAAU4B,OACV5B,EAAU6B,MAGNS,GAA+C,CACnD/B,MAAM,EACNC,OAAO,EACPC,QAAQ,EACRC,QAAQ,EACRC,MAAM,EACNC,QAAQ,EACRC,MAAM,EACNC,MAAM,EACNC,UAAU,EACVC,WAAW,EACXC,YAAY,EACZC,YAAY,EACZC,OAAO,EACPC,QAAQ,GAGJmB,GAAiD,CACrDhC,KAAMP,EAAU+B,UAChBvB,MAAOR,EAAUgC,WACjBvB,OAAQT,EAAUiC,YAClBvB,OAAQV,EAAUkC,YAClBtB,OAAQZ,EAAUmC,MAClBtB,KAAMb,EAAUoC,QAGZ,SAAUI,GAAkBC,GAChC,OAAOF,GAAWE,IAAcA,EAGlC,IAAMC,GAAmD,CACvD3B,SAAUf,EAAUuB,KACpBP,UAAWhB,EAAUwB,MACrBP,WAAYjB,EAAUyB,OACtBP,WAAYlB,EAAU0B,OACtBP,MAAOnB,EAAU4B,OACjBR,OAAQpB,EAAU6B,MAOpB,IAAMc,GAAmD,CACvDpC,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,OAAQ,IACRC,KAAM,IACNC,OAAQ,IACRC,KAAM,IACNC,KAAM,IACNC,SAAU,KACVC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,MAAO,KACPC,OAAQ,MAGJ,SAAUwB,GAAgB3D,GAC9B,OAAO0D,GAAgB1D,GAGzB,IAAM4D,GAAmD,CACvDtC,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,OAAQ,IACRC,KAAM,IACNC,OAAQ,IACRC,KAAM,IACNC,KAAM,IACNC,SAAU,KACVC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,MAAO,KACPC,OAAQ,MAGJ0B,GAAmD,CACvDC,EAAG/C,EAAUuB,KACbyB,EAAGhD,EAAUwB,MACbyB,EAAGjD,EAAUyB,OACbyB,EAAGlD,EAAU0B,OACbyB,EAAGnD,EAAU2B,KACbyB,EAAGpD,EAAU4B,OACbyB,EAAGrD,EAAU6B,KACbyB,EAAGtD,EAAU8B,KACb,KAAM9B,EAAU+B,UAChB,KAAM/B,EAAUgC,WAChB,KAAMhC,EAAUiC,YAChB,KAAMjC,EAAUkC,YAChB,KAAMlC,EAAUmC,MAChB,KAAMnC,EAAUoC,OAChBmB,EAAGvD,EAAUuB,KACbiC,EAAGxD,EAAUwB,MACbiC,EAAGzD,EAAUyB,OACbiC,EAAG1D,EAAU0B,OACbiC,EAAG3D,EAAU2B,KACbiC,EAAG5D,EAAU4B,OACbiC,EAAG7D,EAAU6B,KACbiC,EAAG9D,EAAU8B,KACb,KAAM9B,EAAU+B,UAChB,KAAM/B,EAAUgC,WAChB,KAAMhC,EAAUiC,YAChB,KAAMjC,EAAUkC,YAChB,KAAMlC,EAAUmC,MAChB,KAAMnC,EAAUoC,QAGZ2B,GAAgD,CACpDhB,EAAGhE,EAAAA,MACHiE,EAAGjE,EAAAA,MACHkE,EAAGlE,EAAAA,MACHmE,EAAGnE,EAAAA,MACHoE,EAAGpE,EAAAA,MACHqE,EAAGrE,EAAAA,MACHsE,EAAGtE,EAAAA,MACHuE,EAAGvE,EAAAA,MACH,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACNwE,EAAGxE,EAAAA,MACHyE,EAAGzE,EAAAA,MACH0E,EAAG1E,EAAAA,MACH2E,EAAG3E,EAAAA,MACH4E,EAAG5E,EAAAA,MACH6E,EAAG7E,EAAAA,MACH8E,EAAG9E,EAAAA,MACH+E,EAAG/E,EAAAA,MACH,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,MACN,KAAMA,EAAAA,OAQFiF,GAAY,IAAIC,IACtBD,GAAUE,IAAIlE,EAAUuB,KAAM,CAC5BtC,KAAMe,EAAU+B,UAChB9B,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUwB,MAAO,CAC7BvC,KAAMe,EAAUgC,WAChB/B,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUyB,OAAQ,CAC9BxC,KAAMe,EAAUiC,YAChBhC,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAU0B,OAAQ,CAC9BzC,KAAMe,EAAUkC,YAChBjC,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAU2B,KAAM,CAAE1C,KAAMe,EAAU2B,KAAM1B,cAAc,IACpE+D,GAAUE,IAAIlE,EAAU4B,OAAQ,CAAE3C,KAAMe,EAAUmC,MAAOlC,cAAc,IACvE+D,GAAUE,IAAIlE,EAAU6B,KAAM,CAAE5C,KAAMe,EAAUoC,OAAQnC,cAAc,IACtE+D,GAAUE,IAAIlE,EAAU8B,KAAM,CAAE7C,KAAMe,EAAU8B,KAAM7B,cAAc,IACpE+D,GAAUE,IAAIlE,EAAU+B,UAAW,CACjC9C,KAAMe,EAAUuB,KAChBtB,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUgC,WAAY,CAClC/C,KAAMe,EAAUwB,MAChBvB,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUiC,YAAa,CACnChD,KAAMe,EAAUyB,OAChBxB,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUkC,YAAa,CACnCjD,KAAMe,EAAU0B,OAChBzB,cAAc,IAEhB+D,GAAUE,IAAIlE,EAAUmC,MAAO,CAAElD,KAAMe,EAAU4B,OAAQ3B,cAAc,IACvE+D,GAAUE,IAAIlE,EAAUoC,OAAQ,CAAEnD,KAAMe,EAAU6B,KAAM5B,cAAc,IAE/D,IC9PKkE,GD8PCC,GAAb,WAKE,WAAYhH,EAAc6B,IAAe,wEACvCoF,KAAKpF,KAAOA,EACZoF,KAAKjH,MAAQA,EAPjB,oCAUE,WACE,OAAOiH,KAAKC,UAAUvF,EAAAA,SAX1B,mBAcE,WACE,OAAOsF,KAAKC,UAAUvF,EAAAA,SAf1B,uBAkBE,SAAU3B,GACR,OAAO,IAAIgH,EAAMhH,EAAOiH,KAAKpF,QAnBjC,oBAsBE,SAAOhB,GACL,OAAOoG,KAAKpF,OAAShB,EAAMgB,MAAQoF,KAAKjH,QAAUa,EAAMb,QAvB5D,sBA0BE,WACE,IAAM6B,EAAOsD,GAAW8B,KAAKpF,MAC7B,OAAO,IAAImF,EAAMC,KAAKjH,MAAO6B,GAAQoF,KAAKpF,QA5B9C,wBA+BE,WACE,IAAMA,EAAOyD,GAAa2B,KAAKpF,MAC/B,OAAO,IAAImF,EAAMC,KAAKjH,MAAO6B,GAAQoF,KAAKpF,QAjC9C,0BAoCE,WACE,QAASqD,GAAW+B,KAAKpF,QArC7B,oBAwCE,WACE,IAAM4E,EAAIG,GAAUO,IAAIF,KAAKpF,MACvBhB,EAAQ,IAAImG,EAAMC,KAAKjH,MAAOyG,EAAIA,EAAE5E,KAAOoF,KAAKpF,MAItD,OAHI4E,GAAKA,EAAE5D,eACThC,EAAMb,MAAQ6C,EAAaoE,KAAKjH,QAE3Ba,IA9CX,cAiDE,WACE,OAAOoG,KAAKjH,MAAQ,IAAMiH,KAAKpF,OAlDnC,gBAqDE,WACE,OAAQoF,KAAKjH,OACX,QACA,KAAK2B,EAAAA,MACH,OAAO4D,GAAgB0B,KAAKpF,MAC9B,KAAKF,EAAAA,MACH,OAAO8D,GAAgBwB,KAAKpF,UA3DpC,0BA+DE,SAAmBmB,GACjB,QAAS0C,GAAkB1C,KAhE/B,uBAmEE,SAAiBA,GACf,IAAMnB,EAAO6D,GAAkB1C,GAC/B,IAAKnB,EACH,OAAO,KAET,IAAM7B,EAAQ2G,GAAmB3D,GACjC,OAAKhD,EAGE,IAAIgH,EAAMhH,EAAO6B,GAFf,SA1Eb,K,iBC9PA,SAAYkF,GACVA,EAAAA,MAAAA,KACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,QACAA,EAAAA,WAAAA,UACAA,EAAAA,YAAAA,WACAA,EAAAA,aAAAA,YACAA,EAAAA,cAAAA,aACAA,EAAAA,kBAAAA,iBACAA,EAAAA,mBAAAA,kBACAA,EAAAA,oBAAAA,mBACAA,EAAAA,qBAAAA,qBAZF,CAAYA,KAAAA,GAAS,KAerB,IAAMK,GAAa,CACjBC,GAAIN,GAAUO,KACdC,KAAMR,GAAUS,GAChBjF,KAAMwE,GAAUU,MAChB9E,MAAOoE,GAAUW,KACjBC,QAASZ,GAAUa,WACnBC,SAAUd,GAAUe,UACpBC,UAAWhB,GAAUiB,SACrBC,WAAYlB,GAAUmB,QACtBC,eAAgBpB,GAAUqB,kBAC1BC,gBAAiBtB,GAAUuB,iBAC3BC,iBAAkBxB,GAAUyB,gBAC5BC,kBAAmB1B,GAAU2B,gBAGzB,SAAUC,GAAiBC,GAC/B,OAAOxB,GAAWwB,GAGb,IAeKC,GAfCC,GAAa,CACxB/B,GAAUS,GACVT,GAAUO,KACVP,GAAUW,KACVX,GAAUU,MACVV,GAAUmB,QACVnB,GAAUiB,SACVjB,GAAUe,UACVf,GAAUa,WACVb,GAAU2B,eACV3B,GAAUyB,gBACVzB,GAAUuB,iBACVvB,GAAUqB,oBAGZ,SAAYS,GACVA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,QAFF,CAAYA,KAAAA,GAAQ,KAKpB,IAAME,GAIF,CACFC,MAAO,CACL7F,KAAM,CAAEkE,GAAIwB,GAASI,OACrB7F,MAAO,CAAEiE,GAAIwB,GAASK,MACtB7F,OAAQ,CAAE8E,eAAgBU,GAASI,MAAOZ,gBAAiBQ,GAASI,OACpE3F,OAAQ,CACNqE,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnBlB,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,OAEvB1F,KAAM,CACJoE,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBzF,OAAQ,CACNmE,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,MAEvBzF,KAAM,CACJ4D,GAAIwB,GAASK,KACb3G,KAAMsG,GAASK,KACfvG,MAAOkG,GAASK,KAChB3B,KAAMsB,GAASK,MAEjBxF,KAAM,CACJqE,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnB1B,KAAMsB,GAASI,MACf1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEftF,SAAU,CACRgE,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBrF,UAAW,CACT+D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBpF,WAAY,CACV8D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBnF,WAAY,CACV6D,QAASkB,GAASI,MAClB5B,GAAIwB,GAASI,MACbpB,SAAUgB,GAASI,MACnB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBlF,MAAO,CACL4D,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnBnB,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,KACrB7B,GAAIwB,GAASI,MACb1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB1B,KAAMsB,GAASI,OAEjBjF,OAAQ,CACNqD,GAAIwB,GAASK,KACb3G,KAAMsG,GAASK,KACfvG,MAAOkG,GAASK,KAChB3B,KAAMsB,GAASK,KACfvB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnBlB,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,QAGzBE,MAAO,CACLhG,KAAM,CAAEoE,KAAMsB,GAASI,OACvB7F,MAAO,CAAEmE,KAAMsB,GAASK,MACxB7F,OAAQ,CACNkF,iBAAkBM,GAASI,MAC3BR,kBAAmBI,GAASI,OAE9B3F,OAAQ,CACNyE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,OAErB1F,KAAM,CACJwE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfzF,OAAQ,CACNuE,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,KACrBvB,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,MAErBzF,KAAM,CACJ8D,KAAMsB,GAASK,KACf3G,KAAMsG,GAASK,KACfvG,MAAOkG,GAASK,KAChB7B,GAAIwB,GAASK,MAEfxF,KAAM,CACJqE,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,MACnB1B,KAAMsB,GAASI,MACf1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEftF,SAAU,CACRoE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfrF,UAAW,CACTmE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfpF,WAAY,CACVkE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfnF,WAAY,CACViE,UAAWc,GAASI,MACpB1B,KAAMsB,GAASI,MACfhB,WAAYY,GAASI,MACrB1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEflF,MAAO,CACLgE,UAAWc,GAASK,KACpBjB,WAAYY,GAASK,KACrBvB,QAASkB,GAASK,KAClBrB,SAAUgB,GAASK,KACnB3B,KAAMsB,GAASI,MACf1G,KAAMsG,GAASI,MACftG,MAAOkG,GAASI,MAChB5B,GAAIwB,GAASI,OAEfjF,OAAQ,CACNuD,KAAMsB,GAASK,KACf3G,KAAMsG,GAASK,KACfvG,MAAOkG,GAASK,KAChB7B,GAAIwB,GAASK,KACbnB,UAAWc,GAASI,MACpBhB,WAAYY,GAASI,MACrBtB,QAASkB,GAASI,MAClBpB,SAAUgB,GAASI,SAKnB,SAAUG,GAAkBvI,GAChC,OAAOwI,OAAOC,KACZP,GAAoBlI,EAAMb,OAAiBa,EAAMgB,OAI/C,SAAU0H,GACd1I,EACA2I,GAEA,OAAOT,GAAoBlI,EAAMb,OAAiBa,EAAMgB,MAAM2H,GAGzD,IAAMC,GAET,CACFpC,GAAI,CAAEqC,EAAG,EAAGC,GAAI,GAChBpC,KAAM,CAAEmC,EAAG,EAAGC,EAAG,GACjBpH,KAAM,CAAEmH,GAAI,EAAGC,EAAG,GAClBhH,MAAO,CAAE+G,EAAG,EAAGC,EAAG,GAClBhC,QAAS,CAAE+B,GAAI,EAAGC,GAAI,GACtB9B,SAAU,CAAE6B,EAAG,EAAGC,GAAI,GACtB5B,UAAW,CAAE2B,GAAI,EAAGC,EAAG,GACvB1B,WAAY,CAAEyB,EAAG,EAAGC,EAAG,GACvBxB,eAAgB,CAAEuB,GAAI,EAAGC,GAAI,GAC7BtB,gBAAiB,CAAEqB,EAAG,EAAGC,GAAI,GAC7BpB,iBAAkB,CAAEmB,GAAI,EAAGC,EAAG,GAC9BlB,kBAAmB,CAAEiB,EAAG,EAAGC,EAAG,IAG1B,SAAUC,GACdF,EACAC,GAMA,GAAU,IAAND,IAAkB,IAAPC,EACb,MAAO,CAAEH,UAAWzC,GAAUyB,gBAAiBqB,SAAU,EAAGC,IAAI,GAElE,IAAW,IAAPJ,IAAmB,IAAPC,EACd,MAAO,CAAEH,UAAWzC,GAAU2B,eAAgBmB,SAAU,EAAGC,IAAI,GAEjE,GAAU,IAANJ,GAAiB,IAANC,EACb,MAAO,CAAEH,UAAWzC,GAAUqB,kBAAmByB,SAAU,EAAGC,IAAI,GAEpE,IAAW,IAAPJ,GAAkB,IAANC,EACd,MAAO,CAAEH,UAAWzC,GAAUuB,iBAAkBuB,SAAU,EAAGC,IAAI,GAEnE,GAAU,IAANJ,GAAiB,IAANC,GAAWI,KAAKC,IAAIN,KAAOK,KAAKC,IAAIL,GACjD,MAAO,CAAEH,UAAW,GAAiBK,SAAU,EAAGC,IAAI,GAExD,IAAIG,EAAKP,EACLQ,EAAKP,EACLE,EAAW,EASf,OARW,IAAPI,IACFJ,EAAWE,KAAKC,IAAIC,GACpBA,GAAMJ,GAEG,IAAPK,IACFL,EAAWE,KAAKC,IAAIE,GACpBA,GAAML,IAEI,IAARI,IAAqB,IAARC,EACR,CAAEV,UAAWzC,GAAUmB,QAAS2B,SAAAA,EAAUC,IAAI,GAE5C,IAAPG,IAAoB,IAARC,EACP,CAAEV,UAAWzC,GAAUS,GAAIqC,SAAAA,EAAUC,IAAI,GAEvC,IAAPG,IAAoB,IAARC,EACP,CAAEV,UAAWzC,GAAUiB,SAAU6B,SAAAA,EAAUC,IAAI,IAE5C,IAARG,GAAoB,IAAPC,EACR,CAAEV,UAAWzC,GAAUW,KAAMmC,SAAAA,EAAUC,IAAI,GAEzC,IAAPG,GAAmB,IAAPC,EACP,CAAEV,UAAWzC,GAAUU,MAAOoC,SAAAA,EAAUC,IAAI,IAEzC,IAARG,GAAoB,IAAPC,EACR,CAAEV,UAAWzC,GAAUe,UAAW+B,SAAAA,EAAUC,IAAI,GAE9C,IAAPG,GAAmB,IAAPC,EACP,CAAEV,UAAWzC,GAAUO,KAAMuC,SAAAA,EAAUC,IAAI,GAEzC,IAAPG,GAAmB,IAAPC,EACP,CAAEV,UAAWzC,GAAUa,WAAYiC,SAAAA,EAAUC,IAAI,GAEnD,CAAEN,UAAW,GAAiBK,SAAU,EAAGC,IAAI,GCpVxD,SAASK,GAAiBnH,GACxB,OAAQA,GACN,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,QACE,OAAO,MAIb,SAASoH,GAAiBpH,GACxB,OAAQA,GACN,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,QACE,OAAO,MAIb,IAAMqH,GAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEtCC,GAAAA,WAKnB,WAAYpJ,EAAcC,IAAY,uEACpC8F,KAAK/F,KAAOA,EACZ+F,KAAK9F,KAAOA,E,8BAGd,WACE,OAAO,EAAI8F,KAAK/F,O,aAGlB,WACE,OAAO+F,KAAK9F,KAAO,I,iBAGrB,WACE,OAAgB,EAAT8F,KAAK0C,EAAQ1C,KAAKyC,I,oBAG3B,WACE,OAAO,IAAIY,EAAO,GAAKrD,KAAK/F,KAAM,GAAK+F,KAAK9F,Q,sBAK9C,SAASoJ,EAA0BC,GACjC,OAAQD,GACN,KAAKxD,GAAUS,GACb,OAAO,IAAI8C,EAAOrD,KAAK/F,KAAM+F,KAAK9F,KAAO,GAC3C,KAAK4F,GAAUO,KACb,OAAO,IAAIgD,EAAOrD,KAAK/F,KAAM+F,KAAK9F,KAAO,GAC3C,KAAK4F,GAAUW,KACb,OAAO,IAAI4C,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,MACxC,KAAK4F,GAAUU,MACb,OAAO,IAAI6C,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,MACxC,KAAK4F,GAAUmB,QACb,OAAO,IAAIoC,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUiB,SACb,OAAO,IAAIsC,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUe,UACb,OAAO,IAAIwC,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUa,WACb,OAAO,IAAI0C,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAU2B,eACb,OAAO,IAAI4B,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUyB,gBACb,OAAO,IAAI8B,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUuB,iBACb,OAAO,IAAIgC,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAC/C,KAAK4F,GAAUqB,kBACb,OAAO,IAAIkC,EAAOrD,KAAK/F,KAAO,EAAG+F,KAAK9F,KAAO,GAEjD,IAAM8I,EAAKM,EACLL,EAAKM,EACX,OAAO,IAAIF,EAAOrD,KAAK/F,KAAO+I,EAAIhD,KAAK9F,KAAO+I,K,iBAGhD,WACE,OAAOjD,KAAK/F,MAAQ,GAAK+F,KAAK/F,MAAQ,GAAK+F,KAAK9F,MAAQ,GAAK8F,KAAK9F,MAAQ,I,oBAG5E,SAAOT,GACL,QAASA,GAAUuG,KAAK/F,OAASR,EAAOQ,MAAQ+F,KAAK9F,OAAST,EAAOS,O,gBAavE,WACE,OAAO8F,KAAK/F,KAAOmJ,GAAUpD,KAAK9F,KAAO,M,sBAX3C,SAAeuI,EAAWC,GACxB,OAAO,IAAIW,EAAO,EAAIZ,EAAGC,EAAI,K,wBAG/B,SAAkBc,GAChB,OAAO,IAAIH,EAAO,EAAKG,EAAQ,EAAIV,KAAKW,MAAMD,EAAQ,GAAK,K,6BAS7D,SAAuBzH,GACrB,IAAM9B,EAAOiJ,GAAiBnH,EAAK,IAC7B7B,EAAOiJ,GAAiBpH,EAAK,IACnC,OAAK9B,GAASC,EAGP,IAAImJ,EAAOpJ,EAAMC,GAFf,S,EAtFQmJ,I,OAAAA,GAAAA,MA4EI,IAgBzB,IAAK,IAAIG,GAAQ,EAAGA,GAAQ,GAAIA,IAAS,EACvCH,GAAOK,IAAIC,KAAKN,GAAOO,WAAWJ,K,YC/I9BK,GAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5DC,GAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE7CC,GAAAA,WAanB,WACEC,EACAC,EACAC,EACAnL,EACAqF,EACA+F,IAAmC,2MAEnCnE,KAAKgE,KAAOA,EACZhE,KAAKiE,GAAKA,EACVjE,KAAKkE,QAAUA,EACflE,KAAKjH,MAAQA,EACbiH,KAAK5B,UAAYA,EACjB4B,KAAKmE,kBAAoBA,E,qCAG3B,SAAOC,GACL,QAAKA,KAIDpE,KAAKgE,gBAAgBX,IACrBe,EAAKJ,gBAAgBX,IACrBrD,KAAKgE,KAAKK,OAAOD,EAAKJ,SACnBhE,KAAKgE,gBAAgBX,OACpBe,EAAKJ,gBAAgBX,KACvBrD,KAAKgE,OAASI,EAAKJ,OACvBhE,KAAKiE,GAAGI,OAAOD,EAAKH,KACpBjE,KAAKkE,UAAYE,EAAKF,SACtBlE,KAAKjH,QAAUqL,EAAKrL,OACpBiH,KAAK5B,YAAcgG,EAAKhG,WACxB4B,KAAKmE,oBAAsBC,EAAKD,qB,yBAIpC,WACE,OAAO,IAAIJ,EACT/D,KAAKgE,KACLhE,KAAKiE,IACL,EACAjE,KAAKjH,MACLiH,KAAK5B,UACL4B,KAAKmE,qB,4BAIT,SAAeG,GACb,IAAIC,EAAO,GAYX,GAXAA,GAAQvE,KAAKjH,QAAU2B,EAAAA,MAAc,IAAM,IACvC4J,GAAQA,EAAKL,GAAGI,OAAOrE,KAAKiE,IAC9BM,GAAQ,MAERA,GAAQV,GAAiB7D,KAAKiE,GAAGhK,KAAO,GACxCsK,GAAQT,GAAiB9D,KAAKiE,GAAG/J,KAAO,IAE1CqK,GAAQvH,GAAkBgD,KAAK5B,WAC3B4B,KAAKkE,UACPK,GAAQ,KAENvE,KAAKgE,gBAAgBX,GAAQ,CAC/B,IAAM5J,EAASuG,KAAKgE,KACpBO,GAAQ,IAAJ,OAAQ9K,EAAOQ,MAAf,OAAsBR,EAAOS,KAA7B,UAEJqK,GAAQ,IAEV,OAAOA,I,gBAGT,WACE,IAAIC,EAAM,GAUV,OATIxE,KAAKgE,gBAAgBX,GACvBmB,GAAOxE,KAAKgE,KAAKjI,KAEjByI,GAAOjG,GAAgByB,KAAKgE,MAAQ,IAEtCQ,GAAOxE,KAAKiE,GAAGlI,KACXiE,KAAKkE,UACPM,GAAO,KAEFA,M,EA5FUT,GAgGf,SAAUU,GAAc1I,GAK5B,IAAIiI,EACJ,GAAgB,MAAZjI,EAAK,GAAY,CACnB,IAAMnC,EAAQmG,GAAM2E,UAAU3I,EAAK,IACnC,IAAKnC,EACH,OAAO,KAEToK,EAAOpK,EAAMgB,SACR,CACL,IAAMnB,EAAS4J,GAAOsB,gBAAgB5I,GACtC,IAAKtC,EACH,OAAO,KAETuK,EAAOvK,EAET,IAAMwK,EAAKZ,GAAOsB,gBAAgB5I,EAAK6I,UAAU,IACjD,IAAKX,EACH,OAAO,KAET,IAAMC,EAAUnI,EAAK8I,QAAU,GAAiB,MAAZ9I,EAAK,GACzC,MAAO,CAAEiI,KAAAA,EAAMC,GAAAA,EAAIC,QAAAA,G,ICpHTY,G,gCAgBZ,SAASC,GAAiBhJ,GACxB,OAAQA,GACN,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,QACE,OAAO,OArCb,SAAY+I,GACVA,EAAAA,YAAAA,WACAA,EAAAA,SAAAA,QACAA,EAAAA,kBAAAA,gBACAA,EAAAA,wBAAAA,qBACAA,EAAAA,mBAAAA,iBACAA,EAAAA,iBAAAA,eACAA,EAAAA,uBAAAA,oBACAA,EAAAA,oBAAAA,kBACAA,EAAAA,oBAAAA,kBACAA,EAAAA,oBAAAA,kBACAA,EAAAA,oBAAAA,kBACAA,EAAAA,eAAAA,aACAA,EAAAA,sBAAAA,oBAbF,CAAYA,KAAAA,GAAmB,K,IA0DVE,GAAAA,WAGnB,4DACEhF,KAAKiF,QAAU,IAAIC,MACnB,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAC3BnF,KAAKiF,QAAQtB,KAAK,MAEpB3D,KAAKoF,MAAMN,GAAoBO,U,iCAGjC,SAAG5L,GACD,OAAOuG,KAAKiF,QAAQxL,EAAO+J,S,iBAG7B,SAAI/J,EAAgBG,GAClBoG,KAAKiF,QAAQxL,EAAO+J,OAAS5J,I,kBAG/B,SAAK0L,EAAiBC,GACpB,IAAMC,EAAMxF,KAAKiF,QAAQK,EAAQ9B,OACjCxD,KAAKiF,QAAQK,EAAQ9B,OAASxD,KAAKiF,QAAQM,EAAQ/B,OACnDxD,KAAKiF,QAAQM,EAAQ/B,OAASgC,I,oBAGhC,SAAO/L,GACL,IAAMgM,EAAUzF,KAAKiF,QAAQxL,EAAO+J,OAEpC,OADAxD,KAAKiF,QAAQxL,EAAO+J,OAAS,KACtBiC,I,iCAGT,WAAmB,WACXR,EAAU,IAAIC,MAMpB,OALA7B,GAAOK,IAAIgC,SAAQ,SAACjM,GACd,EAAKwL,QAAQxL,EAAO+J,QACtByB,EAAQtB,KAAKlK,MAGVwL,I,gCAGT,SAAmBlM,GAAY,WACvBkM,EAAU,IAAIC,MAOpB,OANA7B,GAAOK,IAAIgC,SAAQ,SAACjM,GAClB,IAAMG,EAAQ,EAAKqL,QAAQxL,EAAO+J,OAC9B5J,GAASA,EAAMb,QAAUA,GAC3BkM,EAAQtB,KAAKlK,MAGVwL,I,mBAGT,WAAK,WACH5B,GAAOK,IAAIgC,SAAQ,SAACjM,GAClB,EAAKwL,QAAQxL,EAAO+J,OAAS,U,mBAIjC,SAAM5I,GAEJ,GADAoF,KAAK2F,QACD/K,IAASkK,GAAoBc,QAGjC5F,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU8B,MAER7C,IAASkK,GAAoBe,cAGjC7F,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU8B,MAER7C,IAASkK,GAAoBgB,qBA2JjC,OAxJA9F,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU6B,MAEZwC,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU6B,MAEZwC,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU4B,QAEZyC,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU4B,QAEZyC,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU2B,MAEZ0C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU2B,MAEZ0C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU2B,MAEZ0C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU2B,MAEZ0C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU0B,QAEZ2C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU0B,QAEZ2C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU0B,QAEZ2C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAU0B,QAEZ2C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUyB,QAEZ4C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUyB,QAEZ4C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUyB,QAEZ4C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUyB,QAEZ4C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUwB,OAEZ6C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUwB,OAEZ6C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUwB,OAEZ6C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUwB,OAEZ6C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEZ8C,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,IAAIzD,GACzCrF,EAAAA,MACAiB,EAAUuB,MAEJtC,GACN,QACA,KAAKkK,GAAoBO,SACvB,OACF,KAAKP,GAAoBiB,eAEvB,YADA/F,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBkB,qBAEvB,YADAhG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBmB,gBAEvB,YADAjG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBoB,cAEvB,YADAlG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBqB,oBAGvB,OAFAnG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,UACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBsB,iBAGvB,OAFApG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,UACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBuB,iBAKvB,OAJArG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,UACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoBwB,iBAOvB,OANAtG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,UACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,MAEzC,KAAKsB,GAAoByB,iBASvB,OARAvG,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,KACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,UACvCxD,KAAKiF,QAAQ,IAAI5B,GAAO,EAAG,GAAGG,OAAS,S,gBAK7C,WAGE,IAFA,IAAIgB,EAAM,GACNgC,EAAQ,EACH9D,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAK,IAAID,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAM7I,EAAQoG,KAAKyG,GAAGpD,GAAOqD,QAAQjE,EAAGC,IACpC9I,GACE4M,IACFhC,GAAOgC,EACPA,EAAQ,GAEVhC,GAAO5K,EAAMmC,MAEbyK,GAAS,EAGTA,IACFhC,GAAOgC,EACPA,EAAQ,GAEA,IAAN9D,IACF8B,GAAO,KAGX,OAAOA,I,yBAGT,SAAYzI,GACV,IAAKiJ,EAAM2B,YAAY5K,GACrB,OAAO,EAETiE,KAAK2F,QAEL,IADA,IAAMiB,EAAO7K,EAAK8K,MAAM,KACfnE,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAE1B,IADA,IAAID,EAAI,EACC0C,EAAI,EAAGA,EAAIyB,EAAKlE,GAAGmC,OAAQM,GAAK,EAAG,CAC1C,IAAI2B,EAAIF,EAAKlE,GAAGyC,GACN,MAAN2B,IACF3B,GAAK,EACL2B,GAAKF,EAAKlE,GAAGyC,IAEf,IAAM/F,EAAI2F,GAAiB+B,GACvB1H,EACFqD,GAAKrD,GAELY,KAAKH,IAAIwD,GAAOqD,QAAQjE,EAAGC,GAAI3C,GAAM2E,UAAUoC,IAC/CrE,GAAK,GAIX,OAAO,I,sBAGT,SAAS1J,GAAY,WACb0D,EAAO,IAAIsD,GAAMhH,EAAO4C,EAAU8B,MACxC,OAAO4F,GAAOK,IAAIqD,MAAK,SAACtN,GACtB,IAAMG,EAAQ,EAAK6M,GAAGhN,GACtB,GAAIG,GAAS6C,EAAK4H,OAAOzK,GACvB,OAAO,O,sBAMb,SACEoN,EACAjO,EACAkO,GAA6B,WAE7B,QAASpF,GAAWkF,MAAK,SAACpF,GAExB,IADA,IAAIuF,EAAO,EAELzN,EAASuN,EAAOG,SAASxF,GAC7BlI,EAAO2N,MACP3N,EAASA,EAAO0N,SAASxF,GACzB,CAEA,GADAuF,GAAQ,EACJD,GAAUA,EAAOI,QAAU5N,EAAO4K,OAAO4C,EAAOI,QAClD,MAEF,KAAIJ,GAAUA,EAAOK,QAAU7N,EAAO4K,OAAO4C,EAAOK,SAApD,CAGA,IAAM1N,EAAQ,EAAK6M,GAAGhN,GACtB,GAAIG,EAAO,CACT,GAAIA,EAAMb,QAAUA,EAClB,OAAO,EAET,IAAMwO,EAAO7F,GAAiBC,GACxB/G,EAAO0H,GAAgB1I,EAAO2N,GACpC,OACE3M,IAASgH,GAASK,MAASrH,IAASgH,GAASI,OAAkB,IAATkF,IAI5D,OAAO,O,uBAIX,SAAUM,EAAkBP,GAC1B,IAAMxN,EAASuG,KAAKyH,SAASD,GAC7B,QAAK/N,GAGEuG,KAAK0H,SAASjO,EAAQmC,EAAa4L,GAAY,CACpDH,OAAQJ,GAAUA,EAAOI,OACzBC,OAAQL,GAAUA,EAAOK,W,sBAiC7B,SAAS3O,GAAY,WACnB0K,GAAOK,IAAIgC,SAAQ,SAACjM,GAClB,EAAKwL,QAAQxL,EAAO+J,OAAS7K,EAAM8N,GAAGhN,S,0BA/B1C,SAAmBsC,GACjB,IAAM6K,EAAO7K,EAAK8K,MAAM,KACxB,GAAoB,IAAhBD,EAAK/B,OACP,OAAO,EAET,IAAK,IAAInC,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAE7B,IADA,IAAID,EAAI,EACC0C,EAAI,EAAGA,EAAIyB,EAAKlE,GAAGmC,OAAQM,GAAK,EAAG,CAC1C,IAAI2B,EAAIF,EAAKlE,GAAGyC,GACN,MAAN2B,IACF3B,GAAK,EACL2B,GAAKF,EAAKlE,GAAGyC,IAEf,IAAM/F,EAAI2F,GAAiB+B,GAC3B,GAAI1H,EACFqD,GAAKrD,MACA,KAAIW,GAAM4G,YAAYG,GAG3B,OAAO,EAFPrE,GAAK,GAKT,GAAU,IAANA,EACF,OAAO,EAGX,OAAO,M,EAhaUuC,G,QClErB,SAAS2C,GAAUvI,EAAWxF,GAC5B,OAAU,IAANwF,EACK,IAEK,IAANA,EAAUA,EAAI,IAAMxF,EAAMmC,K,IAWf6L,GAAAA,WAGnB,2DACE5H,KAAKxF,OAAS,IAAIoF,IAClBI,KAAKxF,OAAOqF,IAAIlE,EAAUuB,KAAM,GAChC8C,KAAKxF,OAAOqF,IAAIlE,EAAUwB,MAAO,GACjC6C,KAAKxF,OAAOqF,IAAIlE,EAAUyB,OAAQ,GAClC4C,KAAKxF,OAAOqF,IAAIlE,EAAU0B,OAAQ,GAClC2C,KAAKxF,OAAOqF,IAAIlE,EAAU2B,KAAM,GAChC0C,KAAKxF,OAAOqF,IAAIlE,EAAU4B,OAAQ,GAClCyC,KAAKxF,OAAOqF,IAAIlE,EAAU6B,KAAM,G,oCAGlC,SAAMY,GACJ,OAAO4B,KAAKxF,OAAO0F,IAAI9B,K,iBAGzB,SAAIA,EAAsByJ,GACxB7H,KAAKxF,OAAOqF,IAAIzB,EAAWyJ,K,iBAG7B,SAAIzJ,EAAsBgB,GACxB,IAAI0H,EAAI9G,KAAKxF,OAAO0F,IAAI9B,GAGxB,OAFA0I,GAAK1H,EACLY,KAAKxF,OAAOqF,IAAIzB,EAAW0I,GACpBA,I,oBAGT,SAAO1I,EAAsBgB,GAC3B,IAAI0H,EAAI9G,KAAKxF,OAAO0F,IAAI9B,GAGxB,OAFA0I,GAAK1H,EACLY,KAAKxF,OAAOqF,IAAIzB,EAAW0I,GACpBA,I,qBAGT,SAAQgB,GACNA,EAAQnM,EAAUuB,KAAM8C,KAAKxF,OAAO0F,IAAIvE,EAAUuB,OAClD4K,EAAQnM,EAAUwB,MAAO6C,KAAKxF,OAAO0F,IAAIvE,EAAUwB,QACnD2K,EAAQnM,EAAUyB,OAAQ4C,KAAKxF,OAAO0F,IAAIvE,EAAUyB,SACpD0K,EAAQnM,EAAU0B,OAAQ2C,KAAKxF,OAAO0F,IAAIvE,EAAU0B,SACpDyK,EAAQnM,EAAU2B,KAAM0C,KAAKxF,OAAO0F,IAAIvE,EAAU2B,OAClDwK,EAAQnM,EAAU4B,OAAQyC,KAAKxF,OAAO0F,IAAIvE,EAAU4B,SACpDuK,EAAQnM,EAAU6B,KAAMwC,KAAKxF,OAAO0F,IAAIvE,EAAU6B,S,qBAGpD,WACE,OAAOwC,KAAK+H,WAAWrN,EAAAA,S,qBAGzB,WACE,OAAOsF,KAAK+H,WAAWrN,EAAAA,S,wBAGzB,SAAW3B,GACT,IAAIyL,EAAM,GA6BV,OA5BAA,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAU6B,MACrB,IAAIuC,GAAMhH,EAAO4C,EAAU6B,OAE7BgH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAU4B,QACrB,IAAIwC,GAAMhH,EAAO4C,EAAU4B,SAE7BiH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAU2B,MACrB,IAAIyC,GAAMhH,EAAO4C,EAAU2B,OAE7BkH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAU0B,QACrB,IAAI0C,GAAMhH,EAAO4C,EAAU0B,SAE7BmH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAUyB,QACrB,IAAI2C,GAAMhH,EAAO4C,EAAUyB,SAE7BoH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAUwB,OACrB,IAAI4C,GAAMhH,EAAO4C,EAAUwB,QAE7BqH,GAAOmD,GACL3H,KAAK6H,MAAMlM,EAAUuB,MACrB,IAAI6C,GAAMhH,EAAO4C,EAAUuB,OAEjB,KAARsH,EACK,IAEFA,I,sBAqDT,SAASwD,GAAU,WACjBA,EAAKxN,OAAOkL,SAAQ,SAACtG,EAAGhB,GACtB,EAAK5D,OAAOqF,IAAIzB,EAAWgB,S,yBApD/B,SAAkB2C,EAAaG,GAC7B,IAAM3C,EAAIwC,EAAMkG,UACVC,EAAIhG,EAAMiG,UAChB,MAAU,MAAN5I,GAAmB,MAAN2I,EACR,IAEC,MAANA,EACK3I,EAEC,MAANA,EACK2I,EAEF3I,EAAI2I,I,yBAGb,SAAmBnM,GACjB,MAAa,MAATA,KAGKA,EAAKqM,MAAM,mC,uBAGtB,SAAiBrM,GACf,GAAa,MAATA,EACF,MAAO,CAAEgG,MAAO,IAAI6F,EAAQ1F,MAAO,IAAI0F,GAEzC,IAAK7L,EAAKqM,MAAM,iCACd,OAAO,KAOT,IALA,IAAMC,EAAWtM,EAAKqM,MACpB,6BAEIrG,EAAQ,IAAI6F,EACZ1F,EAAQ,IAAI0F,EACTzC,EAAI,EAAGA,EAAIkD,EAASxD,OAAQM,GAAK,EAAG,CAC3C,IAAMmD,EAAUD,EAASlD,GACrB/F,EAAI,EACJkJ,EAAQzD,QAAU,IACpBzF,EAAImJ,OAAOD,EAAQ1D,UAAU,EAAG0D,EAAQzD,OAAS,KAEnD,IAAMjL,EAAQmG,GAAM2E,UAAU4D,EAAQA,EAAQzD,OAAS,IACnDjL,EAAMb,QAAU2B,EAAAA,MAClBqH,EAAMyG,IAAI5O,EAAMgB,KAAMwE,GAEtB8C,EAAMsG,IAAI5O,EAAMgB,KAAMwE,GAG1B,MAAO,CAAE2C,MAAAA,EAAOG,MAAAA,O,EAzIC0F,GCGfa,GAEF,CACF1G,MAAO,CACL7F,KAAM,CAAE,GAAG,GACXC,MAAO,CAAE,GAAG,GACZC,OAAQ,CAAE,GAAG,EAAM,GAAG,IAExB8F,MAAO,CACLhG,KAAM,CAAE,GAAG,GACXC,MAAO,CAAE,GAAG,GACZC,OAAQ,CAAE,GAAG,EAAM,GAAG,KAI1B,SAASsM,GAAc3P,EAAc6B,EAAiBV,GACpD,IAAMyO,EAAOF,GAAe1P,GAAO6B,GACnC,QAAO+N,GAAOA,EAAKzO,GAGrB,SAAS0O,GAAiB7P,EAAcmB,GACtC,OAAInB,IAAU2B,EAAAA,MACLR,GAAQ,EAEVA,GAAQ,EAGjB,SAAS2O,GAAW9P,EAAcJ,EAAcsB,GAC9C,IAAK,IAAIC,EAAO,EAAGA,GAAQ,EAAGA,GAAQ,EAAG,CACvC,IAAMN,EAAQjB,EAAM8N,GAAG,IAAIpD,GAAOpJ,EAAMC,IACxC,GAAIN,GAASA,EAAMgB,OAASe,EAAUuB,MAAQtD,EAAMb,QAAUA,EAC5D,OAAO,EAGX,OAAO,E,IAgCY+P,GAAAA,WAMnB,6JACE9I,KAAK+I,OAAS,IAAI/D,GAClBhF,KAAKgJ,OAAStO,EAAAA,MACdsF,KAAKiJ,WAAa,IAAIrB,GACtB5H,KAAKkJ,WAAa,IAAItB,G,kCAGxB,WACE,OAAO5H,KAAK+I,S,iBAGd,WACE,OAAO/I,KAAKgJ,S,qBAGd,WACE,OAAOhJ,KAAKiJ,a,qBAGd,WACE,OAAOjJ,KAAKkJ,a,mBAGd,SAAMtO,GAIJ,OAHAoF,KAAK+I,OAAO3D,MAAMxK,GAClBoF,KAAKiJ,WAAa,IAAIrB,GACtB5H,KAAKkJ,WAAa,IAAItB,GACdhN,GACN,KAAKkK,GAAoBO,SACzB,KAAKP,GAAoBc,MACzB,KAAKd,GAAoBe,YACzB,KAAKf,GAAoBgB,mBACvB9F,KAAKgJ,OAAStO,EAAAA,MACd,MACF,KAAKoK,GAAoBiB,eACzB,KAAKjB,GAAoBkB,qBACzB,KAAKlB,GAAoBmB,gBACzB,KAAKnB,GAAoBoB,cACzB,KAAKpB,GAAoBqB,oBACzB,KAAKrB,GAAoBsB,iBACzB,KAAKtB,GAAoBuB,iBACzB,KAAKvB,GAAoBwB,iBACzB,KAAKxB,GAAoByB,iBACvBvG,KAAKgJ,OAAStO,EAAAA,MACd,MAGFE,IAASkK,GAAoBe,aAC7BjL,IAASkK,GAAoBgB,qBAE7B9F,KAAKkJ,WAAWrJ,IAAIlE,EAAUuB,KAAM,IACpC8C,KAAKkJ,WAAWrJ,IAAIlE,EAAUwB,MAAO,GACrC6C,KAAKkJ,WAAWrJ,IAAIlE,EAAUyB,OAAQ,GACtC4C,KAAKkJ,WAAWrJ,IAAIlE,EAAU0B,OAAQ,GACtC2C,KAAKkJ,WAAWrJ,IAAIlE,EAAU2B,KAAM,GACpC0C,KAAKkJ,WAAWrJ,IAAIlE,EAAU4B,OAAQ,GACtCyC,KAAKkJ,WAAWrJ,IAAIlE,EAAU6B,KAAM,M,kBAIxC,SAAKzE,GACH,OAAOiH,KAAKmJ,MAAMpQ,K,mBAGpB,SAAMA,GACJ,OAAIA,IAAU2B,EAAAA,MACLsF,KAAKiJ,WAEPjJ,KAAKkJ,a,mBAGd,WACE,OAAOlJ,KAAK+I,OAAOK,UAAUpJ,KAAKjH,S,wBAGpC,SAAWiL,EAA0BC,GACnC,IAAI7F,EACJ,GAAI4F,aAAgBX,GAAQ,CAC1B,IAAMzJ,EAAQoG,KAAK+I,OAAOtC,GAAGzC,GAC7B,IAAKpK,EACH,OAAO,KAETwE,EAAYxE,EAAMgB,UAElBwD,EAAY4F,EAEd,IAAMqF,EAAgBrJ,KAAK+I,OAAOtC,GAAGxC,GACrC,OAAO,IAAIF,GACTC,EACAC,GACA,EACAjE,KAAKjH,MACLqF,EACAiL,EAAgBA,EAAczO,KAAO,Q,8BAIzC,SAAiBmB,GACf,IAAMuN,EAAI7E,GAAc1I,GACxB,IAAKuN,EACH,OAAO,KAET,IAAIlF,EAAOpE,KAAKuJ,WAAWD,EAAEtF,KAAMsF,EAAErF,IACrC,OAAKG,GAGDkF,EAAEpF,UACJE,EAAOA,EAAKoF,eAEPpF,GALE,O,4BAQX,SAAeA,GAAU,WACvB,GAAIA,EAAKJ,gBAAgBX,GACvB,OAAO,EAET,GAAIe,EAAKhG,YAAczC,EAAUuB,KAC/B,OAAO,EAET,IAAMuM,EAAarF,EAAKH,GAAGkD,SACzB/C,EAAKrL,QAAU2B,EAAAA,MAAcoF,GAAUS,GAAKT,GAAUO,MAElD5D,EAAOuD,KAAKrH,MAAM8N,GAAGgD,GAC3B,IAAKhN,GAAQA,EAAK7B,OAASe,EAAU8B,MAAQhB,EAAK1D,QAAUqL,EAAKrL,MAC/D,OAAO,EAET,IAAM2Q,EAAUvH,GAAkB1F,GAAMsK,MAAK,SAACpF,GAC5C,IAAMsC,EAAKwF,EAAWtC,SAASxF,GAC/B,IAAKsC,EAAGmD,MACN,OAAO,EAET,IAAMxN,EAAQ,EAAKjB,MAAM8N,GAAGxC,GAC5B,QAAIrK,GAASA,EAAMb,OAAS0D,EAAK1D,SAGzB,EAAKJ,MAAM+O,SAASzD,EAAIG,EAAKrL,MAAO,CAAEsO,OAAQjD,EAAKH,QAE7D,OAAIyF,IAGI1J,KAAKrH,MAAMgR,mBAAmBlN,EAAK1D,OAAOgO,MAAK,SAAC/C,GACtD,OACGA,EAAKK,OAAOoF,IACb,EAAKG,UAAU5F,EAAMI,EAAKH,MACzB,EAAKtL,MAAMyQ,UAAU3M,EAAK1D,MAAO,CAChCsO,OAAQjD,EAAKH,GACbqD,OAAQtD,S,yBAMhB,SAAYI,GACV,GAAIA,EAAKJ,gBAAgBX,GAAQ,CAC/B,IAAM2D,EAAShH,KAAK+I,OAAOtC,GAAGrC,EAAKJ,MACnC,IAAKgD,GAAUA,EAAOjO,QAAUiH,KAAKjH,MACnC,OAAO,EAET,IAAKiH,KAAK4J,UAAUxF,EAAKJ,KAAMI,EAAKH,IAClC,OAAO,EAET,IAAM4F,EAAW7J,KAAK+I,OAAOtC,GAAGrC,EAAKH,IACrC,GAAI4F,GAAYA,EAAS9Q,QAAUiH,KAAKjH,MACtC,OAAO,EAET,GAAIqL,EAAKF,QAAS,CAChB,IAAK8C,EAAO8C,eACV,OAAO,EAET,IACGlB,GAAiB5I,KAAKjH,MAAOqL,EAAKJ,KAAK9J,QACvC0O,GAAiB5I,KAAKjH,MAAOqL,EAAKH,GAAG/J,MAEtC,OAAO,OAEJ,GAAIwO,GAAc1I,KAAKjH,MAAOiO,EAAOpM,KAAMwJ,EAAKH,GAAG/J,MACxD,OAAO,EAET,GACEkK,EAAKhG,YAAczC,EAAU8B,KACzBuC,KAAK+I,OAAOK,UAAUpJ,KAAKjH,MAAO,CAChCsO,OAAQjD,EAAKH,GACbqD,OAAQlD,EAAKJ,OAEfhE,KAAK+I,OAAOrB,SAAStD,EAAKH,GAAIrI,EAAaoE,KAAKjH,OAAQ,CACtDuO,OAAQlD,EAAKJ,OAGnB,OAAO,MAEJ,CACL,GAAII,EAAKF,QACP,OAAO,EAET,GAAIE,EAAKrL,QAAUiH,KAAKjH,MACtB,OAAO,EAET,GAA+C,IAA3CiH,KAAKgI,KAAKhI,KAAKjH,OAAO8O,MAAMzD,EAAKJ,MACnC,OAAO,EAET,GAAIhE,KAAK+I,OAAOtC,GAAGrC,EAAKH,IACtB,OAAO,EAET,GAAIyE,GAAc1I,KAAKjH,MAAOqL,EAAKJ,KAAMI,EAAKH,GAAG/J,MAC/C,OAAO,EAET,GACEkK,EAAKJ,OAASrI,EAAUuB,MACxB2L,GAAW7I,KAAKjH,MAAOiH,KAAK+I,OAAQ3E,EAAKH,GAAGhK,MAE5C,OAAO,EAET,GAAI+F,KAAK+I,OAAOK,UAAUpJ,KAAKjH,MAAO,CAAEsO,OAAQjD,EAAKH,KACnD,OAAO,EAET,GAAIjE,KAAK+J,eAAe3F,GACtB,OAAO,EAGX,OAAO,I,oBAGT,SAAOA,EAAY4F,GACjB,KAAMA,IAAOA,EAAIC,oBAAsBjK,KAAKkK,YAAY9F,GACtD,OAAO,EAET,GAAIA,EAAKJ,gBAAgBX,GAAQ,CAC/B,IAAM2D,EAAShH,KAAK+I,OAAOtC,GAAGrC,EAAKJ,MAC7B6F,EAAW7J,KAAK+I,OAAOtC,GAAGrC,EAAKH,IACrCjE,KAAK+I,OAAOoB,OAAO/F,EAAKJ,MACxBhE,KAAK+I,OAAOlJ,IAAIuE,EAAKH,GAAIG,EAAKF,QAAU8C,EAAOoD,WAAapD,GACxD6C,GAAYA,EAASjP,OAASe,EAAU8B,MAC1CuC,KAAKmJ,MAAMnJ,KAAKjH,OAAOyP,IAAIqB,EAASQ,aAAazP,KAAM,QAGzDoF,KAAKmJ,MAAMnJ,KAAKjH,OAAOuR,OAAOlG,EAAKJ,KAAM,GACzChE,KAAK+I,OAAOlJ,IAAIuE,EAAKH,GAAI,IAAIlE,GAAMC,KAAKjH,MAAOqL,EAAKJ,OAGtD,OADAhE,KAAKgJ,OAASpN,EAAaoE,KAAKjH,QACzB,I,sBAGT,SAASqL,GAEP,GADApE,KAAKgJ,OAASpN,EAAaoE,KAAKjH,OAC5BqL,EAAKJ,gBAAgBX,GAEvB,GADArD,KAAK+I,OAAOlJ,IAAIuE,EAAKJ,KAAM,IAAIjE,GAAMC,KAAKjH,MAAOqL,EAAKhG,YAClDgG,EAAKD,kBAAmB,CAC1B,IAAMkF,EAAgB,IAAItJ,GACxBnE,EAAaoE,KAAKjH,OAClBqL,EAAKD,mBAEPnE,KAAK+I,OAAOlJ,IAAIuE,EAAKH,GAAIoF,GACrBA,EAAczO,OAASe,EAAU8B,MACnCuC,KAAKmJ,MAAMnJ,KAAKjH,OAAOuR,OAAOjB,EAAcgB,aAAazP,KAAM,QAGjEoF,KAAK+I,OAAOoB,OAAO/F,EAAKH,SAG1BjE,KAAKmJ,MAAMnJ,KAAKjH,OAAOyP,IAAIpE,EAAKJ,KAAM,GACtChE,KAAK+I,OAAOoB,OAAO/F,EAAKH,M,4BAI5B,SAAeD,EAAsBC,GACnC,GAAID,aAAgBX,GAAQ,CAC1B,IAAMzJ,EAAQoG,KAAK+I,OAAOtC,GAAGzC,GAC7B,IAAKpK,EACH,OAAO,EAET,GAAIqK,aAAcZ,IAChB,GAAIW,EAAKK,OAAOJ,GACd,OAAO,OAEJ,GAAIrK,EAAMgB,OAASe,EAAU8B,KAClC,OAAO,MAEJ,CACL,IAAKuG,EAAKjL,MACR,OAAO,EAET,GAA+C,IAA3CiH,KAAKgI,KAAKhE,EAAKjL,OAAO8O,MAAM7D,EAAKpJ,MACnC,OAAO,EAET,GAAIqJ,aAAcZ,IAChB,GAAIrD,KAAK+I,OAAOtC,GAAGxC,GACjB,OAAO,OAEJ,GAAID,EAAKjL,QAAUkL,EACxB,OAAO,EAGX,OAAO,I,kBAGT,SAAKsG,GACH,GAAIA,EAAOnG,KAAM,CACf,IAAKpE,KAAKwK,eAAeD,EAAOnG,KAAKJ,KAAMuG,EAAOnG,KAAKH,IACrD,OAAO,EAET,GAAMsG,EAAOnG,KAAKJ,gBAAgBX,GAO3B,GAAMkH,EAAOnG,KAAKH,cAAcZ,GAIrCrD,KAAK+I,OAAO0B,KAAKF,EAAOnG,KAAKJ,KAAMuG,EAAOnG,KAAKH,QAJD,CAC9C,IAAMrK,EAAQoG,KAAK+I,OAAOoB,OAAOI,EAAOnG,KAAKJ,MAC7ChE,KAAKmJ,MAAMoB,EAAOnG,KAAKH,IAAIuE,IAAI5O,EAAMyQ,aAAazP,KAAM,QARxDoF,KAAKmJ,MAAMoB,EAAOnG,KAAKJ,KAAKjL,OAAOuR,OAAOC,EAAOnG,KAAKJ,KAAKpJ,KAAM,GAC7D2P,EAAOnG,KAAKH,cAAcZ,GAC5BrD,KAAK+I,OAAOlJ,IAAI0K,EAAOnG,KAAKH,GAAIsG,EAAOnG,KAAKJ,MAE5ChE,KAAKmJ,MAAMoB,EAAOnG,KAAKH,IAAIuE,IAAI+B,EAAOnG,KAAKJ,KAAKpJ,KAAM,GAS5D,GAAI2P,EAAOG,OAAQ,CACjB,IAAM9Q,EAAQoG,KAAK+I,OAAOtC,GAAG8D,EAAOG,QAChC9Q,GACFoG,KAAK+I,OAAOlJ,IAAI0K,EAAOG,OAAQ9Q,EAAM8Q,UAGzC,OAAO,I,gBAGT,WACE,OAAO1K,KAAK2K,QAAQ,K,qBAGtB,SAAQC,GACN,IAAIpG,EAAM,GAAH,OAAMxE,KAAK+I,OAAOhN,KAAlB,YAA0BF,EAAYmE,KAAKjH,OAA3C,KAGP,OAFAyL,GAAOoD,GAAKG,WAAW/H,KAAKiJ,WAAYjJ,KAAKkJ,YAC7C1E,GAAO,IAAMoG,EACNpG,I,yBAGT,SAAYzI,GACV,IAAK+M,EAASnC,YAAY5K,GACxB,OAAO,EAET,IAAMsM,EAAWtM,EAAK8K,MAAM,KACR,SAAhBwB,EAAS,IACXA,EAASwC,QAEX7K,KAAK+I,OAAO+B,YAAYzC,EAAS,IACjCrI,KAAKgJ,OAAShN,GAAeqM,EAAS,IACtC,IAAM0C,EAAQnD,GAAKoD,UAAU3C,EAAS,IAGtC,OAFArI,KAAKiJ,WAAa8B,EAAMhJ,MACxB/B,KAAKkJ,WAAa6B,EAAM7I,OACjB,I,sBAGT,SAASnJ,GACPiH,KAAKgJ,OAASjQ,I,uBA+BR,SAAUiL,EAAcC,GAC9B,IAAMjB,EAAKiB,EAAGxB,EAAIuB,EAAKvB,EACjBQ,EAAKgB,EAAGvB,EAAIsB,EAAKtB,EACvB,EAAoCC,GAA6BK,EAAIC,GAA7DV,EAAR,EAAQA,UAAWK,EAAnB,EAAmBA,SAAUC,EAA7B,EAA6BA,GAC7B,IAAKA,EACH,OAAO,EAET,IAAMjJ,EAAQoG,KAAK+I,OAAOtC,GAAGzC,GAC7B,IAAKpK,EACH,OAAO,EAET,OAAQ0I,GAAgB1I,EAAO2I,IAC7B,QACE,OAAO,EACT,KAAKX,GAASI,MACZ,OAAoB,IAAbY,EACT,KAAKhB,GAASK,KAEZ,IADA,IAAMgJ,EAAIzI,GAAoBD,GAExB9I,EAASuK,EAAKmD,SAAS8D,EAAExI,EAAGwI,EAAEvI,GAClCjJ,EAAO2N,MACP3N,EAASA,EAAO0N,SAAS8D,EAAExI,EAAGwI,EAAEvI,GAChC,CACA,GAAIjJ,EAAO4K,OAAOJ,GAChB,OAAO,EAET,GAAIjE,KAAK+I,OAAOtC,GAAGhN,GACjB,OAAO,EAGX,OAAO,K,sBAKb,SAASjF,GACPwL,KAAK+I,OAAOmC,SAAS1W,EAASuU,QAC9B/I,KAAKgJ,OAASxU,EAASuE,MACvBiH,KAAKiJ,WAAWiC,SAAS1W,EAASyU,YAClCjJ,KAAKkJ,WAAWgC,SAAS1W,EAAS0U,c,mBAGpC,WACE,IAAM1U,EAAW,IAAIsU,EAErB,OADAtU,EAAS0W,SAASlL,MACXxL,K,0BAzET,SAAmBuH,GACjB,IAAMsM,EAAWtM,EAAK8K,MAAM,KAI5B,OAHwB,IAApBwB,EAASxD,QAAgC,SAAhBwD,EAAS,IACpCA,EAASwC,QAEa,IAApBxC,EAASxD,WAGRG,GAAM2B,YAAY0B,EAAS,QAG3BvM,GAAiBuM,EAAS,QAG1BT,GAAKjB,YAAY0B,EAAS,OAG1BA,EAAS,GAAGD,MAAM,e,uBAMzB,SAAiBrM,GACf,IAAMvH,EAAW,IAAIsU,EACrB,OAAOtU,EAASsW,YAAY/O,GAAQvH,EAAW,S,EAjY9BsU,GAscf,SAAUqC,GAAoB3W,GAClC,IAAM4W,EAAsB,CAC1BlP,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,OAAQ,EACRC,KAAM,EACNC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,SAAU,EACVC,UAAW,EACXC,WAAY,EACZC,WAAY,EACZC,MAAO,EACPC,OAAQ,GAcV,OAZAsG,GAAOK,IAAIgC,SAAQ,SAACjM,GAClB,IAAMG,EAAQpF,EAASmE,MAAM8N,GAAGhN,GAC5BG,IACFwR,EAAOxR,EAAMgB,OAAS,MAG1BpG,EAAS6F,UAAUqL,SAAQ,SAACtH,EAAWgB,GACrCgM,EAAOhN,IAAcgB,KAEvB5K,EAASqG,UAAU6K,SAAQ,SAACtH,EAAWgB,GACrCgM,EAAOhN,IAAcgB,KAEhBgM,EAGH,SAAUC,GACd7W,GAEA,IAAM8W,EAAUH,GAAoB3W,GACpC,MAAO,CACL0H,KAAM,GAAKoP,EAAQpP,KAAOoP,EAAQ5O,SAClCP,MAAO,EAAImP,EAAQnP,MAAQmP,EAAQ3O,UACnCP,OAAQ,EAAIkP,EAAQlP,OAASkP,EAAQ1O,WACrCP,OAAQ,EAAIiP,EAAQjP,OAASiP,EAAQzO,WACrCP,KAAM,EAAIgP,EAAQhP,KAClBC,OAAQ,EAAI+O,EAAQ/O,OAAS+O,EAAQxO,MACrCN,KAAM,EAAI8O,EAAQ9O,KAAO8O,EAAQvO,OACjCN,KAAM,EAAI6O,EAAQ7O,KAClBC,SAAU,EACVC,UAAW,EACXC,WAAY,EACZC,WAAY,EACZC,MAAO,EACPC,OAAQ,G,ICpkBAwO,G,wCCXN,SAAUC,GAAoBC,GAClC,OAAOC,GAAe5I,KAAK6I,MAAMF,EAAK,MAGlC,SAAUG,GAAkBH,GAChC,OAAOI,GAAa/I,KAAK6I,MAAMF,EAAK,MAGhC,SAAUC,GAAeI,GAC7B,IAAMC,EAAIjJ,KAAK6I,MAAMG,EAAU,MACzBxC,EAAIxG,KAAK6I,OAAOG,EAAc,KAAJC,GAAY,IACtC1M,EAAIyM,EAAU,GACpB,OACEC,EAAI,IAAMC,OAAO1C,GAAG2C,SAAS,EAAG,KAAO,IAAMD,OAAO3M,GAAG4M,SAAS,EAAG,KAIjE,SAAUJ,GAAaC,GAC3B,IAAMxC,EAAIxG,KAAK6I,MAAMG,EAAU,IACzBzM,EAAIyM,EAAU,GACpB,OAAOE,OAAO1C,GAAG2C,SAAS,EAAG,KAAO,IAAMD,OAAO3M,GAAG4M,SAAS,EAAG,KDsB5D,SAAUC,GAA+B7a,GAC7C,OAAQA,GACN,KAAKka,GAAkBY,WACrB,MAAO,KACT,KAAKZ,GAAkBa,WACrB,MAAO,KACT,KAAKb,GAAkBc,eACrB,MAAO,OACT,KAAKd,GAAkBe,aACrB,MAAO,OACT,KAAKf,GAAkBgB,KACrB,MAAO,MACT,KAAKhB,GAAkBiB,WACrB,MAAO,KACT,KAAKjB,GAAkBkB,SACrB,MAAO,KACT,KAAKlB,GAAkBmB,MACrB,MAAO,KACT,KAAKnB,GAAkBoB,WACrB,MAAO,OACT,KAAKpB,GAAkBqB,WACrB,MAAO,OACT,KAAKrB,GAAkBsB,MACrB,MAAO,KACT,KAAKtB,GAAkBuB,UACrB,MAAO,KACT,KAAKvB,GAAkBwB,KACrB,MAAO,KACT,KAAKxB,GAAkByB,iBACrB,MAAO,QACT,KAAKzB,GAAkB0B,iBACrB,MAAO,QACT,KAAK1B,GAAkB2B,QACrB,MAAO,OACT,KAAK3B,GAAkB4B,UACrB,MAAO,MACT,KAAK5B,GAAkB6B,OACrB,MAAO,KACT,KAAK7B,GAAkB8B,aACrB,MAAO,MACT,KAAK9B,GAAkB+B,aACrB,MAAO,OACT,KAAK/B,GAAkBgC,OACrB,MAAO,KACT,KAAKhC,GAAkBiC,OACrB,MAAO,KACT,KAAKjC,GAAkBkC,UACrB,MAAO,MACT,KAAKlC,GAAkBmC,SACrB,MAAO,KACT,KAAKnC,GAAkBoC,MACrB,MAAO,OAlFb,SAAYpC,GAEVA,EAAAA,cAAAA,YACAA,EAAAA,cAAAA,YACAA,EAAAA,kBAAAA,gBACAA,EAAAA,gBAAAA,cACAA,EAAAA,QAAAA,OACAA,EAAAA,cAAAA,aACAA,EAAAA,YAAAA,WACAA,EAAAA,SAAAA,QACAA,EAAAA,cAAAA,YACAA,EAAAA,cAAAA,YACAA,EAAAA,SAAAA,QACAA,EAAAA,aAAAA,WACAA,EAAAA,QAAAA,OACAA,EAAAA,oBAAAA,iBACAA,EAAAA,oBAAAA,iBAGAA,EAAAA,WAAAA,SACAA,EAAAA,aAAAA,WACAA,EAAAA,UAAAA,SACAA,EAAAA,gBAAAA,cACAA,EAAAA,gBAAAA,cACAA,EAAAA,UAAAA,SACAA,EAAAA,UAAAA,SACAA,EAAAA,aAAAA,YACAA,EAAAA,YAAAA,WACAA,EAAAA,SAAAA,SA5BF,CAAYA,KAAAA,GAAiB,KA6FtB,IA0CKqC,GA1CCC,GAAb,WAIE,2FACE7N,KAAK8N,SAAW,IAAIlO,IACpBI,KAAK+N,OAAS,IAAInO,IANtB,iDASE,WACE,OAAOI,KAAK8N,SAASzL,SAVzB,iCAaE,SAAoBhR,GAClB,OAAO2O,KAAK8N,SAAS5N,IAAI7O,KAd7B,iCAiBE,SAAoBA,EAAwB2c,GACtCA,EACFhO,KAAK8N,SAASjO,IAAIxO,EAAK2c,GAEvBhO,KAAK8N,SAASG,OAAO5c,KArB3B,8BAyBE,WACE,OAAO2O,KAAK+N,OAAO1L,SA1BvB,+BA6BE,SAAkBhR,GAChB,OAAO2O,KAAK+N,OAAO7N,IAAI7O,KA9B3B,+BAiCE,SAAkBA,EAAa2c,GACzBA,EACFhO,KAAK+N,OAAOlO,IAAIxO,EAAK2c,GAErBhO,KAAK+N,OAAOE,OAAO5c,OArCzB,MA0CA,SAAYuc,GACVA,EAAAA,SAAAA,QACAA,EAAAA,aAAAA,YACAA,EAAAA,UAAAA,SACAA,EAAAA,QAAAA,OACAA,EAAAA,mBAAAA,iBACAA,EAAAA,QAAAA,OACAA,EAAAA,WAAAA,UACAA,EAAAA,YAAAA,UACAA,EAAAA,aAAAA,WACAA,EAAAA,oBAAAA,iBACAA,EAAAA,kBAAAA,eACAA,EAAAA,mBAAAA,iBAZF,CAAYA,KAAAA,GAAW,KAevB,IAAMM,GAAgC,CACpCC,MAAO,OACPnY,OAAQ,KACRoY,UAAW,KACXC,KAAM,MACNC,eAAgB,MAChBC,KAAM,KACNC,QAAS,OACTC,QAAS,OACTC,SAAU,OACVC,eAAgB,KAChBC,aAAc,MACdC,cAAe,OAGX,SAAUC,GAA2B1K,GACzC,OAAO8J,GAA8B9J,G,IA6BjC2K,GAAAA,WAQJ,WACSC,EACA1K,EACA2K,EACAC,EACA9K,EACA+K,IAAgB,6YALhB,KAAAH,OAAAA,EACA,KAAA1K,KAAAA,EACA,KAAA2K,YAAAA,EACA,KAAAC,aAAAA,EACA,KAAA9K,KAAAA,EACA,KAAA+K,QAAAA,EAEPnP,KAAKoP,KAAO,KACZpP,KAAKqP,OAAS,KACdrP,KAAKsP,QAAU,GACftP,KAAKuP,UAAY,EACjBvP,KAAKwP,eAAiB,E,wCAGxB,WACE,IAAMlL,EACJtE,KAAKsE,MAAQtE,KAAKsE,KAAKF,gBAAgBL,GAAO/D,KAAKsE,KAAKF,KAAO,KACjE,OAAOpE,KAAKoE,gBAAgBL,GACxB/D,KAAKoE,KAAKqL,eAAenL,GACzBwK,GAA2B9O,KAAKoE,Q,oBAGtC,WACE,IAAMsL,EAAU9D,GAAkB5L,KAAKuP,WACjCI,EAAenE,GAAoBxL,KAAKwP,gBAC9C,gBAAUE,EAAV,cAAuBC,K,qBAGzB,WACE,QAAS3P,KAAKsE,QAAUtE,KAAKsE,KAAK8K,QAAUpP,KAAKsE,KAAK8K,KAAKC,S,yBAG7D,WACE,OAAQrP,KAAKsE,MAAQtE,KAAKsE,KAAK8K,OAASpP,O,sBAG1C,WACE,IAAKA,KAAKoP,KACR,OAAO,EAET,IAAK,IAAIlQ,EAAiBc,KAAKoP,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OAC5C,GAAInQ,EAAEkF,gBAAgBL,GACpB,OAAO,EAGX,OAAO,I,kCAGD,WACN/D,KAAKwP,eAAiBxP,KAAKuP,UACvBvP,KAAKsE,MAAQtE,KAAKsE,KAAKA,OACzBtE,KAAKwP,gBAAkBxP,KAAKsE,KAAKA,KAAKkL,kB,0BAI1C,SAAaD,GACXvP,KAAKuP,UAAYA,EACjBvP,KAAK4P,uBACL,IAAI1Q,EAAIc,KAAKoP,KACPS,EAAoB,GAC1B,MAAO3Q,EACLA,EAAE0Q,uBACE1Q,EAAEmQ,QACJQ,EAAMlM,KAAKzE,EAAEmQ,QAGbnQ,EADEA,EAAEkQ,KACAlQ,EAAEkQ,KAEFS,EAAMC,OAAS,Q,2BAKzB,WACE,OAAO,IAAIf,EACT,EACA,KACA,GACA,EACAnB,GAAYmC,OACZ,O,EAzFAhB,GA+GeiB,GAAAA,WASnB,WAAYxb,IAA4B,qQACtCwL,KAAKiQ,SAAW,IAAIpC,GACpB7N,KAAKkQ,iBAAmB1b,EAAWA,EAAS2b,QAAU,IAAIrH,GAC1D9I,KAAKoQ,UAAYpQ,KAAKqQ,gBAAgBF,QACtCnQ,KAAKsQ,OAASvB,GAASwB,eACvBvQ,KAAKwQ,SAAWxQ,KAAKsQ,OACrBtQ,KAAKyQ,iBAAmB,GACxBzQ,KAAK0Q,gBAAkB,GACvB1Q,KAAK2Q,sB,4CAGP,WACE,OAAO3Q,KAAKkQ,mB,oBAGd,WACE,OAAOlQ,KAAKoQ,Y,iBAGd,WACE,OAAOpQ,KAAKsQ,S,mBAGd,WACE,OAAOtQ,KAAKwQ,W,iBAGd,WAEE,IADA,IAAMI,EAAQ5Q,KAAK6Q,YACV3R,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEkQ,KAAM,CAC9C,OAAQlQ,EAAEgQ,aACRhQ,EAAIA,EAAEmQ,OAERuB,EAAMjN,KAAKzE,GAEb,OAAO0R,I,uBAGT,WACE,OAAO5Q,KAAK8Q,e,wBAGd,WACE,IAAMF,EAAQ,IAAI1L,MAClB0L,EAAMG,QAAQ/Q,KAAKwQ,UACnB,IAAK,IAAItR,EAAIc,KAAKwQ,SAASlM,KAAMpF,EAAGA,EAAIA,EAAEoF,KACxCsM,EAAMG,QAAQ7R,GAEhB,OAAO0R,I,kBAGT,WAEE,IADA,IAAII,EAAMhR,KAAKwQ,SAASxB,OACf9P,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEkQ,KAAM,CAC9C,OAAQlQ,EAAEgQ,aACRhQ,EAAIA,EAAEmQ,OAER2B,EAAM9R,EAAE8P,OAEV,OAAOgC,I,uBAGT,WACE,OAAOhR,KAAKwQ,SAASlM,KAChBtE,KAAKwQ,SAASlM,KAAK8K,KACpBpP,KAAKwQ,W,mBAGX,SAAMhc,GACJwL,KAAKiQ,SAAW,IAAIpC,GAChBrZ,IACFwL,KAAKkQ,iBAAmB1b,EAAS2b,SAEnCnQ,KAAKoQ,UAAYpQ,KAAKqQ,gBAAgBF,QACtCnQ,KAAKsQ,OAASvB,GAASwB,eACvBvQ,KAAKwQ,SAAWxQ,KAAKsQ,OACrBtQ,KAAKyQ,iBAAmB,GACxBzQ,KAAK0Q,gBAAkB,GACvB1Q,KAAK2Q,wB,oBAGP,WACE,QAAI3Q,KAAKwQ,SAASlM,OACZtE,KAAKwQ,SAASpM,gBAAgBL,KAChC/D,KAAKiR,sBACLjR,KAAKoQ,UAAUc,SAASlR,KAAKwQ,SAASpM,OAExCpE,KAAKwQ,SAAWxQ,KAAKwQ,SAASlM,MACvB,K,uBAKX,WACE,GAAItE,KAAKwQ,SAASpB,KAAM,CACtBpP,KAAKwQ,SAAWxQ,KAAKwQ,SAASpB,KAC9B,OAAQpP,KAAKwQ,SAAStB,aACpBlP,KAAKwQ,SAAWxQ,KAAKwQ,SAASnB,OAQhC,OANIrP,KAAKwQ,SAASpM,gBAAgBL,KAChC/D,KAAKoQ,UAAUe,OAAOnR,KAAKwQ,SAASpM,KAAM,CACxC6F,kBAAkB,IAEpBjK,KAAK2Q,wBAEA,EAET,OAAO,I,kBAGT,SAAK3B,GACH,MAAOA,EAAShP,KAAKwQ,SAASxB,OAC5B,IAAKhP,KAAKoR,SACR,MAGJ,MAAOpC,EAAShP,KAAKwQ,SAASxB,OAC5B,IAAKhP,KAAKqR,YACR,Q,qCAKN,WACErR,KAAKsR,UAAS,SAACC,GACbA,EAAKrC,aAAeqC,EAAKC,mB,iCAI7B,SAAoBhO,GAClB,IAAKxD,KAAKwQ,SAASlM,KACjB,OAAO,EAGT,IADA,IAAIzB,GAAK,EACA3D,EAAIc,KAAKwQ,SAASlM,KAAK8K,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OACzCnQ,EAAE+P,cAAgBzL,GACpBtE,EAAEgQ,cAAe,EACblP,KAAKwQ,SAASpM,gBAAgBL,KAChC/D,KAAKiR,sBACLjR,KAAKoQ,UAAUc,SAASlR,KAAKwQ,SAASpM,OAExCpE,KAAKwQ,SAAWtR,EACZc,KAAKwQ,SAASpM,gBAAgBL,KAChC/D,KAAKoQ,UAAUe,OAAOnR,KAAKwQ,SAASpM,KAAM,CACxC6F,kBAAkB,IAEpBjK,KAAK2Q,uBAEP9N,GAAK,GAEL3D,EAAEgQ,cAAe,EAGrB,OAAOrM,I,oBAGT,SAAOuB,EAA0B4F,GAC/B,IAwBI9K,EAxBAiQ,GAAU,EACd,GAAI/K,aAAgBL,GAAM,CACxB,IAAK/D,KAAKoQ,UAAUe,OAAO/M,EAAM4F,GAC/B,OAAO,EAEThK,KAAK2Q,sBACLxB,EAAUnP,KAAKxL,SAASid,QAK1B,GAHIzR,KAAKwQ,WAAaxQ,KAAK0R,OAAW1R,KAAKwQ,SAASpM,gBAAgBL,IAClE/D,KAAKoR,UAEFpR,KAAKwQ,SAASpB,KAWjB,OAVApP,KAAKwQ,SAASpB,KAAO,IAAIL,GACvB/O,KAAKwQ,SAASxB,OAAS,EACvBhP,KAAKwQ,SACL,GACA,EACApM,EACA+K,GAEFnP,KAAKwQ,SAAWxQ,KAAKwQ,SAASpB,KAC9BpP,KAAKwQ,SAASmB,aAAa,IACpB,EAGT,IAAKzS,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OACpCnQ,EAAEgQ,cAAe,EAEnB,IAAI0C,EAAa5R,KAAKwQ,SAASpB,KAC/B,IAAKlQ,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OAAQ,CAC5C,GACGnQ,EAAEkF,gBAAgBL,IACjBK,aAAgBL,IAChBK,EAAKC,OAAOnF,EAAEkF,OAChBA,IAASlF,EAAEkF,KAIX,OAFApE,KAAKwQ,SAAWtR,EAChBc,KAAKwQ,SAAStB,cAAe,GACtB,EAET0C,EAAa1S,EAYf,OAVAc,KAAKwQ,SAAW,IAAIzB,GAClB/O,KAAKwQ,SAASxB,OAAS,EACvBhP,KAAKwQ,SACLoB,EAAW3C,YAAc,GACzB,EACA7K,EACA+K,GAEFnP,KAAKwQ,SAASmB,aAAa,GAC3BC,EAAWvC,OAASrP,KAAKwQ,UAClB,I,yBAGT,WACE,IAAMxJ,EAAShH,KAAKwQ,SACpB,GAAKxQ,KAAKoR,SAAV,CAIA,GAAIpR,KAAKwQ,SAASpB,OAASpI,EACzBhH,KAAKwQ,SAASpB,KAAOpI,EAAOqI,YAE5B,IAAK,IAAInQ,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OACxC,GAAInQ,EAAEmQ,SAAWrI,EAAQ,CACvB9H,EAAEmQ,OAASrI,EAAOqI,OAClB,MAKN,IADA,IAAIJ,EAAc,EACT/P,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEmQ,OACxCnQ,EAAE+P,YAAcA,EAChBA,GAAe,EAEbjP,KAAKwQ,SAASpB,OAChBpP,KAAKwQ,SAASpB,KAAKF,cAAe,QAnBlClP,KAAKwQ,SAASpB,KAAO,O,iCAuBjB,WACN,IAAMrT,EAAOiE,KAAKxL,SAASuH,KACvBiE,KAAKyQ,iBAAiB1U,GACxBiE,KAAKyQ,iBAAiB1U,IAAS,GAE/BiE,KAAKyQ,iBAAiB1U,GAAQ,EAC9BiE,KAAK0Q,gBAAgB3U,GAAQiE,KAAK6R,QAAQ7C,U,iCAItC,WACN,IAAMjT,EAAOiE,KAAKxL,SAASuH,KAC3BiE,KAAKyQ,iBAAiB1U,IAAS,EACK,IAAhCiE,KAAKyQ,iBAAiB1U,YACjBiE,KAAKyQ,iBAAiB1U,UACtBiE,KAAK0Q,gBAAgB3U,M,sBAIhC,WACE,OAAOiE,KAAKyQ,iBAAiBzQ,KAAKxL,SAASuH,OAAS,I,0BAGtD,WACE,IAAKiE,KAAK8R,WACR,OAAO,KAOT,IALA,IAAM/V,EAAOiE,KAAKxL,SAASuH,KACrBgW,EAAQ/R,KAAK0Q,gBAAgB3U,GAC/BgG,GAAQ,EACRG,GAAQ,EACRnJ,EAAQiH,KAAKxL,SAASuE,MACjBmG,EAAIc,KAAK6R,QAAS3S,EAAE8P,QAAU+C,EAAO7S,EAAIA,EAAEoF,KAClDvL,EAAQ6C,EAAa7C,GACjBmG,EAAEiQ,UAGFpW,IAAU2B,EAAAA,MACZqH,GAAQ,EAERG,GAAQ,GAGZ,OAAOH,EAAQrH,EAAAA,MAAcwH,EAAQxH,EAAAA,MAAc,O,eAMrD,WACE,IAAI8J,EAAM,iBAAmBxE,KAAKqQ,gBAAgBtU,KAAO,SAMzD,OALAiE,KAAK6Q,YAAYnL,SAAQ,SAAC6L,GACpBA,EAAKnN,gBAAgBL,KACvBS,GAAO,IAAM+M,EAAKnN,KAAKrI,SAGpByI,I,kBAGT,WAEE,IADA,IAAIA,EAAMxE,KAAKgS,IACN9S,EAAIc,KAAKwQ,SAASpB,KAAMlQ,EAAGA,EAAIA,EAAEkQ,KAAM,CAC9C,OAAQlQ,EAAEgQ,aACRhQ,EAAIA,EAAEmQ,OAEJnQ,EAAEkF,gBAAgBL,KACpBS,GAAO,IAAMtF,EAAEkF,KAAKrI,MAGxB,OAAOyI,I,gBAGT,WACE,OAAOxE,KAAKxL,SAASmW,QAAQ3K,KAAKwQ,SAASxB,OAAS,K,qBAGtD,SAAQlH,GACN9H,KAAKsR,SAASxJ,K,sBAGR,SAASA,GACf,IAAI5I,EAAqBc,KAAKsQ,OACxBT,EAAoB,GAC1B,MAAO3Q,EACL4I,EAAQ5I,GACJA,EAAEmQ,QACJQ,EAAMlM,KAAKzE,EAAEmQ,QAGbnQ,EADEA,EAAEkQ,KACAlQ,EAAEkQ,KAEFS,EAAMC,OAAS,Q,uBAKzB,SAAgBmC,GACd,IAAMC,EAAyB,qBACzBC,EAAqB,iBACrBC,EAAiB,YACjBC,EAAa,QACbC,EAAc,SACpB,OAAIL,EAAKM,WAAWL,GACXlC,EAAOwC,kBACZ,IAAI1J,GACJmJ,EAAKQ,MAAMP,EAAuBrN,SAE3BoN,EAAKM,WAAWJ,GAClBnC,EAAO0C,yBACZT,EAAKQ,MAAMN,EAAmBtN,SAEvBoN,EAAKM,WAAWH,GAClBpC,EAAOwC,kBACZ,IAAI1J,GACJmJ,EAAKQ,MAAML,EAAevN,SAEnBoN,EAAKM,WAAWF,GAClBrC,EAAO0C,yBAAyBT,EAAKQ,MAAMJ,EAAWxN,SACpDoN,EAAKM,WAAWD,GAClBtC,EAAOwC,kBAAkB,IAAI1J,GAAYmJ,GAEzC,IAAIU,MAAM,cAAgBV,K,sCAI7B,SAAgCA,GACtC,IAAM5J,EAAW4J,EAAKpL,MAAM,KAC5B,GAAIwB,EAASxD,OAAS,EACpB,OAAO,IAAI8N,MAAM,cAAgBV,GAEnC,IAAMzd,EAAWsU,GAASpE,UAAU2D,EAASoK,MAAM,EAAG,GAAGG,KAAK,MAC9D,OAAKpe,EAGEwb,EAAOwC,kBAAkBhe,EAAU6T,EAASoK,MAAM,GAAGG,KAAK,MAFxD,IAAID,MAAM,cAAgBV,K,+BAK7B,SACNzd,EACAyd,GAEA,IAAMY,EAAS,IAAI7C,EAAOxb,GAC1B,GAAoB,IAAhByd,EAAKpN,OACP,OAAOgO,EAET,IAAMxK,EAAW4J,EAAKpL,MAAM,KAC5B,GAAoB,UAAhBwB,EAAS,GACX,OAAO,IAAIsK,MAAM,cAAgBV,GAEnC,IAAK,IAAI9M,EAAI,EAAGA,EAAIkD,EAASxD,OAAQM,IAAK,CACxC,IAAM2N,EAASrO,GAAc4D,EAASlD,IACtC,IAAK2N,EACH,MAEF,IAAI1O,EAAOyO,EAAOre,SAAS+U,WAAWuJ,EAAO9O,KAAM8O,EAAO7O,IAC1D,IAAKG,EACH,OAAO,IAAIuO,MAAM,WAAatK,EAASlD,IAErC2N,EAAO5O,UACTE,EAAOA,EAAKoF,eAEdqJ,EAAOE,OAAO3O,EAAM,CAAE6F,kBAAkB,IAE1C,OAAO4I,M,EA1ZU7C,G,uDE7Tf,SAAUgD,GAAWC,EAAcC,GACvC,OAAOD,IAASA,GAAQA,EAAKE,SAAS,MAAQ,GAAK,MAAQD,EAGvD,SAAUE,GAASnB,GACvB,OAAOA,aAAgB7P,OAASiR,KAAKC,UAAUrB,GAAQjG,OAAOiG,GCmBhE,IAwDKsB,GAxDCC,GAAmE,CACvEC,KAAIlI,GAAkBY,WACtBuH,KAAInI,GAAkBa,WACtBuH,OAAMpI,GAAkBc,eACxBuH,OAAMrI,GAAkBe,aACxBuH,MAAKtI,GAAkBgB,KACvBuH,KAAIvI,GAAkBiB,WACtBuH,KAAIxI,GAAkBkB,SACtBuH,KAAIzI,GAAkBmB,MACtBuH,OAAM1I,GAAkBoB,WACxBuH,OAAM3I,GAAkBqB,WACxBuH,KAAI5I,GAAkBsB,MACtBuH,KAAI7I,GAAkBuB,UACtBuH,KAAI9I,GAAkBwB,KACtBuH,QAAO/I,GAAkByB,iBACzBuH,QAAOhJ,GAAkB0B,iBACzBuH,OAAMjJ,GAAkB2B,QACxBuH,MAAKlJ,GAAkB4B,UACvBuH,KAAInJ,GAAkB6B,OACtBuH,MAAKpJ,GAAkB8B,aACvBuH,OAAMrJ,GAAkB+B,aACxBuH,KAAItJ,GAAkBgC,OACtBuH,KAAIvJ,GAAkBiC,OACtBuH,MAAKxJ,GAAkBkC,UACvBuH,KAAIzJ,GAAkBmC,SACtBuH,KAAI1J,GAAkBoC,OAGlBuH,GAAkB,CACtBC,UAAW,KACXC,UAAW,KACXC,cAAe,OACfC,YAAa,OACbC,KAAM,MACNC,WAAY,KACZC,SAAU,KACVC,MAAO,KACPC,UAAW,OACXC,UAAW,OACXC,MAAO,KACPC,SAAU,KACVC,KAAM,KACNC,eAAgB,QAChBC,eAAgB,QAChBC,OAAQ,OACRC,SAAU,MACVC,OAAQ,KACRC,YAAa,MACbC,YAAa,OACbC,OAAQ,KACR1R,OAAQ,KACR2R,UAAW,MACXC,SAAU,KACVC,MAAO,OAGT,SAAKnD,GACHA,EAAAA,EAAAA,mBAAAA,GAAAA,kBACAA,EAAAA,EAAAA,YAAAA,GAAAA,WACAA,EAAAA,EAAAA,YAAAA,GAAAA,WACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,SAAAA,GAAAA,QACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,QAAAA,GAAAA,OACAA,EAAAA,EAAAA,WAAAA,GAAAA,UACAA,EAAAA,EAAAA,WAAAA,IAAAA,WAXF,CAAKA,KAAAA,GAAQ,KAeb,IAAMoD,GAAe,CACnB,CACEC,OAAQ,KACRhc,KAAM2Y,GAASsD,gBACfC,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,QACRhc,KAAM2Y,GAASyD,SACfF,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,UACRhc,KAAM2Y,GAAS0D,WACfH,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,UACRhc,KAAM2Y,GAAS2D,WACfJ,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,MACRhc,KAAM2Y,GAAS4D,MACfL,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,OACRhc,KAAM2Y,GAAS6D,WACfN,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,OACRhc,KAAM2Y,GAAS8D,WACfP,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,cACRhc,KAAM2Y,GAAS+D,KACfR,cAAc,EACdC,YAAY,GAEd,CACEH,OAAQ,MACRhc,KAAM2Y,GAASgE,QACfT,cAAc,EACdC,YAAY,IAWhB,SAASS,GAAUC,GACjB,IAAK,IAAItS,EAAI,EAAGA,EAAIwR,GAAa9R,OAAQM,IAAK,CAC5C,IAAMuS,EAAUf,GAAaxR,GACvBwS,EAAUF,EAAKrP,MAAMsP,EAAQd,QACnC,GAAIe,EAAS,CACX,IAAMC,EAAQF,EAAQZ,aAAea,EAAQ,GAAG9S,OAAS,EACzD,MAAO,CACLjK,KAAM8c,EAAQ9c,KACdqX,KAAMwF,EAAK7S,UAAUgT,GACrBb,WAAYW,EAAQX,WACpBc,YAAa,KAInB,IAAMC,EAAiBL,EAAKrP,MAAM,WAClC,GAAI0P,EAAgB,CAClB,IAAMlB,EAASkB,EAAe,GAC9B,MAAO,CACLld,KAAM2Y,GAASwE,SACf9F,KAAMwF,EAAK7S,UAAUgS,EAAO/R,QAC5BkS,YAAY,EACZc,YAAajB,EAAOhS,UAAU,EAAGgS,EAAO/R,OAAS,IAGrD,MAAO,CACLjK,KAAM2Y,GAASyE,QACf/F,KAAMwF,EACNV,YAAY,EACZc,YAAa,IAIjB,SAASI,GAAazjB,EAAoByd,GACxC,OAAQA,EAAKiG,QACX,IAAK,KAEH,YADA1jB,EAAS4Q,MAAMN,GAAoBO,UAErC,IAAK,MAEH,YADA7Q,EAAS4Q,MAAMN,GAAoBiB,gBAErC,IAAK,OAEH,YADAvR,EAAS4Q,MAAMN,GAAoBkB,sBAErC,IAAK,MAEH,YADAxR,EAAS4Q,MAAMN,GAAoBmB,iBAErC,IAAK,OAEH,YADAzR,EAAS4Q,MAAMN,GAAoBoB,eAErC,IAAK,OAEH,YADA1R,EAAS4Q,MAAMN,GAAoBqB,qBAErC,IAAK,OAEH,YADA3R,EAAS4Q,MAAMN,GAAoBsB,kBAErC,IAAK,OAEH,YADA5R,EAAS4Q,MAAMN,GAAoBuB,kBAErC,IAAK,OAEH,YADA7R,EAAS4Q,MAAMN,GAAoBwB,kBAErC,IAAK,OAEH,YADA9R,EAAS4Q,MAAMN,GAAoByB,kBAErC,IAAK,MAEH,YADA/R,EAAS4Q,MAAMN,GAAoBc,OAGvC,OAAO,IAAI+M,MAAM,UAAYV,GAG/B,IAAMkG,GAAiD,CACrD,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,GAGDC,GAAiD,CACrDC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,GAGCC,GAAuD,CAC3DT,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHC,IAAG,EACHE,IAAG,GACHC,KAAI,GACJC,KAAI,GACJC,KAAI,GACJC,KAAI,GACJC,KAAI,GACJC,KAAI,GACJC,KAAI,GACJC,KAAI,IAGAC,GAA+C,CACnD,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,GAGDC,GAAoD,CACxDC,IAAG/d,EAAU8B,KACbkc,IAAGhe,EAAU8B,KACbmc,IAAGje,EAAU6B,KACbqc,IAAGle,EAAUoC,OACb+b,IAAGne,EAAUoC,OACbgc,IAAGpe,EAAU4B,OACbyc,IAAGre,EAAUmC,MACbmc,IAAGte,EAAU2B,KACb4c,IAAGve,EAAU0B,OACb8c,KAAIxe,EAAUkC,YACduc,IAAGze,EAAUkC,YACbwc,IAAG1e,EAAUyB,OACbkd,KAAI3e,EAAUiC,YACd2c,IAAG5e,EAAUiC,YACb4c,IAAG7e,EAAUwB,MACbsd,KAAI9e,EAAUgC,WACd+c,IAAG/e,EAAUgC,WACbgd,IAAGhf,EAAUuB,KACb0d,IAAGjf,EAAU+B,WAGTmd,GAAuD,CAC3DC,KAAIlN,GAAYmN,UAChBC,KAAIpN,GAAY1X,OAChB+kB,MAAKrN,GAAYsN,KACjBC,MAAKvN,GAAYwN,gBACjBC,KAAIzN,GAAY0N,KAChBC,OAAM3N,GAAY4N,QAClBC,OAAM7N,GAAY8N,SAClBC,OAAM/N,GAAYgO,UAClBC,OAAMjO,GAAYkO,iBAClBC,MAAKnO,GAAYoO,eACjBC,MAAKrO,GAAYsO,iBAGbC,GACJ,4HAEIC,GAAa,oCAEbC,GACJ,qEAEF,SAASC,GAAU3jB,EAAcsZ,GAC/B,GAAIA,EAAKpN,OAAS,GAChB,OAAO,IAAI8N,MAAM,SAAWV,GAE9B,IAAMsK,EAAUtK,EAAK,IACf/X,EAAOke,GAAmBmE,GAChC,IAAKriB,EACH,OAAO,IAAIyY,MAAM,SAAWV,GAE9B,IAAK,IAAIxP,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAMxI,EAAO,EAAIwI,EACXhJ,EAAS,IAAI4J,GAAOpJ,EAAMC,GAC1BsJ,EAAY,EAAJf,EAAQ,EAChB+Z,EAAWvK,EAAKzO,EAAQ,GACxBpF,EAAYqb,GAAkB+C,GACpC,GAAKpe,EAAL,CAIA,IAAMrF,EAAwB,MAAhBkZ,EAAKzO,GAAiB9I,EAAAA,MAAcA,EAAAA,MAClD/B,EAAMkH,IAAIpG,EAAQ,IAAIsG,GAAMhH,EAAOqF,SAJjCzF,EAAMwR,OAAO1Q,IAQnB,SAASgjB,GAASzU,EAAYiK,GAC5B,IADwC,EAClC5J,EAAW4J,EAAKpL,MAAM,QADY,WAElBwB,GAFkB,IAExC,2BAAgC,KAArBC,EAAqB,QAC9B,GAAKA,GAAuB,OAAZA,EAAhB,CAGA,IAAMkU,EAAWlU,EAAQ,GACnBoU,EAAYpU,EAAQ1D,UAAU,GAC9BxG,EAAYqb,GAAkB+C,GAC9Bpd,EAAI0Z,GAAsB4D,IAAc,EAC9C,IAAKte,EACH,OAAO,IAAIuU,MAAM,WAAarK,GAEhCN,EAAKQ,IAAIpK,EAAWgB,KAbkB,+BAkB1C,SAASud,GAAa9J,EAAgBZ,GACpC,IAAM2K,EAAaR,GAAWS,KAAK5K,GACnC,GAAI2K,EAAY,CACd,IAAME,EAAUF,EAAW,GACrB9Q,EAAU8Q,EAAW,GACrBvd,EAA+B,GAA3BkJ,OAAOwU,SAASD,GAAgBvU,OAAOwU,SAASjR,GAC1D+G,EAAOhB,QAAQF,aAAiB,IAAJtS,IAIhC,SAAS2d,GAASnK,EAAgBZ,GAChC,IAAI7G,EAASiR,GAAkBQ,KAAK5K,GACpC,GAAI7G,EAAQ,CACV,IAAM6R,EAAM1U,OAAO6C,EAAO,IACpBhH,EAAOyW,GAAoBzP,EAAO,IAClC8R,EAAO9R,EAAO,GAMpB,OALAyH,EAAOsK,KAAKF,EAAM,GAClBpK,EAAOE,OAAO3O,EAAM,CAClB6F,kBAAkB,SAEpB0S,GAAa9J,EAAQqK,GAKvB,GADA9R,EAAS+Q,GAAWU,KAAK5K,IACpB7G,EACH,OAAO,IAAIuH,MAAM,YAAcV,GAEjC,IAWIhO,EACAD,EAZEiZ,EAAM1U,OAAO6C,EAAO,IACpBgS,EAAQhS,EAAO,GACfiS,EAAejS,EAAO,GACtBkS,EAAUlS,EAAO,GACjBmS,EAAUnS,EAAO,GACjB8R,EAAO9R,EAAO,GAEpB,GAAY,IAAR6R,EACF,OAAO,IAAItK,MAAM,SAAWV,GAK9B,GAHAY,EAAOsK,KAAKF,EAAM,GAGJ,OAAVG,EAAgB,CAClB,KAAMvK,EAAOhB,QAAQzN,gBAAgBL,IACnC,OAAO,IAAI4O,MAAM,WAAaV,GAEhChO,EAAK4O,EAAOhB,QAAQzN,KAAKH,OACpB,CACL,IAAMhK,EAAOke,GAAmBiF,EAAM,IAChCljB,EAAOke,GAAmBgF,EAAM,IACtCnZ,EAAK,IAAIZ,GAAOpJ,EAAMC,GAExB,GAAgB,MAAZqjB,EACFvZ,EAAOyV,GAAkB4D,OACpB,CACL,IAAMpjB,EAAOuf,GAAe+D,EAAQ,IAC9BrjB,EAAOsf,GAAe+D,EAAQ,IACpCvZ,EAAO,IAAIX,GAAOpJ,EAAMC,GAE1B,IAAIkK,EAAOyO,EAAOre,SAAS+U,WAAWvF,EAAMC,GAC5C,IAAKG,EACH,OAAO,IAAIuO,MAAM,WAAaV,GAEhB,MAAZqL,IACFlZ,EAAOA,EAAKoF,eAEdqJ,EAAOE,OAAO3O,EAAM,CAClB6F,kBAAkB,IAEpB0S,GAAa9J,EAAQqK,GAIjB,SAAUM,GAAevL,GAC7B,IADyC,EACnChC,EAAW,IAAIpC,GACfgF,EAAS,IAAI7C,GACbyN,EAAQxL,EAAKpL,MAAM,SACnBrS,EAAW,IAAIsU,GACjB4U,EAAiB,GACjBC,GAAgB,EANqB,WAOtBF,GAPsB,IAOzC,2BAA0B,KAAfhG,EAAe,QACxB,GAAa,KAATA,EAAJ,CAGA,IAAM3E,EAAS0E,GAAUC,GACzB,GAAIkG,GAAiB7K,EAAOiE,WAC1B,OAAO,IAAIpE,MAAM,WAAa8E,GAEhC,IAAImG,OAAoB,EACxB,OAAQ9K,EAAOlY,MACb,KAAK2Y,GAASwE,SACZ,IAAM8F,EAAcrK,GAAeV,EAAO+E,aACtCgG,EACF5N,EAAS6N,oBAAoBD,EAAa/K,EAAOb,MAEjDhC,EAAS8N,kBAAkBjL,EAAO+E,YAAa/E,EAAOb,MAExD,MAEF,KAAKsB,GAASyD,SACZ4G,EAAI3F,GAAazjB,EAAUse,EAAOb,MAClC,MACF,KAAKsB,GAAS0D,WACZ2G,EAAInB,GAASjoB,EAAS6F,UAAWyY,EAAOb,MACxC,MACF,KAAKsB,GAAS2D,WACZ0G,EAAInB,GAASjoB,EAASqG,UAAWiY,EAAOb,MACxC,MACF,KAAKsB,GAAS4D,MACZyG,EAAItB,GAAU9nB,EAASmE,MAAOma,EAAOb,MACrC,MACF,KAAKsB,GAAS6D,WACZ5iB,EAASwpB,SAAStjB,EAAAA,OAClB,MACF,KAAK6Y,GAAS8D,WACZ7iB,EAASwpB,SAAStjB,EAAAA,OAClB,MACF,KAAK6Y,GAAS+D,KACPqG,IACH9K,EAAOlN,MAAMnR,GACbqe,EAAOnB,MAAMpC,QAAUoO,EACvBC,GAAgB,GAElBC,EAAIZ,GAASnK,EAAQC,EAAOb,MAC5B,MACF,KAAKsB,GAASgE,QACRoG,EACF9K,EAAOhB,QAAQvC,QAAU0D,GACvBH,EAAOhB,QAAQvC,QACfwD,EAAOb,MAGTyL,EAAiB1K,GAAW0K,EAAgB5K,EAAOb,MAErD,MACF,KAAKsB,GAASsD,gBACZ,MACF,KAAKtD,GAASyE,QACZ,MAEJ,GAAI4F,EACF,OAAOA,IApE8B,8BA8EzC,OAPKD,IACH9K,EAAOlN,MAAMnR,GACbqe,EAAOnB,MAAMpC,QAAUoO,GAEzB7K,EAAOsK,KAAK,GACZtK,EAAOoL,0BACPpL,EAAO5C,SAAWA,EACX4C,EAGT,IAAMqL,GAAqB,CACzB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAEIC,GAAc,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACvDC,GAAcF,GAEdG,GAA2B,CAC/B5hB,KAAM,IACND,KAAM,IACNO,OAAQ,IACRR,OAAQ,IACRO,MAAO,IACPR,KAAM,IACND,OAAQ,IACRQ,WAAY,KACZT,OAAQ,IACRQ,WAAY,KACZT,MAAO,IACPQ,UAAW,KACXT,KAAM,IACNQ,SAAU,KAGN4hB,GAA4B,CAChC7hB,KAAM,IACND,KAAM,IACNO,OAAQ,IACRR,OAAQ,IACRO,MAAO,IACPR,KAAM,IACND,OAAQ,IACRQ,WAAY,IACZT,OAAQ,IACRQ,WAAY,IACZT,MAAO,IACPQ,UAAW,IACXT,KAAM,IACNQ,SAAU,KAGN6hB,GAAsB,CAC1BpQ,MAAO,GACPnY,OAAQ,KACRoY,UAAW,KACXC,KAAM,MACNC,eAAgB,MAChBC,KAAM,KACNC,QAAS,OACTC,QAAS,OACTC,SAAU,OACVC,eAAgB,OAChBC,aAAc,MACdC,cAAe,OAOjB,SAAS2P,GACPvO,EACAwO,GAEA,IAF8B,EAE1Bja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KAH/B,WAIZzO,EAAS0O,sBAJG,IAI9B,2BAAiD,KAAtCttB,EAAsC,QAC/CmT,GACE0Q,GAAgB7jB,GAChB,IACA4e,EAAS2O,oBAAoBvtB,GAC7BqtB,GAT0B,+CAWZzO,EAAS4O,oBAXG,IAW9B,2BAA+C,KAApCxtB,EAAoC,QAC7CmT,GAAOnT,EAAM,IAAM4e,EAAS6O,kBAAkBztB,GAAOqtB,GAZzB,8BAc9B,OAAOla,EAGT,SAASua,GACPvqB,EACAiqB,GAEA,IAAIja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KAC7Dla,GAAO,SAAWwa,GAAWxqB,EAASqG,WAAa6jB,EACnDla,GAAO,sBAAwBka,EAC/Bla,GAAO,gCAAkCka,EACzC,IAAK,IAAIhc,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B8B,GAAO,IACP,IAAK,IAAI/B,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMhJ,EAAS4J,GAAOqD,QAAQjE,EAAGC,GAC3B9I,EAAQpF,EAASmE,MAAM8N,GAAGhN,GAC3BG,EAEMA,EAAMb,QAAU2B,EAAAA,MACzB8J,GAAO,IAAM8Z,GAA0B1kB,EAAMgB,MAE7C4J,GAAO,IAAM8Z,GAA0B1kB,EAAMgB,MAJ7C4J,GAAO,KAOXA,GAAO,IAAM4Z,GAAY1b,GAAKgc,EAShC,OAPAla,GAAO,gCAAkCka,EACzCla,GAAO,SAAWwa,GAAWxqB,EAAS6F,WAAaqkB,EAC/ClqB,EAASuE,QAAU2B,EAAAA,MACrB8J,GAAO,MAAQka,EAEfla,GAAO,MAAQka,EAEVla,EAGT,SAASya,GAAW7a,GAClB,IAAII,EAAM,GAYV,OAXAA,GAAO2Z,GAAY/Z,EAAKH,GAAGhK,KAAO,GAClCuK,GAAO4Z,GAAYha,EAAKH,GAAG/J,KAAO,GAClCsK,GAAO6Z,GAAyBja,EAAKhG,WACjCgG,EAAKF,UACPM,GAAO,KAELJ,EAAKJ,gBAAgBX,GACvBmB,GAAO,IAAMJ,EAAKJ,KAAK/J,KAAOmK,EAAKJ,KAAK9J,KAAO,IAE/CsK,GAAO,IAEFA,EAGT,SAASwa,GAAWhX,GAClB,IAAIxD,EAAM,GAUV,OATAwD,EAAKtC,SAAQ,SAACtH,EAAWgB,GACnBA,GAAK,IACPoF,GAAO8Z,GAA0BlgB,GAC7BgB,GAAK,IACPoF,GAAO0Z,GAAmB9e,EAAI,IAEhCoF,GAAO,QAGJA,EAGH,SAAU0a,GACdrM,EACA4L,GAEA,IAAIja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KA6B7D,OA5BAla,GAAO,4CAA8Cka,EACrDla,GAAOga,GAAe3L,EAAO5C,SAAUwO,GACvCja,GAAOua,GAAelM,EAAOxC,gBAAiBoO,GAC9Cja,GAAO,0BAA4Bka,EACnC7L,EAAOnN,SAAQ,SAAC6L,GACd,GAAoB,IAAhBA,EAAKvC,OAAc,CAChBuC,EAAKC,gBACRhN,GAAOka,EACPla,GAAO,MAAQ+M,EAAKvC,OAAS,IAAM0P,GAErCla,GAAO+M,EAAKvC,OAAS,IACjBuC,EAAKnN,gBAAgBL,GACvBS,GAAOya,GAAW1N,EAAKnN,MAEvBI,GAAO+Z,GAAoBhN,EAAKnN,MAElC,IAAMsL,EAAU9D,GAAkB2F,EAAKhC,WACjCI,EAAenE,GAAoB+F,EAAK/B,gBAC9ChL,GAAO,KAAJ,OAASkL,EAAT,YAAoBC,EAApB,KACC4B,EAAKC,eAAiBD,EAAK4N,YAC7B3a,GAAO,KAETA,GAAOka,EAEmB,IAAxBnN,EAAKjC,QAAQzK,SACfL,GAAO,IAAM+M,EAAKjC,QAAQ8P,WAAW,KAAMV,EAAa,KAAOA,MAG5Dla,E,ICzrBJ+O,GAeA8L,G,YAfL,SAAK9L,GACHA,EAAAA,EAAAA,WAAAA,GAAAA,UACAA,EAAAA,EAAAA,WAAAA,GAAAA,UACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,YAAAA,GAAAA,WACAA,EAAAA,EAAAA,YAAAA,GAAAA,WACAA,EAAAA,EAAAA,QAAAA,GAAAA,OACAA,EAAAA,EAAAA,UAAAA,GAAAA,SACAA,EAAAA,EAAAA,cAAAA,GAAAA,aACAA,EAAAA,EAAAA,QAAAA,GAAAA,OACAA,EAAAA,EAAAA,gBAAAA,IAAAA,eACAA,EAAAA,EAAAA,WAAAA,IAAAA,WAZF,CAAKA,KAAAA,GAAQ,KAeb,SAAK8L,GACHA,EAAAA,EAAAA,UAAAA,GAAAA,SACAA,EAAAA,EAAAA,QAAAA,GAAAA,OACAA,EAAAA,EAAAA,WAAAA,GAAAA,UAHF,CAAKA,KAAAA,GAAW,KAMhB,IAAM1I,GAAe,CACnB,CACEe,QAAS,KACT9c,KAAM2Y,GAAS+L,QACfC,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,KACT9c,KAAM2Y,GAASgE,QACfgI,YAAaF,GAAYI,SAE3B,CACE/H,QAAS,YACT9c,KAAM2Y,GAASpH,WACfoT,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,WACT9c,KAAM2Y,GAASnH,WACfmT,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,mBACT9c,KAAM2Y,GAASwE,SACfwH,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,0BACT9c,KAAM2Y,GAASmM,SACfH,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,mCACT9c,KAAM2Y,GAASoM,KACfJ,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,4BACT9c,KAAM2Y,GAASqM,OACfL,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,SACT9c,KAAM2Y,GAASsM,WACfN,YAAaF,GAAYG,QAE3B,CACE9H,QAAS,wBACT9c,KAAM2Y,GAAS+D,KACfiI,YAAaF,GAAY/H,MAE3B,CACEI,QAAS,cACT9c,KAAM2Y,GAASuM,aACfP,YAAaF,GAAY/H,MAE3B,CACEI,QAAS,aACT9c,KAAM2Y,GAASwM,QACfR,YAAaF,GAAY/H,OAW7B,SAASE,GAAUC,GACjB,IAD6B,EACvBuI,EAAU,GACVvC,EAAQhG,EAAKrP,MAAM,UAAY,CAACqP,GAAQA,EAAK5Q,MAAM,KAF5B,WAGV4W,GAHU,IAG7B,2BACE,IADwB,IAAfhG,EAAe,QACftS,EAAI,EAAGA,EAAIwR,GAAa9R,OAAQM,IAAK,CAC5C,IAAMiG,EAASuL,GAAaxR,GAAGuS,QAAQmF,KAAKpF,GACxCrM,GACF4U,EAAQrc,KAAK,CACX/I,KAAM+b,GAAaxR,GAAGvK,KACtB6c,KAAMA,EACNwI,KAAM7U,EAAOqH,MAAM,GACnB8M,YAAa5I,GAAaxR,GAAGoa,eAXR,8BAgB7B,OAAOS,EAGT,IAAME,GAAmE,CACvEC,MAAO5U,GAAkBmB,MACzB0T,KAAM7U,GAAkBsB,MACxBwT,WAAY9U,GAAkBc,eAC9BiU,SAAU/U,GAAkBe,aAC5BK,WAAYpB,GAAkBoB,WAC9B4T,QAAShV,GAAkBkB,UAGvB+T,GAAoD,CACxDC,GAAI9kB,EAAUuB,KACdwjB,GAAI/kB,EAAUwB,MACdwjB,GAAIhlB,EAAUyB,OACdwjB,GAAIjlB,EAAU0B,OACdwjB,GAAIllB,EAAU2B,KACdwjB,GAAInlB,EAAU4B,OACdwjB,GAAIplB,EAAU6B,KACdwjB,GAAIrlB,EAAU8B,KACdwjB,GAAItlB,EAAU+B,UACdwjB,GAAIvlB,EAAUgC,WACdwjB,GAAIxlB,EAAUiC,YACdwjB,GAAIzlB,EAAUkC,YACdwjB,GAAI1lB,EAAUmC,MACdwjB,GAAI3lB,EAAUoC,QAGhB,SAASwjB,GAAc9J,EAAcjjB,GACnCA,EAAS4Q,MAAMN,GAAoBO,UACnC,IAAK,IAAIF,EAAI,EAAGA,EAAI,GAAKsS,EAAK5S,OAAQM,GAAK,EAAG,CAC5C,IAAMlL,EAAOsO,OAAOkP,EAAKtS,IACnBjL,EAAOqO,OAAOkP,EAAKtS,EAAI,IAC7B3Q,EAASmE,MAAMwR,OAAO,IAAI9G,GAAOpJ,EAAMC,KAI3C,SAASsnB,GAAU/J,EAAcjjB,GAE/B,IADA,IAAM0F,EAAOqO,OAAOkP,EAAK,IAChBhV,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAMxI,EAAO,EAAIwI,EACXmV,EAAY,EAAJnV,EAAQ,EAChB6F,EAAUmP,EAAKhF,MAAMmF,EAAOA,EAAQ,GAC1C,GAAmB,MAAftP,EAAQ,GAAZ,CAGA,IAAMvP,EAAuB,MAAfuP,EAAQ,GAAa5N,EAAAA,MAAcA,EAAAA,MAC3C0D,EAAYoiB,GAAmBlY,EAAQmK,MAAM,IACnD,IAAKrU,EACH,OAAO,IAAIuU,MAAM,SAAWrK,GAE9B9T,EAASmE,MAAMkH,IAAI,IAAIwD,GAAOpJ,EAAMC,GAAO,IAAI6F,GAAMhH,EAAOqF,MAIhE,SAASqjB,GAAYhK,EAAcjjB,GAEjC,IADA,IAAMuE,EAAoB,MAAZ0e,EAAK,GAAa/c,EAAAA,MAAcA,EAAAA,MACrCkd,EAAQ,EAAGA,EAAQ,GAAKH,EAAK5S,OAAQ+S,GAAS,EAAG,CACxD,IAAMtP,EAAUmP,EAAKhF,MAAMmF,EAAOA,EAAQ,GAC1C,GAAgB,SAAZtP,EAAoB,kBACtB,IAAMoZ,EAASrW,GAAuB7W,GAUtC,OATIuE,IAAU2B,EAAAA,MACZlG,EAAS6F,UAAUqL,SAAQ,SAACtH,GAC1B5J,EAAS6F,UAAUmO,IAAIpK,EAAWsjB,EAAOtjB,OAG3C5J,EAASqG,UAAU6K,SAAQ,SAACtH,GAC1B5J,EAASqG,UAAU2N,IAAIpK,EAAWsjB,EAAOtjB,OAG7C,WAXsB,wCAaxB,IAAMnE,EAAOsO,OAAOD,EAAQ,IACtBpO,EAAOqO,OAAOD,EAAQ,IACtBlK,EAAYoiB,GAAmBlY,EAAQmK,MAAM,IACnD,IAAKrU,EACH,OAAO,IAAIuU,MAAM,SAAWrK,GAEjB,IAATrO,GAAuB,IAATC,EAChB1F,EAASmE,MAAMkH,IAAI,IAAIwD,GAAOpJ,EAAMC,GAAO,IAAI6F,GAAMhH,EAAOqF,IACnDrF,IAAU2B,EAAAA,MACnBlG,EAAS6F,UAAUmO,IAAIpK,EAAW,GAElC5J,EAASqG,UAAU2N,IAAIpK,EAAW,IAKxC,SAASujB,GAAUlK,EAAcjjB,GAC/B,IAAMuE,EAAoB,MAAZ0e,EAAK,GAAa/c,EAAAA,MAAcA,EAAAA,MAC9C,GAAI3B,GAASvE,EAASuE,MACpB,OAAO,IAAI4Z,MAAM,UAAY8E,GAE/B,IAAMmK,EAAWrZ,OAAOkP,EAAK,IACvBoK,EAAWtZ,OAAOkP,EAAK,IACvBqK,EAASvZ,OAAOkP,EAAK,IACrBsK,EAASxZ,OAAOkP,EAAK,IACrBrZ,EAAYoiB,GAAmB/I,EAAKhF,MAAM,EAAG,IACnD,IAAKrU,EACH,OAAO,IAAIuU,MAAM,YAAc8E,GAEjC,IAAMzT,EACS,IAAb4d,GAA+B,IAAbC,EACdzjB,EACA,IAAIiF,GAAOue,EAAUC,GACrB5d,EAAK,IAAIZ,GAAOye,EAAQC,GAC1B3d,EAAO5P,EAAS+U,WAAWvF,EAAMC,GACrC,IAAKG,EACH,OAAO,IAAIuO,MAAM,WAAa8E,GAEhC,GAAIzT,aAAgBX,GAAQ,CAC1B,IAAM2e,EAAYxtB,EAASmE,MAAM8N,GAAGzC,GACpC,IAAKge,EACH,OAAO,IAAIrP,MAAM,WAAa8E,GAEhC,GAAIuK,EAAUpnB,OAASwD,EAAW,CAChC,GAAI4jB,EAAU5X,WAAWxP,OAASwD,EAGhC,OAAO,IAAIuU,MAAM,WAAa8E,GAF9BrT,EAAOA,EAAKoF,eAMlB,OAAOpF,EAGT,SAAS6d,GAAiBxK,GACxB,OAAQA,GACN,IAAK,SACH,OAAO7J,GAAY1X,OACrB,IAAK,UACH,OAAO0X,GAAYmN,UACrB,IAAK,cACH,OAAOnN,GAAYwN,gBACrB,IAAK,WACH,OAAOxN,GAAY4N,QACrB,IAAK,gBACH,OAAO5N,GAAYgO,UACrB,IAAK,WACH,OAAOhO,GAAYsN,KACrB,IAAK,SACH,OAAOtN,GAAYkO,iBACrB,IAAK,YACH,OAAOlO,GAAYsN,KACrB,IAAK,SACH,OAAOtN,GAAY0N,MAInB,SAAU4G,GAAUjQ,GACxB,IAAMhC,EAAW,IAAIpC,GACfgF,EAAS,IAAI7C,GACbxb,EAAW,IAAIsU,GACrBtU,EAAS4Q,MAAMN,GAAoBc,OACnC,IALoC,EAKhC+X,GAAgB,EACdF,EAAQxL,EAAKkQ,QAAQ,UAAW,IAAItb,MAAM,SANZ,WAOjB4W,GAPiB,IAOpC,2BAA0B,OAAfhG,EAAe,mBACHD,GAAUC,IADP,IACxB,2BAAsC,KAA3B3E,EAA2B,QACpC,GACGA,EAAOyM,cAAgBF,GAAYG,QAAU7B,GAC7C7K,EAAOyM,cAAgBF,GAAY/H,OAASqG,EAE7C,OAAO,IAAIhL,MAAM,iBAAmBG,EAAO2E,MAE7C,OAAQ3E,EAAOlY,MACb,KAAK2Y,GAAS+L,QACZ,MACF,KAAK/L,GAASgE,QACZ,MACF,KAAKhE,GAASpH,WACZ8D,EAAS6N,oBACPvS,GAAkBY,WAClB2G,EAAOmN,KAAK,IAEd,MACF,KAAK1M,GAASnH,WACZ6D,EAAS6N,oBACPvS,GAAkBa,WAClB0G,EAAOmN,KAAK,IAEd,MACF,KAAK1M,GAASwE,SACZ,IAAM1mB,EAAM6uB,GAA2BpN,EAAOmN,KAAK,IAC/C5uB,EACF4e,EAAS6N,oBAAoBzsB,EAAKyhB,EAAOmN,KAAK,IAE9ChQ,EAAS8N,kBAAkBjL,EAAOmN,KAAK,GAAInN,EAAOmN,KAAK,IAEzD,MAEF,KAAK1M,GAASmM,SACZ6B,GAAczO,EAAO2E,KAAMjjB,GAC3B,MACF,KAAK+e,GAASoM,KACZ,IAAMyC,EAAQZ,GAAU1O,EAAO2E,KAAMjjB,GACrC,GAAI4tB,EACF,OAAOA,EAET,MAEF,KAAK7O,GAASqM,OACZ,IAAMwC,EAAQX,GAAY3O,EAAO2E,KAAMjjB,GACvC,GAAI4tB,EACF,OAAOA,EAET,MAEF,KAAK7O,GAASsM,WACW,MAAnB/M,EAAO2E,KAAK,GACdjjB,EAASwpB,SAAStjB,EAAAA,OAElBlG,EAASwpB,SAAStjB,EAAAA,OAEpBmY,EAAOlN,MAAMnR,GACbmpB,GAAgB,EAChB,MACF,KAAKpK,GAAS+D,KACZ,IAAM+K,EAAcV,GAAU7O,EAAO2E,KAAM5E,EAAOre,UAClD,GAAI6tB,aAAuB1P,MACzB,OAAO0P,EAETxP,EAAOE,OAAOsP,EAAa,CAAEpY,kBAAkB,IAC/C,MAEF,KAAKsJ,GAASuM,aACZ,IAAMwC,EAAcL,GAAiBnP,EAAO2E,MACxC6K,GACFzP,EAAOE,OAAOuP,EAAa,CAAErY,kBAAkB,IAEjD,MAEF,KAAKsJ,GAASwM,QACZlN,EAAOhB,QAAQF,aAAsC,IAAzBpJ,OAAOuK,EAAOmN,KAAK,KAC/C,QA7EkB,gCAPU,8BA8FpC,OANKtC,GACH9K,EAAOlN,MAAMnR,GAEfqe,EAAOsK,KAAK,GACZtK,EAAOoL,0BACPpL,EAAO5C,SAAWA,EACX4C,EAOT,SAAS2L,GACPvO,EACAwO,GAEA,IAAIja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KACvDvJ,EACJlF,EAAS2O,oBAAoBrT,GAAkBY,aAC/C8D,EAAS2O,oBAAoBrT,GAAkByB,kBAC7CmI,IACF3Q,GAAO,KAAO2Q,EAAYuJ,GAE5B,IAAMtJ,EACJnF,EAAS2O,oBAAoBrT,GAAkBa,aAC/C6D,EAAS2O,oBAAoBrT,GAAkB0B,kBAC7CmI,IACF5Q,GAAO,KAAO4Q,EAAYsJ,GAE5B,IAAM6D,EACJtS,EAAS2O,oBAAoBrT,GAAkBiB,aAC/CyD,EAAS2O,oBAAoBrT,GAAkBmB,QAC/CuD,EAAS2O,oBAAoBrT,GAAkB4B,YAC/C8C,EAAS2O,oBAAoBrT,GAAkB8B,cAC7CkV,IACF/d,GAAO,UAAY+d,EAAQ7D,GAE7B,IAAM8D,EAAOvS,EAAS2O,oBAAoBrT,GAAkBsB,OACxD2V,IACFhe,GAAO,SAAWge,EAAO9D,GAE3B,IAAM+D,EACJxS,EAAS2O,oBAAoBrT,GAAkBc,iBAC/C4D,EAAS2O,oBAAoBrT,GAAkBgB,MAC7CkW,IAEFje,GAAO,eAAiBie,EAAUhQ,MAAM,IAAMiM,GAEhD,IAAMgE,EAAUzS,EAAS2O,oBAAoBrT,GAAkBgB,MAC3DmW,IACFle,GAAO,aAAeke,EAAQjQ,MAAM,IAAMiM,GAE5C,IAAMiE,EAAU1S,EAAS2O,oBAAoBrT,GAAkBkB,UAK/D,OAJIkW,IACFne,GAAO,YAAcme,EAAUjE,GAG1Bla,EAGT,IC3aYoe,GD2aNC,GAAoB,CACxBpmB,KAAM,KACND,KAAM,KACNO,OAAQ,KACRR,OAAQ,KACRO,MAAO,KACPR,KAAM,KACND,OAAQ,KACRQ,WAAY,KACZT,OAAQ,KACRQ,WAAY,KACZT,MAAO,KACPQ,UAAW,KACXT,KAAM,KACNQ,SAAU,MAGZ,SAASsiB,GAAWhX,GAClB,IAAIxD,EAAM,GAMV,OALAwD,EAAKtC,SAAQ,SAACtH,EAAWgB,GACvB,IAAK,IAAI+F,EAAI,EAAGA,EAAI/F,EAAG+F,IACrBX,GAAO,KAAOqe,GAAkBzkB,MAG7BoG,EAGT,SAASua,GACPvqB,EACAiqB,GAIA,IAFA,IAAIja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KACpDxkB,EAAO,EAAGA,GAAQ,EAAGA,GAAQ,EAAG,CACvCsK,GAAO,IAAMtK,EACb,IAAK,IAAID,EAAO,EAAGA,GAAQ,EAAGA,GAAQ,EAAG,CACvC,IAAML,EAAQpF,EAASmE,MAAM8N,GAAG,IAAIpD,GAAOpJ,EAAMC,IAC5CN,EAEMA,EAAMb,QAAU2B,EAAAA,MACzB8J,GAAO,IAAMqe,GAAkBjpB,EAAMgB,MAErC4J,GAAO,IAAMqe,GAAkBjpB,EAAMgB,MAJrC4J,GAAO,MAOXA,GAAOka,EAKT,OAHAla,GAAO,KAAOwa,GAAWxqB,EAAS6F,WAAaqkB,EAC/Cla,GAAO,KAAOwa,GAAWxqB,EAASqG,WAAa6jB,EAC/Cla,IAAQhQ,EAASuE,QAAU2B,EAAAA,MAAc,IAAM,KAAOgkB,EAC/Cla,EAGT,SAASse,GAAarpB,GACpB,OAAOA,aAAkB4J,GAAlB,UAA8B5J,EAAOQ,MAArC,OAA4CR,EAAOS,MAAS,KAGrE,SAAS+kB,GAAW7a,GAClB,OACGA,EAAKrL,QAAU2B,EAAAA,MAAc,IAAM,KACpCooB,GAAa1e,EAAKJ,MAClB8e,GAAa1e,EAAKH,IAClB4e,GACEze,EAAKF,QAAU/F,GAAkBiG,EAAKhG,WAAagG,EAAKhG,WAK9D,SAAS2kB,GAAkB3e,GACzB,OAAQA,GACN,KAAKwJ,GAAY1X,OACf,MAAO,SACT,KAAK0X,GAAYmN,UACf,MAAO,UACT,KAAKnN,GAAYwN,gBACf,MAAO,cACT,KAAKxN,GAAY4N,QACf,MAAO,WACT,KAAK5N,GAAYgO,UACf,MAAO,gBACT,KAAKhO,GAAYsN,KACf,MAAO,WACT,KAAKtN,GAAYkO,iBACf,MAAO,SACT,KAAKlO,GAAY0N,KACf,MAAO,UAIP,SAAU0H,GACdnQ,EACA4L,GAEA,IAAIja,EAAM,GACJka,EAAaD,EAAQC,WAAaD,EAAQC,WAAa,KAoB7D,OAnBAla,GAAO,4CAA8Cka,EACrDla,GAAO,OAASka,EAChBla,GAAOga,GAAe3L,EAAO5C,SAAUwO,GACvCja,GAAOua,GAAelM,EAAOxC,gBAAiBoO,GAC9C5L,EAAOjC,MAAMlL,SAAQ,SAAC6L,GAIpB,IAAInN,EAHgB,IAAhBmN,EAAKvC,SAKP5K,EADEmN,EAAKnN,gBAAgBL,GAChBkb,GAAW1N,EAAKnN,MAEhB2e,GAAkBxR,EAAKnN,MAE5BA,IACFI,GAAOJ,EAAOsa,EACdla,GAAO,IAAM1B,KAAK6I,MAAM4F,EAAKhC,UAAY,KAAOmP,OAG7Cla,ECthBH,SAAUye,GAAmBhR,GAEjC,GACEA,EAAKM,WAAW,mBAChBN,EAAKM,WAAW,uBAChBN,EAAKM,WAAW,UAChBN,EAAKM,WAAW,cAChBN,EAAKM,WAAW,UAEhB,OAAOqQ,GAAiBM,IAI1B,GAAIpa,GAASnC,YAAYsL,GACvB,OAAO2Q,GAAiBO,KAI1B,IAAMC,EAAU,qCACVC,EAAU,uBACVC,EAAarR,EAAK7J,MAAMgb,GACxBG,EAAatR,EAAK7J,MAAMib,GACxBG,EAAUF,EAAaA,EAAWze,OAAS,EAC3C4e,EAAUF,EAAaA,EAAW1e,OAAS,EACjD,OAAO2e,GAAWC,EAAUb,GAAiBc,IAAMd,GAAiBe,KA/BtE,SAAYf,GACVA,EAAAA,EAAAA,OAAAA,GAAAA,MACAA,EAAAA,EAAAA,QAAAA,GAAAA,OACAA,EAAAA,EAAAA,OAAAA,GAAAA,MACAA,EAAAA,EAAAA,OAAAA,GAAAA,OAJF,CAAYA,KAAAA,GAAgB,K,eCFtBgB,I,QAAwD,IAEhD,SAAUC,GAAaC,GACnC,IAAIF,GAAgBE,GAApB,CAGA,IAAMC,EAAMC,SAASC,cAAc,OACnCF,EAAInrB,IAAMkrB,EACVF,GAAgBE,GAAQC,GCRnB,I,SCcKG,GAOAC,GAOAC,GD5BCC,GAAb,WACE,WAAmBC,EAAsBC,IAAc,0EAApC,KAAAD,MAAAA,EAAsB,KAAAC,OAAAA,EAD3C,kCAEE,SAAI3xB,GACF,OAAO,IAAIyxB,EAASrkB,KAAKskB,MAAQ1xB,EAAK0xB,MAAOtkB,KAAKukB,OAAS3xB,EAAK2xB,UAHpE,oBAKE,SAAO3xB,GACL,OAAO,IAAIyxB,EAASrkB,KAAKskB,MAAQ1xB,EAAK0xB,MAAOtkB,KAAKukB,OAAS3xB,EAAK2xB,YANpE,MCcA,SAAYL,GACVA,EAAAA,YAAAA,WACAA,EAAAA,iBAAAA,eACAA,EAAAA,mBAAAA,iBACAA,EAAAA,wBAAAA,sBAJF,CAAYA,KAAAA,GAAc,KAO1B,SAAYC,GACVA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OAJF,CAAYA,KAAAA,GAAc,KAO1B,SAAYC,GACVA,EAAAA,QAAAA,OACAA,EAAAA,YAAAA,WAFF,CAAYA,KAAAA,GAAc,KA0C1B,IAAMI,GAAiB,CACrB/rB,MAAO,CACL6rB,MAAO,KACPC,OAAQ,KAEV5rB,MAAO,CACL8J,EAAG,MACHC,EAAG,EACH4hB,MAAO,IACPC,OAAQ,IACRE,WAAY,KACZC,YAAa,IACbC,kBAAmB,GACnBC,iBAAkB,KAClBC,iBAAkB,KAClBC,gBAAiB,KACjBC,UAAW,CACTC,SAAU,CAAE,mBAAoB,UAAWC,QAAS,OACpDC,WAAY,CAAE,mBAAoB,UAAWD,QAAS,OACtDE,aAAc,CAAE,mBAAoB,UAAWF,QAAS,SAG5DnrB,MAAO,CACLsrB,SAAU,IAEZxrB,MAAO,CACL0qB,MAAO,GACPC,OAAQ,IAEVvc,KAAM,CACJjG,MAAO,CACLU,EAAG,KACHC,EAAG,KAELR,MAAO,CACLO,EAAG,EACHC,EAAG,GAEL4hB,MAAO,IACPC,OAAQ,IACRQ,UAAW,CACTC,SAAU,CAAE,mBAAoB,UAAWC,QAAS,SAGxD7pB,KAAM,CACJ2G,MAAO,CACLU,EAAG,KACHC,EAAG,KAELR,MAAO,CACLO,EAAG,EACHC,EAAG,KAEL4hB,MAAO,IACPC,OAAQ,GACRa,SAAU,IAEZC,WAAY,CACVtjB,MAAO,CACLU,EAAG,KACHC,EAAG,KAELR,MAAO,CACLO,EAAG,EACHC,EAAG,KAEL4hB,MAAO,IACPC,OAAQ,GACRa,SAAU,IAEZE,MAAO,CACLvjB,MAAO,CACLU,EAAG,KACHC,EAAG,KAELR,MAAO,CACLO,EAAG,EACHC,EAAG,KAEL4hB,MAAO,IACPC,OAAQ,GACRa,SAAU,IAEZ/pB,QAAS,CACPC,KAAM,CACJmH,EAAG,EACHC,EAAG,IACH4hB,MAAO,IACPC,OAAQ,IACRa,SAAU,IAEZ1pB,MAAO,CACL+G,EAAG,KACHC,EAAG,EACH4hB,MAAO,IACPC,OAAQ,IACRa,SAAU,MAKVG,IAAa,iBAChBrB,GAAesB,SAAW,CACzBzjB,MAAO,CACL7F,KAAM,kCACNC,MAAO,mCACPC,OAAQ,oCACRC,OAAQ,oCACRC,KAAM,kCACNC,OAAQ,oCACRC,KAAM,kCACNC,KAAM,kCACNgpB,MAAO,mCACP/oB,SAAU,uCACVC,UAAW,wCACXC,WAAY,yCACZC,WAAY,yCACZC,MAAO,mCACPC,OAAQ,qCAEVmF,MAAO,CACLhG,KAAM,kCACNC,MAAO,mCACPC,OAAQ,oCACRC,OAAQ,oCACRC,KAAM,kCACNC,OAAQ,oCACRC,KAAM,kCACNC,KAAM,kCACNgpB,MAAO,mCACP/oB,SAAU,uCACVC,UAAW,wCACXC,WAAY,yCACZC,WAAY,yCACZC,MAAO,mCACPC,OAAQ,wCAlCK,UAqChBmnB,GAAewB,cAAgB,CAC9B3jB,MAAO,CACL7F,KAAM,uCACNC,MAAO,wCACPC,OAAQ,yCACRC,OAAQ,yCACRC,KAAM,uCACNC,OAAQ,yCACRC,KAAM,uCACNC,KAAM,uCACNgpB,MAAO,wCACP/oB,SAAU,4CACVC,UAAW,6CACXC,WAAY,8CACZC,WAAY,8CACZC,MAAO,wCACPC,OAAQ,0CAEVmF,MAAO,CACLhG,KAAM,uCACNC,MAAO,wCACPC,OAAQ,yCACRC,OAAQ,yCACRC,KAAM,uCACNC,OAAQ,yCACRC,KAAM,uCACNC,KAAM,uCACNgpB,MAAO,wCACP/oB,SAAU,4CACVC,UAAW,6CACXC,WAAY,8CACZC,WAAY,8CACZC,MAAO,wCACPC,OAAQ,6CAtEK,UAyEhBmnB,GAAeyB,gBAAkB,CAChC5jB,MAAO,CACL7F,KAAM,yCACNC,MAAO,0CACPC,OAAQ,2CACRC,OAAQ,2CACRC,KAAM,yCACNC,OAAQ,2CACRC,KAAM,yCACNC,KAAM,yCACNgpB,MAAO,0CACP/oB,SAAU,8CACVC,UAAW,+CACXC,WAAY,gDACZC,WAAY,gDACZC,MAAO,0CACPC,OAAQ,4CAEVmF,MAAO,CACLhG,KAAM,yCACNC,MAAO,0CACPC,OAAQ,2CACRC,OAAQ,2CACRC,KAAM,yCACNC,OAAQ,2CACRC,KAAM,yCACNC,KAAM,yCACNgpB,MAAO,0CACP/oB,SAAU,8CACVC,UAAW,+CACXC,WAAY,gDACZC,WAAY,gDACZC,MAAO,0CACPC,OAAQ,+CA1GK,UA6GhBmnB,GAAe0B,qBAAuB,CACrC7jB,MAAO,CACL7F,KAAM,8CACNC,MAAO,+CACPC,OAAQ,gDACRC,OAAQ,gDACRC,KAAM,8CACNC,OAAQ,gDACRC,KAAM,8CACNC,KAAM,8CACNgpB,MAAO,+CACP/oB,SAAU,mDACVC,UAAW,oDACXC,WAAY,qDACZC,WAAY,qDACZC,MAAO,+CACPC,OAAQ,iDAEVmF,MAAO,CACLhG,KAAM,8CACNC,MAAO,+CACPC,OAAQ,gDACRC,OAAQ,gDACRC,KAAM,8CACNC,OAAQ,gDACRC,KAAM,8CACNC,KAAM,8CACNgpB,MAAO,+CACP/oB,SAAU,mDACVC,UAAW,oDACXC,WAAY,qDACZC,WAAY,qDACZC,MAAO,+CACPC,OAAQ,mDA9IK,IAmJb8oB,IAAa,iBAChB1B,GAAe2B,MAAQ,sBADP,UAEhB3B,GAAe4B,KAAO,qBAFN,UAGhB5B,GAAe6B,MAAQ,sBAHP,UAIhB7B,GAAe8B,KAAO,oBAJN,IAObC,IAAY,iBACf/B,GAAe2B,MAAQ,YADR,UAEf3B,GAAe4B,KAAO,YAFP,UAGf5B,GAAe6B,MAAQ,YAHR,UAIf7B,GAAe8B,KAAO,WAJP,IAOZE,GAAkB,CACtBpkB,MAAO,CACL7F,KAAM,CAAEkqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClCnoB,MAAO,CAAEiqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACnCloB,OAAQ,CAAEgqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpCjoB,OAAQ,CAAE+pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpChoB,KAAM,CAAE8pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC/nB,OAAQ,CAAE6pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpC9nB,KAAM,CAAE4pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC7nB,KAAM,CAAE2pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC5nB,SAAU,CAAE0pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACtC3nB,UAAW,CAAEypB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACvC1nB,WAAY,CAAEwpB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACxCznB,WAAY,CAAEupB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACxCxnB,MAAO,CAAEspB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACnCvnB,OAAQ,CAAEqpB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,IAEtCpiB,MAAO,CACLhG,KAAM,CAAEkqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClCnoB,MAAO,CAAEiqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACnCloB,OAAQ,CAAEgqB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpCjoB,OAAQ,CAAE+pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpChoB,KAAM,CAAE8pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC/nB,OAAQ,CAAE6pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACpC9nB,KAAM,CAAE4pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC7nB,KAAM,CAAE2pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GAClC5nB,SAAU,CAAE0pB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACtC3nB,UAAW,CAAEypB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACvC1nB,WAAY,CAAEwpB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACxCznB,WAAY,CAAEupB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACxCxnB,MAAO,CAAEspB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,GACnCvnB,OAAQ,CAAEqpB,IAAK,EAAGC,OAAQ,EAAG/B,MAAO,KAmGlCgC,GAAuC,CAC3C,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,IACH,EAAG,KAGgBC,GAAAA,WAMnB,WACEC,EACAC,EACAnyB,IAA8B,2JAE9B0L,KAAK0mB,YACHnB,GAAciB,IAAmBjB,GAAcrB,GAAesB,UAChExlB,KAAK3L,WAAawxB,GAAcY,GAChCzmB,KAAK2mB,UAAYT,GAAaO,GAC9BzmB,KAAK1L,eAAiBA,E,sCAGxB,WACEuvB,GAAa7jB,KAAK3L,YAClB+N,OAAOwkB,OAAO5mB,KAAK0mB,YAAY3kB,OAAO2D,QAAQme,IAC9CzhB,OAAOwkB,OAAO5mB,KAAK0mB,YAAYxkB,OAAOwD,QAAQme,M,mBAGhD,SACEgD,EACAryB,EACAC,EACA8F,EACAusB,EACApyB,GAAc,WAEVqyB,EAAQF,EAAevC,MAAQE,GAAe/rB,MAAM6rB,MACpDE,GAAe/rB,MAAM8rB,OAASwC,EAAQF,EAAetC,SACvDwC,EAAQF,EAAetC,OAASC,GAAe/rB,MAAM8rB,QAGvD,IAAMyC,EAAmB,WACvB,IAAMzC,EAASC,GAAe/rB,MAAM8rB,OAASwC,EACvCzC,EAAQE,GAAe/rB,MAAM6rB,MAAQyC,EAC3C,MAAO,CACLt0B,MAAO,CACL8xB,OAAQA,EAAS,KACjBD,MAAOA,EAAQ,MAEjB1xB,KAAM,IAAIyxB,GAASC,EAAOC,KAIxB0C,EAAmB,WACvB,IAAMpuB,EAAY,EAAKxE,WACjBoO,EAAI+hB,GAAe7rB,MAAM8J,EAAIskB,EAC7BrkB,EAAI8hB,GAAe7rB,MAAM+J,EAAIqkB,EAC7BzC,EAAQE,GAAe7rB,MAAM2rB,MAAQyC,EACrCxC,EAASC,GAAe7rB,MAAM4rB,OAASwC,EACvCt0B,EAAQ,CACZ6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,KACT6hB,OAAQA,EAAS,KACjBD,MAAOA,EAAQ,MAEjB,MAAO,CACLzrB,UAAAA,EACA4J,EAAAA,EACAC,EAAAA,EACAjQ,MAAAA,IAIE00B,EAAmB,SAACC,GACxB,IAAMC,EAAyB,GAC/B,GAAI,EAAK/yB,gBAAkB8vB,GAAekD,KACxC,OAAOD,EAUT,IARA,IAAMjC,EAAWZ,GAAe1qB,MAAMsrB,SAAW2B,EAC3CQ,EAAoB,GAAXnC,EACToC,EAAc,CAClBzuB,MAAO,QACP,YAAaqsB,EAAW,KACxB,cAAe,OACf,wBAAkBmC,EAAlB,cAA8BA,EAA9B,eAA2CA,EAA3C,aAEOrtB,EAAO,EAAGA,GAAQ,EAAGA,IAAQ,CACpC,IAAMuI,EACJ2kB,EAAY3kB,EACD,GAAX2iB,GACC1wB,EAAO,EAAI8vB,GAAe7rB,MAAM2rB,OAASyC,EACF,GAAxCvC,GAAe7rB,MAAMksB,iBAAyBkC,GAASryB,EAAO,GAAK,GAC/DgO,EACJ0kB,EAAY1kB,EACD,GAAX0iB,GACCZ,GAAe7rB,MAAMisB,mBAClBlwB,EAAO,GAAKwF,EAAOA,GAAQ,IAC3BsqB,GAAe7rB,MAAM+rB,aACvBqC,EACJM,EAAQ1jB,KAAK,CACXjK,GAAI,OAASQ,EACbH,UAAWusB,GAAYpsB,GACvBzH,OAAO,SACL6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,MACN8kB,KAIT,IAAK,IAAIvtB,EAAO,EAAGA,GAAQ,EAAGA,IAAQ,CACpC,IAAMwI,EACJ2kB,EAAY3kB,EACD,GAAX2iB,GACCZ,GAAe7rB,MAAMksB,kBACnB,KAAOnwB,EAAO,GAAKuF,EAAOA,IACzBuqB,GAAe7rB,MAAM8rB,YACvBsC,EACErkB,EACJ0kB,EAAY1kB,EACD,GAAX0iB,GACC1wB,EAAO8vB,GAAe7rB,MAAM4rB,OAAS,GAAKwC,EACH,GAAxCvC,GAAe7rB,MAAMisB,iBAAyBmC,GAASryB,GAAQ,EAAI,GACrE2yB,EAAQ1jB,KAAK,CACXjK,GAAI,OAASO,EACbF,UAAWiS,OAAO/R,GAClBxH,OAAO,SACL6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,MACN8kB,KAIT,OAAOH,GAGHI,EAAmB,SAACL,GACxB,IAAMC,EAAyB,GAmC/B,OAlCA7yB,EAASmE,MAAM+uB,sBAAsBhiB,SAAQ,SAACjM,GAC5C,IAAMG,EAAQpF,EAASmE,MAAM8N,GAAGhN,GAC1BC,EAAKE,EAAMF,GAAKD,EAAO+J,MACvBmkB,EAAejzB,EAAOkH,EAAahC,EAAMb,OAASa,EAAMb,MACxDqF,EACJxE,EAAMgB,MAAQe,EAAU8B,MAAQ7D,EAAMb,OAAS2B,EAAAA,MAC3C,QACAd,EAAMgB,KACN/B,EAAY,EAAK6tB,YAAYiB,GAAcvpB,GAC3CqE,EACJ2kB,EAAY3kB,GACX+hB,GAAe7rB,MAAMksB,iBACpBL,GAAe7rB,MAAM8rB,YAClB/vB,EAAO+E,EAAOmuB,SAAWnuB,GAAQgJ,GACpCskB,EACErkB,EACJ0kB,EAAY1kB,GACX8hB,GAAe7rB,MAAMmsB,gBACpBN,GAAe7rB,MAAM+rB,aAClBhwB,EAAO+E,EAAOmuB,SAAWnuB,GAAQiJ,GACpCqkB,EACEzC,EAAQE,GAAe5qB,MAAM0qB,MAAQyC,EACrCxC,EAASC,GAAe5qB,MAAM2qB,OAASwC,EAC7CM,EAAQ1jB,KAAK,CACXjK,GAAAA,EACAb,UAAAA,EACApG,MAAO,CACL6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,KACT4hB,MAAOA,EAAQ,KACfC,OAAQA,EAAS,WAIhB8C,GAGHQ,EAAoB,SAACT,GACzB,IAAMC,EAA0B,GAwDhC,OAvDAhkB,GAAOK,IAAIgC,SAAQ,SAACjM,GAClB,IAAMC,EAAKD,EAAO+J,MACVvJ,EAASR,EAATQ,KACAC,EAAST,EAATS,KACFuI,EACJ2kB,EAAY3kB,GACX+hB,GAAe7rB,MAAMgsB,kBACpBH,GAAe7rB,MAAM8rB,YAClB/vB,EAAO+E,EAAOmuB,SAAWnuB,GAAQgJ,GACpCskB,EACErkB,EACJ0kB,EAAY1kB,GACX8hB,GAAe7rB,MAAMisB,iBACpBJ,GAAe7rB,MAAM+rB,aAClBhwB,EAAO+E,EAAOmuB,SAAWnuB,GAAQiJ,GACpCqkB,EACEzC,EAAQE,GAAe7rB,MAAM8rB,WAAasC,EAC1CxC,EAASC,GAAe7rB,MAAM+rB,YAAcqC,EAC5Ct0B,EAAQ,CACZ6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,KACT4hB,MAAOA,EAAQ,KACfC,OAAQA,EAAS,MAEf5qB,EAAkBlH,EAClBgC,GAAYgF,EAAO4K,OAAO5P,EAASwP,MACrCtK,GAAkB,oBACbA,GACA6qB,GAAe7rB,MAAMosB,UAAUG,aAIpCzwB,GACAA,EAASuP,gBAAgBX,IACzB5J,EAAO4K,OAAO5P,EAASuP,QAEvBrK,GAAkB,oBACbA,GACA6qB,GAAe7rB,MAAMosB,UAAUI,eAGlC5qB,aAAmB8I,IAAU9I,EAAQ8J,OAAO5K,KAC9CE,GAAkB,oBACbA,GACA6qB,GAAe7rB,MAAMosB,UAAUC,WAGtCqC,EAAQ1jB,KAAK,CACXjK,GAAAA,EACAO,KAAAA,EACAC,KAAAA,EACAzH,MAAAA,EACAkH,gBAAAA,OAGG0tB,GAGHS,EAAkB,SAAC/uB,EAAciP,GACrC,IAAM2f,EAAejzB,EAAOkH,EAAa7C,GAASA,EAC5CgvB,EAASvD,GAAexc,KAAK2f,GAAcllB,EAAIskB,EAC/CiB,EAASxD,GAAexc,KAAK2f,GAAcjlB,EAAIqkB,EAC/CkB,EAAazD,GAAexc,KAAKsc,MAAQyC,EACzCmB,EAAc1D,GAAexc,KAAKuc,OAASwC,EAC3CoB,EAAa,CACjB,mBAAoB,EAAKxB,UACzBrrB,KAAMysB,EAAS,KACfb,IAAKc,EAAS,KACd1D,MAAO2D,EAAa,KACpB1D,OAAQ2D,EAAc,MAElB1tB,EAA4B,GAC5BF,EAAgC,GAwDtC,OAvDA0D,GAAe0H,SAAQ,SAAC9K,GAatB,IAZA,IAAMiN,EAAQG,EAAKH,MAAMjN,GACnB+N,EAAOwd,GAAgBwB,GAAc/sB,GACrCwtB,EAAa5D,GAAexc,KAAKsc,MAAQ,EAAK3b,EAAK2b,MAAQyC,EAC3DsB,EAAc7D,GAAexc,KAAKuc,OAAS,EAAKwC,EAChDuB,EAAQF,EAAYzf,EAAK0d,OACzBkC,EAAQF,EAAa1f,EAAKyd,IAC1BoC,EAAahE,GAAe5qB,MAAM0qB,MAAQyC,EAC1C0B,EAAcjE,GAAe5qB,MAAM2qB,OAASwC,EAC5C2B,EACJ5lB,KAAK6lB,IAAIP,EAAYI,EAAa3gB,EAAO,IAAc,EAARA,GAC3C7E,GACHolB,EAAYI,EAAuB,EAAVE,GAAe5lB,KAAK6lB,IAAI9gB,EAAQ,EAAG,GACtD1C,EAAI0C,EAAQ,EAAG1C,GAAK,EAAGA,GAAK,EAAG,CACtC,IAAMzL,EAAKkB,EAAOuK,EACZtM,EAAY,EAAK6tB,YAAYiB,GAAc/sB,GAC3C6H,EAAI6lB,EAAQI,EAAU1lB,EAAKmC,EAC3BzC,EAAI6lB,EACV/tB,EAAOmJ,KAAK,CACVjK,GAAAA,EACAb,UAAAA,EACApG,MAAO,CACL6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,KACT4hB,MAAOkE,EAAa,KACpBjE,OAAQkE,EAAc,QAI5B,IAAM/uB,EAAKkB,EACLnI,EAAQ,CACZ6I,KAAMgtB,EAAQ,KACdpB,IAAKqB,EAAQ,KACbjE,MAAO8D,EAAY,KACnB7D,OAAQ8D,EAAa,MAEnB1uB,EAAkBlH,EAEpB8H,GACAA,aAAmBwF,IACnBxF,EAAQxB,QAAUA,GAClBwB,EAAQK,OAASA,IAEjBjB,GAAkB,oBACbA,GACA6qB,GAAexc,KAAK+c,UAAUC,WAGrC1qB,EAASqJ,KAAK,CACZjK,GAAAA,EACAkB,KAAAA,EACAnI,MAAAA,EACAkH,gBAAAA,OAGG,CACLlH,MAAO01B,EACP3tB,OAAAA,EACAF,SAAAA,IAIEsuB,EAAuB,SAC3BxB,EACAhjB,GAEA,IAAKA,EACH,OAAO,KAET,IAAMrL,EAAQrE,EAAOkH,EAAawI,EAAKrL,OAASqL,EAAKrL,MAC/CU,EAAS/E,EAAO0P,EAAKH,GAAG2jB,SAAWxjB,EAAKH,GACxCrK,EAAQ,IAAImG,GAAMhH,EAAOqL,EAAKhG,WAC9BgM,EAAWxQ,EAAMwQ,WACjBye,EAAcjvB,EAAMyQ,aACpBpP,EAAmB,EAAKyrB,YAAY3tB,GAAOqR,EAASxP,MACpDO,EAAsB,EAAKurB,YAAY3tB,GAAO8vB,EAAYjuB,MAC1D6H,EACJ2kB,EAAY3kB,GACX+hB,GAAe7rB,MAAMgsB,kBACpBH,GAAe7rB,MAAM8rB,YACL,IAAbhrB,EAAOgJ,EAAU,EAAiB,IAAbhJ,EAAOgJ,EAAU,EAAIhJ,EAAOgJ,EAAI,KACxDskB,EACErkB,EACJ0kB,EAAY1kB,GACX8hB,GAAe7rB,MAAMisB,iBACpBJ,GAAe7rB,MAAM+rB,YAAcjrB,EAAOiJ,GAC1CqkB,EACEzC,EAA0C,EAAlCE,GAAe7rB,MAAM8rB,WAAiBsC,EAC9CxC,EAASC,GAAe7rB,MAAM+rB,YAAcqC,EAC5Ct0B,EAAQ,CACZ6I,KAAMmH,EAAI,KACVykB,IAAKxkB,EAAI,KACT4hB,MAAOA,EAAQ,KACfC,OAAQA,EAAS,KACjB,YAAaA,EAAS,EAAI,MAE5B,MAAO,CACLtpB,iBAAAA,EACAE,oBAAAA,EACA1I,MAAAA,IAIEq2B,EAAkB,WACtB,IAAM/vB,EAAQvE,EAASuE,MACjB4uB,EAAejzB,EAAOkH,EAAa7C,GAASA,EAC5CgwB,EAAc,EACpB,MAAO,CACLt2B,MAAO,CACL6I,KACEkpB,GAAeppB,KAAKusB,GAAcllB,EAAIskB,EAAQgC,EAAc,KAC9D7B,IAAK1C,GAAeppB,KAAKusB,GAAcjlB,EAAIqkB,EAAQgC,EAAc,KACjEzE,MAAOE,GAAeppB,KAAKkpB,MAAQyC,EAAQgC,EAAc,KACzDxE,OAAQC,GAAeppB,KAAKmpB,OAASwC,EAAQgC,EAAc,KAC3D,YAAavE,GAAeppB,KAAKgqB,SAAW2B,EAAQ,KACpD,gBAAiBvC,GAAeppB,KAAKmpB,OAASwC,EAAQ,GAAM,KAC5D,eAAgBgC,EAAc,KAC9B,eAAgB,WAKhBC,EAAwB,SAACjwB,GAC7B,IAAM4uB,EAAejzB,EAAOkH,EAAa7C,GAASA,EAClD,MAAO,CACLtG,MAAO,CACL6I,KAAMkpB,GAAea,WAAWsC,GAAcllB,EAAIskB,EAAQ,KAC1DG,IAAK1C,GAAea,WAAWsC,GAAcjlB,EAAIqkB,EAAQ,KACzDzC,MAAOE,GAAea,WAAWf,MAAQyC,EAAQ,KACjDxC,OAAQC,GAAea,WAAWd,OAASwC,EAAQ,KACnD,YAAavC,GAAea,WAAWD,SAAW2B,EAAQ,QAK1DkC,EAAmB,SAAClwB,GACxB,IAAM4uB,EAAejzB,EAAOkH,EAAa7C,GAASA,EAClD,MAAO,CACLtG,MAAO,CACL6I,KAAMkpB,GAAec,MAAMqC,GAAcllB,EAAIskB,EAAQ,KACrDG,IAAK1C,GAAec,MAAMqC,GAAcjlB,EAAIqkB,EAAQ,KACpDzC,MAAOE,GAAec,MAAMhB,MAAQyC,EAAQ,KAC5CxC,OAAQC,GAAec,MAAMf,OAASwC,EAAQ,KAC9C,YAAavC,GAAec,MAAMF,SAAW2B,EAAQ,QAKrDmC,EAAqB,WACzB,MAAO,CACL5tB,KAAM,CACJ7I,MAAO,CACL6I,KAAMkpB,GAAenpB,QAAQC,KAAKmH,EAAIskB,EAAQ,KAC9CG,IAAK1C,GAAenpB,QAAQC,KAAKoH,EAAIqkB,EAAQ,KAC7CzC,MAAOE,GAAenpB,QAAQC,KAAKgpB,MAAQyC,EAAQ,KACnDxC,OAAQC,GAAenpB,QAAQC,KAAKipB,OAASwC,EAAQ,KACrD,YAAavC,GAAenpB,QAAQC,KAAK8pB,SAAW2B,EAAQ,OAGhErrB,MAAO,CACLjJ,MAAO,CACL6I,KAAMkpB,GAAenpB,QAAQK,MAAM+G,EAAIskB,EAAQ,KAC/CG,IAAK1C,GAAenpB,QAAQK,MAAMgH,EAAIqkB,EAAQ,KAC9CzC,MAAOE,GAAenpB,QAAQK,MAAM4oB,MAAQyC,EAAQ,KACpDxC,OAAQC,GAAenpB,QAAQK,MAAM6oB,OAASwC,EAAQ,KACtD,YAAavC,GAAenpB,QAAQK,MAAM0pB,SAAW2B,EAAQ,SAM/DoC,EAAcnC,IACdI,EAAcH,IACdmC,EAAcjC,EAAiBC,GAC/BiC,EAAc5B,EAAiBL,GAC/BkC,EAAezB,EAAkBT,GACjCmC,EAAkBzB,EACtBptB,EAAAA,MACAlG,EAASwT,KAAKtN,EAAAA,QAEV8uB,EAAkB1B,EACtBptB,EAAAA,MACAlG,EAASwT,KAAKtN,EAAAA,QAEV+uB,EAAkBb,EACtBxB,EACAN,GAEI4C,EAAaZ,IACba,EAAwBX,EAAsBtuB,EAAAA,OAC9CkvB,EAAwBZ,EAAsBtuB,EAAAA,OAC9CmvB,EAAmBZ,EAAiBvuB,EAAAA,OACpCovB,EAAmBb,EAAiBvuB,EAAAA,OACpCqvB,EAAgBb,IACtB,MAAO,CACLzwB,MAAO0wB,EACPxwB,MAAOyuB,EACPvtB,OAAQuvB,EACRxvB,MAAOyvB,EACP5vB,OAAQ6vB,EACRjvB,UAAWkvB,EACX1uB,UAAW2uB,EACXzuB,UAAW0uB,EACXruB,KAAMsuB,EACN50B,gBAAiB60B,EACjB50B,gBAAiB60B,EACjB1wB,WAAY2wB,EACZxwB,WAAYywB,EACZzuB,QAAS0uB,O,EArcMxD,GCncrB,IAAeyD,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,YACNC,MAAO,CACL1D,eAAgB,CACd5rB,KAAMoR,OACNme,UAAU,GAEZ1D,eAAgB,CACd7rB,KAAMoR,OACNme,UAAU,GAEZ71B,eAAgB,CACdsG,KAAMoR,OACNme,UAAU,GAEZ51B,QAAS,CACPqG,KAAMypB,GACN8F,UAAU,GAEZ31B,SAAU,CACRoG,KAAMwH,OACN+nB,UAAU,GAEZ11B,SAAU,CACRmG,KAAMwH,OACN+nB,UAAU,EACVC,QAAS,MAEX11B,KAAM,CACJkG,KAAMyvB,QACNF,UAAU,GAEZt1B,UAAW,CACT+F,KAAMyvB,QACNF,UAAU,GAEZv1B,UAAW,CACTgG,KAAMyvB,QACNF,UAAU,GAEZr1B,gBAAiB,CACf8F,KAAMoR,OACNme,UAAU,EACVC,QAAS,MAEXr1B,gBAAiB,CACf6F,KAAMoR,OACNme,UAAU,EACVC,QAAS,MAEXp1B,kBAAmB,CACjB4F,KAAM2N,OACN4hB,UAAU,EACVC,aAAS3uB,GAEXxG,mBAAoB,CAClB2F,KAAM2N,OACN4hB,UAAU,EACVC,aAAS3uB,GAEXvG,kBAAmB,CACjB0F,KAAM2N,OACN4hB,UAAU,EACVC,aAAS3uB,GAEXtG,mBAAoB,CAClByF,KAAM2N,OACN4hB,UAAU,EACVC,aAAS3uB,IAGb6uB,MAAO,CAAC,SAAU,OAAQ,QAC1BC,MAxE6B,SAwEvBL,EAAOM,GACX,IAAMC,GAAQC,EAAAA,EAAAA,IAAS,CACrBnwB,QAAS,KACTowB,aAAc,OAGVC,EAAa,WACjBH,EAAMlwB,QAAU,KAChBkwB,EAAME,aAAe,OAGvBE,EAAAA,EAAAA,IACE,CAAC,kBAAMX,EAAM11B,UAAU,kBAAM01B,EAAMr1B,WAAW,kBAAMq1B,EAAMt1B,aAC1D,WACEg2B,OAIJ,IAAMlyB,EAAa,WACjBkyB,KAGIE,EAAgB,SACpBC,EACAvkB,EACAzN,GAEA,IAAMiyB,EAAcP,EAAMlwB,QAE1B,GADAqwB,MAEEG,aAAsB1nB,IACtB2nB,aAAuB3nB,IACvB0nB,EAAW1mB,OAAO2mB,OAKlBD,aAAsBhrB,IACtBirB,aAAuBjrB,IACvBgrB,EAAW1mB,OAAO2mB,IAHpB,CAOA,GAAIA,EAAa,CACf,IAAMC,EAAWD,EACXE,EACJH,aAAsB1nB,GAAS0nB,EAAaA,EAAWhyB,MACzD,GACEmxB,EAAMr1B,WACNq1B,EAAM11B,SAASgW,eAAeygB,EAAUC,GAQxC,YANAV,EAAQW,KAAK,OAAQ,CACnB/mB,KAAM,CACJJ,KAAMgnB,EACN/mB,GAAIinB,KAKV,GAAIhB,EAAMt1B,WAAam2B,aAAsB1nB,GAAQ,CACnD,IAAM+nB,EACJJ,aAAuB3nB,GAAS2nB,EAAcA,EAAYpwB,KACtDywB,EAASN,EACT3mB,EAAO8lB,EAAM11B,SAAS+U,WAAW6hB,EAAUC,GACjD,IAAKjnB,EACH,OAEF,IAAMknB,EAASpB,EAAM11B,SAAS0V,YAAY9F,GACpCmnB,EAAOrB,EAAM11B,SAAS0V,YAAY9F,EAAKoF,eAC7C,GAAI8hB,GAAUC,EAEZ,YADAd,EAAME,aAAevmB,GAGvB,GAAIknB,EAEF,YADAd,EAAQW,KAAK,OAAQ/mB,GAGvB,GAAImnB,EAEF,YADAf,EAAQW,KAAK,OAAQ/mB,EAAKoF,iBAK1B0gB,EAAMt1B,YAAcs1B,EAAMr1B,WAAc2R,IAGzC0jB,EAAMr1B,WAAakE,IAAUmxB,EAAM11B,SAASuE,SAGjD0xB,EAAMlwB,QAAUwwB,KAGZ/wB,EAAc,SAACuoB,EAActoB,EAAcC,GAC/CqoB,EAAMiJ,kBACNjJ,EAAMkJ,iBACN,IAAMhyB,EAAS,IAAI4J,GAAOpJ,EAAMC,GAC1BN,EAAQswB,EAAM11B,SAASmE,MAAM8N,GAAGhN,GAChC+M,GAAS5M,EACfkxB,EAAcrxB,EAAQ+M,EAAT,OAAgB5M,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAOb,QAGhC0B,EAAY,SAAC8nB,EAAcxpB,EAAc6B,GAC7C2nB,EAAMiJ,kBACNjJ,EAAMkJ,iBACN,IAAMjlB,EAAmD,IAA3C0jB,EAAM11B,SAASwT,KAAKjP,GAAO8O,MAAMjN,GAC/CkwB,EAAc,IAAI/qB,GAAMhH,EAAO6B,GAAO4L,EAAOzN,IAGzCqB,EAAe,SAACmoB,EAActoB,EAAcC,GAChDqoB,EAAMiJ,kBACNjJ,EAAMkJ,iBACNb,IACA,IAAMnxB,EAAS,IAAI4J,GAAOpJ,EAAMC,GAC5BgwB,EAAMr1B,WAAaq1B,EAAM11B,SAASmE,MAAM8N,GAAGhN,IAC7C+wB,EAAQW,KAAK,OAAQ,CAAEzgB,OAAQjR,KAI7BuB,EAAe,SAACunB,GACpBA,EAAMiJ,kBACNjJ,EAAMkJ,iBACN,IAAMrnB,EAAOqmB,EAAME,aACnBC,IACIxmB,GAAQ8lB,EAAM11B,SAAS0V,YAAY9F,EAAKoF,gBAC1CghB,EAAQW,KAAK,OAAQ/mB,EAAKoF,gBAIxBtO,EAAkB,SAACqnB,GACvBA,EAAMiJ,kBACNjJ,EAAMkJ,iBACN,IAAMrnB,EAAOqmB,EAAME,aACnBC,IACIxmB,GAAQ8lB,EAAM11B,SAAS0V,YAAY9F,IACrComB,EAAQW,KAAK,OAAQ/mB,IAInBsnB,GAAgBC,EAAAA,EAAAA,KAAS,WAC7B,IAAMC,EAAU,IAAIrF,GAClB2D,EAAM1D,eACN0D,EAAMzD,eACNyD,EAAM51B,gBAGR,OADAs3B,EAAQC,UACDD,KAGHpzB,GAASmzB,EAAAA,EAAAA,KAAS,WACtB,IAAMG,EAAS,IAAIzH,GAAS,GAAI,IAC1B7rB,EAASkzB,EAAc1d,MAAM+d,MACjC7B,EAAM31B,QAAQ+V,OAAOwhB,GACrB5B,EAAM11B,SACN01B,EAAMz1B,SACNg2B,EAAMlwB,QACNkwB,EAAME,aACNT,EAAMx1B,MAGR,OADA81B,EAAQW,KAAK,SAAU3yB,EAAOC,MAAM7F,KAAK4V,IAAIsjB,IACtCtzB,KAGHwzB,EAAa,SAACC,EAAiBC,GACnC,OAAID,EACKvgB,GAAe5I,KAAKqpB,KAAKF,EAAS,WACpBxwB,IAAZywB,EACF,GAAKA,EAEP,WAGHE,EAAe,SAACH,EAAiBC,GACrC,IAAKD,IAAWC,EACd,MAAO,SAET,IAAMG,GAAOJ,GAAU,GAAK,KAAOC,GAAW,GAC9C,OAAIG,GAAO,EACF,SACEA,GAAO,GACT,UAEF,UAGHlzB,GAAsBwyB,EAAAA,EAAAA,KAAS,WACnC,OAAOK,EAAW9B,EAAMl1B,kBAAmBk1B,EAAMj1B,uBAG7CgE,GAA0B0yB,EAAAA,EAAAA,KAAS,WACvC,OAAOS,EAAalC,EAAMl1B,kBAAmBk1B,EAAMj1B,uBAG/CqE,GAAsBqyB,EAAAA,EAAAA,KAAS,WACnC,OAAOK,EAAW9B,EAAMh1B,kBAAmBg1B,EAAM/0B,uBAG7CiE,GAA0BuyB,EAAAA,EAAAA,KAAS,WACvC,OAAOS,EAAalC,EAAMh1B,kBAAmBg1B,EAAM/0B,uBAGrD,MAAO,CACLuD,WAAAA,EACAsB,YAAAA,EACAS,UAAAA,EACAL,aAAAA,EACAY,aAAAA,EACAE,gBAAAA,EACA1C,OAAAA,EACAW,oBAAAA,EACAF,wBAAAA,EACAK,oBAAAA,EACAF,wBAAAA,EACAsB,MAAAA,M,WC5SN,MAAM4xB,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,UCTaC,I,wBAAW,cACXC,GAAgB,mBAEvB,SAAUC,GAAYC,GAC1B,OAAOA,EAAIna,WAAWia,IAGlB,SAAUG,KACd,IAAMC,EAAMC,KAAKD,MACXE,EAAOhqB,KAAK6I,MAAM7I,KAAKiqB,SAAWxkB,OAAOykB,kBAAkB5Z,SAAS,IAC1E,OAAOoZ,GAAgB,GAAH,OAAMI,EAAN,YAAaE,GCP5B,IAAMG,GAAY,aAEZC,GAAa,cAGbC,GAAU,UACVC,GAAkB,kBAClBC,GAAU,UAoBjB,SAAUC,GACdrmB,GAEA,GAAKA,EAGL,YAAqBxL,IAAjBwL,EAAO+G,MACF/G,EAAO+G,WAEOvS,IAAnBwL,EAAOmjB,QACW,WAAhBnjB,EAAOrM,MAAwC,YAAnBqM,EAAOmjB,QAC9B,GAEFnjB,EAAOmjB,aAJhB,EAoBI,SAAUmD,GACd30B,GAEA,IAAM40B,EAA2Bna,KAAKoa,MAAMpa,KAAKC,UAAU1a,IAG3D,OAFA40B,EAAOd,IAAMC,KACba,EAAOvD,MAAQ,QACRuD,EAGH,SAAUE,GACdF,EACAG,GAEAH,EAAOd,IAAMiB,EAAMjB,IACnBc,EAAOvD,KAAO0D,EAAM1D,KACpB7nB,OAAOC,KAAKsrB,EAAMlP,SAAS/Y,SAAQ,SAACukB,GAC7BuD,EAAO/O,QAAQwL,KAGpBuD,EAAO/O,QAAQwL,GAAMjc,MAAQ2f,EAAMlP,QAAQwL,GAAMjc,UAI9C,IClEK4f,GCVAC,GAMAC,GAUAC,GCtBAC,GCQPC,GJ0EQC,GAAb,WAGE,WAAYC,GAEV,IAFuB,8CACvBnuB,KAAKouB,QAAU,GACXD,EAAM,CACR,IAAMv1B,EAAMya,KAAKoa,MAAMU,GACnBv1B,EAAIw1B,mBAAmBhsB,SACzBpC,KAAKouB,QAAUx1B,EAAIw1B,UAR3B,wCAaE,SAAU1B,GACR,QAAS1sB,KAAKouB,QAAQ1B,KAd1B,uBAiBE,SAAUc,GACRxtB,KAAKouB,QAAQZ,EAAOd,KAAOc,IAlB/B,0BAqBE,SAAaA,GACX,QAAKxtB,KAAKouB,QAAQZ,EAAOd,OAGzB1sB,KAAKouB,QAAQZ,EAAOd,KAAOc,GACpB,KA1BX,0BA6BE,SAAad,GACX,QAAK1sB,KAAKouB,QAAQ1B,YAGX1sB,KAAKouB,QAAQ1B,IACb,KAlCX,uBAqCE,SAAUA,GACR,OAAO1sB,KAAKouB,QAAQ1B,KAtCxB,sBAyCE,WACE,OAAOtqB,OAAOwkB,OAAO5mB,KAAKouB,SAASC,MAAK,SAACC,EAAG/uB,GAC1C,OAAI+uB,EAAErE,OAAS1qB,EAAE0qB,KACRqE,EAAErE,KAAO1qB,EAAE0qB,KAAO,GAAK,EAE5BqE,EAAEC,cAAgBhvB,EAAEgvB,YACfD,EAAEC,YAAchvB,EAAEgvB,YAAc,GAAK,EAEvCD,EAAE5B,IAAMntB,EAAEmtB,IAAM,GAAK,OAjDlC,gBAqDE,WACE,OAAOrZ,KAAKC,UAAUtT,QAtD1B,0BAyDE,WACE,OAAOqT,KAAKC,UAAUtT,UAAMvE,EAAW,OA1D3C,KCnDM,SAAU+yB,KACd,MAAO,CACLC,cAAe,CACbC,cAAc,EACd1f,OAAQ,IAEV2f,YAAa,CACXD,cAAc,EACd1f,OAAQ,KAEV4f,gBAAiB,CACfC,WAAY,GAEdC,gBAAiBlB,GAAgBmB,QC6B/B,SAAUC,GAAkBtQ,GAChC,MAAO,CACL1tB,MAAO68B,GAAMxoB,SACbjR,WAAY8vB,GAAesB,SAC3BnxB,WAAY8vB,GAAe2B,MAC3BxxB,eAAgB8vB,GAAe/e,SAC/B4pB,YAAa,GACbC,YAAa,GACbC,WAAY,IACZC,iBAAkBrB,GAAiBsB,UACnC16B,eAAe,EACf26B,IAAKxB,GAAIyB,YACT7Q,WAAYA,GAAc,OAC1B8Q,qBAAsB,IACtBC,uBAAwB,EACxBC,uBAAwB,GACxBC,uBAAwB,GACxBC,uBAAwB,GACxBC,6BAA6B,EAC7BC,yBAAyB,EACzBC,cAAc,EACdC,cAAc,GAIZ,SAAUC,GAAmBC,GACjC,OAAIA,EAAQjB,YAAc,GAAKiB,EAAQjB,YAAc,IAC5C,IAAItc,MAAM,+BAEfud,EAAQhB,YAAc,GAAKgB,EAAQhB,YAAc,IAC5C,IAAIvc,MAAM,gCAEfud,EAAQf,WAAa,KAAOe,EAAQf,WAAa,IAC5C,IAAIxc,MAAM,mCAEfud,EAAQV,sBAAwB,EAC3B,IAAI7c,MAAM,6BAGjBud,EAAQT,uBAAyB,GACjCS,EAAQT,uBAAyB,IAE1B,IAAI9c,MAAM,2BAGjBud,EAAQR,uBAAyB,GACjCQ,EAAQR,uBAAyB,IAE1B,IAAI/c,MAAM,4BAGjBud,EAAQP,uBAAyB,GACjCO,EAAQP,uBAAyB,IAE1B,IAAIhd,MAAM,4BAGjBud,EAAQN,uBAAyB,GACjCM,EAAQN,uBAAyB,IAE1B,IAAIjd,MAAM,4BAEfud,EAAQT,wBAA0BS,EAAQR,uBACrC,IAAI/c,MAAM,2BAEfud,EAAQR,wBAA0BQ,EAAQP,uBACrC,IAAIhd,MAAM,2BAEfud,EAAQP,wBAA0BO,EAAQN,uBACrC,IAAIjd,MAAM,gCADnB,EGpHI,SAAUwd,KACd,MAAO,CACLpuB,MAAO,CACLkoB,KAAM,IACNyC,IAAKA,IAEPxqB,MAAO,CACL+nB,KAAM,IACNyC,IAAKA,IAEP/W,UAAW,CACTya,YAAa,EACblE,QAAS,GACTmE,UAAW,GAEbC,qBAAqB,EACrBC,cAAc,GAIZ,SAAUC,GACdC,GAEA,OACwC,IAAtCA,EAAY9a,UAAUya,aACY,IAAlCK,EAAY9a,UAAUuW,QAEf,IAAIvZ,MAAM,qBAGiB,IAAlC8d,EAAY9a,UAAUuW,SACc,IAApCuE,EAAY9a,UAAU0a,UAEf,IAAI1d,MAAM,+BAJnB,EChDI,SAAU+d,KACd,MAAO,ILST,SAAY9C,GACVA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,UAAAA,SACAA,EAAAA,aAAAA,aAJF,CAAYA,KAAAA,GAAe,KCV3B,SAAYC,GACVA,EAAAA,YAAAA,WACAA,EAAAA,kBAAAA,iBACAA,EAAAA,QAAAA,OAHF,CAAYA,KAAAA,GAAK,KAMjB,SAAYC,GACVA,EAAAA,eAAAA,aACAA,EAAAA,WAAAA,UACAA,EAAAA,UAAAA,SACAA,EAAAA,MAAAA,KACAA,EAAAA,SAAAA,QACAA,EAAAA,oBAAAA,kBACAA,EAAAA,aAAAA,YAPF,CAAYA,KAAAA,GAAG,KAUf,SAAYC,GACVA,EAAAA,OAAAA,MACAA,EAAAA,aAAAA,WAFF,CAAYA,KAAAA,GAAgB,KCtB5B,SAAYC,GACVA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,QAHF,CAAYA,KAAAA,GAAQ,KCQpB,SAAKC,GACHA,EAAAA,eAAAA,aACAA,EAAAA,oBAAAA,kBACAA,EAAAA,oBAAAA,kBACAA,EAAAA,gBAAAA,cAJF,CAAKA,KAAAA,GAAW,KAQT,IAAM0C,GAAiB,CACtBC,yBADsB,WACE,8JACrB,IADqB,8CAG9BC,gBAJ4B,aAOtBC,qBAPsB,WAOF,0IAClB,oBADkB,8CAGpBC,WAVsB,WAUZ,0IACR,oBADQ,8CAGVC,qBAbsB,WAaF,0IAClB,oBADkB,8CAGpBC,WAhBsB,WAgBZ,0IACR,oBADQ,8CAGVC,qBAnBsB,WAmBF,0IAClB,oBADkB,8CAGpBC,eAtBsB,WAsBR,8IACZhD,EAAOiD,aAAaC,QAAQpD,GAAYqD,aACzCnD,EAFa,yCAGT9a,KAAKC,UAAU0b,OAHN,gCAKX3b,KAAKC,WAAL,oBACF0b,MACA3b,KAAKoa,MAAMU,MAPE,8CAUdoD,eAhCsB,SAgCPpD,GAAY,qIAC/BiD,aAAaI,QAAQvD,GAAYqD,YAAanD,GADf,8CAG3BsD,oBAnCsB,WAmCH,8IACjBtD,EAAOiD,aAAaC,QAAQpD,GAAYyD,kBACzCvD,EAFkB,yCAGd9a,KAAKC,UAAUod,OAHD,gCAKhBrd,KAAKC,WAAL,oBACFod,MACArd,KAAKoa,MAAMU,MAPO,8CAUnBwD,oBA7CsB,SA6CFxD,GAAY,qIACpCiD,aAAaI,QAAQvD,GAAYyD,iBAAkBvD,GADf,8CAGhCyD,oBAhDsB,WAgDH,8IACjBzD,EAAOiD,aAAaC,QAAQpD,GAAY4D,kBACzC1D,EAFkB,yCAGd9a,KAAKC,UAAUkb,OAHD,gCAKhBnb,KAAKC,WAAL,oBACFkb,MACAnb,KAAKoa,MAAMU,MAPO,8CAUnB2D,oBA1DsB,SA0DF3D,GAAY,qIACpCiD,aAAaI,QAAQvD,GAAY4D,iBAAkB1D,GADf,8CAGhC4D,gBA7DsB,WA6DP,8IACb5D,EAAOiD,aAAaC,QAAQpD,GAAY+D,cACzC7D,EAFc,yCAGV9a,KAAKC,UAAU6c,OAHL,gCAKZ9c,KAAKC,WAAL,oBACF6c,MACA9c,KAAKoa,MAAMU,MAPG,8CAUf8D,gBAvEsB,SAuEN9D,GAAY,qIAChCiD,aAAaI,QAAQvD,GAAY+D,aAAc7D,GADf,8CAG5B+D,qBA1EsB,WA0EF,+JACjB,IAAIhE,IAAoBC,MADP,8CAGpBgE,qBA7EsB,WA6EF,4KAGpBC,0BAhFsB,WAgFG,0IACvB,oBADuB,8CAGzBC,iBAnFsB,WAmFN,0IACd,oBADc,8CAGhBC,iBAtFsB,WAsFN,4KAGhBC,UAzFsB,WAyFb,0IACP,oBADO,8CAGTC,MA5FsB,WA4FjB,4KAGLC,YA/FsB,WA+FX,4KAGXC,aAlGsB,WAkGV,4KAGZC,cArGsB,WAqGT,4KAGbC,QAxGsB,WAwGf,4KAGPC,YA3GsB,WA2GX,4KAGXC,QA9GsB,WA8Gf,4KAGbC,IAjH4B,SAiHxBC,EAAiBC,GACnB,OAAQD,GACN,KAAKhF,GAASkF,KACZC,QAAQJ,IAAIE,GACZ,MACF,KAAKjF,GAASoF,KACZD,QAAQE,KAAKJ,GACb,MACF,KAAKjF,GAASsF,MACZH,QAAQ/Q,MAAM6Q,GACd,QAGNM,YA9H4B,aAiI5BC,YAjI4B,aAoI5BC,cApI4B,aAuI5BC,UAvI4B,aA0I5BC,gBA1I4B,cGoH9B,SAASC,KACP,OAAOC,OAGF,IAAMC,GAAiBF,KAAkBG,kBAAoBpD,GAE9DqD,IAAG,oBACJF,IADI,IAED3C,eAFG,WAEW,iJACX9d,KADW,SACMygB,GAAO3C,iBADb,iDACN1D,MADM,+DAGpB8D,eALS,SAKMrB,GACb,OAAO4D,GAAOvC,eAAele,KAAKC,UAAU4c,KAExCuB,oBARG,WAQgB,iJAChBpe,KADgB,SACCygB,GAAOrC,sBADR,iDACXhE,MADW,+DAGzBkE,oBAXS,SAWWzB,GAClB,OAAO4D,GAAOnC,oBAAoBte,KAAKC,UAAU4c,KAE7C0B,oBAdG,WAcgB,iJAChBve,KADgB,SACCygB,GAAOlC,sBADR,iDACXnE,MADW,+DAGzBqE,oBAjBS,SAiBW5B,GAClB,OAAO4D,GAAOhC,oBAAoBze,KAAKC,UAAU4c,KAE7C6B,gBApBG,WAoBY,iJACZ1e,KADY,SACKygB,GAAO/B,kBADZ,iDACPtE,MADO,+DAGrBwE,gBAvBS,SAuBO/B,GACd,OAAO4D,GAAO7B,gBAAgB5e,KAAKC,UAAU4c,KAEzCgC,qBA1BG,WA0BiB,iJACbhE,GADa,SACW4F,GAAO5B,uBADlB,0GAG1BC,qBA7BS,SA6BY8B,GACnB,OAAOH,GAAO3B,qBAAqB8B,EAAS9F,OAExCkE,iBAhCG,SAgCcvO,GAAY,iJAC1BzQ,KAD0B,SACTygB,GAAOzB,iBAAiBvO,GADf,iDACrB2J,MADqB,+DAGnC8E,UAnCS,SAmCCrC,GACR,OAAO4D,GAAOvB,UAAUlf,KAAKC,UAAU4c,KAEzCsC,MAtCS,SAuCP0B,EACAliB,EACAye,EACA0D,EACAC,GAEA,OAAON,GAAOtB,MACZ0B,EACAliB,EACAqB,KAAKC,UAAUmd,GACf0D,EACAC,IAGJ3B,YArDS,SAsDPyB,EACAliB,EACAye,EACA0D,EACAC,GAEA,OAAON,GAAOrB,YACZyB,EACAliB,EACAqB,KAAKC,UAAUmd,GACf0D,EACAC,MAKN,MAEM,SAAUC,KACd,QAAST,KAAkBG,iB,ICtJzBO,G,sBAzDJ,SAASC,GAAK9V,GAMZ,IAAM7jB,GAAc,OAAP6jB,QAAO,IAAPA,OAAA,EAAAA,EAAS7jB,OAAQ,OACxB45B,GAAmB,OAAP/V,QAAO,IAAPA,OAAA,EAAAA,EAAS+V,YAAa,IAClCC,GAAgB,OAAPhW,QAAO,IAAPA,OAAA,EAAAA,EAASgW,SAAU,EAC5BjK,EAAU,IAAIkK,aACdC,EAAanK,EAAQoK,mBACrBC,EAAOrK,EAAQsK,aAcrB,OAbAH,EAAWI,QAAQF,GACnBA,EAAKE,QAAQvK,EAAQwK,aACrBL,EAAW/5B,KAAOA,EAClB+5B,EAAWH,UAAUxmB,MAAQwmB,EAC7BK,EAAKA,KAAK7mB,MAAiB,KAATymB,EAClBE,EAAWM,QAAU,WACnBJ,EAAKK,WAAW1K,EAAQwK,aACxBL,EAAWO,WAAWL,IAExBF,EAAWxmB,MAAMqc,EAAQ2K,aACzB,OAAI1W,QAAJ,IAAIA,GAAAA,EAASvB,MACXyX,EAAW9+B,KAAK20B,EAAQ2K,YAAc1W,EAAQvB,MAEzC,CACLrnB,KAAM,WACA,OAAC4oB,QAAD,IAACA,GAAAA,EAASvB,MACZyX,EAAW9+B,SAMb,SAAUu/B,GAAU3W,GAIxB8V,GAAK,CACH35B,KAAM,OACN45B,UAAW/V,EAAQ+V,UACnBtX,KAAM,GACNuX,OAAQhW,EAAQgW,SAId,SAAUY,GAAc5W,GAI5B,OAAO8V,GAAK,CACV35B,KAAM,OACN45B,UAAW/V,EAAQ+V,UACnBC,OAAQhW,EAAQgW,SAMd,SAAUa,GAAcb,GAC5B,IAAMvX,EAAO2P,KAAKD,MAClB,KAAI0H,IAAqBpX,EAAOoX,GAAoB,KAApD,CAGA,IAAMiB,EAAQ,IAAIC,MAAM,mBACxBD,EAAMd,OAAkB,IAATA,EACfc,EAAME,OACNnB,GAAoBpX,G,ICrEVwY,G,OAMN,SAAUC,GAAuBC,GACrC,OAAQA,GACN,KAAKF,GAAcG,aACjB,MAAO,KACT,KAAKH,GAAcI,aACjB,MAAO,KACT,KAAKJ,GAAcK,WACjB,MAAO,MAoCb,SAASC,GAASxhC,EAA6ByhC,GAC7C,IACI3xB,EAFqD,EACnDpF,EAAI1K,EAAS2b,QAEf/E,EAAS,GAH4C,WAItC6qB,GAJsC,IAIzD,2BAAuB,KAAZl6B,EAAY,QACfqI,EAAOlF,EAAEg3B,iBAAiBn6B,GAChC,IAAKqI,EACH,MAEFlF,EAAEiS,OAAO/M,EAAM,CACb6F,kBAAkB,IAEpBmB,GAAUhH,EAAKqL,eAAenL,GAC9BA,EAAOF,GAbgD,8BAezD,OAAOgH,GAhET,SAAYsqB,GACVA,EAAAA,gBAAAA,cACAA,EAAAA,gBAAAA,cACAA,EAAAA,cAAAA,cAHF,CAAYA,KAAAA,GAAa,KAmElB,IClEKS,GDkECC,GAAb,WASE,WACSlC,EACAjK,EACAluB,IAAY,4UAFZ,KAAAm4B,UAAAA,EACA,KAAAjK,KAAAA,EACA,KAAAluB,KAAAA,EAEPiE,KAAKq2B,SAAW,GAdpB,4CAiBE,WACE,IADiB,EACXjrB,EAAyB,GACzBkrB,EAAa,IAAIC,IACjBC,EAAU,IAAID,IAHH,WAIKv2B,KAAKq2B,UAJV,IAIjB,2BAAqC,KAA1BI,EAA0B,QAC7BryB,EAAOqyB,EAAQR,GAAKQ,EAAQR,GAAG,QAAKx6B,EACrC66B,EAAWI,IAAID,EAAQE,UAAaH,EAAQE,IAAItyB,KACnDgH,EAAOzH,KAAK8yB,GACZH,EAAW9tB,IAAIiuB,EAAQE,SACvBH,EAAQhuB,IAAIpE,KATC,8BAYjB,OAAOgH,EAAOijB,MAAK,SAACC,EAAG/uB,GACrB,OAAQ+uB,EAAEqI,SAAW,IAAMp3B,EAAEo3B,SAAW,QA9B9C,oBAkCE,SAAO56B,EAAc66B,EAAqBC,GACxC,IAAMriC,EAAWsU,GAASpE,UAAU3I,GAC9B06B,EAAwB,CAC5BjiC,SAAUuH,GAiCZ,QA/BqBN,IAAjBm7B,EAAOE,QACTL,EAAQK,MAAQF,EAAOE,YAEDr7B,IAApBm7B,EAAOG,WACTN,EAAQO,eAAiBJ,EAAOG,eAEZt7B,IAAlBm7B,EAAO3K,SACTwK,EAAQxK,OAAS2K,EAAO3K,aAELxwB,IAAjBm7B,EAAOK,QACTj3B,KAAKi3B,MAAQL,EAAOK,OAElBL,EAAOX,KACTQ,EAAQR,GAAKW,EAAOX,GACpBQ,EAAQlyB,KAAO/P,EAAWwhC,GAASxhC,EAAUoiC,EAAOX,IAAM,SAErCx6B,IAAnBm7B,EAAOM,UACTT,EAAQE,QAAUC,EAAOM,cAEJz7B,IAAnBm7B,EAAOO,UACTV,EAAQW,MAAQR,EAAOO,cAEA17B,IAArBm7B,EAAOS,YACTZ,EAAQY,UAAYT,EAAOS,gBAEH57B,IAAtBm7B,EAAOU,aACTb,EAAQc,WAAaX,EAAOU,iBAEJ77B,IAAtBm7B,EAAOY,aACTf,EAAQgB,WAAab,EAAOY,iBAEN/7B,IAApBm7B,EAAOc,SAAwB,CACjC13B,KAAK23B,YAAcf,EAAOc,SAC1B,IAAMtzB,EAAO5P,GAAYA,EAAS0hC,iBAAiBU,EAAOc,UACtDtzB,IACFpE,KAAK43B,gBAAkBxzB,EAAKqL,uBAGDhU,IAA3Bm7B,EAAOiB,kBACT73B,KAAK83B,SAAWlB,EAAOiB,gBAAkB,UAExBp8B,IAAfm7B,EAAOmB,MACT/3B,KAAK+3B,IAAMnB,EAAOmB,KAEhBnB,EAAOoB,SACTvB,EAAQlyB,KAAOqyB,EAAOoB,QAEY,IAAhC51B,OAAOC,KAAKo0B,GAAS5xB,cAGFpJ,IAAjBm7B,EAAOK,QACTR,EAAQQ,MAAQL,EAAOK,OAEzBj3B,KAAKq2B,SAAStlB,QAAQ0lB,IAExBz2B,KAAK62B,WAAL,OAAkBA,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAYpnB,qBA9FlC,KA2GawoB,GAAb,WAOE,gNACEj4B,KAAKk4B,YAAc,GARvB,wCAWE,WACE,OAAOl4B,KAAKm4B,eAZhB,uBAeE,WACE,OAAOn4B,KAAKo4B,eAhBhB,sBAmBE,WACE,OAAOp4B,KAAKq4B,cApBhB,oBAuBE,SACEnE,EACA1/B,EACAohC,EACA3L,EACAqO,EACAzB,GAAiB,WAEjB72B,KAAKk4B,YAAYv0B,KAAK,CACpBuwB,UAAAA,EACAn4B,KAAMvH,EAASuH,KACf65B,OAAAA,EACA3L,KAAAA,EACAqO,KAAAA,EACAzB,WAAAA,IAEG72B,KAAKu4B,gBACRv4B,KAAKu4B,cAAgB1E,OAAO2E,YAAW,WACrC,EAAKC,YACJ,QA1CT,qBA8CU,WAAO,iBACQz4B,KAAKk4B,aADb,IACb,2BAAuC,KAA5BtB,EAA4B,QACrC52B,KAAK04B,QAAQ9B,IAFF,8BAIb52B,KAAKk4B,YAAc,GACnBl4B,KAAKu4B,mBAAgB98B,IAnDzB,qBAsDU,SAAQm7B,GACd,OAAQA,EAAOhB,QACb,KAAKF,GAAcG,aAEd71B,KAAKm4B,cACNn4B,KAAKm4B,aAAajE,YAAc0C,EAAO1C,WACvCl0B,KAAKm4B,aAAap8B,OAAS66B,EAAO76B,OAElCiE,KAAKm4B,aAAe,IAAI/B,GACtBQ,EAAO1C,UACP0C,EAAO3M,KACP2M,EAAO76B,OAGXiE,KAAKm4B,aAAavB,OAAOA,EAAO76B,KAAM66B,EAAO0B,KAAM1B,EAAOC,YAC1D72B,KAAKq4B,iBAAc58B,EACnB,MACF,KAAKi6B,GAAcI,aAEd91B,KAAKo4B,cACNp4B,KAAKo4B,aAAalE,YAAc0C,EAAO1C,WACvCl0B,KAAKo4B,aAAar8B,OAAS66B,EAAO76B,OAElCiE,KAAKo4B,aAAe,IAAIhC,GACtBQ,EAAO1C,UACP0C,EAAO3M,KACP2M,EAAO76B,OAGXiE,KAAKo4B,aAAaxB,OAAOA,EAAO76B,KAAM66B,EAAO0B,KAAM1B,EAAOC,YAC1D72B,KAAKq4B,iBAAc58B,EACnB,MACF,KAAKi6B,GAAcK,WAEd/1B,KAAKq4B,aACNr4B,KAAKq4B,YAAYnE,YAAc0C,EAAO1C,WACtCl0B,KAAKq4B,YAAYt8B,OAAS66B,EAAO76B,OAEjCiE,KAAKq4B,YAAc,IAAIjC,GACrBQ,EAAO1C,UACP0C,EAAO3M,KACP2M,EAAO76B,OAGXiE,KAAKq4B,YAAYzB,OAAOA,EAAO76B,KAAM66B,EAAO0B,MAC5Ct4B,KAAKm4B,kBAAe18B,EACpBuE,KAAKo4B,kBAAe38B,EACpB,WArGR,KErKak9B,GAAa,IAEbC,GAAb,WAGE,WAAYzK,GACV,IADuB,iDACnBA,EAAM,CACR,IAAM0K,EAAMxlB,KAAKoa,MAAMU,GACvBnuB,KAAK84B,WAAaD,EAAIC,YAN5B,0CAUE,SAAY//B,EAAc68B,EAAuBwB,GAI/C,OAHKp3B,KAAK84B,aACR94B,KAAK84B,WAAa,IAEZlD,GACN,KAAKF,GAAcG,aACjB71B,KAAK84B,WAAWpD,GAAcG,cAAgBuB,EAC9C,MACF,KAAK1B,GAAcI,aACjB91B,KAAK84B,WAAWpD,GAAcI,eAAiBsB,EAC/C,MACF,KAAK1B,GAAcK,WACjB/1B,KAAK84B,WAAWpD,GAAcK,YAC5Bh9B,IAAU2B,EAAAA,MAAc08B,GAASA,EACnC,SAxBR,2BA4BE,SACEr+B,EACA68B,EACAmD,QAEwBt9B,IAApBs9B,EAAQ7B,SAA6C,IAApB6B,EAAQ7B,UAGzC6B,EAAQ5B,QACVn3B,KAAKg5B,YAAYjgC,EAAO68B,EAAQmD,EAAQ5B,SAC/B4B,EAAQ1B,WACjBr3B,KAAKg5B,YACHjgC,EACA68B,EACAmD,EAAQ1B,WAAa,EAAIsB,IAAcA,OA1C/C,uBA+CE,WACE,OAAOtlB,KAAKC,UAAUtT,UAhD1B,KAoDM,SAAUi5B,GAAmB/I,GACjC,OACErkB,GAAaqkB,EAAQE,aACrB,IACApkB,OAAOkkB,EAAQhE,SAASjgB,SAAS,EAAG,MDlExC,SAAYkqB,GACVA,EAAAA,OAAAA,MACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,QAHF,CAAYA,KAAAA,GAAU,KECf,IAAM+C,GAAb,oHAGE,WACE,OAAO,IAJX,2EAOE,WACErmB,EACA4d,EACA0D,EACAC,EACAtsB,GALF,iFAOE9H,KAAKm5B,cAAgBrxB,EAPvB,gDAPF,6IAiBE,kIAjBF,6HAqBE,kIArBF,iIAyBE,kIAzBF,8HA6BE,8FACE9H,KAAKm5B,mBAAgB19B,EADvB,gDA7BF,6EAiCE,SAAO2I,GACL,IAAM+0B,EAAgBn5B,KAAKm5B,cAC3Bn5B,KAAKm5B,mBAAgB19B,EACjB09B,GACFA,EAAc/jC,OAAOgP,KArC3B,oBAyCE,WACE,IAAM+0B,EAAgBn5B,KAAKm5B,cAC3Bn5B,KAAKm5B,mBAAgB19B,EACjB09B,GACFA,EAAcljC,eA7CpB,KAkDamjC,GAAc,IAAIF,GC5ClBG,GAAb,WASE,WAAYnJ,IAAyB,6OACnClwB,KAAKkwB,QAAUA,EACflwB,KAAKk0B,UAAY,EACjBl0B,KAAKs5B,UAAW,EAZpB,uFAeE,8GACyBtF,GAAAA,UAAch0B,KAAKkwB,SAD5C,OACElwB,KAAKk0B,UADP,OAEEqF,GAAWv5B,KAAKk0B,WAAal0B,KAF/B,gDAfF,+EAoBE,WACE,OAAO,IArBX,2EAwBE,WACE6S,EACA4d,EACA0D,EACAC,EACAtsB,GALF,oFAOE9H,KAAKm5B,cAAgBrxB,EACrB9H,KAAKgS,IAAMa,EAAOb,IAClBhS,KAAKxL,SAAWqe,EAAOre,SAAS2b,SAC5BnQ,KAAKs5B,UAAYt5B,KAAKw5B,SAAWx5B,KAAKgS,IAV5C,gBAWIgiB,GAAAA,aAAiBh0B,KAAKk0B,WAX1B,sCAaUF,GAAAA,MACJh0B,KAAKk0B,UACLl0B,KAAKgS,IACLye,EACA0D,EACAC,GAlBN,OAqBEp0B,KAAKs5B,UAAW,EAChBt5B,KAAKw5B,YAAS/9B,EAtBhB,iDAxBF,6IAiDE,WACEoX,EACA4d,EACA0D,EACAC,GAJF,0FAMOp0B,KAAKw5B,QAAWx5B,KAAKw5B,OAAOjnB,WAAWM,EAAOb,KANrD,oDASQynB,EAAgBnM,GACpBttB,KAAKkwB,QAAQzR,QAAQwO,KAED,SAAlBwM,EAZN,wDAeEz5B,KAAKs5B,UAAW,EAflB,SAgBQtF,GAAAA,YACJh0B,KAAKk0B,UACLl0B,KAAKw5B,OACL/I,EACA0D,EACAC,GArBJ,gDAjDF,6IA0EE,WAAoBvhB,GAApB,wFACE7S,KAAKm5B,mBAAgB19B,EACrBuE,KAAKgS,IAAMa,EAAOb,IAFpB,SAGQgiB,GAAAA,cAAkBh0B,KAAKk0B,UAAWrhB,EAAOb,KAHjD,gDA1EF,8HAgFE,8GACQgiB,GAAAA,QAAYh0B,KAAKk0B,WADzB,gDAhFF,iIAoFE,WAAe9oB,GAAf,iGACQ4oB,GAAAA,YAAgBh0B,KAAKk0B,UAAW9oB,GADxC,gDApFF,+HAwFE,qGACEpL,KAAKm5B,mBAAgB19B,EADvB,SAEQu4B,GAAAA,QAAYh0B,KAAKk0B,WAFzB,cAGSqF,GAAWv5B,KAAKk0B,WAHzB,gDAxFF,iFA8FE,SAAWliB,EAAajW,EAAcy9B,GACpC,IAAML,EAAgBn5B,KAAKm5B,cAE3B,GADAn5B,KAAKm5B,mBAAgB19B,EAChB09B,GAAkBn5B,KAAKxL,UAGxBwd,IAAQhS,KAAKgS,IAGjB,GAAa,WAATjW,EAIJ,GAAa,QAATA,EAAJ,CAIA,IAAMqI,EAAOpE,KAAKxL,SAAS0hC,iBAAiBn6B,GAC5C,IAAKqI,EAGH,OAFA+0B,EAAcO,QAAQ,uBAAyB39B,QAC/Co9B,EAAcljC,WAGhB+J,KAAKw5B,OAASA,GAAU,GAAJ,OAAOxnB,EAAP,YAAcjW,EAAd,YAAsBy9B,GAC1CL,EAAc/jC,OAAOgP,QAVnB+0B,EAAcQ,aAJdR,EAAcljC,eAxGpB,KA0HasjC,GAAiD,GAExD,SAAUK,GACd1F,EACAliB,EACAjW,EACAy9B,GAEA,IAAMK,EAASN,GAAWrF,GACrB2F,GAGLA,EAAOC,WAAW9nB,EAAKjW,EAAMy9B,GCxHxB,IA2BFO,GA3BQC,GAAsC,CAC3CjO,MAD2C,SACrCkO,GAA4B,8IAClCA,EAAcvN,MAAQA,GADY,yCAE7B0M,IAF6B,WAG3B1M,GAAgBuN,EAAcvN,OAAQuN,EAAcjoB,IAHzB,uBAI9B6nB,EAAS,IAAIR,GAAUY,EAAcjoB,KAJP,SAK9B6nB,EAAOK,SALuB,gCAM7BL,GAN6B,aAQhC,IAAIlnB,MAAM,mBAAqBsnB,EAAcvN,KARb,iDA0B1C,SAAKqN,GACHA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,WAAAA,UACAA,EAAAA,SAAAA,SAJF,CAAKA,KAAAA,GAAS,KAOP,IAAMI,GAAb,WAgBE,WAAYC,EAA8BC,IAAsB,qeAC9Dr6B,KAAKyqB,MAAQsP,GAAUO,KACvBt6B,KAAKq6B,SAAWA,EAChBr6B,KAAKo6B,cAAgBA,EACrBp6B,KAAKu6B,WAAa,CAAEtO,OAAQ,EAAGC,QAAS,GACxClsB,KAAKw6B,WAAa,CAAEvO,OAAQ,EAAGC,QAAS,GACxClsB,KAAKy6B,YAAc,EACnBz6B,KAAK06B,WAAa,IAAI7N,KACtB7sB,KAAK26B,WAAa,EAClB36B,KAAK46B,WAAa,EAClB56B,KAAK66B,SAAW1K,KAChBnwB,KAAK86B,YAAc,EACnB96B,KAAK6S,OAAS,IAAI7C,GA5BtB,wCA+BE,WACE,OAAOhQ,KAAKu6B,WAAWtO,SAhC3B,wBAmCE,WACE,OAAOjsB,KAAKu6B,WAAWrO,UApC3B,uBAuCE,WACE,OAAOlsB,KAAKw6B,WAAWvO,SAxC3B,wBA2CE,WACE,OAAOjsB,KAAKw6B,WAAWtO,UA5C3B,qBA+CE,WACE,OAAOlsB,KAAK46B,aAhDhB,mBAmDE,WACE,OAAO56B,KAAK66B,WApDhB,yEAuDE,WACE3K,EACArd,GAFF,+FAIM7S,KAAKyqB,QAAUsP,GAAUO,KAJ/B,sBAKU3nB,MACJ,qCANN,cASE3S,KAAKu6B,WAAWtO,OAAyC,IAAhCiE,EAAQva,UAAUya,YAC3CpwB,KAAKu6B,WAAWrO,QAAUgE,EAAQva,UAAUuW,QAC5ClsB,KAAKw6B,WAAWvO,OAAyC,IAAhCiE,EAAQva,UAAUya,YAC3CpwB,KAAKw6B,WAAWtO,QAAUgE,EAAQva,UAAUuW,QAC5ClsB,KAAK66B,SAAW3K,EAChBlwB,KAAK6S,OAASA,EAdhB,mBAgB6B7S,KAAKo6B,cAAcrO,MAAMmE,EAAQnuB,OAhB9D,eAgBI/B,KAAK+6B,YAhBT,iBAiB6B/6B,KAAKo6B,cAAcrO,MAAMmE,EAAQhuB,OAjB9D,QAiBIlC,KAAKg7B,YAjBT,uFAoBYh7B,KAAKi7B,eApBjB,8DAsBMj7B,KAAKq6B,SAASX,QAAd,MAtBN,2BA0BE15B,KAAKyqB,MAAQsP,GAAUmB,OACvB1C,YAAW,kBAAM,EAAKppB,UA3BxB,kEAvDF,8EAqFU,WAAI,WACV,GAAIpP,KAAKyqB,QAAUsP,GAAUmB,OAA7B,CAMA,IAAMniC,EAAQiH,KAAK6S,OAAOre,SAASuE,MACnCiH,KAAKm7B,WAAWpiC,GAChB,IAAM8gC,EAAS75B,KAAKo7B,UAAUriC,GACxBsiC,EAAer7B,KAAKo7B,UAAUx/B,EAAa7C,IACjD,GAAK8gC,GAAWwB,EAAhB,CAMA,IAAMC,EAAUt7B,KAAKu7B,eACrB1B,EACG2B,YACCx7B,KAAK6S,OACL7S,KAAKkwB,QACLlwB,KAAKm0B,YACLn0B,KAAKo0B,YACL,CACEh/B,OAAQ,SAACgP,GAAD,OAAgB,EAAKhP,OAAOkmC,EAASl3B,IAC7CnO,SAAU,kBAAM,EAAKA,SAASqlC,IAC9B3B,MAAO,kBAAM,EAAKA,MAAM2B,IACxB5B,QAAS,SAAC9b,GAAD,OAAO,EAAKyc,SAASX,QAAQ9b,MAGzC6d,OAAM,SAAC7d,GACN,EAAKyc,SAASX,QACZ,IAAI/mB,MAAM,0BAA4BiL,OAG5Cyd,EACGK,YACC17B,KAAK6S,OACL7S,KAAKkwB,QACLlwB,KAAKm0B,YACLn0B,KAAKo0B,aAENqH,OAAM,SAAC7d,GACN,EAAKyc,SAASX,QACZ,IAAI/mB,MAAM,gCAAkCiL,YAjChD5d,KAAKq6B,SAASX,QACZ,gEAXF15B,KAAKq6B,SAASX,QACZ,oCAAsC15B,KAAKyqB,SAxFnD,oBAuIU,SAAO6Q,EAAiBl3B,GAC9B,GAAIk3B,IAAYt7B,KAAK86B,YAIrB,GAAI96B,KAAKyqB,QAAUsP,GAAUmB,OAA7B,CAOA,IAAKl7B,KAAK6S,OAAOre,SAAS0V,YAAY9F,GAGpC,OAFApE,KAAKq6B,SAASX,QAAQ,QAAUt1B,EAAKqL,uBACrCzP,KAAK27B,QAAQ/tB,GAAYgO,WAG3B5b,KAAK47B,cAAc57B,KAAK6S,OAAOre,SAASuE,OACxCiH,KAAK6S,OAAS7S,KAAKq6B,SAASjlC,OAAOgP,GACnC,IAAMy3B,EAAY77B,KAAK6S,OAAOipB,eAC9B,GAAID,EACF,OAAIA,IAAc77B,KAAK6S,OAAOre,SAASuE,WACrCiH,KAAK27B,QAAQ/tB,GAAYgO,gBAGzB5b,KAAK27B,QAAQ/tB,GAAY8N,UAGlB1b,KAAK6S,OAAOf,WACrB9R,KAAK27B,QAAQ/tB,GAAYwN,iBAG3Bpb,KAAKoP,YA1BH4kB,GAAAA,IACEhG,GAASoF,KACT,iCANFY,GAAAA,IAAQhG,GAASoF,KAAM,6BAzI7B,sBA0KU,SAASkI,GACXA,IAAYt7B,KAAK86B,YAIjB96B,KAAKyqB,QAAUsP,GAAUmB,OAI7Bl7B,KAAK27B,QAAQ/tB,GAAY1X,QAHvB89B,GAAAA,IAAQhG,GAASoF,KAAM,2BAJvBY,GAAAA,IAAQhG,GAASoF,KAAM,4BA5K7B,mBAsLU,SAAMkI,GACRA,IAAYt7B,KAAK86B,YAOjB96B,KAAKyqB,QAAUsP,GAAUmB,OAO7Bl7B,KAAK27B,QAAQ/tB,GAAYkO,kBANvBkY,GAAAA,IACEhG,GAASoF,KACT,6BATFY,GAAAA,IACEhG,GAASoF,KACT,8BA1LR,uBAwMU,WACFpzB,KAAKyqB,QAAUsP,GAAUmB,OAM7Bl7B,KAAK27B,QAAQ/tB,GAAY4N,SALvBxb,KAAKq6B,SAASX,QACZ,yCAA2C15B,KAAKyqB,SA3MxD,wBAkNU,SAAW1xB,GAAY,WAC7BiH,KAAK+7B,YACL,IAAMC,EAAch8B,KAAKi8B,eAAeljC,GACxCiH,KAAK06B,WAAa,IAAI7N,KACtB7sB,KAAK26B,WAAaqB,EAAY/P,OAC9B+P,EAAY9P,QAAUlsB,KAAKkwB,QAAQva,UAAUuW,QAC7ClsB,KAAK46B,WAAa,EAClB56B,KAAKy6B,YAAc5G,OAAOqI,aAAY,WACpC,IAAMvB,EAAaqB,EAAY/P,OACzBkQ,EAAcH,EAAY9P,QAC1BU,EAAM,IAAIC,KAChB,EAAK+N,WAAahO,EAAIwP,UAAY,EAAK1B,WAAW0B,UAClD,IAAMnQ,EAAS,EAAK0O,WAAa,EAAKC,WAUtC,GATI3O,GAAU,EACZ+P,EAAY/P,OAASA,GAErB+P,EAAY/P,OAAS,EACrB+P,EAAY9P,QAAUppB,KAAK6lB,IACzB7lB,KAAKqpB,KAAK,EAAK+D,QAAQva,UAAUuW,QAAUD,EAAS,KACpD,IAGuB,IAAvB+P,EAAY/P,QAAwC,IAAxB+P,EAAY9P,QAA5C,CAIA,IAAMmQ,EAAWv5B,KAAKqpB,KAAKwO,EAAa,KAClCzd,EAAOpa,KAAKqpB,KAAK6P,EAAY/P,OAAS,KACtCC,EAAU8P,EAAY9P,QACf,IAAThP,IAAeyd,EAAa,GAAKzO,IAAYiQ,GAC3CjQ,GAAW,EACb,EAAKmO,SAASiC,mBACLpQ,GAAW,IAAMA,EAAU,KAAO,IAC3C,EAAKmO,SAASkC,cAEN,EAAKrM,QAAQva,UAAUuW,SAAWhP,IAASmf,IACjDnf,GAAQ,EACV,EAAKmd,SAASiC,mBACLpf,GAAQ,IAAe,KAATA,GAAwB,KAATA,GAAwB,KAATA,IACrD,EAAKmd,SAASkC,oBAhBhB,EAAK/tB,QAAQzV,KAmBd,OA5PP,qBA+PU,SAAQA,GAAY,WAC1BiH,KAAK+7B,YACL,IAAMlC,EAAS75B,KAAKo7B,UAAUriC,GAC1B8gC,GAAUA,EAAO2C,aAAex8B,KAAKkwB,QAAQI,oBAC/CuJ,EAAOhkC,OAAO4lC,OAAM,SAAC7d,GACnB,EAAKyc,SAASX,QACZ,IAAI/mB,MAAM,0BAA4BiL,OAK5C5d,KAAKy8B,cA1QT,qBA6QE,SAAQna,GAAyB,WAC3BtiB,KAAKyqB,QAAUsP,GAAUmB,QAAUl7B,KAAKyqB,QAAUsP,GAAU2C,UAGhE18B,KAAKyqB,MAAQsP,GAAU4C,MACvB38B,KAAK+7B,YACL/7B,KAAK48B,aAAata,GACfua,MAAK,WACJ,EAAKpS,MAAQsP,GAAUO,QAExBmB,OAAM,SAAC7d,GACN,EAAKyc,SAASX,QAAQ9b,GACtB,EAAK6M,MAAQsP,GAAU2C,cAzR/B,4EA6RU,WAAmBpa,GAAnB,2FACFA,EADE,uBAEEvpB,EAAQiH,KAAK6S,OAAOre,SAASuE,MAF/B,SAGEiH,KAAK88B,gBAAgB/jC,EAAOupB,GAH9B,uBAKAtiB,KAAKi7B,eALL,OAMNj7B,KAAKq6B,SAAS0C,UAAUza,GANlB,gDA7RV,yIAsSU,WACNvpB,EACAupB,GAFM,6FAIFtiB,KAAK+6B,YAJH,mBAKEiC,EAAah9B,KAAKi9B,cAAclkC,EAAO2B,EAAAA,MAAa4nB,IACtD0a,EANA,gCAOIh9B,KAAK+6B,YAAYmC,SAASF,GAP9B,WAUFh9B,KAAKg7B,YAVH,oBAWEgC,EAAah9B,KAAKi9B,cAAclkC,EAAO2B,EAAAA,MAAa4nB,IACtD0a,EAZA,kCAaIh9B,KAAKg7B,YAAYkC,SAASF,GAb9B,iDAtSV,uFAwTU,SACNG,EACAC,EACA9a,GAEA,OAAQA,GACN,KAAK1U,GAAY8N,SACjB,KAAK9N,GAAYkO,iBACf,OAAOqhB,GAAgBC,EAAcjH,GAAWkH,IAAMlH,GAAWmH,KACnE,KAAK1vB,GAAY1X,OACjB,KAAK0X,GAAY0N,KACjB,KAAK1N,GAAY4N,QACjB,KAAK5N,GAAYgO,UACf,OAAOuhB,GAAgBC,EAAcjH,GAAWmH,KAAOnH,GAAWkH,IACpE,KAAKzvB,GAAYsN,KACjB,KAAKtN,GAAYwN,gBACf,OAAO+a,GAAWjb,KAEtB,OAAO,OA1UX,uBA6UU,WACNlb,KAAKq6B,SAASkD,aACVv9B,KAAKy6B,cACP5G,OAAO2J,cAAcx9B,KAAKy6B,aAC1Bz6B,KAAKy6B,YAAc,KAjVzB,2BAqVU,SAAc1hC,GACpBiH,KAAKi8B,eAAeljC,GAAOkzB,QAA6C,IAAnCjsB,KAAKkwB,QAAQva,UAAU0a,YAtVhE,4EAyVU,kGACFrwB,KAAK+6B,YADH,gCAEE/6B,KAAK+6B,YAAY0C,QAFnB,OAGJz9B,KAAK+6B,iBAAct/B,EAHf,WAKFuE,KAAKg7B,YALH,gCAMEh7B,KAAKg7B,YAAYyC,QANnB,OAOJz9B,KAAKg7B,iBAAcv/B,EAPf,gDAzVV,gFAoWU,SAAU1C,GAChB,OAAQA,GACN,KAAK2B,EAAAA,MACH,OAAOsF,KAAK+6B,YACd,KAAKrgC,EAAAA,MACH,OAAOsF,KAAKg7B,eAzWpB,4BA6WU,SAAejiC,GACrB,OAAQA,GACN,KAAK2B,EAAAA,MACH,OAAOsF,KAAKu6B,WACd,KAAK7/B,EAAAA,MACH,OAAOsF,KAAKw6B,cAlXpB,0BAsXU,WAEN,OADAx6B,KAAK86B,aAAe,EACb96B,KAAK86B,gBAxXhB,KCxDM,SAAU4C,GAAsBztB,GACpC,IAAIzL,EAAMm5B,GAAc1tB,GAClByF,EACJzF,EAAS2O,oBAAoBrT,GAAkBmB,QAC/CuD,EAAS2O,oBAAoBrT,GAAkBiB,aAC/CyD,EAAS2O,oBAAoBrT,GAAkB4B,YAC/C8C,EAAS2O,oBAAoBrT,GAAkB2B,UAC/C+C,EAAS2O,oBAAoBrT,GAAkBsB,QAC/CoD,EAAS2O,oBAAoBrT,GAAkBuB,YAC/CmD,EAAS2O,oBAAoBrT,GAAkB6B,QAC7CsI,IACFlR,GAAO,IAAMkR,GAEf,IAAM3T,EACJkO,EAAS2O,oBAAoBrT,GAAkBY,aAC/C8D,EAAS2O,oBAAoBrT,GAAkByB,kBAC7CjL,IACFyC,GAAO,IAAMzC,GAEf,IAAMG,EACJ+N,EAAS2O,oBAAoBrT,GAAkBa,aAC/C6D,EAAS2O,oBAAoBrT,GAAkB0B,kBAIjD,OAHI/K,IACFsC,GAAO,IAAMtC,GAERsC,EAAM,OAGf,SAASm5B,GAAc1tB,GACrB,IAAMsF,EAAOtF,EAAS2O,oBAAoBrT,GAAkBgB,MAC5D,OAAIgJ,EACKA,EACJ2C,OACAkH,WAAW,IAAK,KAChBA,WAAW,IAAK,IAChBA,WAAW,IAAK,KAEd,IAAIyN,MACR+Q,wBAAmBniC,EAAW,CAC7BoiC,KAAM,UACNC,MAAO,UACPC,IAAK,YAEN3e,WAAW,IAAK,IC7Cd,ICAK4e,GDACC,GAAb,WAGE,0DACEj+B,KAAK6H,MAAQ,EAJjB,oCAOE,WACE,OAAsB,IAAf7H,KAAK6H,QARhB,oBAWE,WACE7H,KAAK6H,OAAS,IAZlB,qBAeE,WACE7H,KAAK6H,OAAS,MAhBlB,MCAA,SAAYm2B,GACVA,EAAAA,UAAAA,SACAA,EAAAA,gBAAAA,cACAA,EAAAA,oBAAAA,kBACAA,EAAAA,QAAAA,OACAA,EAAAA,eAAAA,aACAA,EAAAA,YAAAA,WACAA,EAAAA,mBAAAA,iBACAA,EAAAA,YAAAA,WACAA,EAAAA,mBAAAA,iBACAA,EAAAA,6BAAAA,yBACAA,EAAAA,aAAAA,aAXF,CAAYA,KAAAA,GAAQ,KCAb,IAAME,GAAb,WAGE,2DACEl+B,KAAKm+B,OAAS,GAJlB,oCAOE,WACE,OAAOn+B,KAAKm+B,OAAO,KARvB,sBAWE,WACE,OAA8B,IAAvBn+B,KAAKm+B,OAAOt5B,SAZvB,qBAeE,SAAQouB,GACNjzB,KAAKm+B,OAAOx6B,KAAKsvB,KAhBrB,qBAmBE,WACEjzB,KAAKm+B,OAAOtzB,YApBhB,KCAauzB,GAAb,WAGE,2DACEp+B,KAAKm+B,OAAS,GAJlB,mCAOE,WACE,OAAOn+B,KAAKm+B,SARhB,oBAWE,WACE,OAA8B,IAAvBn+B,KAAKm+B,OAAOt5B,SAZvB,kBAeE,SAAK+Y,GACCA,aAAajL,MACf3S,KAAKm+B,OAAOx6B,KAAKia,GAEjB5d,KAAKm+B,OAAOx6B,KAAK,IAAIgP,MAAM,GAAKiL,MAnBtC,mBAuBE,WACE5d,KAAKm+B,OAAS,OAxBlB,KCAM,SAAUR,GAAcpoB,GAC5B,OAAQA,GAAQ,IAAIsX,MAAQ+Q,wBAAmBniC,EAAW,CACxDoiC,KAAM,UACNC,MAAO,UACPC,IAAK,YAIH,SAAUM,GAAkB9oB,GAChC,OAAQA,GAAQ,IAAIsX,MAAQyR,wBAAmB7iC,EAAW,CACxDoiC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLQ,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,QAAQ,ICdN,SAAUC,GAAiBvH,GAC/B,OAAIA,GAAS,KACJ,OACEA,GAAS,IACX,OACEA,GAAS,IACX,OACEA,GAAS,IACX,OACEA,IAAU,IACZ,KACEA,IAAU,IACZ,OACEA,IAAU,IACZ,OACEA,IAAU,KACZ,OAEA,OAIL,SAAUwH,GACdxH,EACA1lC,GAEA,OAAO,KAAO,EAAIoR,KAAK+7B,KAAKzH,EAAQ1lC,EAAW89B,uBAG3C,SAAUsP,GACdC,EACAC,EACAttC,GAEA,IAAMutC,EACJL,GAAkBG,EAAQrtC,GAC1BktC,GAAkBI,EAAOttC,GAC3B,OAAIutC,GAAQvtC,EAAWk+B,uBACd,MACEqP,GAAQvtC,EAAWi+B,uBACrB,KACEsP,GAAQvtC,EAAWg+B,uBACrB,MACEuP,GAAQvtC,EAAW+9B,uBACrB,KAEF,KCjBF,IAAMyP,GAAb,WAcE,WAAYhP,EAA0BpoB,GACpC,IAD4D,mYACvDooB,EAAQle,IACX,MAAM,IAAIW,MAAM,mBAElB3S,KAAK66B,SAAW3K,EAChBlwB,KAAK8H,QAAUA,EACf9H,KAAKjH,MAAQ2B,EAAAA,MApBjB,oCAuBE,WACE,OAAOsF,KAAK66B,WAxBhB,qEA2BE,yHACQ76B,KAAKm/B,YAAYn/B,KAAKkwB,QAAQle,KADtC,OAEEwmB,YAAW,kBAAM,EAAKppB,UAFxB,gDA3BF,oIAgCU,WAAkB8gB,GAAlB,uGACAlwB,KAAKo/B,cADL,cAEAC,EAAa,IAAIhG,GAAUnJ,GAF3B,SAGAmP,EAAWnF,SAHX,OAINl6B,KAAKq/B,WAAaA,EAJZ,gDAhCV,8EAuCU,WACNr/B,KAAK8H,QAAQw3B,WACbt/B,KAAKy9B,UAzCT,mBA4CE,WAAK,WACHz9B,KAAKu/B,aACLv/B,KAAKo/B,cAAc3D,OAAM,SAAC7d,GACxB,EAAK9V,QAAQ4xB,QAAQ9b,QA/C3B,kBAmDU,WAAI,WAgBV,GAfA5d,KAAKu/B,aACLv/B,KAAKw/B,WAELx/B,KAAKy/B,gBAAahkC,EAClBuE,KAAK0/B,UAAY1/B,KAAKo3B,MACtBp3B,KAAKo3B,WAAQ37B,EACbuE,KAAKuO,UAAO9S,EACZuE,KAAK2/B,OAAS3/B,KAAKi2B,GACnBj2B,KAAKi2B,QAAKx6B,EACVuE,KAAKgP,YACavT,IAAhBuE,KAAKgP,OACDhP,KAAKgP,OAAS,EACdhP,KAAKkwB,QAAQzB,cAAcC,aAC3B1uB,KAAKkwB,QAAQzB,cAAczf,OAAS,EACpC,EAEJhP,KAAKkwB,QAAQvB,YAAYD,cACzB1uB,KAAKgP,QAAUhP,KAAKkwB,QAAQvB,YAAY3f,OAExChP,KAAK4/B,aAJP,CAQA,IAAM/sB,EAAS7S,KAAK8H,QAAQ+3B,OAAO7/B,KAAKgP,QACnC6D,IAIAA,EAAOhB,QAAQzC,MAAUyD,EAAOhB,QAAQzN,gBAAgBL,KAI7D/D,KAAKy/B,WACH5sB,EAAOhB,QAAQzN,gBAAgBL,GAAO8O,EAAOhB,QAAQzN,UAAO3I,EAC9DuE,KAAKjH,MAAQ6C,EAAaiX,EAAOre,SAASuE,OAC1CiH,KAAKy6B,YAAc5G,OAAO2E,YACxB,kBAAM,EAAKppB,SAC+B,IAA1CpP,KAAKkwB,QAAQtB,gBAAgBC,YAE/B7uB,KAAK8/B,QAAQjtB,GAAQ4oB,OAAM,SAAC7d,GAC1B,EAAK9V,QAAQ4xB,QAAQ9b,OAfrB5d,KAAK4/B,YA7EX,wBAgGU,WACF5/B,KAAKy6B,cACPsF,aAAa//B,KAAKy6B,aAClBz6B,KAAKy6B,iBAAch/B,KAnGzB,sBAuGU,gBACcA,IAAhBuE,KAAKgP,QAGThP,KAAK8H,QAAQ03B,SAAS,CACpBxwB,OAAQhP,KAAKgP,OACbooB,MAAOp3B,KAAKo3B,MACZ4I,UAAWhgC,KAAKo3B,MACZp3B,KAAKjH,QAAU2B,EAAAA,MACbsF,KAAKo3B,OACJp3B,KAAKo3B,WACR37B,EACJwkC,gBACiBxkC,IAAfuE,KAAKo3B,YAA0C37B,IAAnBuE,KAAK0/B,UAC7B1/B,KAAKjH,QAAU2B,EAAAA,MACbsF,KAAKo3B,MAAQp3B,KAAK0/B,YAChB1/B,KAAKo3B,MAAQp3B,KAAK0/B,gBACtBjkC,EACN8S,KAAMvO,KAAKuO,KACX0nB,GAAIj2B,KAAKi2B,GACTiK,WACElgC,KAAKy/B,YAAcz/B,KAAK2/B,OACpB3/B,KAAKy/B,WAAWp7B,OAAOrE,KAAK2/B,OAAO,SACnClkC,MA9HZ,uEAkIE,WAAcoX,GAAd,qFACM7S,KAAKq/B,WADX,gCAEUr/B,KAAKq/B,WAAWc,cAActtB,GAFxC,gDAlIF,qIAwIU,8FACF7S,KAAKq/B,aACPr/B,KAAKq/B,WAAW5B,QAChBz9B,KAAKq/B,gBAAa5jC,GAHd,gDAxIV,oFA+IE,SAAcjH,EAA6B8jC,GACzC,QAAqB78B,IAAjB68B,EAAKpB,SAA0C,IAAjBoB,EAAKpB,QAUvC,QAPqBz7B,IAAjB68B,EAAKnB,UACPn3B,KAAKo3B,MACH5iC,EAASuE,QAAU2B,EAAAA,MAAc49B,EAAKnB,SAAWmB,EAAKnB,SAEtDmB,EAAKjB,YACPr3B,KAAKuO,KAAOzL,KAAKC,IAAIu1B,EAAKjB,YAExBiB,EAAKrC,IAAyB,IAAnBqC,EAAKrC,GAAGpxB,OAAc,CACnC7E,KAAKi2B,GAAK,GACV,IAFmC,EAE7BmK,EAAM5rC,EAAS2b,QAFc,WAGhBmoB,EAAKrC,IAHW,IAGnC,2BAA4B,KAAjBl6B,EAAiB,QACpBqI,EAAOg8B,EAAIlK,iBAAiBn6B,GAClC,IAAKqI,IAASg8B,EAAIjvB,OAAO/M,GACvB,MAEFpE,KAAKi2B,GAAGtyB,KAAKS,IARoB,oCAU9B,GAAIk0B,EAAKZ,SAAU,CACxB,IAAMtzB,EAAO5P,EAAS0hC,iBAAiBoC,EAAKZ,UACxCtzB,IACFpE,KAAKi2B,GAAK,CAAC7xB,SAvKnB,KA6KM,SAAUi8B,GACdj1B,EACA1Z,GAEA,IAAI4d,EAAU,GAId,GAHIlE,EAAOmD,OACTe,GAAW,GAAJ,OAAOlE,EAAOmD,KAAd,cAGe9S,IAAtB2P,EAAO60B,iBACcxkC,IAArB2P,EAAO40B,YACN50B,EAAO80B,WACR,CACA,IAAM37B,EAAOu6B,GACX1zB,EAAO40B,UAAY50B,EAAO60B,WAC1B70B,EAAO40B,UACPtuC,GAEE6S,IACF+K,GAAW,IAAJ,OAAQ/K,EAAR,QAOX,QAJqB9I,IAAjB2P,EAAOgsB,QACT9nB,GAAW,QAAJ,OAAYlE,EAAOgsB,MAAnB,MACP9nB,GAAWqvB,GAAiBvzB,EAAOgsB,OAAS,MAE1ChsB,EAAO6qB,IAA2B,IAArB7qB,EAAO6qB,GAAGpxB,OAAc,kBACpBuG,EAAO6qB,IADa,IACvC,2BAA8B,KAAnB7xB,EAAmB,QAC5BkL,GAAW,GAAJ,OAAOlL,EAAKqL,mBAFkB,8BAIvCH,GAAW,KAEb,OAAOA,EAGH,SAAUgxB,GACdhxB,GAEA,IAFe,EAETmO,EAAQnO,EAAQzI,MAAM,MAFb,WAGI4W,GAHJ,IAGf,2BAA0B,KAAfhG,EAAe,QAClBE,EAAU,oBAAoBkF,KAAKpF,GACzC,GAAIE,EACF,OAAOpP,OAAOoP,EAAQ,KANX,+BAWX,SAAU4oB,GACdC,EACAh4B,EACAi4B,GAEA,IAAMC,EAAMF,EAAM,KAAO,GACzB,OAAQC,GACN,KAAK7S,GAAgBtG,KACnB,OAAOkZ,EACT,KAAK5S,GAAgBmB,OACnB,OAAOvmB,EAAMk4B,EAAMF,EACrB,KAAK5S,GAAgB+S,OACnB,OAAOH,EAAME,EAAMl4B,EACrB,KAAKolB,GAAgBgT,UACnB,OAAOp4B,GC5MN,IAAMq4B,GAAb,WAiBE,oiBACE7gC,KAAK8gC,OAAS,IAAI7C,GAClBj+B,KAAK+gC,SAAW,IAAI7C,GACpBl+B,KAAKghC,OAAS,IAAI5C,GAClBp+B,KAAKihC,YAAcjS,KACnBhvB,KAAKkhC,UAAYlD,GAASmD,OAC1BnhC,KAAKohC,4BAA6B,EAClCphC,KAAKqhC,KAAO,IAAIpJ,GAChBj4B,KAAK7O,KAAO,IAAIgpC,GAAYH,GAAsBh6B,MAClDA,KAAKshC,QAAU,IAAItxB,GA1BvB,oCA6BE,WACE,OAAOhQ,KAAK8gC,OAAOS,UA9BvB,8BAiCE,WACE,OAAOvhC,KAAK8gC,OAAOU,WAlCvB,+BAqCE,WACE,OAAOxhC,KAAK8gC,OAAOW,YAtCvB,mBAyCE,WACE,OAAOzhC,KAAK+gC,SAAS9N,UA1CzB,sBA6CE,WACE,OAAOjzB,KAAK+gC,SAASjvC,aA9CzB,4BAiDE,SAAemhC,GACbjzB,KAAK+gC,SAASW,QAAQzO,KAlD1B,4BAqDE,WACEjzB,KAAK+gC,SAAStI,YAtDlB,kBAyDE,WACE,OAAOz4B,KAAKghC,OAAOW,SA1DvB,oBA6DE,WACE,OAAO3hC,KAAKghC,OAAOY,WA9DvB,uBAiEE,SAAUhkB,GACRoW,GAAAA,IAAQhG,GAASsF,MAAOlgB,GAASwK,IACjC5d,KAAKghC,OAAOr9B,KAAKia,KAnErB,yBAsEE,WACE5d,KAAKghC,OAAOr7B,UAvEhB,sBA0EE,WACE,OAAO3F,KAAKihC,cA3EhB,gFA8EE,WAAuBrK,GAAvB,4FACQiL,GADR,oBAEO7hC,KAAKtO,YACLklC,GAECxU,EAAQ6N,GAAmB4R,IAC7Bzf,EANN,sBAOUA,EAPV,uBASQ4R,GAAAA,eAAmB6N,GAT3B,OAUE7hC,KAAKihC,YAAcY,EAVrB,gDA9EF,iFA2FE,WACE7hC,KAAKihC,YAAYtsC,eAAiBqL,KAAKtO,WAAWiD,cAClDq/B,GAAAA,eAAmBh0B,KAAKtO,cA7F5B,oBAgGE,WACE,OAAOsO,KAAKkhC,YAjGhB,wBAoGE,WAAgB,MACd,iBAAOlhC,KAAK8hC,qBAAZ,aAAO,EAAoB7O,UArG/B,8BAwGE,SAAiB8O,GACX/hC,KAAKgiC,UAAYhE,GAASiE,WAY9BjiC,KAAK8hC,cAAgBC,EACrB/hC,KAAKkiC,aAAeliC,KAAKgiC,SACzBhiC,KAAKkhC,UAAYlD,GAASiE,WAbxBjO,GAAAA,IACEhG,GAASsF,MACT,iDACmBtzB,KAAKkiC,eACrBliC,KAAK8hC,cAAL,0BACsB9hC,KAAK8hC,cAAc7O,SACtC,IAJN,sBAKiB8O,EAAa9O,YAjHtC,4BA0HE,WAAc,MACNkP,EAAI,UAAGniC,KAAK8hC,qBAAR,aAAG,EAAoBK,KACjCniC,KAAK8hC,mBAAgBrmC,EACjBuE,KAAKkiC,eACPliC,KAAKkhC,UAAYlhC,KAAKkiC,aACtBliC,KAAKkiC,kBAAezmC,GAElB0mC,GACFA,MAlIN,gCAsIE,WAAkB,MACVC,EAAQ,UAAGpiC,KAAK8hC,qBAAR,aAAG,EAAoBM,SACrCpiC,KAAK8hC,mBAAgBrmC,EACjBuE,KAAKkiC,eACPliC,KAAKkhC,UAAYlhC,KAAKkiC,aACtBliC,KAAKkiC,kBAAezmC,GAElB2mC,GACFA,MA9IN,6BAkJE,WACMpiC,KAAKgiC,WAAahE,GAASmD,SAC7BnhC,KAAKkhC,UAAYlD,GAASqE,gBApJhC,4BAwJE,WACMriC,KAAKgiC,WAAahE,GAASmD,SAC7BnhC,KAAKkhC,UAAYlD,GAASsE,eA1JhC,gCA8JE,WACMtiC,KAAKgiC,WAAahE,GAASmD,SAC7BnhC,KAAKkhC,UAAYlD,GAASuE,mBAhKhC,gCAoKE,WACMviC,KAAKgiC,WAAahE,GAASmD,SAC7BnhC,KAAKkhC,UAAYlD,GAASwE,mBAtKhC,2CA0KE,WACMxiC,KAAKgiC,WAAahE,GAASmD,SAC7BnhC,KAAKkhC,UAAYlD,GAASyE,6BA5KhC,8BAgLE,WAEIziC,KAAKgiC,WAAahE,GAASqE,cAC3BriC,KAAKgiC,WAAahE,GAASsE,aAC3BtiC,KAAKgiC,WAAahE,GAASuE,iBAC3BviC,KAAKgiC,WAAahE,GAASwE,iBAC3BxiC,KAAKgiC,WAAahE,GAASyE,4BAE3BziC,KAAKkhC,UAAYlD,GAASmD,UAxLhC,qCA4LE,WACE,OAAOnhC,KAAKohC,6BA7LhB,kCAgME,WACEphC,KAAKohC,4BAA6B,IAjMtC,mCAoME,WACEphC,KAAKohC,4BAA6B,IArMtC,iCAwME,WACE,OAAOphC,KAAKqhC,KAAKtG,cAzMrB,iCA4ME,WACE,OAAO/6B,KAAKqhC,KAAKrG,cA7MrB,gCAgNE,WACE,OAAOh7B,KAAKqhC,KAAKhC,aAjNrB,2BAoNE,SACEnL,EACAliB,EACA4jB,EACA3L,EACAqO,GAEA,GAAIt4B,KAAK6S,OAAOb,MAAQA,EAAxB,CAGAhS,KAAKqhC,KAAKzK,OAAO1C,EAAWl0B,KAAK6S,OAAOre,SAAUohC,EAAQ3L,EAAMqO,GAChE,IAAMrmB,EAAO,IAAI2mB,GAAiB54B,KAAK6S,OAAOhB,QAAQ6wB,YACtDzwB,EAAK0wB,cAAc3iC,KAAK6S,OAAOre,SAASuE,MAAO68B,EAAQ0C,GACvDt4B,KAAK6S,OAAOhB,QAAQ6wB,WAAazwB,EAAKqB,YAClCtT,KAAKxO,UACPwO,KAAKxO,SAASmxC,cAAc3iC,KAAK6S,OAAOre,SAAU8jC,MAnOxD,iCAuOE,SACEpE,EACAliB,EACA4jB,EACA3L,EACAqO,GAEA,IAAMzlB,EAAS7C,GAAO4yB,SAAS5wB,GAC/B,GAAIa,aAAkBF,MACpBqhB,GAAAA,IAAQhG,GAASsF,MAAjB,uBAAwCthB,EAAxC,+BADF,CAIA,IAAM6kB,EAAahkB,EAAOhB,QAAQzN,KAC5ByyB,aAAsB9yB,IAG5B/D,KAAKqhC,KAAKzK,OACR1C,EACArhB,EAAOre,SACPohC,EACA3L,EACAqO,EACAzB,MA7PN,uBAiQE,WACE,OAAO72B,KAAK7O,KAAK++B,UAlQrB,uBAqQE,WACE,OAAOlwB,KAAK7O,KAAKgjC,cAtQrB,wBAyQE,WACE,OAAOn0B,KAAK7O,KAAK0xC,eA1QrB,uBA6QE,WACE,OAAO7iC,KAAK7O,KAAKijC,cA9QrB,wBAiRE,WACE,OAAOp0B,KAAK7O,KAAK2xC,eAlRrB,qBAqRE,WACE,OAAO9iC,KAAK7O,KAAKoe,YAtRrB,uBAyRE,SAAU2gB,GAAoB,WAC5BlwB,KAAK+iC,eAAe7S,GAASuL,OAAM,SAAC7d,GAClC,EAAKolB,UAAU,qBAAuBplB,QA3R5C,8EA+RU,WAAqBsS,GAArB,oFACFlwB,KAAKgiC,WAAahE,GAASsE,YADzB,wDAINtiC,KAAKijC,mBAJC,kBAMEjP,GAAAA,gBAAoB9D,GANtB,cAOJlwB,KAAKkjC,wBAAwBhT,GAC7BlwB,KAAKmjC,gCAAgCjT,GARjC,UASElwB,KAAK7O,KAAKiyC,UAAUlT,EAASlwB,KAAK6S,QATpC,QAUJ7S,KAAKkhC,UAAYlD,GAASpoC,KAVtB,yBAYJoK,KAAKqjC,oBAZD,2EA/RV,+FA+SU,SAAwBnT,GAC9B,GAAIA,EAAQoT,cAAe,CACzB,IAAM9uC,EAAW,IAAIsU,GACrBtU,EAAS4Q,MAAM8qB,EAAQoT,eACvBtjC,KAAKshC,QAAQ37B,MAAMnR,GACnBwL,KAAKujC,mBACLvjC,KAAKwjC,sBAEPxjC,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBY,WAClB+jB,EAAQnuB,MAAMkoB,MAEhBjqB,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBa,WAClB8jB,EAAQhuB,MAAM+nB,MAEhBjqB,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBgB,KAClBoxB,MAEF39B,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBc,eAClBgyB,MAEFr+B,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBoB,WAClBssB,GAAmB/I,EAAQva,cAzUjC,6CA6UU,SAAgCua,GACtC,GAAIA,EAAQK,aAAc,CACxB,IAAI77B,EAAOsL,KAAKtO,WAAWiD,cAEzBu7B,EAAQnuB,MAAM2qB,MAAQA,IACtBwD,EAAQhuB,MAAMwqB,MAAQA,GAEtBh4B,GAAO,EAEPw7B,EAAQnuB,MAAM2qB,MAAQA,IACtBwD,EAAQhuB,MAAMwqB,MAAQA,KAEtBh4B,GAAO,GAELA,IAASsL,KAAKtO,WAAWiD,eAC3BqL,KAAKyjC,eA5Vb,sBAiWE,WACMzjC,KAAKgiC,WAAahE,GAASpoC,MAC7BoK,KAAK7O,KAAKwqC,QAAQ/tB,GAAYmN,aAnWpC,oBAuWE,SAAO3W,GASL,OARIpE,KAAKgiC,WAAahE,GAASpoC,OAC7BoK,KAAKshC,QAAQvuB,OAAO3O,EAAM,CACxB6F,kBAAkB,IAEpBjK,KAAKujC,mBACLvjC,KAAK6S,OAAOhB,QAAQF,aAAa3R,KAAKuP,WACtC+lB,GAAct1B,KAAKtO,WAAWu9B,cAEzBjvB,KAAK6S,SAhXhB,uBAmXE,SAAUyP,GACJtiB,KAAKgiC,WAAahE,GAASpoC,OAG3B0sB,GACFtiB,KAAK0jC,eAAL,eACU50B,GAA2BwT,GADrC,MAIFtiB,KAAKshC,QAAQvuB,OAAOuP,GAAe1U,GAAYmN,WAC/C/a,KAAKujC,mBACLvjC,KAAKshC,QAAQzvB,QAAQF,aAAa3R,KAAKuP,WACvCvP,KAAKshC,QAAQrxB,SAAS6N,oBACpBvS,GAAkBe,aAClB+xB,MAEFr+B,KAAKkhC,UAAYlD,GAASmD,UAnY9B,yBAsYE,YAEInhC,KAAKtO,WAAW09B,mBAAqBrB,GAAiBsB,WACrDrvB,KAAK2jC,mBAIJ3jC,KAAK4jC,sBAGTxO,GAAU,CACRZ,UAAWx0B,KAAKtO,WAAWy9B,WAC3BsF,OAAQz0B,KAAKtO,WAAWw9B,iBAlZ9B,6BAsZE,YAEIlvB,KAAKtO,WAAW09B,mBAAqBrB,GAAiBsB,WACrDrvB,KAAK2jC,mBAIJ3jC,KAAK4jC,uBAGT5jC,KAAK4jC,qBAAuBvO,GAAc,CACxCb,UAAWx0B,KAAKtO,WAAWy9B,WAC3BsF,OAAQz0B,KAAKtO,WAAWw9B,kBAla9B,wBAsaE,WACMlvB,KAAK4jC,uBACP5jC,KAAK4jC,qBAAqB/tC,OAC1BmK,KAAK4jC,0BAAuBnoC,KAzalC,oBA6aE,SAAO2I,GAEHpE,KAAKgiC,WAAahE,GAASmD,QAC3BnhC,KAAKgiC,WAAahE,GAAS5nC,WAI7B4J,KAAKshC,QAAQvuB,OAAO3O,GACpBpE,KAAKujC,mBACLjO,GAAct1B,KAAKtO,WAAWu9B,gBAtblC,oBAybE,SAAOjgB,GACL,OAAIhP,KAAKgiC,WAAahE,GAASvnC,UAC7BuJ,KAAKshC,QAAQnkB,KAAKnO,GACXhP,KAAK6S,OAAOhB,QAAQ7C,SAAWA,EAAShP,KAAK6S,OAAS,MAExD,OA9bX,sBAicE,SAASzH,GACP,GAAIpL,KAAKgiC,WAAahE,GAASvnC,UAAYuJ,KAAKxO,SAAU,CACxD,IAAM8d,EAAU+wB,GAAmBj1B,EAAQpL,KAAKtO,YAC5C4d,IACFtP,KAAKshC,QAAQzvB,QAAQvC,QAAUixB,GAC7BvgC,KAAKshC,QAAQzvB,QAAQvC,QACrBA,EACAtP,KAAKxO,SAAS0+B,QAAQpB,qBAxchC,sBA8cE,WACM9uB,KAAKgiC,WAAahE,GAASvnC,WAC7BuJ,KAAK+gC,SAASW,QAAQ,gBACtB1hC,KAAKkhC,UAAYlD,GAASmD,UAjdhC,qBAqdE,SAAQvjB,GACN5d,KAAKgjC,UAAUplB,KAtdnB,2BAydE,SAAcimB,GAAgC,WAC5C7jC,KAAK8jC,mBAAmBD,GACrBhH,MAAK,WACJ,EAAK0G,sBAEN9H,OAAM,SAAC7d,GACN,EAAKolB,UAAU,qBAAuBplB,QA/d9C,kFAmeU,WACNimB,GADM,0FAGF7jC,KAAKgiC,WAAahE,GAASuE,gBAHzB,wDAMNviC,KAAKijC,mBANC,kBAQEjP,GAAAA,oBAAwB6P,GAR1B,UASCA,EAAgB7xB,IATjB,sBAUI,IAAIW,MAAM,mBAVd,cAYE0sB,EAAa,IAAIhG,GAAUwK,EAAgB7xB,KAZ7C,UAaEqtB,EAAWnF,SAbb,QAcJl6B,KAAKq/B,WAAaA,EAClBr/B,KAAKkhC,UAAYlD,GAAS5nC,SAftB,yBAiBJ4J,KAAKqjC,oBAjBD,2EAneV,oFAwfE,WACMrjC,KAAKgiC,WAAahE,GAAS5nC,WAG3B4J,KAAKq/B,aACPr/B,KAAKq/B,WAAW5B,QAChBz9B,KAAKq/B,gBAAa5jC,GAEpBuE,KAAKkhC,UAAYlD,GAASmD,UAhgB9B,2BAmgBE,SAAc4C,GAAgC,WAC5C/jC,KAAKgkC,mBAAmBD,GAAiBtI,OAAM,SAAC7d,GAC9C,EAAKolB,UAAU,qBAAuBplB,QArgB5C,kFAygBU,WAAyBmmB,GAAzB,0FACF/jC,KAAKgiC,WAAahE,GAASwE,gBADzB,wDAINxiC,KAAKijC,mBAJC,kBAMEjP,GAAAA,oBAAwB+P,GAN1B,cAOEvyC,EAAW,IAAI0tC,GAAgB6E,EAAiB/jC,MAPlD,SAQExO,EAAS2c,QARX,OASJnO,KAAKxO,SAAWA,EAChBwO,KAAKkhC,UAAYlD,GAASvnC,SAVtB,yBAYJuJ,KAAKqjC,oBAZD,2EAzgBV,oFAyhBE,WACMrjC,KAAKgiC,WAAahE,GAASvnC,WAG3BuJ,KAAKxO,WACPwO,KAAKxO,SAASisC,QACdz9B,KAAKxO,cAAWiK,GAElBuE,KAAKkhC,UAAYlD,GAASmD,UAjiB9B,8BAoiBU,WACFnhC,KAAKq/B,YACPr/B,KAAKq/B,WAAWc,cAAcngC,KAAK6S,UAtiBzC,0BA0iBE,WACE,OAAO7S,KAAKikC,kBA3iBhB,kCA8iBU,SAAqBC,GAC3BlkC,KAAKikC,gBAAkBC,IA/iB3B,iCAkjBU,WACNlkC,KAAKikC,qBAAkBxoC,IAnjB3B,kBAsjBE,WACE,OAAOuE,KAAKshC,UAvjBhB,uBA0jBE,WAAS,WACHthC,KAAKgiC,UAAYhE,GAASmD,QAG9BnhC,KAAKmkC,iBAAiB,CACpBlR,QAAS,wBACTkP,KAAM,WACJ,EAAKb,QAAQ37B,QACb,EAAK49B,mBACL,EAAKC,2BAnkBb,iCAwkBE,SAAoBl0B,GAClBtP,KAAK6S,OAAOhB,QAAQvC,QAAUA,IAzkBlC,0CA4kBE,SAA6BsnB,GAI3B52B,KAAKshC,QAAQrxB,SAAS6N,oBAAoB8Y,EAAOvlC,IAAKulC,EAAO5oB,SAhlBjE,+BAmlBE,SAAkBsU,GAEdtiB,KAAKgiC,WAAahE,GAASmD,QAC3BnhC,KAAKgiC,WAAahE,GAAS5nC,WAI7B4J,KAAKshC,QAAQvuB,OAAOuP,GACpBtiB,KAAKujC,sBA3lBT,kCA8lBE,WAAoB,WACdvjC,KAAKgiC,WAAahE,GAASmD,QAG/BnhC,KAAKmkC,iBAAiB,CACpBlR,QAAS,wBACTkP,KAAM,WACJ,EAAKjB,UAAYlD,GAASoG,iBAC1B,EAAK9C,QAAQ37B,MAAM,EAAKkN,OAAOre,UAC/B,EAAK+uC,mBACL,EAAKC,2BAxmBb,gCA6mBE,WAEMxjC,KAAKgiC,WAAahE,GAASoG,mBAC7BpkC,KAAKkhC,UAAYlD,GAASmD,UAhnBhC,gCAonBE,SAAmBkD,GAAwC,WACrDrkC,KAAKgiC,UAAYhE,GAASoG,kBAG9BpkC,KAAKmkC,iBAAiB,CACpBlR,QAAS,wBACTkP,KAAM,WACJ,IAAM3tC,EAAW,IAAIsU,GACrBtU,EAAS4Q,MAAMi/B,GACf,EAAK/C,QAAQ37B,MAAMnR,GACnB,EAAK+uC,mBACL,EAAKC,2BA/nBb,wBAooBE,WACE,GAAIxjC,KAAKgiC,UAAYhE,GAASoG,iBAA9B,CAGA,IAAM5vC,EAAWwL,KAAK6S,OAAOre,SAAS2b,QACtC3b,EAASwpB,SAASpiB,EAAapH,EAASuE,QACxCiH,KAAKshC,QAAQ37B,MAAMnR,GACnBwL,KAAKujC,mBACLvjC,KAAKwjC,yBA5oBT,0BA+oBE,SAAaj5B,GACX,GAAIvK,KAAKgiC,WAAahE,GAASoG,iBAAkB,CAC/C,IAAM5vC,EAAWwL,KAAK6S,OAAOre,SAAS2b,QACtC3b,EAAS8vC,KAAK/5B,GACdvK,KAAKshC,QAAQ37B,MAAMnR,GACnBwL,KAAKujC,mBACLvjC,KAAKwjC,yBArpBX,8BAypBE,SAAiBx0B,GAEbhP,KAAKgiC,WAAahE,GAASmD,QAC3BnhC,KAAKgiC,WAAahE,GAAS5nC,WAI7B4J,KAAKshC,QAAQnkB,KAAKnO,GAClBhP,KAAKujC,sBAjqBT,0BAoqBE,SAAa//B,GAETxD,KAAKgiC,WAAahE,GAASmD,QAC3BnhC,KAAKgiC,WAAahE,GAAS5nC,UAIzB4J,KAAK6S,OAAOhB,QAAQ5C,cAAgBzL,IAGxCxD,KAAKshC,QAAQiD,oBAAoB/gC,GACjCxD,KAAKujC,sBA/qBT,+BAkrBE,WAAiB,WACf,GACEvjC,KAAKgiC,WAAahE,GAASmD,QAC3BnhC,KAAKgiC,WAAahE,GAAS5nC,SAI7B,OAAI4J,KAAK6S,OAAOhB,QAAQ2yB,YACtBxkC,KAAKshC,QAAQtpC,mBACbgI,KAAKujC,yBAGPvjC,KAAKmkC,iBAAiB,CACpBlR,QAAS,GAAF,OAAKjzB,KAAK6S,OAAOhB,QAAQ7C,OAAzB,uBACPmzB,KAAM,WACJ,EAAKb,QAAQtpC,cACb,EAAKurC,wBAlsBb,2BAusBE,WACE,IAAMkB,EAAMvlB,GAAelf,KAAKshC,QAAS,CACvC5iB,WAAY1e,KAAKtO,WAAWgtB,aAE9BgmB,UAAUC,UAAUC,UAAUH,KA3sBlC,2BA8sBE,WACE,IAAMA,EAAMzhB,GAAUhjB,KAAKshC,QAAS,CAClC5iB,WAAY1e,KAAKtO,WAAWgtB,aAE9BgmB,UAAUC,UAAUC,UAAUH,KAltBlC,iCAqtBE,WACE,IAAMA,EAAMzkC,KAAKshC,QAAQtvB,IACzB0yB,UAAUC,UAAUC,UAAUH,KAvtBlC,8BA0tBE,WACE,IAAMA,EAAMzkC,KAAKshC,QAAQuD,OACzBH,UAAUC,UAAUC,UAAUH,KA5tBlC,2BA+tBE,WACE,IAAMA,EAAMzkC,KAAKshC,QAAQvlC,KACzB2oC,UAAUC,UAAUC,UAAUH,KAjuBlC,yBAouBE,SAAYxyB,GACV,GAAIjS,KAAKgiC,WAAahE,GAASmD,OAA/B,CAGA,IAAI2D,EACJ,OAAQ7hB,GAAmBhR,IACzB,KAAK2Q,GAAiBO,KACpB,IAAM3uB,EAAWsU,GAASpE,UAAUuN,GACpC6yB,EAAgBtwC,EACZ,IAAIwb,GAAOxb,GACX,IAAIme,MAAM,kBACd,MAEF,KAAKiQ,GAAiBM,IACpB4hB,EACE90B,GAAO4yB,SAAS3wB,IAAS,IAAIU,MAAM,kBACrC,MACF,KAAKiQ,GAAiBc,IACpBohB,EAAgBtnB,GAAevL,GAC/B,MACF,KAAK2Q,GAAiBe,IACpBmhB,EAAgB5iB,GAAUjQ,GAC1B,MACF,QACE6yB,EAAgB,IAAInyB,MAAM,yBAC1B,MAEAmyB,aAAyBnyB,MAC3B3S,KAAKgjC,UAAU8B,IAGjB9kC,KAAKwjC,sBACLxjC,KAAKshC,QAAUwD,EACf9kC,KAAK+kC,oBACL/kC,KAAKujC,uBAtwBT,wBAywBE,SAAWzf,GAAa,WACtB9jB,KAAKglC,gBAAgBlhB,GAAM2X,OAAM,SAAC7d,GAChC,EAAKolB,UAAU,sBAAwBplB,QA3wB7C,+EA+wBU,WAAsBkG,GAAtB,8FACF9jB,KAAKgiC,WAAahE,GAASmD,OADzB,oDAINnhC,KAAKijC,mBAJC,SAMCnf,EAND,iCAOWkQ,GAAAA,uBAPX,UAOFlQ,EAPE,OAQGA,EARH,oEAYekQ,GAAAA,WAAelQ,GAZ9B,WAYE7R,EAZF,OAcA6R,EAAK1b,MAAM,WAAa0b,EAAK1b,MAAM,YAC/Bq8B,EAAM3gB,EAAK1b,MAAM,UACnB68B,KAAAA,OAAahzB,EAAgB,cAC7B,IAAIizB,aAAcC,OAAOlzB,GAC7B6yB,EAAgBtnB,GAAeinB,IAE/BK,EADShhB,EAAK1b,MAAM,UACJ8Z,IAAU,IAAIgjB,aAAcC,OAAOlzB,IAEnC,IAAIU,MAAM,cAAgBmR,KAExCghB,aAAyBnyB,OAxBzB,uBAyBImyB,EAzBJ,QA2BJ9kC,KAAKolC,qBAAqBthB,GAC1B9jB,KAAKshC,QAAUwD,EACf9kC,KAAK+kC,oBACL/kC,KAAKujC,mBA9BD,yBAgCJvjC,KAAKqjC,oBAhCD,2EA/wBV,yFAmzBU,WACNrjC,KAAKshC,QAAQ57B,SAAQ,SAAC6L,GACpB,IAAM6lB,EAAQkJ,GAA2B/uB,EAAKjC,SAC9C,QAAc7T,IAAV27B,EAAqB,CACvB,IAAMnlB,EAAO,IAAI2mB,GAAiBrnB,EAAKmxB,YACvCzwB,EAAK+mB,YAAYt+B,EAAAA,MAAag7B,GAAcK,WAAYqB,GACxD7lB,EAAKmxB,WAAazwB,EAAKqB,kBAzzB/B,wBA8zBE,SAAWmL,GAAgC,WACzCze,KAAKqlC,gBAAgB5mB,GAASgd,OAAM,SAAC7d,GACnC,EAAKolB,UAAU,oBAAsBplB,QAh0B3C,+EAo0BU,WAAsBa,GAAtB,gGAGFze,KAAKgiC,WAAahE,GAASmD,OAHzB,oDAMNnhC,KAAKijC,mBANC,SAQAnf,EAAO9jB,KAAKkkC,eACZ,OAACzlB,QAAD,IAACA,GAAAA,EAAS6mB,WAAcxhB,EATxB,wBAUIyhB,EAAc7H,GAAsB19B,KAAKshC,QAAQrxB,UAVrD,SAWW+jB,GAAAA,qBAAyBuR,GAXpC,UAWFzhB,EAXE,OAYGA,EAZH,uDAiBAA,EAAK1b,MAAM,YAAa0b,EAAK1b,MAAM,WAjBnC,iBAkBIq8B,EAAMvlB,GAAelf,KAAK6S,OAAQ,CACtC6L,WAAY1e,KAAKtO,WAAWgtB,aAE9BzM,EAAO6R,EAAK1b,MAAM,UACd68B,KAAAA,OAAaR,EAAK,cAClB,IAAIe,aAAcC,OAAOhB,GAvB3B,4BAwBO3gB,EAAK1b,MAAM,UAxBlB,iBAyBF6J,GAAO,IAAIuzB,aAAcC,OACvBziB,GAAUhjB,KAAK6S,OAAQ,CACrB6L,WAAY1e,KAAKtO,WAAWgtB,cA3B9B,8BA+BI,IAAI/L,MAAM,cAAgBmR,GA/B9B,yBAiCEkQ,GAAAA,WAAelQ,EAAM7R,GAjCvB,QAkCJjS,KAAKolC,qBAAqBthB,GAlCtB,yBAoCJ9jB,KAAKqjC,oBApCD,2EAp0BV,qFA42BE,WACE,OAAQrjC,KAAKgiC,UACX,KAAKhE,GAASmD,OACd,KAAKnD,GAAS5nC,SACZ,OAAO,EACT,KAAK4nC,GAASpoC,KACZ,OACGoK,KAAK6S,OAAOre,SAASuE,QAAU2B,EAAAA,MAC5BsF,KAAKywB,YAAY1uB,MAAM2qB,IACvB1sB,KAAKywB,YAAYvuB,MAAMwqB,OAASA,GAG1C,OAAO,MAx3BX,KA43BMgZ,IAAQhb,EAAAA,EAAAA,IAAgB,IAAImW,IAE5B,SAAU8E,KACd,OAAOD,GC17BT,I,GCAY/vC,GDAN3D,GAAa,CAAC,OAEd,SAAUvC,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CC,MAAO,OACP8H,IAAKlJ,EAAK6mB,OACVqvB,UAAW,SACV,KAAM,EAAG5zC,KCPd,SAAY2D,GACVA,EAAAA,SAAAA,QACAA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,YAAAA,WACAA,EAAAA,OAAAA,MACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,YAAAA,WACAA,EAAAA,mBAAAA,iBACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,WAAAA,SACAA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OACAA,EAAAA,UAAAA,SACAA,EAAAA,WAAAA,UACAA,EAAAA,SAAAA,QACAA,EAAAA,MAAAA,KACAA,EAAAA,SAAAA,QACAA,EAAAA,WAAAA,UACAA,EAAAA,cAAAA,YACAA,EAAAA,SAAAA,QACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,QAAAA,OACAA,EAAAA,YAAAA,WACAA,EAAAA,YAAAA,WACAA,EAAAA,eAAAA,cACAA,EAAAA,QAAAA,OACAA,EAAAA,SAAAA,SAtCF,CAAYA,KAAAA,GAAI,KAyCT,IAAMkwC,IAAa,iBACvBlwC,GAAKgnC,MAAQ,wCADU,UAEvBhnC,GAAK29B,MAAQ,sCAFU,UAGvB39B,GAAKu9B,KAAO,6BAHW,UAIvBv9B,GAAKC,KAAO,uCAJW,UAKvBD,GAAKI,KAAO,8BALW,UAMvBJ,GAAKO,OAAS,6BANS,UAOvBP,GAAKS,SAAW,gCAPO,UAQvBT,GAAKY,IAAM,sCARY,UASvBZ,GAAKmwC,KAAO,6CATW,UAUvBnwC,GAAKmB,KAAO,yCAVW,UAWvBnB,GAAKsB,MAAQ,qCAXU,UAYvBtB,GAAKyB,KAAO,kCAZW,UAavBzB,GAAKowC,OAAS,mCAbS,UAcvBpwC,GAAK4B,SAAW,iCAdO,UAevB5B,GAAKgC,gBAAkB,iDAfA,UAgBvBhC,GAAKkC,KAAO,4CAhBW,UAiBvBlC,GAAKoC,KAAO,8CAjBW,UAkBvBpC,GAAKqwC,KAAO,kDAlBW,UAmBvBrwC,GAAKswC,KAAO,6CAnBW,UAoBvBtwC,GAAKuwC,QAAU,gDApBQ,UAqBvBvwC,GAAKwwC,MAAQ,sCArBU,UAsBvBxwC,GAAKywC,KAAO,qCAtBW,UAuBvBzwC,GAAKuC,OAAS,kCAvBS,UAwBvBvC,GAAK4hB,QAAU,kCAxBQ,UAyBvB5hB,GAAK0wC,MAAQ,mCAzBU,UA0BvB1wC,GAAK2wC,GAAK,sDA1Ba,UA2BvB3wC,GAAK4wC,MAAQ,mCA3BU,UA4BvB5wC,GAAK6wC,QAAU,gCA5BQ,UA6BvB7wC,GAAK8wC,WAAa,wCA7BK,UA8BvB9wC,GAAK+wC,MAAQ,mCA9BU,UA+BvB/wC,GAAKgxC,KAAO,qCA/BW,UAgCvBhxC,GAAKixC,KAAO,sCAhCW,UAiCvBjxC,GAAKkxC,KAAO,kCAjCW,UAkCvBlxC,GAAKmxC,SAAW,6BAlCO,UAmCvBnxC,GAAKc,SAAW,oCAnCO,UAoCvBd,GAAKoxC,YAAc,oCApCI,UAqCvBpxC,GAAKqxC,KAAO,mDArCW,UAsCvBrxC,GAAKsxC,MAAQ,6CAtCU,IAyC1B7kC,OAAOwkB,OAAOif,IAAengC,SAAQ,SAAC6Q,GACpCsN,GAAatN,MCjFf,QAAeyT,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,aACNC,MAAO,CACLx0B,KAAM,CACJkF,KAAMoR,OACNme,UAAU,IAGdI,MAR6B,SAQvBL,GACJ,MAAO,CACL3T,OAAQsvB,GAAc3b,EAAMx0B,UCTlC,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,UCLMwxC,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,cAEHmB,GAAa,CAAEnB,MAAO,UACtBiC,GAAa,CAAEjC,MAAO,SACtBkC,GAA2Bk0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,MAAO,MACjHmC,GAAa,CAAEnC,MAAO,SACtBoC,GAAa,CAAC,YACdC,GAA2B+zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,OAAQ,MAClHsC,GAAa,CAAC,YACdC,GAA2B6zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,MAAO,MACjHwC,GAAc,CAAC,YACfC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,SAAU,MACrH0C,GAAc,CAAC,YACfC,GAA4ByzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,MAAO,MAClH4C,GAAc,CAAE5C,MAAO,SACvB6C,GAA4BuzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,WAAY,MACvH8C,GAA4BszC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,WAAY,MACvH+C,GAA4BqzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,WAAY,MACvHgD,GAA4BozC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,YAAa,MACxHiD,GAAc,CAAC,YACfuzC,GAA4BJ,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MAEpH,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK2I,SAAW3I,EAAK2I,QAAL,MAAA3I,EAAI,cACrB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKsxC,OACf,KAAM,EAAG,CAAC,SACbj0C,QAGJX,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,EACrCZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0G,UAAW9H,EAAK63C,OAAOC,QACvBhyC,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK+3C,WAAa/3C,EAAK+3C,UAAL,MAAA/3C,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKoC,MACf,KAAM,EAAG,CAAC,SACb5E,IACC,EAAGD,KACNb,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0G,UAAW9H,EAAK63C,OAAOG,KACvBlyC,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKi4C,QAAUj4C,EAAKi4C,OAAL,MAAAj4C,EAAI,cACpB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKqwC,MACf,KAAM,EAAG,CAAC,SACb3yC,IACC,EAAGD,KACNf,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0G,UAAW9H,EAAK63C,OAAOK,OACvBpyC,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKm4C,QAAUn4C,EAAKm4C,OAAL,MAAAn4C,EAAI,cACpB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKswC,MACf,KAAM,EAAG,CAAC,SACb1yC,IACC,EAAGD,KACNjB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0G,UAAW9H,EAAK63C,OAAOO,KACvBtyC,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKq4C,UAAYr4C,EAAKq4C,SAAL,MAAAr4C,EAAI,cACtB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKuwC,SACf,KAAM,EAAG,CAAC,SACbzyC,IACC,EAAGD,OAERnB,EAAAA,EAAAA,GAAoB,MAAOqB,GAAa,EACtCrB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKs4C,WAAat4C,EAAKs4C,UAAL,MAAAt4C,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKywC,MACf,KAAM,EAAG,CAAC,SACbzyC,MAEFtB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKu4C,WAAav4C,EAAKu4C,UAAL,MAAAv4C,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKywC,MACf,KAAM,EAAG,CAAC,SACbxyC,MAEFvB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKw4C,WAAax4C,EAAKw4C,UAAL,MAAAx4C,EAAI,cACvB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKywC,MACf,KAAM,EAAG,CAAC,SACbvyC,MAEFxB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKy4C,YAAcz4C,EAAKy4C,WAAL,MAAAz4C,EAAI,cACxB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKywC,MACf,KAAM,EAAG,CAAC,SACbtyC,MAEFzB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0G,UAAW9H,EAAK63C,OAAO51C,MACvB6D,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK04C,SAAW14C,EAAK04C,QAAL,MAAA14C,EAAI,cACrB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKwwC,OACf,KAAM,EAAG,CAAC,SACbmB,IACC,EAAGvzC,SAGT,OCjKD,SAAUs0C,GAAgBC,GAC9BA,EAAOC,iBAAiB,UAAU,SAAChmB,GACjCA,EAAMkJ,iBACNlJ,EAAMiJ,qBAER8c,EAAOC,iBAAiB,QAAQ,SAAChmB,GAC/BA,EAAMiJ,qBAER8c,EAAOC,iBAAiB,SAAS,SAAChmB,GAChCA,EAAMiJ,qBAER8c,EAAOE,YAOH,SAAUC,GAAgB/uC,GAC9B,OAAOsqB,SAAS0kB,eAAehvC,GCfjC,QAAeswB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,WACN0e,WAAY,CACVC,WAAAA,IAEFte,MAAO,CAAC,SACRC,MAN6B,SAMvBpyB,EAAGqyB,GACP,IAAMkb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,OACxBwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAEzB,IAAM3V,EAAU,WACdmyB,EAAQW,KAAK,UAETsc,EAAY,WAChB/B,EAAMoD,YACNte,EAAQW,KAAK,UAETwc,EAAS,WACbjC,EAAM3U,aACNvG,EAAQW,KAAK,UAET0c,EAAS,WACbnC,EAAMzU,WAAW,CAAEqU,WAAW,IAC9B9a,EAAQW,KAAK,UAET4c,EAAW,WACfrC,EAAMzU,aACNzG,EAAQW,KAAK,UAET6c,EAAY,WAChBtC,EAAMqD,gBACNve,EAAQW,KAAK,UAET8c,EAAY,WAChBvC,EAAMsD,gBACNxe,EAAQW,KAAK,UAET+c,EAAY,WAChBxC,EAAMuD,mBACNze,EAAQW,KAAK,UAETgd,EAAa,WACjBzC,EAAMwD,gBACN1e,EAAQW,KAAK,UAETid,EAAU,WACd1C,EAAMyD,kBACN3e,EAAQW,KAAK,UAEToc,GAAS5b,EAAAA,EAAAA,KAAS,WACtB,MAAO,CACL6b,QAAS9B,EAAM1D,WAAahE,GAASmD,OACrCuG,KAAMhC,EAAM1D,WAAahE,GAASmD,OAClC2G,KAAMpC,EAAM1D,WAAahE,GAASmD,OAClCyG,OAAQlC,EAAM1D,WAAahE,GAASmD,OACpCxvC,MAAO+zC,EAAM1D,WAAahE,GAASmD,WAGvC,MAAO,CACLmH,OAAAA,EACA3yC,KAAAA,GACA0C,QAAAA,EACAovC,UAAAA,EACAE,OAAAA,EACAE,OAAAA,EACAE,SAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAC,WAAAA,EACAC,QAAAA,EACAb,OAAAA,MC1EN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPML,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,cAEHmB,GAAa,CAAEnB,MAAO,UACtBiC,GAAa,CAAEjC,MAAO,SACtBkC,GAA2Bk0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,MAAO,MACjHmC,GAAa,CAAEnC,MAAO,SACtBoC,GAA2Bg0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,MAAO,MACjHqC,GAA2B+zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,OAAQ,MAClHsC,GAA2B8zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACnHuC,GAA2B6zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,OAAQ,MAClHwC,GAA4B4zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpHyC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,SAAU,MACrH0C,GAA4B0zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpH2C,GAA4ByzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpH4C,GAA4BwzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpH6C,GAA4BuzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpH8C,GAA4BszC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,QAAS,MACpH+C,GAA4BqzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,SAAW,UAAW,MAEtH,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK2I,SAAW3I,EAAK2I,QAAL,MAAA3I,EAAI,cACrB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKsxC,OACf,KAAM,EAAG,CAAC,SACbj0C,QAGJX,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,EACrCZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK05C,YAAc15C,EAAK05C,WAAL,MAAA15C,EAAI,cACxB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACb1C,MAEFb,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK25C,iBAAmB35C,EAAK25C,gBAAL,MAAA35C,EAAI,cAC7B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbzC,MAEFd,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK45C,sBAAwB55C,EAAK45C,qBAAL,MAAA55C,EAAI,cAClC,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbxC,MAEFf,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK65C,kBAAoB75C,EAAK65C,iBAAL,MAAA75C,EAAI,cAC9B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbvC,MAEFhB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK85C,gBAAkB95C,EAAK85C,eAAL,MAAA95C,EAAI,cAC5B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbtC,MAEFjB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAK+5C,qBAAuB/5C,EAAK+5C,oBAAL,MAAA/5C,EAAI,cACjC,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbrC,MAEFlB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKg6C,mBAAqBh6C,EAAKg6C,kBAAL,MAAAh6C,EAAI,cAC/B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbpC,MAEFnB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKi6C,mBAAqBj6C,EAAKi6C,kBAAL,MAAAj6C,EAAI,cAC/B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbnC,MAEFpB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKk6C,mBAAqBl6C,EAAKk6C,kBAAL,MAAAl6C,EAAI,cAC/B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACblC,MAEFrB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKm6C,mBAAqBn6C,EAAKm6C,kBAAL,MAAAn6C,EAAI,cAC/B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKC,MACf,KAAM,EAAG,CAAC,SACbjC,MAEFtB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKo6C,cAAgBp6C,EAAKo6C,aAAL,MAAAp6C,EAAI,cAC1B,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKmwC,MACf,KAAM,EAAG,CAAC,SACblyC,MAEFvB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,SACP0E,QAAS7F,EAAO,MAAQA,EAAO,IAE3C,kBAAcD,EAAKq6C,oBAAsBr6C,EAAKq6C,mBAAL,MAAAr6C,EAAI,cAChC,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKmwC,MACf,KAAM,EAAG,CAAC,SACbjyC,UAIL,OCvLP,QAAem2B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,sBACN0e,WAAY,CACVC,WAAAA,IAEFte,MAAO,CAAC,SACRC,MAN6B,SAMvBpyB,EAAGqyB,GACP,IAAMkb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,OACxBwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAEzB,IAAM3V,EAAU,WACdmyB,EAAQW,KAAK,UAETie,EAAa,WACjB1D,EAAMsE,mBAAmBllC,GAAoBO,UAC7CmlB,EAAQW,KAAK,UAETke,EAAkB,WACtB3D,EAAMsE,mBAAmBllC,GAAoBiB,gBAC7CykB,EAAQW,KAAK,UAETme,EAAuB,WAC3B5D,EAAMsE,mBAAmBllC,GAAoBkB,sBAC7CwkB,EAAQW,KAAK,UAEToe,EAAmB,WACvB7D,EAAMsE,mBAAmBllC,GAAoBmB,iBAC7CukB,EAAQW,KAAK,UAETqe,EAAiB,WACrB9D,EAAMsE,mBAAmBllC,GAAoBoB,eAC7CskB,EAAQW,KAAK,UAETse,EAAsB,WAC1B/D,EAAMsE,mBAAmBllC,GAAoBqB,qBAC7CqkB,EAAQW,KAAK,UAETue,EAAoB,WACxBhE,EAAMsE,mBAAmBllC,GAAoBsB,kBAC7CokB,EAAQW,KAAK,UAETwe,EAAoB,WACxBjE,EAAMsE,mBAAmBllC,GAAoBuB,kBAC7CmkB,EAAQW,KAAK,UAETye,EAAoB,WACxBlE,EAAMsE,mBAAmBllC,GAAoBwB,kBAC7CkkB,EAAQW,KAAK,UAET0e,EAAoB,WACxBnE,EAAMsE,mBAAmBllC,GAAoByB,kBAC7CikB,EAAQW,KAAK,UAET2e,EAAe,WACnBpE,EAAMsE,mBAAmBllC,GAAoBe,aAC7C2kB,EAAQW,KAAK,UAET4e,EAAqB,WACzBrE,EAAMsE,mBAAmBllC,GAAoBgB,oBAC7C0kB,EAAQW,KAAK,UAEf,MAAO,CACLmd,OAAAA,EACA3yC,KAAAA,GACA0C,QAAAA,EACA+wC,WAAAA,EACAC,gBAAAA,EACAC,qBAAAA,EACAC,iBAAAA,EACAC,eAAAA,EACAC,oBAAAA,EACAC,kBAAAA,EACAC,kBAAAA,EACAC,kBAAAA,EACAC,kBAAAA,EACAC,aAAAA,EACAC,mBAAAA,MC/EN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCIA,IAAe/f,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,YACN0e,WAAY,CACVsB,UAAAA,GACArB,WAAAA,GACAsB,SAAAA,GACAC,oBAAAA,IAEFjgB,MAAO,CACL31B,QAAS,CACPqG,KAAMypB,GACN8F,UAAU,IAGdG,MAAO,CAAC,UACRC,MAf6B,SAevBpyB,EAAGqyB,GACP,IAAMkb,EAAQC,KACRvtC,GAAoBivC,EAAAA,EAAAA,KAAI,GACxB9uC,GAA+B8uC,EAAAA,EAAAA,KAAI,GAEnC90C,EAAW,SAACK,GAChB43B,EAAQW,KAAK,SAAUv4B,IAGnBwC,EAAS,SAACgP,GACVshC,EAAM1D,WAAahE,GAASpoC,KAC9BwjC,GAAYjoB,OAAO/M,GAEnBshC,EAAMv0B,OAAO/M,IAIX/O,EAAS,SAACkV,GACdm7B,EAAM0E,aAAa7/B,IAGf9U,EAAS,WACbiwC,EAAM2E,kBAGFv0C,EAAS,WACb4vC,EAAM4E,YAGFr0C,EAAW,WACfmjC,GAAYpjC,UAGRG,EAAa,WACjBuvC,EAAM6E,sBAGFj0C,EAAgB,WACpBovC,EAAM8E,gBAGFh0C,EAAa,WACjBkvC,EAAM+E,sBAGF9zC,EAAgB,WACpB+uC,EAAMgF,gBAGF7zC,EAAsB,WAC1B6uC,EAAMiF,wBAGF3zC,EAAoB,WACxB0uC,EAAMkF,sBAGFvzC,EAAiB,WACrBkB,EAA6ByV,OAAQ,GAGjC7W,EAAe,WACnBuuC,EAAMmF,cAGFvzC,EAAoB,WACxBouC,EAAMoF,wBAGFpzC,EAAuB,WAC3BguC,EAAMqF,iCAGFnzC,EAAS,WACb+tC,KAAWlC,aAGP3rC,EAAe,WACnBM,EAAkB4V,OAAQ,GAGtB/V,EAAgB,WACpBytC,EAAMsF,qBAGFn2C,GAAY82B,EAAAA,EAAAA,KAChB,kBAAM+Z,EAAM1D,WAAahE,GAASoG,oBAG9BxvC,GAAY+2B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM/B,mBAEjCjyC,GAAai6B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMh0C,cAElC8C,GAAWm3B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM7yB,OAAOre,YAEvCC,GAAWk3B,EAAAA,EAAAA,KAAS,WACxB,IAAMvnB,EAAOshC,EAAM7yB,OAAOhB,QAAQzN,KAClC,OAAOA,aAAgBL,GAAOK,OAAO3I,KAGjC3G,GAAkB62B,EAAAA,EAAAA,KAAS,WAC/B,OAAO+Z,EAAM7yB,OAAO5C,SAAS2O,oBAC3BrT,GAAkBY,eAIhBpX,GAAkB42B,EAAAA,EAAAA,KAAS,WAC/B,OAAO+Z,EAAM7yB,OAAO5C,SAAS2O,oBAC3BrT,GAAkBa,eAIhBpX,GAAoB22B,EAAAA,EAAAA,KAAS,kBACjC+Z,EAAM1D,WAAahE,GAASpoC,KAAO8vC,EAAMvR,iBAAc14B,KAEnDxG,GAAqB02B,EAAAA,EAAAA,KAAS,kBAClC+Z,EAAM1D,WAAahE,GAASpoC,KAAO8vC,EAAM7C,kBAAepnC,KAEpDvG,GAAoBy2B,EAAAA,EAAAA,KAAS,kBACjC+Z,EAAM1D,WAAahE,GAASpoC,KAAO8vC,EAAMtR,iBAAc34B,KAEnDtG,GAAqBw2B,EAAAA,EAAAA,KAAS,kBAClC+Z,EAAM1D,WAAahE,GAASpoC,KAAO8vC,EAAM5C,kBAAernC,KAGpDlG,GAAgBo2B,EAAAA,EAAAA,KAAS,WAC7B,MAAO,CACLx6B,KAAMu0C,EAAM1D,WAAahE,GAASmD,OAClCtrC,KAAM6vC,EAAM1D,WAAahE,GAASpoC,KAClCI,OAAQ0vC,EAAM1D,WAAahE,GAASpoC,MAAQ8vC,EAAM/B,gBAClDpyC,SAAUm0C,EAAM1D,WAAahE,GAASmD,OACtC9qC,YAAaqvC,EAAM1D,WAAahE,GAAS5nC,SACzC5E,SAAUk0C,EAAM1D,WAAahE,GAASmD,OACtCzqC,YAAagvC,EAAM1D,WAAahE,GAASvnC,SACzCG,kBAAmB8uC,EAAM1D,WAAahE,GAASmD,OAC/CpqC,gBAAiB2uC,EAAM1D,WAAahE,GAASoG,iBAC7CltC,aAAcwuC,EAAM1D,WAAahE,GAASoG,iBAC1CpsC,YACE0tC,EAAM1D,WAAahE,GAASmD,QAC5BuE,EAAM1D,WAAahE,GAAS5nC,SAC9BqB,eAAgBiuC,EAAM1D,WAAahE,GAASmD,WAIhD,MAAO,CACL/oC,kBAAAA,EACAG,6BAAAA,EACA7G,WAAAA,EACA8C,SAAAA,EACAC,SAAAA,EACAK,gBAAAA,EACAC,gBAAAA,EACAC,kBAAAA,EACAC,mBAAAA,EACAC,kBAAAA,EACAC,mBAAAA,EACAI,cAAAA,EACAhD,SAAAA,EACA6C,OAAAA,EACAC,OAAAA,EACAI,OAAAA,EACAK,OAAAA,EACAG,SAAAA,EACAE,WAAAA,EACAG,cAAAA,EACAE,WAAAA,EACAG,cAAAA,EACAE,oBAAAA,EACAG,kBAAAA,EACAK,eAAAA,EACAF,aAAAA,EACAG,kBAAAA,EACAI,qBAAAA,EACAE,OAAAA,EACAE,aAAAA,EACAG,cAAAA,EACApD,UAAAA,EACAD,UAAAA,EACAe,KAAAA,OCvMN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,UCPMuxC,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAElB,MAAO,eACtBmB,GAAa,CAAEnB,MAAO,UACtBiC,GAAa,CAAEjC,MAAO,WACtBkC,GAAa,CAAElC,MAAO,UACtBmC,GAAa,CAAC,WACdC,GAA2Bg0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,QAAS,CAAE44C,IAAK,qBAAuB,QAAS,MAC/H93C,GAAa,CAAErC,MAAO,UACtBsC,GAAa,CAAC,WACdC,GAA2B6zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,QAAS,CAAE44C,IAAK,gBAAkB,QAAS,MAE1H,SAAUx7C,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMm7C,GAAwBj7C,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOmB,GAAY,EAC3DK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrChB,EAAAA,EAAAA,IAAai6C,EAAuB,CAClCr4B,OAAQnjB,EAAKmjB,OACbs4B,YAAaz7C,EAAK07C,oBAClB,eAAgB17C,EAAK27C,YACrB,oBAAqB37C,EAAK47C,gBAC1BC,UAAW77C,EAAK87C,QAChBC,SAAU/7C,EAAK0hB,OACfs6B,YAAah8C,EAAK2hB,UAClBs6B,QAASj8C,EAAKk8C,MACdC,aAAcn8C,EAAKo8C,WACnBC,eAAgBr8C,EAAKs8C,cACpB,KAAM,EAAG,CAAC,SAAU,cAAe,eAAgB,oBAAqB,YAAa,WAAY,cAAe,UAAW,eAAgB,sBAEhJ35C,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrCX,EAAAA,EAAAA,GAAoB,QAAS,CAC3BqH,GAAI,oBACJkB,KAAM,WACN6W,QAAS/hB,EAAK47C,gBACdW,SAAUt8C,EAAO,KAAOA,EAAO,GAEzC,kBAAcD,EAAKw8C,qBAAuBx8C,EAAKw8C,oBAAL,MAAAx8C,EAAI,cACnC,KAAM,GAAIuD,IACbC,MAEFb,EAAAA,EAAAA,GAAoB,MAAOc,GAAY,EACrCd,EAAAA,EAAAA,GAAoB,QAAS,CAC3BqH,GAAI,eACJkB,KAAM,WACN6W,QAAS/hB,EAAK27C,YACdY,SAAUt8C,EAAO,KAAOA,EAAO,GAEzC,kBAAcD,EAAKy8C,iBAAmBz8C,EAAKy8C,gBAAL,MAAAz8C,EAAI,cAC/B,KAAM,GAAI0D,IACbC,SClDR,IACMrB,GAAa,CAAElB,MAAO,eACtBmB,GAAa,CAAEnB,MAAO,cACtBiC,GAAa,CAAC,YACdC,GAAa,CAAC,YACdC,GAAa,CAAC,YACdC,GAAa,CAAC,YACdC,GAAa,CACjBk0C,IAAK,WACLv2C,MAAO,aAEHsC,GAAa,CAAC,QAAS,WACvBC,GAAa,CAAEvC,MAAO,eACtBwC,GAAc,CAAExC,MAAO,aACvByC,GAAc,CAClBlC,IAAK,EACLP,MAAO,aAEH0C,GAAc,CAClBnC,IAAK,EACLP,MAAO,gBAEH2C,GAAc,CAClB4zC,IAAK,aACLv2C,MAAO,eAEH4C,GAAc,CAAC,QAAS,WACxBC,GAAc,CAAE7C,MAAO,aACvB8C,GAAc,CAClBvC,IAAK,EACLP,MAAO,gBAGH,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOmB,GAAY,EAC3DK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,iBACP0G,UAAW9H,EAAKy7C,YAChB31C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK87C,aACzD,EACDv6C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK+wC,OACf,KAAM,EAAG,CAAC,UACZ,EAAG3zC,KACNV,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,iBACP0G,UAAW9H,EAAKy7C,YAChB31C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK0hB,YACzD,EACDngB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKgxC,MACf,KAAM,EAAG,CAAC,UACZ,EAAG3zC,KACNX,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,iBACP0G,UAAW9H,EAAKy7C,YAChB31C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK2hB,eACzD,EACDpgB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKixC,MACf,KAAM,EAAG,CAAC,UACZ,EAAG3zC,KACNZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,iBACP0G,UAAW9H,EAAKy7C,YAChB31C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKk8C,WACzD,EACD36C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKkxC,MACf,KAAM,EAAG,CAAC,UACZ,EAAG3zC,OAERb,EAAAA,EAAAA,GAAoB,MAAOc,GAAY,GACpCvC,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKkhB,OAAO,SAACxM,GAC/E,OAAQxT,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAK+S,EAAK4K,OACVle,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,eAAgB,CAAE,aAAcqT,EAAK+a,UAAW6F,SAAU5gB,EAAK4gB,YACvFhX,MAAO5J,EAAK4K,OACZxZ,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK08C,aAAahoC,EAAK4K,UACjD,EACD3c,EAAAA,EAAAA,GAAoB,MAAOgB,IAAY2F,EAAAA,EAAAA,IAAiC,IAAhBoL,EAAK4K,OAAe5K,EAAK4K,OAAS,IAAK,IAC/F3c,EAAAA,EAAAA,GAAoB,MAAOiB,IAAa0F,EAAAA,EAAAA,IAAiBoL,EAAKG,MAAO,GACpE7U,EAAK47C,kBACD16C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO0C,IAAayF,EAAAA,EAAAA,IAAiBoL,EAAK8Y,MAAO,KACpF5rB,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK27C,cACDz6C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO2C,IAAawF,EAAAA,EAAAA,IAAiBoL,EAAKkL,SAAU,KACvFhe,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,GAAI8B,OACL,OACH,MACHf,EAAAA,EAAAA,GAAoB,MAAOoB,GAAa,GACrC7C,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK28C,UAAU,SAACh9B,GAClF,OAAQze,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKge,EAAO7L,MACZ1S,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,eAAgB,CAAEi0B,SAAU3V,EAAO2V,YAC3DhX,MAAOqB,EAAO7L,MACdhO,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK48C,aAAaj9B,EAAO7L,SACnD,EACDnR,EAAAA,EAAAA,GAAoB,MAAOsB,IAAaqF,EAAAA,EAAAA,IAAiBqW,EAAO9K,MAAO,GACtE7U,EAAK27C,cACDz6C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO+C,IAAaoF,EAAAA,EAAAA,IAAiBqW,EAAOC,SAAU,KACzFhe,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,GAAIoC,OACL,OACH,OC5GP,QAAes2B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,aACN0e,WAAY,CACVC,WAAAA,IAEF1e,MAAO,CACLrX,OAAQ,CACNjY,KAAMwH,OACN+nB,UAAU,GAEZghB,YAAa,CACXvwC,KAAMyvB,QACNF,UAAU,GAEZmhB,gBAAiB,CACf1wC,KAAMyvB,QACNF,UAAU,GAEZkhB,YAAa,CACXzwC,KAAMyvB,QACNF,UAAU,IAGdG,MAAO,CACL,UACA,SACA,YACA,QACA,aACA,gBAEFC,MA/B6B,SA+BvBL,EAAOM,GACX,IAAM+hB,GAAuClF,EAAAA,EAAAA,IAAI,MAC3CmF,GAAkBnF,EAAAA,EAAAA,IAAI,MAEtBmE,EAAU,WACVthB,EAAMihB,aACR3gB,EAAQW,KAAK,YAIX/Z,EAAS,WACT8Y,EAAMihB,aACR3gB,EAAQW,KAAK,WAIX9Z,EAAY,WACZ6Y,EAAMihB,aACR3gB,EAAQW,KAAK,cAIXygB,EAAQ,WACR1hB,EAAMihB,aACR3gB,EAAQW,KAAK,UAIXihB,EAAe,SAACp9B,GAChBkb,EAAMihB,aACR3gB,EAAQW,KAAK,aAAc5iB,OAAOyG,KAIhCs9B,EAAe,SAAC9oC,GAChB0mB,EAAMihB,aACR3gB,EAAQW,KAAK,eAAgB5iB,OAAO/E,KAIlCipC,GAAmB9gB,EAAAA,EAAAA,KAAS,kBAAsC,IAAhCzB,EAAMrX,OAAOhB,QAAQ7C,UAEvD4B,GAAQ+a,EAAAA,EAAAA,KAAS,WACrB,IAAMnnB,EAOA,GAWN,OAVA0lB,EAAMrX,OAAOjC,MAAMlL,SAAQ,SAACgnC,GAC1BloC,EAAIb,KAAK,CACPqL,OAAQ09B,EAAK19B,OACbzK,KAAMmoC,EAAKC,YACXzvB,KAAqB,GAAfwvB,EAAK19B,OAAc09B,EAAKE,SAAW,GACzCztB,UAAWutB,EAAKvtB,UAChB7P,QAASo9B,EAAKp9B,QACd0V,SAAU0nB,IAASxiB,EAAMrX,OAAOhB,aAG7BrN,KAGH6nC,GAAW1gB,EAAAA,EAAAA,KAAS,WACxB,IAAKzB,EAAMrX,OAAOg6B,YAAYx9B,OAC5B,OAAO,KAET,IAMInQ,EANEsF,EAKA,GAEN,IAAKtF,EAAIgrB,EAAMrX,OAAOg6B,YAAa3tC,GAAKA,EAAEkF,KAAMlF,EAAIA,EAAEmQ,OACpD7K,EAAIb,KAAK,CACPH,MAAOgB,EAAIK,OACXN,KAAMrF,EAAEytC,YACRr9B,QAASpQ,EAAEoQ,QACX0V,SAAU9lB,EAAEgQ,eAGhB,OAAO1K,KAeT,OAZAsoC,EAAAA,EAAAA,KAAU,WACR,IAAMC,EAAkBR,EAASv+B,MACjC++B,EAAgBC,WAAWtnC,SAAQ,SAACgnC,GAEhCA,aAAgBO,aAChBP,EAAKQ,UAAUC,SAAS,aAExBT,EAAKU,eAAe,CAAE3M,SAAU,OAAQ4M,MAAO,kBAK9C,CACLZ,iBAAAA,EACA77B,MAAAA,EACAy7B,SAAAA,EACAE,SAAAA,EACAC,WAAAA,EACAhB,QAAAA,EACAp6B,OAAAA,EACAC,UAAAA,EACAu6B,MAAAA,EACAQ,aAAAA,EACAE,aAAAA,EACA32C,KAAAA,OC5IN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCHa23C,GAAW,IAExB,IAAetjB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,aACN0e,WAAY,CACV4E,WAAAA,IAEFhjB,MAL6B,WAM3B,IAAMmb,EAAQC,KAERxoB,EAAO,SAACnO,GACZ02B,EAAM8H,iBAAiBx+B,IAGnBw8B,EAAU,WACdruB,EAAK,IAGD/L,EAAS,WACb+L,EAAKuoB,EAAM7yB,OAAOhB,QAAQ7C,OAAS,IAG/BqC,EAAY,WAChB8L,EAAKuoB,EAAM7yB,OAAOhB,QAAQ7C,OAAS,IAG/B48B,EAAQ,WACZzuB,EAAK5U,OAAOykB,mBAGR8e,EAAa,SAAC98B,GAClBmO,EAAKnO,IAGDg9B,EAAe,SAACxoC,GACpBkiC,EAAM4G,aAAa9oC,IAGf0oC,EAAsB,SAAC3pB,GAC3B,IAAMkrB,EAAWlrB,EAAMvb,OACvB0+B,EAAMgI,iBAAiB,CACrB7d,4BAA6B4d,EAASh8B,WAIpC06B,EAAkB,SAAC5pB,GACvB,IAAMkrB,EAAWlrB,EAAMvb,OACvB0+B,EAAMgI,iBAAiB,CACrB5d,wBAAyB2d,EAASh8B,WAIhC25B,GAAsBzf,EAAAA,EAAAA,KAAS,WACnC,OACE+Z,EAAM1D,WAAahE,GAASmD,QAC5BuE,EAAM1D,WAAahE,GAAS5nC,YAG1Bi1C,GAAc1f,EAAAA,EAAAA,KAClB,kBAAM+Z,EAAMh0C,WAAWo+B,2BAEnBwb,GAAkB3f,EAAAA,EAAAA,KACtB,kBAAM+Z,EAAMh0C,WAAWm+B,+BAGnBhd,GAAS8Y,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM7yB,UAEpC,MAAO,CACLu4B,oBAAAA,EACAE,gBAAAA,EACAD,YAAAA,EACAx4B,OAAQA,EACR24B,QAAAA,EACAp6B,OAAAA,EACAC,UAAAA,EACAu6B,MAAAA,EACAE,WAAAA,EACAE,aAAAA,EACAE,oBAAAA,EACAC,gBAAAA,MC9EN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNMn6C,GAAa,CAAElB,MAAO,QACtBmB,GAAa,CAAEnB,MAAO,QACtBiC,IAA0BD,EAAAA,EAAAA,IAAiB,UAC3CE,IAA0BF,EAAAA,EAAAA,IAAiB,UAC3CG,IAA0BH,EAAAA,EAAAA,IAAiB,QAC3CI,IAA0BJ,EAAAA,EAAAA,IAAiB,SAC3CK,IAA0BL,EAAAA,EAAAA,IAAiB,SAC3CM,IAA0BN,EAAAA,EAAAA,IAAiB,UAC3CO,IAA0BP,EAAAA,EAAAA,IAAiB,SAC3CQ,GAAc,CAAExC,MAAO,gBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAC1C09C,GAAwB19C,EAAAA,EAAAA,IAAkB,cAC1C29C,GAA2B39C,EAAAA,EAAAA,IAAkB,iBAC7C49C,GAA6B59C,EAAAA,EAAAA,IAAkB,mBAC/C69C,GAA6B79C,EAAAA,EAAAA,IAAkB,mBAErD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,CACjB,cAAnBtC,EAAKq+C,YACDn9C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CACxCQ,IAAK,EACLoB,OAAOC,EAAAA,EAAAA,IAAgB,uBAAD,OAAwBhD,EAAKs+C,aAA7B,UACrB,KAAM,KACT18C,EAAAA,EAAAA,IAAoB,IAAI,IAC5Be,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIyB,eACvE/5B,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIyB,gBAC/E,EACDt+B,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKoxC,aACf,KAAM,EAAG,CAAC,SACbh0C,IACC,IACHV,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIvW,WACvE/hB,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIvW,YAC/E,EACDtmB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK4hB,SACf,KAAM,EAAG,CAAC,SACbvkB,IACC,IACHX,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIogB,UACvE14C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIogB,WAC/E,EACDj9C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK0wC,OACf,KAAM,EAAG,CAAC,SACbpzC,IACC,IACHZ,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIwY,MACvE9wC,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIwY,OAC/E,EACDr1C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK2wC,IACf,KAAM,EAAG,CAAC,SACbpzC,IACC,IACHb,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIyY,SACvE/wC,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIyY,UAC/E,EACDt1C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK4wC,OACf,KAAM,EAAG,CAAC,SACbpzC,IACC,IACHd,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIqgB,oBACvE34C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIqgB,qBAC/E,EACDl9C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK6wC,SACf,KAAM,EAAG,CAAC,SACbpzC,IACC,IACHf,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BvB,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,MAAO,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIsgB,aACvE54C,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKu+C,aAAav+C,EAAKo+B,IAAIsgB,cAC/E,EACDn9C,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK8wC,YACf,KAAM,EAAG,CAAC,SACbpzC,IACC,MAELhB,EAAAA,EAAAA,GAAoB,MAAOiB,GAAa,EACtCrC,EAAAA,EAAAA,IAAa08C,EAAuB,CAClC78C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIyB,eAC/E38B,KAAMlD,EAAK2+C,aACV,KAAM,EAAG,CAAC,QAAS,UACtBp9C,EAAAA,EAAAA,IAAa28C,EAA0B,CACrC98C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIvW,YAC9E,KAAM,EAAG,CAAC,WACbtmB,EAAAA,EAAAA,IAAa48C,EAA4B,CACvC/8C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIogB,UAC/Et7C,KAAMlD,EAAK2+C,YACX,gBAAgB,GACf,KAAM,EAAG,CAAC,QAAS,UACtBp9C,EAAAA,EAAAA,IAAa48C,EAA4B,CACvC/8C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIwY,MAC/E1zC,KAAMlD,EAAK2+C,YACX,gBAAgB,GACf,KAAM,EAAG,CAAC,QAAS,UACtBp9C,EAAAA,EAAAA,IAAa68C,EAA4B,CACvCh9C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIyY,SAC/E3zC,KAAMlD,EAAK2+C,YACXzzC,KAAMlL,EAAK4+C,oBAAoBC,KAC9B,KAAM,EAAG,CAAC,QAAS,OAAQ,UAC9Bt9C,EAAAA,EAAAA,IAAa68C,EAA4B,CACvCh9C,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,cAAe,CAAEi0B,SAAUt1B,EAAKq+C,YAAcr+C,EAAKo+B,IAAIqgB,oBAC/Ev7C,KAAMlD,EAAK2+C,YACXzzC,KAAMlL,EAAK4+C,oBAAoBE,UAC9B,KAAM,EAAG,CAAC,QAAS,OAAQ,eC9HtC,IACMx8C,GAAa,CAAElB,MAAO,QACtBmB,GAAa,CAAC,QAAS,YAEvB,SAAUxC,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,EACrCK,EAAAA,EAAAA,GAAoB,WAAY,CAC9Bg1C,IAAK,WACLv2C,MAAO,OACPkd,MAAOte,EAAK4f,QACZm/B,WAAY/+C,EAAK++C,SACjBC,QAAS/+C,EAAO,KAAOA,EAAO,GAEtC,kBAAcD,EAAK6a,QAAU7a,EAAK6a,OAAL,MAAA7a,EAAI,cACxB,KAAM,GAAIuC,QCZnB,QAAe+3B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,gBACNM,MAF6B,WAG3B,IAAMmb,EAAQC,KACRr2B,GAAUqc,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM7yB,OAAOhB,QAAQvC,WAC9Cm/B,GAAW9iB,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM1D,UAAYhE,GAASmD,UACrDwN,GAAgBtH,EAAAA,EAAAA,IAAI,MAEpB98B,EAAS,SAACgY,GACd,IAAMjT,EAAWiT,EAAMvb,OAA+BgH,MACtD03B,EAAMkJ,oBAAoBt/B,IAY5B,OATAu5B,EAAAA,EAAAA,KAAU,WACR8F,EAAS3gC,MAAMu6B,iBAAiB,QAAQ,SAAChmB,GACvCA,EAAMiJ,qBAERmjB,EAAS3gC,MAAMu6B,iBAAiB,SAAS,SAAChmB,GACxCA,EAAMiJ,wBAIH,CACLmjB,SAAAA,EACAr/B,QAAAA,EACAm/B,SAAAA,EACAlkC,OAAAA,MCxBN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNMvY,GAAa,CAAElB,MAAO,QAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAM8+C,GAAoC5+C,EAAAA,EAAAA,IAAkB,0BAE5D,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,CACpCtC,EAAKqrC,cACDnqC,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAay9C,EAAmC,CAC7Dx9C,IAAK,EACL,eAAgB3B,EAAKo/C,YACrB7kB,KAAMv6B,EAAKqrC,YAAY9Q,KACvBqO,KAAM5oC,EAAKqrC,YACXxW,OAAQ70B,EAAKq/C,eACZ,KAAM,EAAG,CAAC,eAAgB,OAAQ,OAAQ,aAC7Cz9C,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKsrC,cACDpqC,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAay9C,EAAmC,CAC7Dx9C,IAAK,EACL,eAAgB3B,EAAKo/C,YACrB7kB,KAAMv6B,EAAKsrC,YAAY/Q,KACvBqO,KAAM5oC,EAAKsrC,YACXzW,OAAQ70B,EAAKq/C,eACZ,KAAM,EAAG,CAAC,eAAgB,OAAQ,OAAQ,aAC7Cz9C,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK2vC,aACDzuC,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAay9C,EAAmC,CAC7Dx9C,IAAK,EACL,eAAgB3B,EAAKo/C,YACrB7kB,KAAMv6B,EAAK2vC,WAAWpV,KACtBqO,KAAM5oC,EAAK2vC,WACX9a,OAAQ70B,EAAKq/C,eACZ,KAAM,EAAG,CAAC,eAAgB,OAAQ,OAAQ,aAC7Cz9C,EAAAA,EAAAA,IAAoB,IAAI,O,YClC5B41C,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAElB,MAAO,QACtBmB,GAAa,CAAEnB,MAAO,WACtBiC,GAAa,CAAEjC,MAAO,UACtBkC,GAA2Bk0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,WAAY,MACvHmC,GAAa,CAAEnC,MAAO,SACtBoC,GAAa,CAAEpC,MAAO,UACtBqC,GAA2B+zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,SAAU,MACrHsC,GAAa,CAAEtC,MAAO,SACtBuC,GAAa,CAAEvC,MAAO,UACtBwC,GAA4B4zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,SAAU,MACtHyC,GAAc,CAAEzC,MAAO,SACvB0C,GAAc,CAAE1C,MAAO,UACvB2C,GAA4ByzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,kBAAmB,MAC/H4C,GAAc,CAAE5C,MAAO,SACvB6C,GAAc,CAAE7C,MAAO,UACvB8C,GAA4BszC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,YAAa,MACzH+C,GAAc,CAAE/C,MAAO,SACvBgD,GAAc,CAAEhD,MAAO,UACvBiD,GAA4BmzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,SAAW,aAAc,MAC1Hw2C,GAAc,CAAEx2C,MAAO,SACvBk+C,IAA2BC,EAAAA,EAAAA,IAAmB,kVAA+V,GAC7YC,GAAc,CAAEp+C,MAAO,oBACvBq+C,GAAc,CAAEr+C,MAAO,6BACvBs+C,GAAc,CAAEt+C,MAAO,qBACvBu+C,GAAc,CAAEv+C,MAAO,qBACvBw+C,GAAc,CAAEx+C,MAAO,qBACvBy+C,GAAc,CAAEz+C,MAAO,0BACvB0+C,GAAc,CAAE1+C,MAAO,oBACvB2+C,GAAc,CAAC,WACfC,IAA2B58C,EAAAA,EAAAA,IAAiB,QAE5C,SAAUrD,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAC1C0/C,GAA6B1/C,EAAAA,EAAAA,IAAkB,mBAErD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,EACrCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,CACrCC,IACAX,EAAAA,EAAAA,GAAoB,OAAQY,IAAY+F,EAAAA,EAAAA,IAAiBtJ,EAAKu6B,MAAO,MAEvE53B,EAAAA,EAAAA,GAAoB,MAAOa,GAAY,CACrCC,IACAd,EAAAA,EAAAA,GAAoB,OAAQe,IAAY4F,EAAAA,EAAAA,IAAiBtJ,EAAK4oC,KAAKzB,WAAannC,EAAK4oC,KAAKzB,WAAa,OAAQ,MAEjHxkC,EAAAA,EAAAA,GAAoB,MAAOgB,GAAY,CACrCC,IACAjB,EAAAA,EAAAA,GAAoB,OAAQkB,IAAayF,EAAAA,EAAAA,IAAiBtJ,EAAK4oC,KAAKV,iBAAmB,OAAQ,MAEjGvlC,EAAAA,EAAAA,GAAoB,MAAOmB,GAAa,CACtCC,IACApB,EAAAA,EAAAA,GAAoB,OAAQqB,IAAasF,EAAAA,EAAAA,IAAiBtJ,EAAK4oC,KAAKP,KAAO,OAAQ,MAErF1lC,EAAAA,EAAAA,GAAoB,MAAOsB,GAAa,CACtCC,IACAvB,EAAAA,EAAAA,GAAoB,OAAQwB,IAAamF,EAAAA,EAAAA,IAAiBtJ,EAAK4oC,KAAKrB,OAAS,OAAQ,MAEvF5kC,EAAAA,EAAAA,GAAoB,MAAOyB,GAAa,CACtCC,IACA1B,EAAAA,EAAAA,GAAoB,OAAQi1C,IAAatuC,EAAAA,EAAAA,IAAiBtJ,EAAK4oC,KAAKR,UAAiC,IAArBpoC,EAAK4oC,KAAKR,UAAgB8X,QAAQ,GAAK,OAAS,MAAO,OAG3IZ,IACA38C,EAAAA,EAAAA,GAAoB,MAAO,CACzBvB,MAAO,OACP2B,OAAOC,EAAAA,EAAAA,IAAgB,UAAD,OAAWhD,EAAK60B,OAAS,GAAzB,QACrB,GACA3zB,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKo/C,YACnEp/C,EAAK4oC,KAAKjC,SACV3mC,EAAK4oC,KAAKuX,iBAAiB,SAACpZ,EAASjzB,GACzC,OAAQ5S,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKmS,EACL1S,OAAOC,EAAAA,EAAAA,IAAgB,CAAC,YAAa,CAAEg0B,UAAWr1B,EAAKo/C,aAAmC,IAApBrY,EAAQE,YAC7E,EACDtkC,EAAAA,EAAAA,GAAoB,MAAO68C,IAAal2C,EAAAA,EAAAA,IAAiBy9B,EAAQxK,QAAUwK,EAAQxK,OAAS,KAAK2jB,QAAQ,GAAK,IAAM,IAAK,IACzHv9C,EAAAA,EAAAA,GAAoB,MAAO88C,IAAan2C,EAAAA,EAAAA,IAAiBy9B,EAAQE,SAAW,IAAK,IACjFtkC,EAAAA,EAAAA,GAAoB,MAAO+8C,IAAap2C,EAAAA,EAAAA,IAAiBy9B,EAAQK,QAAS99B,EAAAA,EAAAA,IAAiBy9B,EAAQO,gBAAkBP,EAAQK,MAAQ,IAAM,KAAM99B,EAAAA,EAAAA,IAAiBy9B,EAAQO,gBAAiB,IAC3L3kC,EAAAA,EAAAA,GAAoB,MAAOg9C,IAAar2C,EAAAA,EAAAA,IAAiBy9B,EAAQQ,OAAQ,IACzE5kC,EAAAA,EAAAA,GAAoB,MAAOi9C,IAAat2C,EAAAA,EAAAA,IAAiBy9B,EAAQW,OAAS,KAAMp+B,EAAAA,EAAAA,IAAiBy9B,EAAQY,UAAYZ,EAAQY,UAAY,IAAK,IAC9IhlC,EAAAA,EAAAA,GAAoB,MAAOk9C,IAAav2C,EAAAA,EAAAA,IAAiBy9B,EAAQc,WAAa,KAAO,IAAM,KAAMv+B,EAAAA,EAAAA,IAAiBy9B,EAAQgB,WAAa,KAAO,IAAM,KAAMz+B,EAAAA,EAAAA,IAAiBy9B,EAAQY,UAAY,IAAM,IAAK,IAC1MhlC,EAAAA,EAAAA,GAAoB,MAAOm9C,GAAa,CACrC/Y,EAAQR,IAA4B,IAAtBQ,EAAQR,GAAGpxB,QAAgB4xB,EAAQlyB,OAC7C3T,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLmE,QAAS,SAAC8C,GAAD,OAAkB5I,EAAKogD,YAAYrZ,KAC3C,EACDxlC,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKqxC,MACf,KAAM,EAAG,CAAC,SACb0I,IACC,EAAGD,MACNn+C,EAAAA,EAAAA,IAAoB,IAAI,IAC5BwB,EAAAA,EAAAA,IAAiB,KAAMkG,EAAAA,EAAAA,IAAiBy9B,EAAQlyB,MAAO,MAExD,MACD,OACH,GACF7U,EAAKqgD,UACDn/C,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAau+C,EAA4B,CACtDt+C,IAAK,EACLmD,SAAU9E,EAAKqgD,QAAQv7C,SACvByhC,GAAIvmC,EAAKqgD,QAAQ9Z,GACjB+Z,MAAOtgD,EAAKqgD,QAAQC,MACpB33C,QAAS3I,EAAKugD,cACb,KAAM,EAAG,CAAC,WAAY,KAAM,QAAS,cACxC3+C,EAAAA,EAAAA,IAAoB,IAAI,OC5GlC,IACMU,GAAa,CAAEq1C,IAAK,UACpBp1C,GAAa,CAAEnB,MAAO,eACtBiC,GAAa,CAAEjC,MAAO,eACtBkC,GAAa,CAAElC,MAAO,eACtBmC,GAAa,CAAEnC,MAAO,eACtBoC,GAAa,CAAEpC,MAAO,gBAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAC1CgE,GAAuBhE,EAAAA,EAAAA,IAAkB,aAE/C,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCf,EAAAA,EAAAA,IAAagD,EAAsB,CACjCnD,MAAO,QACP,mBAAoBpB,EAAKgC,WAAW0C,WACpC,mBAAoB1E,EAAKgC,WAAW2C,WACpC,mBAAoB3E,EAAKgC,WAAW4C,eACpC,WAAY5E,EAAK6E,QACjBC,SAAU9E,EAAK0wC,IACf,YAAa1wC,EAAK+E,SAClBC,KAAMhF,EAAKgF,MACV,CACD,iBAAiBY,EAAAA,EAAAA,KAAS,iBAAM,EAC9BjD,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKwgD,QAAUxgD,EAAKwgD,OAAL,MAAAxgD,EAAI,cAChB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKkC,MACf,KAAM,EAAG,CAAC,YAEfxF,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK+tC,OAAS/tC,EAAK+tC,MAAL,MAAA/tC,EAAI,cACf,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKsxC,OACf,KAAM,EAAG,CAAC,cAGjB50C,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrCX,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK87C,SAAW97C,EAAK87C,QAAL,MAAA97C,EAAI,cACjB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK+wC,OACf,KAAM,EAAG,CAAC,YAEfr0C,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAKk8C,OAASl8C,EAAKk8C,MAAL,MAAAl8C,EAAI,cACf,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKkxC,MACf,KAAM,EAAG,CAAC,cAGjBx0C,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,EACrCZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK0hB,QAAU1hB,EAAK0hB,OAAL,MAAA1hB,EAAI,cAChB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKgxC,MACf,KAAM,EAAG,CAAC,YAEft0C,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,eACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAE9C,kBAAcD,EAAK2hB,WAAa3hB,EAAK2hB,UAAL,MAAA3hB,EAAI,cACnB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKixC,MACf,KAAM,EAAG,CAAC,mBAKrBzuC,EAAG,GACF,EAAG,CAAC,mBAAoB,mBAAoB,mBAAoB,WAAY,WAAY,YAAa,UACxG9F,EAAAA,EAAAA,GAAoB,MAAOa,GAAY,GACpCtC,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKsgD,OAAO,SAAC1X,GAC/E,OAAQ1nC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKinC,EACLxnC,MAAO,gBACNkI,EAAAA,EAAAA,IAAiBs/B,GAAO,MACzB,SAEL,OC5FP,QAAetO,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,kBACN0e,WAAY,CAAEsB,UAAAA,GAAWrB,WAAAA,IACzB1e,MAAO,CACL11B,SAAU,CACRoG,KAAMoR,OACNme,UAAU,GAEZ8L,GAAI,CACFr7B,KAAMwH,OACN+nB,UAAU,GAEZ6lB,MAAO,CACLp1C,KAAMwH,OACNgoB,QAAS,GACTD,UAAU,IAGdG,MAAO,CAAC,SACRC,MAnB6B,SAmBvBL,EAAOM,GACX,IAAMkb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClB9yC,GAAUm2B,EAAAA,EAAAA,IAAS,IAAIrG,GAAS,EAAG,IACnCxR,GAAS6X,EAAAA,EAAAA,IAAS,IAAI1a,IACtBtb,GAAqB2yC,EAAAA,EAAAA,IAAI3B,EAAMh0C,WAAWiD,eAE1Cw7C,EAAa,WACjB57C,EAAQ+vB,MAA4B,GAApBuP,OAAOuc,WACvB77C,EAAQgwB,OAA8B,GAArBsP,OAAOwc,YAAoB,IAGxCC,EAAe,WACnB,IAAM97C,EAAWsU,GAASpE,UAAUwlB,EAAM11B,UAC1C,GAAKA,EAAL,CAGAqe,EAAOlN,MAAMnR,GALW,iBAML01B,EAAM+L,IAND,IAMxB,2BAA6B,KAAlBl6B,EAAkB,QACrBqI,EAAOyO,EAAOre,SAAS0hC,iBAAiBn6B,GAC9C,IAAKqI,EACH,MAEFyO,EAAOE,OAAO3O,EAAM,CAAE6F,kBAAkB,KAXlB,8BAaxB4I,EAAOsK,KAAK,MAGd0rB,EAAAA,EAAAA,KAAS,gCAAC,8FACRsH,IACAG,IACAzc,OAAO0U,iBAAiB,SAAU4H,GAClC9H,GAAgBC,EAAOt6B,OAJf,6CAOVuiC,EAAAA,EAAAA,KAAY,WACV1c,OAAO2c,oBAAoB,SAAUL,OAGvCtlB,EAAAA,EAAAA,IAAM,CAAC,kBAAMX,EAAM11B,UAAU,kBAAM01B,EAAM+L,MAAK,WAC5Cqa,IACAjI,GAAgBC,EAAOt6B,UAGzB,IAAMyvB,EAAQ,WACZjT,EAAQW,KAAK,UAGTqgB,EAAU,WACd34B,EAAOsK,KAAK,IAGRyuB,EAAQ,WACZ/4B,EAAOsK,KAAK5U,OAAOykB,mBAGf5b,EAAS,WACbyB,EAAOzB,UAGHC,EAAY,WAChBwB,EAAOxB,aAGH6+B,EAAS,WACbx7C,EAAKsZ,OAAStZ,EAAKsZ,OAGfoyB,GAAMzU,EAAAA,EAAAA,KAAS,kBAAM9Y,EAAOre,YAC5BC,GAAWk3B,EAAAA,EAAAA,KAAS,kBACxB9Y,EAAOhB,QAAQzN,gBAAgBL,GAAO8O,EAAOhB,QAAQzN,KAAO,QAG9D,MAAO,CACLkkC,OAAAA,EACA52C,WAAYg0C,EAAMh0C,WAClB0uC,IAAAA,EACA3rC,SAAAA,EACAF,QAAAA,EACAG,KAAAA,EACA+oC,MAAAA,EACA+N,QAAAA,EACAI,MAAAA,EACAx6B,OAAAA,EACAC,UAAAA,EACA6+B,OAAAA,EACAv6C,KAAAA,OCtHN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCIA,IAAeq0B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,yBACN0e,WAAY,CACVC,WAAAA,GACA6H,gBAAAA,IAEFvmB,MAAO,CACL4kB,YAAa,CACXl0C,KAAMyvB,QACNF,UAAU,GAEZF,KAAM,CACJrvB,KAAMoR,OACNme,UAAU,GAEZmO,KAAM,CACJ19B,KAAMw7B,GACNjM,UAAU,GAEZ5F,OAAQ,CACN3pB,KAAM2N,OACN4hB,UAAU,IAGdI,MAAO,WACL,IAAMwlB,GAAU1I,EAAAA,EAAAA,IAAoB,MAC9ByI,EAAc,SAACY,GACnB,IAAMV,EAAQ,QACIv0C,IAAdi1C,EAAI5Z,OACNkZ,EAAMrsC,KAAN,aAAiB+sC,EAAI5Z,aAEIr7B,IAAvBi1C,EAAI1Z,gBACNgZ,EAAMrsC,KAAN,gBAAoB+sC,EAAI1Z,iBAEtB0Z,EAAItZ,QACN4Y,EAAMrsC,KAAN,cAAkB+sC,EAAItZ,QAClBsZ,EAAInZ,YACNyY,EAAMrsC,KAAK,SAET+sC,EAAIjZ,YACNuY,EAAMrsC,KAAK,UAGX+sC,EAAIrZ,WACN2Y,EAAMrsC,KAAN,eAAmB+sC,EAAIrZ,YAErBqZ,EAAI/Z,SACNqZ,EAAMrsC,KAAN,aAAiB+sC,EAAI/Z,UAEvBoZ,EAAQ/hC,MAAQ,CACdxZ,SAAUk8C,EAAIl8C,SACdyhC,GAAIya,EAAIza,IAAM,GACd+Z,MAAO,CAACA,EAAMp9B,KAAK,OAAQ89B,EAAInsC,MAAQ,MAGrC0rC,EAAe,WACnBF,EAAQ/hC,MAAQ,MAElB,MAAO,CACLrY,KAAAA,GACAo6C,QAAAA,EACAD,YAAAA,EACAG,aAAAA,MCpEN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCHA,IAAejmB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,kBACN0e,WAAY,CACVgI,uBAAAA,IAEFzmB,MAAO,CACLt3B,KAAM,CACJgI,KAAMypB,GACN8F,UAAU,GAEZ2kB,YAAa,CACXl0C,KAAMyvB,QACNF,UAAU,IAGdI,MAf6B,SAevBL,GACJ,IAAMwb,EAAQC,KACR5K,GAAcpP,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMkL,yBACnC5V,GAAcrP,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMmL,yBACnCxR,GAAa1T,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMoL,wBAClC/B,GAAgBpjB,EAAAA,EAAAA,KAAS,WAC7B,IAAMvsB,GACHsmC,EAAMkL,sBAAwB,EAAI,IAClClL,EAAMmL,sBAAwB,EAAI,IAClCnL,EAAMoL,qBAAuB,EAAI,GACpC,OAAa,IAAN1xC,EAAU8qB,EAAMt3B,KAAK2xB,OAASnlB,EAAI,KAE3C,MAAO,CACL27B,YAAAA,EACAC,YAAAA,EACAqE,WAAAA,EACA0P,cAAAA,MC9BN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNM/8C,GAAa,CAAElB,MAAO,QACtBmB,GAAa,CAAC,QAAS,UAEvB,SAAUxC,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,EACrCK,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,SACL/iB,MAAO50B,EAAKkD,KAAK0xB,MAAMsrB,QAAQ,GAC/BrrB,OAAQ70B,EAAKkD,KAAK2xB,OAAOqrB,QAAQ,IAChC,KAAM,EAAG39C,Q,IC4CNq8C,G,sBAtCNyC,GAAY,IACZC,IAAaD,GAYnB,SAASE,GAAgBjgD,GACvB,OAAQA,GACN,QACE,MAAO,CACLkgD,KAAM,QACNC,MAAO,UACPC,KAAM,YACNC,KAAM,MACNtW,YAAa,YACbC,YAAa,aACbqE,WAAY,aAEhB,KAAKxR,GAAM5H,KACT,MAAO,CACLirB,KAAM,QACNC,MAAO,WACPC,KAAM,UACNC,KAAM,MACNtW,YAAa,cACbC,YAAa,SACbqE,WAAY,oBAKpB,SAAYiP,GACVA,EAAAA,OAAAA,MACAA,EAAAA,YAAAA,WAFF,CAAYA,KAAAA,GAAmB,KAK/B,QAAetkB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,kBACNC,MAAO,CACLt3B,KAAM,CACJgI,KAAMypB,GACN8F,UAAU,GAEZvvB,KAAM,CACJA,KAAMoR,OACNme,UAAU,IAGdI,MAZ6B,SAYvBL,GACJ,IAEIonB,EAFEC,GAAiBlK,EAAAA,EAAAA,IAAI,MACrB3B,EAAQC,KAEV6L,EAAWT,GACXU,EAAWT,GACX9mB,EAAMtvB,OAAS0zC,GAAoBE,WACrCgD,EAAW,IACXC,EAAW,GAGb,IAAMC,EAAe,SACnBC,EACA/b,EACA/iB,EACAnhB,GAEA,IAAMkgD,EAAyC,GAmB/C,OAlBA/+B,EAAOjC,MAAMlL,SAAQ,SAAC6L,GACpB,IAAMU,EAAO,IAAI2mB,GAAiBrnB,EAAKmxB,YACnC10B,EAAQiE,EAAK6mB,YAAc7mB,EAAK6mB,WAAWlD,GAC/C,QAAcn6B,IAAVuS,EAAqB,CACvB,OAAQkc,EAAMtvB,MACZ,KAAK0zC,GAAoBC,IACvBvgC,EAAQlL,KAAK+uC,IAAI/uC,KAAK6lB,IAAI3a,EAAOgjC,IAAYD,IAC7C,MACF,KAAKzC,GAAoBE,SACvBxgC,EAAQ4wB,GAAkB5wB,EAAOtc,GACjC,MAEJkgD,EAAWjuC,KAAK,CACdlB,EAAG8O,EAAKvC,OACRtM,EAAGsL,QAIF,CACLlU,MAAO67B,GAAuBC,GAC9B+b,YAAAA,EACA1/B,KAAM2/B,EACNE,UAAU,IAIRC,EAAe,SAACl/B,EAAyBm/B,GAC7C,MAAO,CACLl4C,MAAO,QACP63C,YAAaK,EAAQX,KACrBp/B,KAAM,CACJ,CAAExP,EAAGoQ,EAAOhB,QAAQ7C,OAAQtM,EAAG8uC,GAC/B,CAAE/uC,EAAGoQ,EAAOhB,QAAQ7C,OAAQtM,EAAG+uC,IAEjCK,UAAU,EACVG,iBAAkB,EAClBC,YAAa,IAIXC,EAAgB,SACpBt/B,EACAnhB,EACAsgD,GAEA,MAAO,CACLD,EAAal/B,EAAQm/B,GACrBN,EACEM,EAAQjX,YACRrF,GAAcG,aACdhjB,EACAnhB,GAEFggD,EACEM,EAAQhX,YACRtF,GAAcI,aACdjjB,EACAnhB,GAEFggD,EACEM,EAAQ3S,WACR3J,GAAcK,WACdljB,EACAnhB,KAKA0gD,EAAoB,SACxBv/B,EACAm/B,GAEA,MAAO,CACLvvC,EAAG,CACDovC,IAAK,EACLlpB,IAAK9V,EAAOhO,OAAS,GACrBssC,MAAO,CAAEp4C,MAAOi5C,EAAQb,OACxBC,KAAM,CAAEr4C,MAAOi5C,EAAQZ,OAEzB1uC,EAAG,CACDmvC,IAAKJ,EACL9oB,IAAK6oB,EACLL,MAAO,CAAEp4C,MAAOi5C,EAAQb,OACxBC,KAAM,CAAEr4C,MAAOi5C,EAAQZ,SAKvBiB,EAAc,SAACx/B,EAAyBnhB,GAC5C,IAAMsgD,EAAUf,GAAgBv/C,EAAWV,OAC3CsgD,EAAMr/B,KAAKqgC,SAAWH,EAAct/B,EAAQnhB,EAAYsgD,GACxDV,EAAM7yB,QAAQ1lB,MAAQi5C,EAAQd,KAC9BI,EAAM7yB,QAAQ8zB,OAASH,EAAkBv/B,EAAQm/B,GACjDV,EAAM1a,UAGFphC,EAAU,SAAC+sB,EAAmBpqB,EAAoBm5C,GACtD,GAAgB,OAAZ/uB,EAAM9f,EAAV,CAGA,IAAM6hB,EAAQgtB,EAAMiB,OAAO9vC,EAAEkmB,IAAM2oB,EAAMiB,OAAO9vC,EAAEovC,IAC5CW,EAAelB,EAAMiB,OAAO9vC,EAAE/G,MAAQ41C,EAAMiB,OAAO9vC,EAAEnH,KACrDmH,GACF8f,EAAM9f,EAAI6uC,EAAMiB,OAAO9vC,EAAEnH,MAAQk3C,EAAgBluB,EACnDgtB,EAAMiB,OAAO9vC,EAAEovC,IACX7iC,EAASlM,KAAK2vC,MAAMhwC,GAC1BijC,EAAM8H,iBAAiBx+B,KA0CzB,OAvCA65B,EAAAA,EAAAA,KAAU,WACR,IAAM6J,EAASnB,EAAUvjC,MACnBwc,EAAUkoB,EAAOC,WAAW,MAClCrB,EAAQ,IAAIsB,GAAAA,GAAMpoB,EAAS,CACzB5vB,KAAM,UACNqX,KAAM,CACJqgC,SAAU,IAEZ7zB,QAAS,CACPo0B,UAAW,CACTC,SAAU,GAEZC,qBAAqB,EACrBC,OAAQ,CAAC,SACTx9C,QAAAA,KAGJ87C,EAAMjjC,WAGRkiC,EAAAA,EAAAA,KAAY,WACVe,EAAM2B,cAGRpoB,EAAAA,EAAAA,KACE,iBAAM,CAAC6a,EAAM7yB,OAAQ6yB,EAAMh0C,eAC3B,gCAAEmhB,EAAF,KAAUnhB,EAAV,YACE2gD,EAAYx/B,EAA2BnhB,KACzC,CAAEwhD,MAAM,KAGVroB,EAAAA,EAAAA,KACE,iBAAM,CAACX,EAAMt3B,SACb,YAAW,oBAATA,EAAS,KACT0+C,EAAM6B,OAAOvgD,EAAK0xB,MAAO1xB,EAAK2xB,UAEhC,CAAE2uB,MAAM,IAGH,CACLR,OAAQnB,MC1Od,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPMrK,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAElB,MAAO,WACtBmB,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,OAAS,QAAS,MACjHiC,GAAa,CAAEjC,MAAO,SACtBkC,GAAa,CAAElC,MAAO,OACtBmC,GAAa,CAAC,QAAS,WAEvB,SAAUxD,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,MAAO,CACzBg1C,IAAK,OACLv2C,MAAO,OACP2B,OAAOC,EAAAA,EAAAA,IAAgB,UAAD,OAAWhD,EAAKkD,KAAK2xB,OAArB,QACrB,EACDlyB,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,CACrCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,IAAYiG,EAAAA,EAAAA,IAAiBtJ,EAAK0jD,UAAY,UAAW,OAErFxiD,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK2jD,MAAM,SAACC,GAC9E,OAAQ1iD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKiiD,EAAQjiD,IACbP,MAAO,WACN,EACDuB,EAAAA,EAAAA,GAAoB,MAAOW,IAAYgG,EAAAA,EAAAA,IAAiBs6C,EAAQC,aAAc,IAC9ElhD,EAAAA,EAAAA,GAAoB,QAAS,CAC3BvB,MAAO,QACPkd,MAAOslC,EAAQtlC,MACf0gC,QAAS,SAACp2C,GAAD,OAAkB5I,EAAK6a,OAAOjS,EAAQg7C,EAAQjiD,OACtD,KAAM,GAAI4B,SAEb,OACH,K,YC3BP,IAAe+2B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,gBACNC,MAAO,CACLt3B,KAAM,CACJgI,KAAMypB,GACN8F,UAAU,IAGdI,MAR6B,WAS3B,IAAMipB,GAAYnM,EAAAA,EAAAA,IAAI,MAChB3B,EAAQC,KACRyN,GAAWznB,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMxB,kBAChCmP,GAAO1nB,EAAAA,EAAAA,KAAS,WACpB,OAAOvpB,OAAOwkB,OAAOrb,IAAmBkoC,KAAI,SAACpiD,GAC3C,IAAM4e,EAAWy1B,EAAM7yB,OAAO5C,SAC9B,MAAO,CACL5e,IAAKA,EACLkiD,YAAarnC,GAA+B7a,GAC5C2c,MAAOiC,EAAS2O,oBAAoBvtB,IAAQ,WAKlDw3C,EAAAA,EAAAA,KAAU,WACR2K,EAAKxlC,MAAMu6B,iBAAiB,QAAQ,SAAChmB,GACnCA,EAAMiJ,qBAERgoB,EAAKxlC,MAAMu6B,iBAAiB,SAAS,SAAChmB,GACpCA,EAAMiJ,wBAIV,IAAMjhB,EAAS,SAACgY,EAAclxB,GAC5B,IAAMqiD,EAAQnxB,EAAMvb,OACpB0+B,EAAMiO,6BAA6B,CACjCtiD,IAAAA,EACA2c,MAAO0lC,EAAM1lC,SAIjB,MAAO,CACLwlC,KAAAA,EACAJ,SAAAA,EACAC,KAAAA,EACA9oC,OAAAA,MC3CN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCQayjC,GAAe,GAEf4F,GAAY,IAAM5F,GAE/B,IAAehkB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,UACN0e,WAAY,CACVkL,cAAAA,GACAC,gBAAAA,GACAC,gBAAAA,GACAC,WAAAA,GACApL,WAAAA,IAEF1e,MAAO,CACLt3B,KAAM,CACJgI,KAAMypB,GACN8F,UAAU,IAGdI,MAf6B,SAevBL,GACJ,IAAMwb,EAAQC,KACRsI,EAAe,SAACv0C,GACpBgsC,EACGgI,iBAAiB,CAChBpe,IAAK51B,IAEN+hC,OAAM,SAAC7d,GACNoW,GAAAA,IAAQhG,GAASoF,KAAMhgB,GAASwK,QAGhCmwB,GAAYpiB,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMh0C,WAAW49B,OAC5C+e,GAAc1iB,EAAAA,EAAAA,KAAS,kBAC3BzB,EAAMt3B,KAAK0X,OAAO,IAAI+Z,GAAS,EAAG2pB,QAEpC,MAAO,CACLD,UAAAA,EACAM,YAAAA,EACAL,aAAAA,GACAC,aAAAA,EACAt4C,KAAAA,GACAm4B,IAAAA,GACAwgB,oBAAAA,OCnDN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCUA,IAAetkB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,iBACN0e,WAAY,CACVsL,UAAAA,GACAC,WAAAA,GACAC,QAAAA,IAEF5pB,MAP6B,WAQ3B,IAAM6pB,GAAa1pB,EAAAA,EAAAA,IAAS,IAAIrG,GAAS,EAAG,IACtCgwB,GAAgBhN,EAAAA,EAAAA,IAAI,IAAIhjB,GAAS,EAAG,IAEpC8rB,EAAa,WACjBiE,EAAW9vB,MAAQuP,OAAOuc,WAC1BgE,EAAW7vB,OAASsP,OAAOwc,cAG7BxH,EAAAA,EAAAA,KAAU,WACRsH,IACAtc,OAAO0U,iBAAiB,SAAU4H,OAGpCI,EAAAA,EAAAA,KAAY,WACV1c,OAAO2c,oBAAoB,SAAUL,MAGvC,IAAM39C,EAAoB,SAACI,GACzByhD,EAAcrmC,MAAQpb,GAGlBN,GAAmBq5B,EAAAA,EAAAA,KAAS,WAChC,IAAM2oB,EACJ3O,KAAWj0C,WAAW49B,MAAQxB,GAAIsgB,UAC9BmG,GACAC,GACN,OAAO,IAAInwB,GACT+vB,EAAW9vB,MAAQmwB,GACnBL,EAAW7vB,OAAS+vB,MAIlB3hD,GAAkBg5B,EAAAA,EAAAA,KAAS,WAC/B,MAAO,CACLrH,MAAO,GAAF,OAAK8vB,EAAW9vB,MAAQ+vB,EAAcrmC,MAAMsW,MAA5C,MACLC,OAAQ,GAAF,OAAK8vB,EAAcrmC,MAAMuW,OAAzB,UAIJ1xB,GAAiB84B,EAAAA,EAAAA,KAAS,WAC9B,OAAO,IAAItH,GACT+vB,EAAW9vB,MACX8vB,EAAW7vB,OAAS8vB,EAAcrmC,MAAMuW,WAI5C,MAAO,CACLjyB,iBAAAA,EACAK,gBAAAA,EACAE,eAAAA,EACAL,kBAAAA,MCtEN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,UCPM00C,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAEq1C,IAAK,UACpBp1C,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,MAAO,MACxHiC,GAAa,CAAEjC,MAAO,oBACtBkC,GAAa,CAAElC,MAAO,WACtBmC,GAAa,CAAEnC,MAAO,UACtBoC,GAA2Bg0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,aAAe,UAAW,MACzHqC,GAAa,CAAErC,MAAO,UACtBsC,GAA2B8zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,aAAe,UAAW,MACzHuC,GAAa,CAAEvC,MAAO,mBACtBwC,IAA2BR,EAAAA,EAAAA,IAAiB,YAC5CS,GAAc,CAAEzC,MAAO,uBACvB0C,GAAc,CAAE1C,MAAO,+BACvB2C,GAAc,CAAE3C,MAAO,oBACvB4C,GAA4BwzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,0BAA4B,QAAS,MACrI6C,GAAc,CAClB0zC,IAAK,QACLv2C,MAAO,aACP8J,KAAM,SACNi3C,IAAK,IACLlpB,IAAK,KACLzhB,KAAM,KAEFtT,GAA4BszC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,MAAO,MAClI+C,GAAc,CAClBwzC,IAAK,UACLv2C,MAAO,aACP8J,KAAM,SACNi3C,IAAK,IACLlpB,IAAK,KACLzhB,KAAM,KAEFpT,GAA4BozC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIiD,GAAc,CAAEjD,MAAO,oBACvBw2C,GAA4BJ,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,0BAA4B,OAAQ,MACpIk+C,GAAc,CAClB3H,IAAK,UACLv2C,MAAO,oBACP8J,KAAM,SACNi3C,IAAK,IACLlpB,IAAK,KACLzhB,KAAM,KAEFgoC,GAA4BhI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIq+C,GAAc,CAAEr+C,MAAO,oBACvBs+C,GAA4BlI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,0BAA4B,MAAO,MACnIu+C,GAAc,CAClBhI,IAAK,YACLv2C,MAAO,oBACP8J,KAAM,SACNi3C,IAAK,IACLlpB,IAAK,KACLzhB,KAAM,KAEFooC,GAA4BpI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIy+C,GAAc,CAAEz+C,MAAO,0BACvB0+C,GAAc,CAAE1+C,MAAO,oBACvB2+C,GAAc,CAAEpI,IAAK,iBACrBqI,IAA2BT,EAAAA,EAAAA,IAAmB,gpBAAuqB,IACrtByF,GAAc,CAClBhF,IAEIiF,GAAc,CAAE7jD,MAAO,oBACvB8jD,GAAc,CAClBl7C,GAAI,yBACJ2tC,IAAK,sBACLzsC,KAAM,YAEFi6C,GAA4B3N,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,QAAS,CAAE44C,IAAK,0BAA4B,eAAgB,MAC5I6J,GAAc,CAAEhkD,MAAO,oBACvBikD,GAAc,CAClBr7C,GAAI,iBACJ2tC,IAAK,eACLzsC,KAAM,YAEFo6C,GAA4B9N,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,QAAS,CAAE44C,IAAK,kBAAoB,aAAc,MAClIgK,GAAc,CAAEnkD,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMmlD,GAA4BjlD,EAAAA,EAAAA,IAAkB,kBAC9C+D,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrCX,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,CACrCC,IACAjC,EAAAA,EAAAA,IAAaikD,EAA2B,CACtCC,QAASzlD,EAAKylD,QACd,aAAczlD,EAAK0lD,eACnB,kBAAmB1lD,EAAK+H,eAAe02B,KACvC,wBAAwB,EACxB,wBAAwB,EACxB,0BAA0B,EAC1BknB,sBAAuB3lD,EAAK4lD,sBAC5BC,eAAgB7lD,EAAK8lD,qBACpB,KAAM,EAAG,CAAC,UAAW,aAAc,kBAAmB,wBAAyB,sBAEpFnjD,EAAAA,EAAAA,GAAoB,MAAOc,GAAY,CACrCC,GACC1D,EAAK+lD,iBACD7kD,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAa8jD,EAA2B,CACrD7jD,IAAK,EACL8jD,QAASzlD,EAAKylD,QACd,aAAczlD,EAAK+lD,eACnB,kBAAmB/lD,EAAK+H,eAAe02B,KACvC,wBAAwB,EACxB,wBAAwB,EACxB,0BAA0B,EAC1BknB,sBAAuB3lD,EAAK4lD,sBAC5BC,eAAgB7lD,EAAKgmD,qBACpB,KAAM,EAAG,CAAC,UAAW,aAAc,kBAAmB,wBAAyB,qBAClFpkD,EAAAA,EAAAA,IAAoB,IAAI,QAGhCe,EAAAA,EAAAA,GAAoB,MAAOgB,GAAY,EACrChB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS7F,EAAO,KAAOA,EAAO,GAE1C,kBAAcD,EAAKimD,aAAejmD,EAAKimD,YAAL,MAAAjmD,EAAI,cACzB,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKowC,QACf,KAAM,EAAG,CAAC,SACbzyC,UAINjB,EAAAA,EAAAA,GAAoB,MAAOkB,GAAa,EACtClB,EAAAA,EAAAA,GAAoB,MAAOmB,GAAa,EACtCnB,EAAAA,EAAAA,GAAoB,MAAOoB,GAAa,CACtCC,IACArB,EAAAA,EAAAA,GAAoB,QAASsB,GAAa,KAAM,KAChDC,IACAvB,EAAAA,EAAAA,GAAoB,QAASwB,GAAa,KAAM,KAChDC,MAEFzB,EAAAA,EAAAA,GAAoB,MAAO0B,GAAa,CACtCuzC,IACAj1C,EAAAA,EAAAA,GAAoB,QAAS28C,GAAa,KAAM,KAChDE,MAEF78C,EAAAA,EAAAA,GAAoB,MAAO88C,GAAa,CACtCC,IACA/8C,EAAAA,EAAAA,GAAoB,QAASg9C,GAAa,KAAM,KAChDC,QAGJj9C,EAAAA,EAAAA,GAAoB,MAAOk9C,GAAa,EACtCl9C,EAAAA,EAAAA,GAAoB,MAAOm9C,GAAa,EACtCn9C,EAAAA,EAAAA,GAAoB,SAAUo9C,GAAaiF,GAAa,QAE1DriD,EAAAA,EAAAA,GAAoB,MAAOsiD,GAAa,EACtCtiD,EAAAA,EAAAA,GAAoB,QAASuiD,GAAa,KAAM,KAChDC,MAEFxiD,EAAAA,EAAAA,GAAoB,MAAOyiD,GAAa,EACtCziD,EAAAA,EAAAA,GAAoB,QAAS0iD,GAAa,KAAM,KAChDC,UAIN3iD,EAAAA,EAAAA,GAAoB,MAAO4iD,GAAa,EACtC5iD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKkmD,aACzD,SACHvjD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK0yC,cACzD,YAEJ,OCjLD,SAAUyT,GAAkBnC,GAChC,IAAI1lC,EAAQzF,OAAOmrC,EAAM1lC,OAOzB,OANI0lC,EAAM/qB,MACR3a,EAAQlL,KAAK+uC,IAAI7jC,EAAOzF,OAAOmrC,EAAM/qB,OAEnC+qB,EAAM7B,MACR7jC,EAAQlL,KAAK6lB,IAAI3a,EAAOzF,OAAOmrC,EAAM7B,OAEhC7jC,ECNT,IAAMk5B,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAElB,MAAO,QACtBmB,GAAa,CAAC,SACdc,GAAa,CAAC,SACdC,GAAa,CACjB3B,IAAK,EACLP,MAAO,eAEHmC,GAA2Bi0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,mBAAqB,gBAAiB,MACtIoC,GAAa,CAAEpC,MAAO,qBACtBqC,GAAa,CACjB9B,IAAK,EACLP,MAAO,eAEHsC,GAA2B8zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,mBAAqB,UAAW,MAChIuC,GAAa,CAAEvC,MAAO,qBACtBwC,GAAc,CAClBjC,IAAK,EACLP,MAAO,eAEHyC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,OAAQ,CAAEvB,MAAO,mBAAqB,UAAW,MACjI0C,GAAc,CAAE1C,MAAO,qBACvB2C,GAAc,CAAC,YACfC,IAA2BZ,EAAAA,EAAAA,IAAiB,QAE5C,SAAUrD,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAC1C6lD,GAAmC7lD,EAAAA,EAAAA,IAAkB,yBAE3D,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,KAAM,EACzDlH,EAAAA,EAAAA,GAAoB,MAAO,KAAM,EAC/BA,EAAAA,EAAAA,GAAoB,MAAOL,GAAY,EACrCK,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,eACLv2C,MAAO,gBACP8B,KAAM,IACNob,MAAOte,EAAKqmD,UACZ9J,SAAUt8C,EAAO,KAAOA,EAAO,GAEzC,kBAAcD,EAAKsmD,gBAAkBtmD,EAAKsmD,eAAL,MAAAtmD,EAAI,cAC9B,GACAkB,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKylD,SAAS,SAACtb,GACjF,OAAQjpC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAClDQ,IAAKwoC,EAAOnN,IACZ1e,MAAO6rB,EAAOnN,MACb1zB,EAAAA,EAAAA,IAAiB6gC,EAAO5P,MAAO,EAAGl3B,OACnC,OACH,GAAId,IACNvC,EAAKumD,qBACDrlD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOmC,GAAY,CACpDC,IACAZ,EAAAA,EAAAA,GAAoB,OAAQa,IAAY8F,EAAAA,EAAAA,IAAiBtJ,EAAKwmD,aAAe,OAAQ,OAEvF5kD,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAKymD,qBACDvlD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOsC,GAAY,CACpDC,IACAf,EAAAA,EAAAA,GAAoB,OAAQgB,IAAY2F,EAAAA,EAAAA,IAAiBtJ,EAAK0mD,aAAe,OAAQ,OAEvF9kD,EAAAA,EAAAA,IAAoB,IAAI,GAC3B5B,EAAK2mD,sBACDzlD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOyC,GAAa,CACrDC,IACAlB,EAAAA,EAAAA,GAAoB,OAAQmB,IAAawF,EAAAA,EAAAA,IAAiBtJ,EAAK4mD,cAAgB,OAAQ,OAEzFhlD,EAAAA,EAAAA,IAAoB,IAAI,IAC5Be,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,iBACP0G,UAAW9H,EAAK6mD,uBAChB/gD,QAAS7F,EAAO,KAAOA,EAAO,GAExC,kBAAcD,EAAK8mD,mBAAqB9mD,EAAK8mD,kBAAL,MAAA9mD,EAAI,cACjC,EACDuB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK4B,UACf,KAAM,EAAG,CAAC,SACb7D,IACC,EAAGD,QAGT/D,EAAK+mD,sBACD7lD,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAa0kD,EAAkC,CAC5DzkD,IAAK,EACL,wBAAyB3B,EAAK+mD,oBAC9B,iBAAkB,KAClBtU,KAAMzyC,EAAKgnD,kBACXtU,SAAU1yC,EAAKinD,oBACd,KAAM,EAAG,CAAC,wBAAyB,OAAQ,eAC9CrlD,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,IC1FL,IAAM41C,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAEq1C,IAAK,UACpBp1C,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,UAAW,MAC5HiC,GAAa,CAAEjC,MAAO,gCACtBkC,GAAa,CAAElC,MAAO,UACtBmC,GAA2Bi0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,eAAiB,SAAU,MAC1HoC,GAAa,CAAEpC,MAAO,uBACtBqC,GAAa,CAAErC,MAAO,UACtBsC,GAA2B8zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,eAAiB,MAAO,MACvHuC,GAAa,CAAEvC,MAAO,uBACtBwC,GAAc,CAAExC,MAAO,UACvByC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,eAAiB,MAAO,MACxH0C,GAAc,CAAE1C,MAAO,uBACvB2C,GAAc,CAAE3C,MAAO,UACvB4C,GAA4BwzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,eAAiB,OAAQ,MACzH6C,GAAc,CAClB0zC,IAAK,kBACLv2C,MAAO,oBACP8J,KAAM,OACNqvB,KAAM,2BAEFr2B,GAAc,CAAE9C,MAAO,eACvB+C,GAAc,CAAC,KAAM,MAAO,MAAO,QACnCC,GAAc,CAAC,KAAM,QACrBC,GAAc,CAAC,KAAM,QACrBuzC,GAAc,CAAC,WACf0H,GAAc,CAAC,MACfE,GAA4BhI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,IAAM,OAAQ,MACjHmhC,GAA4BjI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,QAAU,MAAO,MACpHohC,GAA4BlI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,SAAW,OAAQ,MACtHqhC,GAAc,CAClBH,GACAC,GACAC,IAEIE,GAAc,CAAC,MACfC,GAA4BrI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,IAAM,OAAQ,MACjHwhC,GAAc,CAAC,SACfC,GAAc,CAAC,WACfC,GAAc,CAAE5+C,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,CACrCC,IACAZ,EAAAA,EAAAA,GAAoB,MAAOa,IAAY8F,EAAAA,EAAAA,IAAiBtJ,EAAK89B,OAAOe,aAAc,MAEpFl8B,EAAAA,EAAAA,GAAoB,MAAOc,GAAY,CACrCC,IACAf,EAAAA,EAAAA,GAAoB,MAAOgB,IAAY2F,EAAAA,EAAAA,IAAiBtJ,EAAK89B,OAAOpX,QAAS,MAE/E/jB,EAAAA,EAAAA,GAAoB,MAAOiB,GAAa,CACtCC,IACAlB,EAAAA,EAAAA,GAAoB,MAAOmB,IAAawF,EAAAA,EAAAA,IAAiBtJ,EAAK89B,OAAO1J,MAAO,MAE9EzxB,EAAAA,EAAAA,GAAoB,MAAOoB,GAAa,CACtCC,IACArB,EAAAA,EAAAA,GAAoB,QAASsB,GAAa,KAAM,SAEjD/C,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK+uB,SAAS,SAACxX,GACjF,OAAQrW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAK4V,EAAOgjB,KACZn5B,MAAO,UACN,EACDuB,EAAAA,EAAAA,GAAoB,MAAOuB,IAAaoF,EAAAA,EAAAA,IAAiBiO,EAAOgjB,MAAO,GACtD,SAAhBhjB,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,QAAS,CAC1CQ,IAAK,EACLqI,GAAIuN,EAAO2vC,QACX9lD,MAAO,sBACP8J,KAAM,SACNi3C,IAAK5qC,EAAO4qC,IACZlpB,IAAK1hB,EAAO0hB,IACZzhB,KAAM,IACN+iB,KAAMhjB,EAAOgjB,MACZ,KAAM,EAAGp2B,MACZvC,EAAAA,EAAAA,IAAoB,IAAI,GACX,WAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,QAAS,CAC1CQ,IAAK,EACLqI,GAAIuN,EAAO2vC,QACX9lD,MAAO,oBACP8J,KAAM,OACNqvB,KAAMhjB,EAAOgjB,MACZ,KAAM,EAAGn2B,MACZxC,EAAAA,EAAAA,IAAoB,IAAI,GACX,aAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,QAAS,CAC1CQ,IAAK,EACLqI,GAAIuN,EAAO2vC,QACX9lD,MAAO,wBACP8J,KAAM,OACNqvB,KAAMhjB,EAAOgjB,MACZ,KAAM,EAAGl2B,MACZzC,EAAAA,EAAAA,IAAoB,IAAI,GACX,aAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,gBACP0E,QAAS,SAAC8C,GAAD,OAAkB5I,EAAKmnD,WAAW5vC,EAAO2vC,WACjD,OAAQ,EAAGtP,MACdh2C,EAAAA,EAAAA,IAAoB,IAAI,GACX,UAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLqI,GAAIuN,EAAO2vC,QACX9lD,MAAO,sBACNu+C,GAAa,EAAGL,MACnB19C,EAAAA,EAAAA,IAAoB,IAAI,GACX,UAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLqI,GAAIuN,EAAO2vC,QACX9lD,MAAO,sBACN,CACDy+C,KACC3+C,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAYyN,EAAO6vC,MAAM,SAACC,GAChF,OAAQnmD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAClDQ,IAAK0lD,EACL/oC,MAAO+oC,IACN/9C,EAAAA,EAAAA,IAAiB+9C,GAAI,EAAGvH,OACzB,OACH,EAAGF,MACNh+C,EAAAA,EAAAA,IAAoB,IAAI,GACX,WAAhB2V,EAAOrM,OACHhK,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAC3CQ,IAAK,EACLP,MAAO,gBACP0E,QAAS,SAAC8C,GAAD,OAAkB5I,EAAKsnD,WAAW/vC,EAAOgjB,QACjD,OAAQ,EAAGwlB,MACdn+C,EAAAA,EAAAA,IAAoB,IAAI,QAE5B,SAENe,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,qBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK0V,WACzD,kBACH/S,EAAAA,EAAAA,GAAoB,MAAOq9C,GAAa,EACtCr9C,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKmT,SACzD7J,EAAAA,EAAAA,IAAiBtJ,EAAKunD,cAAe,IACxC5kD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKwnD,YACzD,YAEJ,OC7IP,QAAeltB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,wBACNC,MAAO,CACLitB,oBAAqB,CACnBv8C,KAAMwH,OACN+nB,UAAU,GAEZ8sB,aAAc,CACZr8C,KAAMoR,OACNme,UAAU,EACVC,QAAS,OAGbE,MAAO,CAAC,KAAM,UACdC,MAd6B,SAcvBL,EAAOM,GACX,IAAMkb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClB+P,GAAuB/P,EAAAA,EAAAA,IAAI,MAC3BgQ,EAASntB,EAAMitB,oBACjB3pB,GAAS6Z,EAAAA,EAAAA,IAAIgQ,GAEX54B,GAAUkN,EAAAA,EAAAA,KAAS,WACvB,OAAOvpB,OAAOwkB,OAAO4G,EAAOxf,MAAMyQ,SAC/B4P,MAAK,SAACC,EAAG/uB,GACR,IAAM+3C,EAAShpB,EAAErE,KAAK1X,WAAW,QAC3BglC,EAASh4C,EAAE0qB,KAAK1X,WAAW,QACjC,OAAI+kC,IAAWC,EACND,GAAU,EAAI,EAEhBhpB,EAAErE,KAAO1qB,EAAE0qB,MAAQ,EAAI,KAE/BwpB,KAAI,SAACxsC,EAAQzD,GACZ,2BACKyD,GADL,IAEE2vC,QAAS,8BAAgCpzC,EACzCwK,MAAOsf,GAA+BrmB,WAK9Cy+B,EAAMzC,oBACN4F,EAAAA,EAAAA,KAAS,gCAAC,iHACRR,GAAgBC,EAAOt6B,OADf,kBAGegmB,GAAAA,iBAAqBqjB,EAAOvzB,MAH3C,OAGN0J,EAAOxf,MAHD,OAIN0f,GAAsBF,EAAOxf,MAAOqpC,GACpCD,EAAgBppC,MAAMA,MAAQwf,EAAOxf,MAAMic,KALrC,WAMexL,EAAQzQ,OANvB,IAMN,2BAAW/G,EAAyB,QAC5BylC,EAAOjE,GAAgBxhC,EAAO2vC,SAChClK,QAAyBjxC,IAAjBwL,EAAO+G,QACjB0+B,EAAK1+B,MAAQ/G,EAAO+G,MAAQ,IAT1B,mFAaN03B,EAAM1C,UAAN,MACAxY,EAAQW,KAAK,UAdP,yBAgBNua,EAAMrC,oBAhBA,8EAoBV,IAAMwT,EAAU,kDAAG,WAAOn9C,GAAP,gGACjBgsC,EAAMzC,mBADW,kBAGIjP,GAAAA,uBAHJ,OAGTlQ,EAHS,OAIT4oB,EAAOjE,GAAgB/uC,GACzBoqB,GAAQ4oB,IACVA,EAAK1+B,MAAQ8V,GANA,mDASf4hB,EAAM1C,UAAN,MATe,yBAWf0C,EAAMrC,oBAXS,4EAAH,sDAeV2T,EAAU,kDAAG,WAAO/sB,GAAP,wFACjByb,EAAMzC,mBADW,kBAGTjP,GAAAA,iBAAqBxG,EAAOxf,MAAM8V,KAAMmG,GAH/B,yDAKfyb,EAAM1C,UAAN,MALe,uBAOf0C,EAAMrC,oBAPS,0EAAH,sDAWVj+B,EAAQ,WACZgyC,EAAgBppC,MAAMA,MAAQwf,EAAOxf,MAAMugB,YAD1B,iBAEI9P,EAAQzQ,OAFZ,IAEjB,2BAAoC,KAAzB/G,EAAyB,QAC5BylC,EAAOjE,GAAgBxhC,EAAO2vC,SAChClK,SACgDjxC,IAA9C+xB,EAAOxf,MAAMyQ,QAAQxX,EAAOgjB,MAAMG,QACpCsiB,EAAK1+B,MAAQwf,EAAOxf,MAAMyQ,QAAQxX,EAAOgjB,MAAMG,QAAU,GAEzDsiB,EAAK1+B,MAAQ,KARF,gCAcbnL,EAAK,WACT2qB,EAAOxf,MAAMic,KAAOmtB,EAAgBppC,MAAMA,MAD5B,iBAEOyQ,EAAQzQ,OAFf,IAEd,2BAAoC,KAAzB/G,EAAyB,QAC5BylC,EAAOjE,GAAgBxhC,EAAO2vC,SAChClK,IACFlf,EAAOxf,MAAMyQ,QAAQxX,EAAOgjB,MAAMjc,MAAS0+B,EAAK1+B,MAE5B,SAAhB/G,EAAOrM,KACPi7C,GAAkBnJ,GAClBA,EAAK1+B,WAHLvS,IANM,8BAYd+uB,EAAQW,KAAK,KAAMqC,EAAOxf,QAGtBkpC,EAAS,WACb1sB,EAAQW,KAAK,WAGf,MAAO,CACLqC,OAAAA,EACA8a,OAAAA,EACA8O,gBAAAA,EACA34B,QAAAA,EACAo4B,WAAAA,EACAG,WAAAA,EACA5xC,MAAAA,EACAvC,GAAAA,EACAq0C,OAAAA,MCtIN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCaA,IAAeltB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,iBACN0e,WAAY,CACVC,WAAAA,GACA4O,sBAAAA,IAEFttB,MAAO,CACLirB,QAAS,CACPv6C,KAAMsK,MACNilB,UAAU,GAEZ4rB,UAAW,CACTn7C,KAAMoR,OACNme,UAAU,GAEZ1yB,eAAgB,CACdmD,KAAMoR,OACNme,UAAU,GAEZ8rB,mBAAoB,CAClBr7C,KAAMyvB,QACND,SAAS,GAEX+rB,mBAAoB,CAClBv7C,KAAMyvB,QACND,SAAS,GAEXisB,oBAAqB,CACnBz7C,KAAMyvB,QACND,SAAS,IAGbE,MAAO,CAAC,gBAAiB,yBACzBC,MAjC6B,SAiCvBL,EAAOM,GACX,IAAMitB,GAAoBpQ,EAAAA,EAAAA,IAAI,MACxBoP,GAAoDpP,EAAAA,EAAAA,IAAI,MAExD6O,GAAcvqB,EAAAA,EAAAA,KAAS,WAC3B,IAAKe,GAAgBxC,EAAM6rB,WACzB,OAAO,KAET,IAAM9hB,EAAW,IAAI/F,GAAkBhE,EAAMzyB,gBACvC+1B,EAASyG,EAASyjB,UAAUxtB,EAAM6rB,WACxC,MACE,SADKzoB,GAA+BE,EAAO/O,QAAQwO,KAEjD,KACA,SAGAmpB,GAAczqB,EAAAA,EAAAA,KAAS,WAC3B,IAAKe,GAAgBxC,EAAM6rB,WACzB,OAAO,KAET,IAAM9hB,EAAW,IAAI/F,GAAkBhE,EAAMzyB,gBACvC+1B,EAASyG,EAASyjB,UAAUxtB,EAAM6rB,WAClC4B,EACJrqB,GAA+BE,EAAO/O,QAAQ0O,MAC9CG,GAA+BE,EAAO/O,QAAQ2O,KAChD,OAAOuqB,KAGHrB,GAAe3qB,EAAAA,EAAAA,KAAS,WAC5B,IAAKe,GAAgBxC,EAAM6rB,WACzB,OAAO,KAET,IAAM9hB,EAAW,IAAI/F,GAAkBhE,EAAMzyB,gBACvC+1B,EAASyG,EAASyjB,UAAUxtB,EAAM6rB,WAClCpf,EACJrJ,GAA+BE,EAAO/O,QAAQyO,MAC9CI,GAA+BE,EAAO/O,QAAQ4O,KAChD,OAAOsJ,KAGH4f,GAAyB5qB,EAAAA,EAAAA,KAAS,WACtC,OAAOe,GAAgBxC,EAAM6rB,cAGzBS,EAAoB,WACxB,GAAI9pB,GAAgBxC,EAAM6rB,WAAY,CACpC,IAAM9hB,EAAW,IAAI/F,GAAkBhE,EAAMzyB,gBACvC+1B,EAASyG,EAASyjB,UAAUxtB,EAAM6rB,WACxCU,EAAoBzoC,MAAQwf,IAI1BkpB,EAAoB,SAACxmB,GACzBumB,EAAoBzoC,MAAQ,KAC5Bwc,EAAQW,KAAK,wBAAyB+E,IAGlCymB,EAAqB,WACzBF,EAAoBzoC,MAAQ,MAGxBgoC,EAAiB,WACrBxrB,EAAQW,KAAK,gBAAiBssB,EAAazpC,MAAMA,QAGnD,MAAO,CACLypC,aAAAA,EACAvB,YAAAA,EACAE,YAAAA,EACAE,aAAAA,EACAC,uBAAAA,EACAE,oBAAAA,EACAT,eAAAA,EACAQ,kBAAAA,EACAE,kBAAAA,EACAC,mBAAAA,EACAhhD,KAAAA,OC5HN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCSA,IAAeq0B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,aACN0e,WAAY,CACVC,WAAAA,GACAgP,eAAAA,IAEFrtB,MAN6B,WAO3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBwQ,GAAaxQ,EAAAA,EAAAA,IAAI,MACjBvqB,GAAeuqB,EAAAA,EAAAA,IAAI,MACnBnb,GAAemb,EAAAA,EAAAA,IAAI,MACnBhX,GAAiBgX,EAAAA,EAAAA,IAAI,MACrB/D,GAAqB+D,EAAAA,EAAAA,IAAI,MACzB/W,GAA2B+W,EAAAA,EAAAA,IAAI,MAC/B9W,GAAoB8W,EAAAA,EAAAA,IAAI,MACxB5W,GAAc4W,EAAAA,EAAAA,IAAIlX,MAClB14B,GAAiB4vC,EAAAA,EAAAA,IAAI,IAAInZ,IACzBknB,GAAiB/N,EAAAA,EAAAA,IAAI,IACrBoO,GAAiBpO,EAAAA,EAAAA,IAAI,IAE3B3B,EAAMzC,oBAEN4F,EAAAA,EAAAA,KAAS,gCAAC,uHAEoB7U,GAAAA,kBAFpB,cAENvD,EAAYziB,MAFN,gBAGuBgmB,GAAAA,uBAHvB,OAGNv8B,EAAeuW,MAHT,OAINonC,EAAepnC,MAAQyiB,EAAYziB,MAAMjM,MAAM2qB,IAC/C+oB,EAAeznC,MAAQyiB,EAAYziB,MAAM9L,MAAMwqB,IAC/C2b,GAAgBC,EAAOt6B,OANjB,qDAQN03B,EAAM1C,UAAN,MACA0C,EAAMoS,mBATA,yBAWNpS,EAAMrC,oBAXA,8EAeV,IAAI0U,GAAsB,GAC1BjL,EAAAA,EAAAA,KAAU,WACHiL,IACHF,EAAM7pC,MAAMA,MAAQlL,KAAK6I,MACvB8kB,EAAYziB,MAAM2H,UAAUya,YAAc,MAE5CtT,EAAQ9O,MAAMA,MACZlL,KAAK6I,MAAM8kB,EAAYziB,MAAM2H,UAAUya,YAAc,IAAM,GAC7DlE,EAAQle,MAAMA,MAAQyiB,EAAYziB,MAAM2H,UAAUuW,QAClDmE,EAAUriB,MAAMA,MAAQyiB,EAAYziB,MAAM2H,UAAU0a,UACpDiT,EAAct1B,MAAMA,WACkBvS,IAApCg1B,EAAYziB,MAAMs1B,cACd7S,EAAYziB,MAAMs1B,cAClB,UACNhT,EAAoBtiB,MAAMyD,QACxBgf,EAAYziB,MAAMsiB,oBACpBC,EAAaviB,MAAMyD,QAAUgf,EAAYziB,MAAMuiB,aAC/CwnB,GAAsB,MAI1B,IAAMC,EAAqB,SAACC,GAC1B,GAAIvrB,GAAgBurB,GAAY,CAC9B,IAAMzqB,EAAS/1B,EAAeuW,MAAM0pC,UAAUO,GAC9C,MAAO,CACLhuB,KAAMuD,EAAOvD,KACbyC,IAAKurB,EACLjmC,IAAKwb,GAGT,MAAO,CACLvD,KAAM,IACNyC,IAAKA,KAIHkpB,EAAU,WACd,IAAMnlB,EAA2B,CAC/B1uB,MAAOi2C,EAAmB5C,EAAepnC,OACzC9L,MAAO81C,EAAmBvC,EAAeznC,OACzC2H,UAAW,CACTya,YAGE,IAFkC,GAAjCylB,GAAkBgC,EAAM7pC,OACvB6nC,GAAkB/4B,EAAQ9O,QAE9Bke,QAAS2pB,GAAkB3pB,EAAQle,OACnCqiB,UAAWwlB,GAAkBxlB,EAAUriB,QAEzCs1B,cACgC,YAA9BA,EAAct1B,MAAMA,MAChBs1B,EAAct1B,MAAMA,WACpBvS,EACN60B,oBAAqBA,EAAoBtiB,MAAMyD,QAC/C8e,aAAcA,EAAaviB,MAAMyD,SAE7B2Q,EAAQoO,GAAoBC,GAC9BrO,EACFsjB,EAAM1C,UAAU5gB,GAEhBsjB,EAAMtC,UAAU3S,IAId2R,EAAW,WACfsD,EAAMoS,oBAGFxC,EAAqB,kDAAG,WAAOplB,GAAP,8FACtB/f,EAAQ,IAAI+d,GAAkBz2B,EAAeuW,MAAMmgB,MACzDhe,EAAM+nC,aAAahoB,GACnBwV,EAAMzC,mBAHsB,kBAKpBjP,GAAAA,qBAAyB7jB,GALL,OAM1B1Y,EAAeuW,MAAQmC,EANG,mDAQ1Bu1B,EAAM1C,UAAN,MAR0B,yBAU1B0C,EAAMrC,oBAVoB,4EAAH,sDAcrBmS,EAAsB,SAAC9oB,GAC3B0oB,EAAepnC,MAAQ0e,GAEnBgpB,EAAsB,SAAChpB,GAC3B+oB,EAAeznC,MAAQ0e,GAGnBipB,EAAc,WAAK,MACwB,CAC7CF,EAAeznC,MACfonC,EAAepnC,OAFhBonC,EAAepnC,MADO,KACAynC,EAAeznC,MADf,MAOnBmnC,GAAUxpB,EAAAA,EAAAA,KAAS,WACvB,OACE,CAAE1B,KAAM,IAAKyC,IAAKA,KADpB,eAEKj1B,EAAeuW,MAAMmqC,gBAI5B,MAAO,CACL7P,OAAAA,EACAuP,MAAAA,EACA/6B,QAAAA,EACAoP,QAAAA,EACAmE,UAAAA,EACAiT,cAAAA,EACAhT,oBAAAA,EACAC,aAAAA,EACA94B,eAAAA,EACA29C,eAAAA,EACAK,eAAAA,EACAN,QAAAA,EACAS,QAAAA,EACAxT,SAAAA,EACAkT,sBAAAA,EACAE,oBAAAA,EACAE,oBAAAA,EACAC,YAAAA,EACAhgD,KAAAA,OC1KN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPMuxC,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,QAEHmB,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,MAAO,MACxHiC,GAAa,CAAEjC,MAAO,oBACtBkC,GAAa,CAAElC,MAAO,oBACtBmC,GAAa,CAAEnC,MAAO,uBAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMmlD,GAA4BjlD,EAAAA,EAAAA,IAAkB,kBAEpD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrC/B,EAAAA,EAAAA,IAAaikD,EAA2B,CACtCC,QAASzlD,EAAK0+B,QACd,aAAc1+B,EAAK0oD,UACnB,kBAAmB1oD,EAAK+H,eAAe02B,KACvC,wBAAwB,EACxB,0BAA0B,EAC1BknB,sBAAuB3lD,EAAK4lD,sBAC5BC,eAAgB7lD,EAAK6lD,gBACpB,KAAM,EAAG,CAAC,UAAW,aAAc,kBAAmB,wBAAyB,wBAGtFljD,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,EACrCZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKkmD,aACzD,SACHvjD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK0yC,cACzD,YAEJ,OChCP,QAAepY,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,iBACN0e,WAAY,CACViP,eAAAA,IAEFrtB,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBxD,GAAkBwD,EAAAA,EAAAA,IAAI3W,MACtBj5B,GAAiB4vC,EAAAA,EAAAA,IAAI,IAAInZ,IACzBkqB,GAAY/Q,EAAAA,EAAAA,IAAI,IAEtB3B,EAAMzC,oBAEN4F,EAAAA,EAAAA,KAAS,gCAAC,2GACRR,GAAgBC,EAAOt6B,OADf,kBAGwBgmB,GAAAA,sBAHxB,cAGN6P,EAAgB71B,MAHV,gBAIuBgmB,GAAAA,uBAJvB,OAINv8B,EAAeuW,MAJT,OAKNoqC,EAAUpqC,OAAQ,UAAA61B,EAAgB71B,MAAMgE,WAAtB,eAA2B0a,MAAO,GAL9C,qDAONgZ,EAAM1C,UAAN,MACA0C,EAAMoS,mBARA,yBAUNpS,EAAMrC,oBAVA,8EAcV,IAAMjV,GAAUzC,EAAAA,EAAAA,KAAS,kBAAMl0B,EAAeuW,MAAMmqC,cAE9CvC,EAAU,WACd,GACGwC,EAAUpqC,OACVvW,EAAeuW,MAAMqqC,UAAUD,EAAUpqC,OAF5C,CAOA,IAAMsqC,EAAgB7gD,EAAeuW,MAAM0pC,UAAUU,EAAUpqC,OACzD61B,EAAmC,CACvC7xB,IAAKsmC,GAEP5S,EAAMvF,cAAc0D,QAPlB6B,EAAM1C,UAAU,mBAUdZ,EAAW,WACfsD,EAAMoS,oBAGFxC,EAAqB,kDAAG,WAAOplB,GAAP,8FACtB/f,EAAQ,IAAI+d,GAAkBz2B,EAAeuW,MAAMmgB,MACzDhe,EAAM+nC,aAAahoB,GACnBwV,EAAMzC,mBAHsB,kBAKpBjP,GAAAA,qBAAyB7jB,GALL,OAM1B1Y,EAAeuW,MAAQmC,EANG,mDAQ1Bu1B,EAAM1C,UAAN,MAR0B,yBAU1B0C,EAAMrC,oBAVoB,4EAAH,sDAcrBkS,EAAiB,SAAC7oB,GACtB0rB,EAAUpqC,MAAQ0e,GAGpB,MAAO,CACL4b,OAAAA,EACA7wC,eAAAA,EACA2gD,UAAAA,EACAhqB,QAAAA,EACAwnB,QAAAA,EACAxT,SAAAA,EACAkT,sBAAAA,EACAC,eAAAA,MC7EN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPMrO,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAEq1C,IAAK,UACpBp1C,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,UAAW,MAC5HiC,GAAa,CAAEjC,MAAO,gCACtBkC,GAAa,CACjB3B,IAAK,EACLP,MAAO,UAEHmC,GAAa,CAAC,SACdC,GAAa,CAAEpC,MAAO,eACtBqC,GAAa,CAAC,WACdC,GAAa,CAAC,WACdC,GAAa,CAAC,WACdC,GAAc,CAAExC,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAM+lD,GAAmC7lD,EAAAA,EAAAA,IAAkB,yBAE3D,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,KAAM,EACzDlH,EAAAA,EAAAA,GAAoB,MAAO,KAAM,EAC/BA,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,CACZ,IAAxBrD,EAAK0+B,QAAQvpB,SACTjU,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOmC,GAAY,uBACtD1B,EAAAA,EAAAA,IAAoB,IAAI,KAC3BV,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK0+B,SAAS,SAACZ,GACjF,OAAQ58B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAKm8B,EAAOd,IACZ57B,MAAO,SACPkd,MAAOwf,EAAOd,KACb,EACDr6B,EAAAA,EAAAA,GAAoB,MAAOa,IAAY8F,EAAAA,EAAAA,IAAiBw0B,EAAOvD,MAAO,IACtE53B,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK6oD,YAAY/qB,EAAOd,OAClD,KAAM,EAAGv5B,KACZd,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS,SAAC8C,GAAD,OAAkB5I,EAAK8oD,UAAUhrB,EAAOd,OAChD,KAAM,EAAGt5B,KACZf,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS,SAAC8C,GAAD,OAAkB5I,EAAKya,OAAOqjB,EAAOd,OAC7C,KAAM,EAAGr5B,KACX,EAAGJ,OACJ,SAENZ,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,qBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK8Y,SACzD,OACHnW,EAAAA,EAAAA,GAAoB,MAAOiB,GAAa,EACtCjB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK+oD,kBACzD,cACHpmD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKwnD,YACzD,YAEJ,OAEJxnD,EAAKgpD,eACD9nD,EAAAA,EAAAA,OAAcQ,EAAAA,EAAAA,IAAa0kD,EAAkC,CAC5DzkD,IAAK,EACL,wBAAyB3B,EAAKgpD,aAC9BvW,KAAMzyC,EAAKipD,SACXvW,SAAU1yC,EAAKkpD,cACd,KAAM,EAAG,CAAC,wBAAyB,OAAQ,eAC9CtnD,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,IC3DL,QAAe04B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,4BACN0e,WAAY,CACV6O,sBAAAA,IAEFjtB,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBqR,GAA6CrR,EAAAA,EAAAA,IAAI,MACjDnX,GAAUmX,EAAAA,EAAAA,IAAI,IAAInZ,IAExBwX,EAAMzC,oBAEN4F,EAAAA,EAAAA,KAAS,gCAAC,qGACRR,GAAgBC,EAAOt6B,OADf,kBAGgBgmB,GAAAA,uBAHhB,OAGN9D,EAAQliB,MAHF,0DAKN03B,EAAM1C,UAAN,MACA0C,EAAMoS,mBANA,yBAQNpS,EAAMrC,oBARA,6EAYV,IAAM76B,EAAG,kDAAG,oHAERk9B,EAAMzC,mBAFE,SAGWjP,GAAAA,4BAHX,UAGFlQ,EAHE,OAIHA,EAJG,6DAORoM,EAAQliB,MAPA,UAOsBgmB,GAAAA,iBAAqBlQ,GAP3C,yBAOM+0B,UAPN,qEASRnT,EAAM1C,UAAN,MATQ,yBAWR0C,EAAMrC,oBAXE,6EAAH,qDAeHl5B,EAAS,SAACuiB,GACdwD,EAAQliB,MAAM8qC,aAAapsB,IAGvB6rB,EAAc,SAAC7rB,GACnBgsB,EAAa1qC,MAAQkiB,EAAQliB,MAAM0pC,UAAUhrB,IAGzC8rB,EAAY,SAAC9rB,GACjB,IAAM9zB,EAAMs3B,EAAQliB,MAAM0pC,UAAUhrB,GAC9Bc,EAASD,GAAuB30B,GACtCs3B,EAAQliB,MAAM6qC,UAAUrrB,IAGpBirB,EAAY,kDAAG,8GAEjB/S,EAAMzC,mBAFW,SAGXjP,GAAAA,qBAAyB9D,EAAQliB,OAHtB,OAIjB03B,EAAMoS,mBAJW,mDAMjBpS,EAAM1C,UAAN,MANiB,yBAQjB0C,EAAMrC,oBARW,4EAAH,qDAYZ6T,EAAS,WACbxR,EAAMoS,oBAGFa,EAAW,SAACnrB,GAChB0C,EAAQliB,MAAMkqC,aAAa1qB,GAC3BkrB,EAAa1qC,MAAQ,MAGjB4qC,EAAe,WACnBF,EAAa1qC,MAAQ,MAGjBogB,GAAUzC,EAAAA,EAAAA,KAAS,kBAAMuE,EAAQliB,MAAMmqC,cAE7C,MAAO,CACLO,aAAAA,EACApQ,OAAAA,EACAla,QAAAA,EACA5lB,IAAAA,EACA2B,OAAAA,EACAouC,YAAAA,EACAC,UAAAA,EACAC,aAAAA,EACAvB,OAAAA,EACAyB,SAAAA,EACAC,aAAAA,MCjGN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPM1R,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAEq1C,IAAK,UACpBp1C,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,SAAU,MAC3HiC,GAAa,CAAEjC,MAAO,6BACtBkC,GAAa,CAAElC,MAAO,WACtBmC,GAA2Bi0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,iBAAmB,MAAO,MACzHoC,GAAa,CAAEpC,MAAO,oBACtBqC,GAA2B+zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,OAAQ,MACxIsC,GAAa,CAAC,SACdC,GAAa,CAAC,SACdC,GAAc,CAAExC,MAAO,oBACvByC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,OAAQ,MACzI0C,GAAc,CAAC,SACfC,GAAc,CAAC,SACfC,GAAc,CAAE5C,MAAO,oBACvB6C,GAA4BuzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,OAAQ,MACzI8C,GAAc,CAAC,SACfC,GAAc,CAAC,SACfC,GAAc,CAAEhD,MAAO,oBACvBiD,GAA4BmzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5Iw2C,GAAc,CAAC,WACf0H,GAA4B9H,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,KAAM,CAAEvB,MAAO,aAAe,MAAO,MACrHo+C,GAAc,CAAEp+C,MAAO,WACvBq+C,GAA4BjI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,iBAAmB,KAAM,MACzHs+C,GAAc,CAAEt+C,MAAO,oBACvBu+C,GAA4BnI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5Iw+C,GAAc,CAAC,SACfC,GAA4BrI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjI0+C,GAAc,CAAE1+C,MAAO,oBACvB2+C,GAA4BvI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,WAAY,MAC7I4+C,GAAc,CAAC,SACfqJ,GAA4B7R,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIkoD,GAAc,CAAEloD,MAAO,oBACvBmoD,GAA4B/R,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5IooD,GAAc,CAAC,SACfC,GAA4BjS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,kBAAmB,MAC9IsoD,GAAc,CAAEtoD,MAAO,oBACvBuoD,GAA4BnS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5IwoD,GAAc,CAAC,SACfC,GAA4BrS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,OAAS,SAAU,MACtHwrC,GAA4BtS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,YAAc,UAAW,MAC5H0mC,GAAc,CAClB6E,GACAC,IAEI7E,GAA4BzN,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,KAAM,CAAEvB,MAAO,aAAe,MAAO,MACrH8jD,GAAc,CAAE9jD,MAAO,WACvB+jD,GAA4B3N,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,iBAAmB,QAAS,MAC5HgkD,GAAc,CAAEhkD,MAAO,oBACvBikD,GAA4B7N,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,QAAS,MAC1IkkD,GAAc,CAAC,SACfC,GAA4B/N,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,QAAU,qBAAsB,MACnIyrC,GAA4BvS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,MAAQ,iBAAkB,MAC7H0rC,GAA4BxS,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,MAAQ,gBAAiB,MAC5H2rC,GAAc,CAClB1E,GACAwE,GACAC,IAEIE,GAA4B1S,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,KAAM,CAAEvB,MAAO,aAAe,MAAO,MACrH+oD,GAAc,CAAE/oD,MAAO,WACvBgpD,GAA4B5S,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,iBAAmB,YAAa,MAChIipD,GAAc,CAAEjpD,MAAO,oBACvBkpD,GAA4B9S,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5ImpD,GAAc,CAAC,SACfC,GAA4BhT,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,wBAAyB,MACpJqpD,GAAc,CAAErpD,MAAO,oBACvBspD,GAA4BlT,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,SAAU,MAC3IupD,GAAc,CAAC,SACfC,GAA4BpT,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIypD,GAAc,CAAEzpD,MAAO,oBACvB0pD,GAA4BtT,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5I2pD,GAAc,CAAC,SACfC,GAA4BxT,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjI6pD,GAAc,CAAE7pD,MAAO,oBACvB8pD,GAA4B1T,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,SAAU,MAC3I+pD,GAAc,CAAC,SACfC,GAA4B5T,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIiqD,GAAc,CAAEjqD,MAAO,oBACvBkqD,GAA4B9T,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,UAAW,MAC5ImqD,GAAc,CAAC,SACfC,GAA4BhU,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,KAAM,MACjIqqD,GAA4BjU,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,KAAM,CAAEvB,MAAO,aAAe,MAAO,MACrHsqD,GAAc,CAAEtqD,MAAO,WACvBuqD,GAA4BnU,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,iBAAmB,SAAU,MAC7HwqD,GAAc,CAAExqD,MAAO,oBACvByqD,GAA4BrU,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,YAAa,MAC9I0qD,GAAc,CAAC,WACfC,GAAc,CAClBpqD,IAAK,EACLP,MAAO,yBAEH4qD,GAAc,CAClBrqD,IAAK,EACLP,MAAO,yBAEH6qD,GAAc,CAAE7qD,MAAO,oBACvB8qD,GAA4B1U,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,+BAAiC,cAAe,MAChJ+qD,GAAc,CAAC,WACfC,GAAc,CAClBzqD,IAAK,EACLP,MAAO,yBAEHirD,GAAc,CAClB1qD,IAAK,EACLP,MAAO,yBAEHkrD,GAAc,CAAElrD,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,CACrCC,IACAZ,EAAAA,EAAAA,GAAoB,MAAOa,GAAY,CACrCC,IACAd,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,QACLr5B,MAAOte,EAAKgC,WAAWV,OACtB,GACAJ,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKusD,cAAc,SAACC,GACtF,OAAQtrD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAClDQ,IAAK6qD,EAAYluC,MACjBA,MAAOkuC,EAAYluC,QAClBhV,EAAAA,EAAAA,IAAiBkjD,EAAYjyB,MAAO,EAAG52B,OACxC,OACH,EAAGD,OAERf,EAAAA,EAAAA,GAAoB,MAAOiB,GAAa,CACtCC,IACAlB,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,aACLr5B,MAAOte,EAAKgC,WAAW0C,YACtB,GACAxD,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKysD,iBAAiB,SAAC31B,GACzF,OAAQ51B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAClDQ,IAAKm1B,EAAexY,MACpBA,MAAOwY,EAAexY,QACrBhV,EAAAA,EAAAA,IAAiBwtB,EAAeyD,MAAO,EAAGx2B,OAC3C,OACH,EAAGD,OAERnB,EAAAA,EAAAA,GAAoB,MAAOqB,GAAa,CACtCC,IACAtB,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,aACLr5B,MAAOte,EAAKgC,WAAW2C,YACtB,GACAzD,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAK0sD,iBAAiB,SAAC31B,GACzF,OAAQ71B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,SAAU,CAClDQ,IAAKo1B,EAAezY,MACpBA,MAAOyY,EAAezY,QACrBhV,EAAAA,EAAAA,IAAiBytB,EAAewD,MAAO,EAAGp2B,OAC3C,OACH,EAAGD,OAERvB,EAAAA,EAAAA,GAAoB,MAAOyB,GAAa,CACtCC,IACA1B,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,qBACLv2C,MAAO,SACP2gB,QAAS/hB,EAAKgC,WAAW4C,gBAAkB5E,EAAK00B,eAAekD,KAC/D1sB,KAAM,YACL,KAAM,EAAG0sC,QAGhB0H,IACA38C,EAAAA,EAAAA,GAAoB,MAAO68C,GAAa,CACtCC,IACA98C,EAAAA,EAAAA,GAAoB,MAAO+8C,GAAa,CACtCC,IACAh9C,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,cACLr5B,MAAOte,EAAKgC,WAAWu9B,YACvBr0B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAGvC,IACZC,MAEFl9C,EAAAA,EAAAA,GAAoB,MAAOm9C,GAAa,CACtCC,IACAp9C,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,cACLr5B,MAAOte,EAAKgC,WAAWw9B,YACvBt0B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAGnC,IACZqJ,MAEF1mD,EAAAA,EAAAA,GAAoB,MAAO2mD,GAAa,CACtCC,IACA5mD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,aACLr5B,MAAOte,EAAKgC,WAAWy9B,WACvBv0B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,OACJ,KAAM,EAAGqH,IACZC,MAEF9mD,EAAAA,EAAAA,GAAoB,MAAO+mD,GAAa,CACtCC,IACAhnD,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,mBACLr5B,MAAOte,EAAKgC,WAAW09B,kBACtBslB,GAAa,EAAG4E,QAGvB3E,IACAtiD,EAAAA,EAAAA,GAAoB,MAAOuiD,GAAa,CACtCC,IACAxiD,EAAAA,EAAAA,GAAoB,MAAOyiD,GAAa,CACtCC,IACA1iD,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,aACLr5B,MAAOte,EAAKgC,WAAWgtB,YACtBi7B,GAAa,EAAG3E,QAGvB4E,IACAvnD,EAAAA,EAAAA,GAAoB,MAAOwnD,GAAa,CACtCC,IACAznD,EAAAA,EAAAA,GAAoB,MAAO0nD,GAAa,CACtCC,IACA3nD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,uBACLr5B,MAAOte,EAAKgC,WAAW89B,qBACvB50B,KAAM,SACN+tB,IAAK,QACLkpB,IAAK,KACJ,KAAM,EAAGoI,IACZC,MAEF7nD,EAAAA,EAAAA,GAAoB,MAAO8nD,GAAa,CACtCC,IACA/nD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,yBACLr5B,MAAOte,EAAKgC,WAAW+9B,uBACvB70B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAGwI,IACZC,MAEFjoD,EAAAA,EAAAA,GAAoB,MAAOkoD,GAAa,CACtCC,IACAnoD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,yBACLr5B,MAAOte,EAAKgC,WAAWg+B,uBACvB90B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAG4I,IACZC,MAEFroD,EAAAA,EAAAA,GAAoB,MAAOsoD,GAAa,CACtCC,IACAvoD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,yBACLr5B,MAAOte,EAAKgC,WAAWi+B,uBACvB/0B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAGgJ,IACZC,MAEFzoD,EAAAA,EAAAA,GAAoB,MAAO0oD,GAAa,CACtCC,IACA3oD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,yBACLr5B,MAAOte,EAAKgC,WAAWk+B,uBACvBh1B,KAAM,SACN+tB,IAAK,MACLkpB,IAAK,KACJ,KAAM,EAAGoJ,IACZC,OAGJC,IACA9oD,EAAAA,EAAAA,GAAoB,MAAO+oD,GAAa,CACtCC,IACAhpD,EAAAA,EAAAA,GAAoB,MAAOipD,GAAa,CACtCC,IACAlpD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,eACLv2C,MAAO,SACP2gB,QAAS/hB,EAAKgC,WAAWq+B,aACzBn1B,KAAM,YACL,KAAM,EAAG4gD,IACX9rD,EAAK2kC,WACDzjC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO4qD,GAAa,iBACvDnqD,EAAAA,EAAAA,IAAoB,IAAI,GAC1B5B,EAAK2kC,UAEH/iC,EAAAA,EAAAA,IAAoB,IAAI,KADvBV,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO6qD,GAAa,yBAG7DrpD,EAAAA,EAAAA,GAAoB,MAAOspD,GAAa,CACtCC,IACAvpD,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,eACLv2C,MAAO,SACP2gB,QAAS/hB,EAAKgC,WAAWs+B,aACzBp1B,KAAM,YACL,KAAM,EAAGihD,IACXnsD,EAAK2kC,WACDzjC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOirD,GAAa,iBACvDxqD,EAAAA,EAAAA,IAAoB,IAAI,GAC1B5B,EAAK2kC,UAEH/iC,EAAAA,EAAAA,IAAoB,IAAI,KADvBV,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOkrD,GAAa,6BAKjE1pD,EAAAA,EAAAA,GAAoB,MAAO2pD,GAAa,EACtC3pD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK+oD,kBACzD,cACHpmD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKwnD,YACzD,YAEJ,OC5TP,IAAMmF,GAA+C,CACnD,OAAQ,OACR,KAAM,KACN,KAAM,MAGFC,GAA+C,CACnDC,KAAM,OACNC,GAAI,KACJC,GAAI,MAGN,IAAezyB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,mBACNM,MAF6B,WAG3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBr2C,GAAaq2C,EAAAA,EAAAA,IAAI,MACjBjzC,GAAkBizC,EAAAA,EAAAA,IAAI,MACtBhzC,GAAkBgzC,EAAAA,EAAAA,IAAI,MACtBqV,GAA0BrV,EAAAA,EAAAA,IAAI,MAC9BpY,GAAmBoY,EAAAA,EAAAA,IAAI,MACvBnY,GAAmBmY,EAAAA,EAAAA,IAAI,MACvBlY,GAAkBkY,EAAAA,EAAAA,IAAI,MACtBjY,GAAwBiY,EAAAA,EAAAA,IAAI,MAC5B3oB,GAAkB2oB,EAAAA,EAAAA,IAAI,MACtB7X,GAA4B6X,EAAAA,EAAAA,IAAI,MAChC5X,GAA8B4X,EAAAA,EAAAA,IAAI,MAClC3X,GAA8B2X,EAAAA,EAAAA,IAAI,MAClC1X,GAA8B0X,EAAAA,EAAAA,IAAI,MAClCzX,GAA8ByX,EAAAA,EAAAA,IAAI,MAClCtX,GAAoBsX,EAAAA,EAAAA,IAAI,MACxBrX,GAAoBqX,EAAAA,EAAAA,IAAI,OAE9BwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAGzB,IAAMyqC,EAAY,kDAAG,2GACb7hB,EAA2B,CAC/B5lC,MAAOA,EAAMgd,MAAMA,MACnB5Z,WAAYA,EAAW4Z,MAAMA,MAC7B3Z,WAAYA,EAAW2Z,MAAMA,MAC7B1Z,eAAgBooD,EAAmB1uC,MAAMyD,QACrC2S,GAAe/e,SACf+e,GAAekD,KACnB2H,YAAa4mB,GAAkB5mB,EAAYjhB,OAC3CkhB,YAAa2mB,GAAkB3mB,EAAYlhB,OAC3CmhB,WAAY0mB,GAAkB1mB,EAAWnhB,OACzCohB,iBAAkBA,EAAiBphB,MAAMA,MACzC0Q,WAAY49B,GAAiB59B,EAAW1Q,MAAMA,OAC9CwhB,qBAAsBqmB,GAAkBrmB,EAAqBxhB,OAC7DyhB,uBAAwBomB,GAAkBpmB,EAAuBzhB,OACjE0hB,uBAAwBmmB,GAAkBnmB,EAAuB1hB,OACjE2hB,uBAAwBkmB,GAAkBlmB,EAAuB3hB,OACjE4hB,uBAAwBimB,GAAkBjmB,EAAuB5hB,OACjE+hB,aAAcA,EAAa/hB,MAAMyD,QACjCue,aAAcA,EAAahiB,MAAMyD,SAEnCi0B,EAAMzC,mBArBa,kBAuBXyC,EAAMgI,iBAAiB9W,GAvBZ,OAwBjB8O,EAAMiX,wBAxBW,mDA0BjBjX,EAAM1C,UAAN,MA1BiB,yBA4BjB0C,EAAMrC,oBA5BW,4EAAH,qDAgCZ6T,EAAS,WACbxR,EAAMiX,yBAGFjrD,GAAai6B,EAAAA,EAAAA,KAAS,WAC1B,2BACK+Z,EAAMh0C,YADX,IAEEgtB,WAAY29B,GAAiB3W,EAAMh0C,WAAWgtB,iBAI5Cu9B,EAAe,CACnB,CACEhyB,KAAM,QACNjc,MAAO6f,GAAMxoB,UAEf,CACE4kB,KAAM,IACNjc,MAAO6f,GAAM+uB,gBAEf,CACE3yB,KAAM,MACNjc,MAAO6f,GAAM5H,OAIXk2B,EAAkB,CACtB,CACElyB,KAAM,OACNjc,MAAOkW,GAAesB,UAExB,CACEyE,KAAM,cACNjc,MAAOkW,GAAeyB,iBAExB,CACEsE,KAAM,YACNjc,MAAOkW,GAAewB,eAExB,CACEuE,KAAM,kBACNjc,MAAOkW,GAAe0B,uBAIpBw2B,EAAkB,CACtB,CACEnyB,KAAM,UACNjc,MAAOmW,GAAe2B,OAExB,CACEmE,KAAM,UACNjc,MAAOmW,GAAe4B,MAExB,CACEkE,KAAM,QACNjc,MAAOmW,GAAe6B,OAExB,CACEiE,KAAM,MACNjc,MAAOmW,GAAe8B,OAI1B,MAAO,CACL7B,eAAAA,GACAkkB,OAAAA,EACAt3C,MAAAA,EACAoD,WAAAA,EACAC,WAAAA,EACAqoD,mBAAAA,EACAztB,YAAAA,EACAC,YAAAA,EACAC,WAAAA,EACAC,iBAAAA,EACA1Q,WAAAA,EACA8Q,qBAAAA,EACAC,uBAAAA,EACAC,uBAAAA,EACAC,uBAAAA,EACAC,uBAAAA,EACAG,aAAAA,EACAC,aAAAA,EACAt+B,WAAAA,EACAuqD,aAAAA,EACAE,gBAAAA,EACAC,gBAAAA,EACA/nB,SAAUA,KACVokB,aAAAA,EACAvB,OAAAA,MCrKN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPMhQ,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CAAEq1C,IAAK,UACpBp1C,GAAa,CAAEo1C,IAAK,WACpBt0C,GAAa,CAAEjC,MAAO,oBACtBkC,GAA2Bk0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,WAAa,wBAAyB,MACrImC,GAA2Bi0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,WAAa,8BAA+B,MAC3IoC,GAAa,CACjB7B,IAAK,EACLP,MAAO,WAEHqC,IAA0BL,EAAAA,EAAAA,IAAiB,2BAC3CM,GAA2B8zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,KAAM,KAAM,MAAO,MAClGgB,IAA0BP,EAAAA,EAAAA,IAAiB,gCAC3CQ,GAAc,CAClBH,GACAC,GACAC,IAEIE,GAAc,CAAE8zC,IAAK,YACrB7zC,GAAc,CAAE1C,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQa,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrCI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,CACrCC,GACAC,GACEvD,EAAK2kC,UAEH/iC,EAAAA,EAAAA,IAAoB,IAAI,KADvBV,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOqC,GAAYI,MAE1DjB,EAAAA,EAAAA,GAAoB,WAAYkB,GAAa,KAAM,QAEpD,MACHlB,EAAAA,EAAAA,GAAoB,MAAOmB,GAAa,EACtCnB,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAExC,kBAAcD,EAAKyyC,MAAQzyC,EAAKyyC,KAAL,MAAAzyC,EAAI,cACpB,SACH2C,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAExC,kBAAcD,EAAK0yC,UAAY1yC,EAAK0yC,SAAL,MAAA1yC,EAAI,cACxB,YAEJ,OC5CP,QAAes6B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,cACNM,MAF6B,WAG3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBsH,GAAgBtH,EAAAA,EAAAA,IAAI,MAE1B3B,EAAMzC,oBACN4F,EAAAA,EAAAA,KAAS,gCAAC,0GAENR,GAAgBC,EAAOt6B,QACnBqmB,KAHE,gCAIyBqQ,UAAUC,UAAUkY,WAJ7C,OAIJlO,EAAS3gC,MAAMA,MAJX,8BAON03B,EAAMrC,oBAPA,wEAWV,IAAMlB,EAAO,WACX,IAAMlwB,EAAO08B,EAAS3gC,MAAMA,MAC5B03B,EAAMoS,mBACF7lC,GACFyzB,EAAMoX,YAAY7qC,IAIhBmwB,EAAW,WACfsD,EAAMoS,oBAGR,MAAO,CACLxP,OAAAA,EACAqG,SAAAA,EACAxM,KAAAA,EACAC,SAAAA,EACA/N,SAAUA,SCnChB,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCPM6S,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,SAEHmB,GAAa,CAAEnB,MAAO,WACtBiC,GAA2Bm0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,WAAa,iBAAkB,MAE9H,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrChB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKgnC,OACf,KAAM,EAAG,CAAC,SACb5pC,MAED,OChBP,QAAei3B,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,eACN0e,WAAY,CACVC,WAAAA,IAEFre,MAL6B,WAM3B,IAAM+d,GAAcjB,EAAAA,EAAAA,IAAI,MAIxB,OAHAwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAElB,CACLs6B,OAAAA,EACA3yC,KAAAA,OCXN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNM3D,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,WAEHmB,GAAa,CAAEnB,MAAO,WACtBiC,GAAa,CAAEjC,MAAO,WACtBkC,GAAa,CAAElC,MAAO,uBAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrChB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKmxC,UACf,KAAM,EAAG,CAAC,UACbz0C,EAAAA,EAAAA,GAAoB,MAAOU,IAAYiG,EAAAA,EAAAA,IAAiBtJ,EAAKujC,SAAU,MAEzE5gC,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrCX,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKyyC,UACzD,OACH9vC,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK2I,aACzD,YAEJ,OC1BP,QAAe2xB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,cACN0e,WAAY,CACVC,WAAAA,IAEFre,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClBpU,GAAUtH,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM3D,iBAErC8G,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAGzB,IAAMm0B,EAAO,WACXuD,EAAMqX,kBAGF1kD,EAAU,WACdqtC,EAAMsX,sBAGR,MAAO,CACL1U,OAAAA,EACArV,QAAAA,EACAkP,KAAAA,EACA9pC,QAAAA,EACA1C,KAAAA,OC3BN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNM3D,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,QAEHmB,GAAa,CAAEnB,MAAO,WACtBiC,GAAa,CAAEjC,MAAO,WACtBkC,GAAa,CAAElC,MAAO,uBAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrChB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAKu9B,MACf,KAAM,EAAG,CAAC,UACb7gC,EAAAA,EAAAA,GAAoB,MAAOU,IAAYiG,EAAAA,EAAAA,IAAiBtJ,EAAKujC,SAAU,MAEzE5gC,EAAAA,EAAAA,GAAoB,MAAOW,GAAY,EACrCX,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK2I,aACzD,UAEJ,OCrBP,QAAe2xB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,cACN0e,WAAY,CACVC,WAAAA,IAEFre,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,OAExBwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAGzB,IAAMilB,GAAUtH,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMzS,WAE/B56B,EAAU,WACdqtC,EAAMuX,kBAGR,MAAO,CACL3U,OAAAA,EACArV,QAAAA,EACA56B,QAAAA,EACA1C,KAAAA,OCvBN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCNM3D,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,SAEHmB,GAAa,CAAEnB,MAAO,WACtBiC,GAAa,CAAEjC,MAAO,SACtBkC,GAAa,CAAElC,MAAO,UACtBmC,GAAa,CAAEnC,MAAO,SACtBoC,GAAa,CAAEpC,MAAO,WACtBqC,GAAa,CAAErC,MAAO,uBAEtB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMiE,GAAwB/D,EAAAA,EAAAA,IAAkB,cAEhD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,EACxCK,EAAAA,EAAAA,GAAoB,MAAOJ,GAAY,EACrChB,EAAAA,EAAAA,IAAa+C,EAAuB,CAClClD,MAAO,OACP4E,KAAMhG,EAAKiG,KAAK29B,OACf,KAAM,EAAG,CAAC,UACbjhC,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,EACrCV,EAAAA,EAAAA,GAAoB,MAAOW,IAAYgG,EAAAA,EAAAA,IAAiBtJ,EAAKiyC,OAAO98B,QAAU,kBAAmB,KAChGjU,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoB0I,EAAAA,GAAW,MAAMC,EAAAA,EAAAA,IAAY9J,EAAKiyC,QAAQ,SAACvf,GAChF,OAAQxxB,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CQ,IAAK+wB,EAAM5e,MACX1S,MAAO,QACN,EACDuB,EAAAA,EAAAA,GAAoB,IAAKY,IAAY+F,EAAAA,EAAAA,IAAiBopB,EAAM5e,MAAQ,GAAK,MAAO,IAChFnR,EAAAA,EAAAA,GAAoB,IAAKa,IAAY8F,EAAAA,EAAAA,IAAiBopB,EAAM6Q,SAAU,QAEtE,WAGR5gC,EAAAA,EAAAA,GAAoB,MAAOc,GAAY,EACrCd,EAAAA,EAAAA,GAAoB,SAAU,CAC5BmD,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK2I,aACzD,UAEJ,OCnCP,QAAe2xB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,eACN0e,WAAY,CACVC,WAAAA,IAEFre,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,OAExBwB,EAAAA,EAAAA,KAAU,WACRR,GAAgBC,EAAOt6B,UAGzB,IAAM2zB,GAAShW,EAAAA,EAAAA,KAAS,WACtB,OAAO+Z,EAAM/D,OAAO8R,KAAI,SAACrxB,EAAO5e,GAC9B,MAAO,CACLyvB,QAAS7Q,EAAM6Q,QACfzvB,MAAAA,SAKAnL,EAAU,WACdqtC,EAAMwX,eAGR,MAAO,CACL5U,OAAAA,EACA3G,OAAAA,EACAtpC,QAAAA,EACA1C,KAAAA,OC7BN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCVA,SAASwnD,KACP,IAAMC,EAAgBp5B,SAASo5B,cAC/B,OACEA,aAAyBC,qBACzBD,aAAyBE,kBACzBF,aAAyBG,kBAW7B,SAASC,GACPnsD,EACAyW,GAEA,IAAKq1C,KACH,OAAQ9rD,GACN,IAAK,UACH,OAAOyW,EAAQ21C,UACjB,IAAK,YACH,OAAO31C,EAAQ41C,YACjB,IAAK,YACH,OAAO51C,EAAQ61C,YACjB,IAAK,aACH,OAAO71C,EAAQ81C,cAKjB,SAAUC,GAAmB/1C,GACjCkc,SAASukB,iBAAiB,WAAW,SAAChmB,GACpC,IAAMu7B,EAAIN,GAAmBj7B,EAAMlxB,IAAKyW,GACpCg2C,IACFv7B,EAAMkJ,iBACNqyB,QCrCN,IAAM5W,GAAe,SAAA9nC,GAAC,OAAK+nC,EAAAA,EAAAA,IAAa,mBAAmB/nC,EAAEA,KAAIgoC,EAAAA,EAAAA,MAAchoC,GACzEpN,GAAa,CACjBq1C,IAAK,SACLv2C,MAAO,QAEHmB,GAA2Bi1C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,gBAAkB,QAAS,MAC1HiC,GAAa,CAAEjC,MAAO,oBACtBkC,GAA2Bk0C,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,KAAM,QAAS,MACrGY,GAAa,CAAEnC,MAAO,oBACtBoC,GAAa,CAAEpC,MAAO,oBACtBqC,GAA2B+zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,KAAM,QAAS,MACrGe,GAAa,CAAEtC,MAAO,oBACtBuC,GAAa,CAAC,WACdC,GAAc,CAAC,WAAY,SAC3BC,GAA4B2zC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,QAAS,MACpI0C,GAAc,CAAE1C,MAAO,oBACvB2C,GAA4ByzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,KAAM,QAAS,MACtGqB,GAAc,CAAE5C,MAAO,oBACvB6C,GAAc,CAAC,WACfC,GAAc,CAAC,WAAY,SAC3BC,GAA4BqzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,QAAS,MACpIgD,GAAc,CAAEhD,MAAO,oBACvBiD,GAA4BmzC,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,KAAM,aAAc,MAC3Gi1C,GAAc,CAAEx2C,MAAO,oBACvBk+C,GAAc,CAAC,SACfE,GAA4BhI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,yBAA2B,OAAQ,MACnIq+C,GAAc,CAAEr+C,MAAO,oBACvBs+C,GAA4BlI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,KAAM,QAAS,MACtGg9C,GAAc,CAAEv+C,MAAO,oBACvBw+C,GAA4BpI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,MAAO,CAAEvB,MAAO,qBAAuB,YAAa,MACpIy+C,GAAc,CAAC,SACfC,GAA4BtI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,QAAU,SAAU,MACvHyhC,GAA4BvI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,UAAY,WAAY,MAC3H0hC,GAA4BxI,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,UAAY,WAAY,MAC3H+qC,GAA4B7R,IAAa,kBAAmB70C,EAAAA,EAAAA,GAAoB,SAAU,CAAE2b,MAAO,aAAe,SAAU,MAC5HgrC,GAAc,CAClBxJ,GACAC,GACAC,GACAqJ,IAEIE,GAAc,CAAEnoD,MAAO,uBAEvB,SAAUrB,GAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMmlD,GAA4BjlD,EAAAA,EAAAA,IAAkB,kBAEpD,OAAQW,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,KAAM,EACrDwB,EAAAA,EAAAA,GAAoB,SAAUL,GAAY,CACxCC,IACAI,EAAAA,EAAAA,GAAoB,MAAOU,GAAY,CACrCC,IACAX,EAAAA,EAAAA,GAAoB,MAAOY,GAAY,EACrChC,EAAAA,EAAAA,IAAaikD,EAA2B,CACtCC,QAASzlD,EAAK0+B,QACd,aAAc1+B,EAAK0oD,UACnB,kBAAmB1oD,EAAK+H,eAAe02B,KACvC,wBAAwB,EACxB,0BAA0B,EAC1BknB,sBAAuB3lD,EAAK4lD,sBAC5BC,eAAgB7lD,EAAK6lD,gBACpB,KAAM,EAAG,CAAC,UAAW,aAAc,kBAAmB,wBAAyB,wBAGtFljD,EAAAA,EAAAA,GAAoB,MAAOa,GAAY,CACrCC,IACAd,EAAAA,EAAAA,GAAoB,MAAOe,GAAY,EACrCf,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,oBACLv2C,MAAO,SACP8J,KAAM,WACN6W,QAAS/hB,EAAKquD,cAAcC,kBAC5B/R,SAAUt8C,EAAO,KAAOA,EAAO,GAE3C,kBAAcD,EAAKuuD,cAAgBvuD,EAAKuuD,aAAL,MAAAvuD,EAAI,cAC1B,KAAM,GAAI2D,KACbhB,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,cACLv2C,MAAO,QACP8J,KAAM,SACNi3C,IAAK,IACL3qC,KAAM,IACN1P,UAAW9H,EAAKquD,cAAcC,kBAC9BhwC,MAAOte,EAAKquD,cAAcG,aACzB,KAAM,EAAG5qD,IACZC,QAGJlB,EAAAA,EAAAA,GAAoB,MAAOmB,GAAa,CACtCC,IACApB,EAAAA,EAAAA,GAAoB,MAAOqB,GAAa,EACtCrB,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,kBACLv2C,MAAO,SACP8J,KAAM,WACN6W,QAAS/hB,EAAKquD,cAAcI,gBAC5BlS,SAAUt8C,EAAO,KAAOA,EAAO,GAE3C,kBAAcD,EAAKuuD,cAAgBvuD,EAAKuuD,aAAL,MAAAvuD,EAAI,cAC1B,KAAM,GAAIiE,KACbtB,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,YACLv2C,MAAO,QACP8J,KAAM,SACNi3C,IAAK,IACL3qC,KAAM,IACN1P,UAAW9H,EAAKquD,cAAcI,gBAC9BnwC,MAAOte,EAAKquD,cAAcK,WACzB,KAAM,EAAGxqD,IACZC,QAGJxB,EAAAA,EAAAA,GAAoB,MAAOyB,GAAa,CACtCC,IACA1B,EAAAA,EAAAA,GAAoB,MAAOi1C,GAAa,EACtCj1C,EAAAA,EAAAA,GAAoB,QAAS,CAC3Bg1C,IAAK,oBACLv2C,MAAO,QACP8J,KAAM,SACNi3C,IAAK,IACL3qC,KAAM,IACN8G,MAAOte,EAAKquD,cAAcM,mBACzB,KAAM,EAAGrP,IACZE,QAGJ78C,EAAAA,EAAAA,GAAoB,MAAO88C,GAAa,CACtCC,IACA/8C,EAAAA,EAAAA,GAAoB,MAAOg9C,GAAa,CACtCC,IACAj9C,EAAAA,EAAAA,GAAoB,SAAU,CAC5Bg1C,IAAK,kBACLz0C,KAAM,IACNob,MAAOte,EAAKquD,cAAcjvB,iBACzBkqB,GAAa,EAAGzJ,SAGvBl9C,EAAAA,EAAAA,GAAoB,MAAO4mD,GAAa,EACtC5mD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAKkmD,aACzD,SACHvjD,EAAAA,EAAAA,GAAoB,SAAU,CAC5BvB,MAAO,gBACP0E,QAAS7F,EAAO,KAAOA,EAAO,GAAK,SAAC2I,GAAD,OAAkB5I,EAAK0yC,cACzD,YAEJ,OC1IP,QAAepY,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,iBACN0e,WAAY,CACViP,eAAAA,IAEFrtB,MAL6B,WAM3B,IAAMmb,EAAQC,KACR2C,GAAcjB,EAAAA,EAAAA,IAAI,MAClB2W,GAAyB3W,EAAAA,EAAAA,IAAI,MAC7B6W,GAAmB7W,EAAAA,EAAAA,IAAI,MACvB8W,GAAuB9W,EAAAA,EAAAA,IAAI,MAC3B+W,GAAiB/W,EAAAA,EAAAA,IAAI,MACrBgX,GAAyBhX,EAAAA,EAAAA,IAAI,MAC7BvY,GAAuBuY,EAAAA,EAAAA,IAAI,MAC3BtD,GAAkBsD,EAAAA,EAAAA,IAAI7Y,MACtB/2B,GAAiB4vC,EAAAA,EAAAA,IAAI,IAAInZ,IACzBkqB,GAAY/Q,EAAAA,EAAAA,IAAI,IAEtB3B,EAAMzC,oBAEN4F,EAAAA,EAAAA,KAAS,gCAAC,2GACRR,GAAgBC,EAAOt6B,OADf,kBAGwBgmB,GAAAA,sBAHxB,cAGN+P,EAAgB/1B,MAHV,gBAIuBgmB,GAAAA,uBAJvB,OAINv8B,EAAeuW,MAJT,OAKNoqC,EAAUpqC,OAAQ,UAAA+1B,EAAgB/1B,MAAMgE,WAAtB,eAA2B0a,MAAO,GAL9C,qDAONgZ,EAAM1C,UAAN,MACA0C,EAAMoS,mBARA,yBAUNpS,EAAMrC,oBAVA,8EAcV,IAAM4a,EAAe,WACnBC,EAAYlwC,MAAMxW,UAAYwmD,EAAkBhwC,MAAMyD,QACtD2sC,EAAUpwC,MAAMxW,UAAY2mD,EAAgBnwC,MAAMyD,SAG9CmkC,EAAU,WACd,GACGwC,EAAUpqC,OACVvW,EAAeuW,MAAMqqC,UAAUD,EAAUpqC,OAF5C,CAOA,IAAMwf,EAAS/1B,EAAeuW,MAAM0pC,UAAUU,EAAUpqC,OAClD+1B,EAAmC,CACvC/xB,IAAKwb,EACLiB,cAAe,CACbC,aAAcsvB,EAAkBhwC,MAAMyD,QACtCzC,OAAQ6mC,GAAkBqI,EAAYlwC,QAExC2gB,YAAa,CACXD,aAAcyvB,EAAgBnwC,MAAMyD,QACpCzC,OAAQ6mC,GAAkBuI,EAAUpwC,QAEtC4gB,gBAAiB,CACfC,WAAYgnB,GAAkBwI,EAAkBrwC,QAElD8gB,gBAAiBA,EAAgB9gB,MAAMA,OAEzC03B,EAAM4Y,cAAcva,QAnBlB2B,EAAM1C,UAAU,mBAsBdZ,EAAW,WACfsD,EAAMoS,oBAGFxC,EAAqB,kDAAG,WAAOplB,GAAP,8FACtB/f,EAAQ,IAAI+d,GAAkBz2B,EAAeuW,MAAMmgB,MACzDhe,EAAM+nC,aAAahoB,GACnBwV,EAAMzC,mBAHsB,kBAKpBjP,GAAAA,qBAAyB7jB,GALL,OAM1B1Y,EAAeuW,MAAQmC,EANG,mDAQ1Bu1B,EAAM1C,UAAN,MAR0B,yBAU1B0C,EAAMrC,oBAVoB,4EAAH,sDAcrBkS,EAAiB,SAAC7oB,GACtB0rB,EAAUpqC,MAAQ0e,GAGd0B,GAAUzC,EAAAA,EAAAA,KAAS,kBAAMl0B,EAAeuW,MAAMmqC,cAE9C4F,GAAgBpyB,EAAAA,EAAAA,KAAS,WAC7B,MAAO,CACLqyB,kBAAmBja,EAAgB/1B,MAAMygB,cAAcC,aACvDwvB,YAAana,EAAgB/1B,MAAMygB,cAAczf,OACjDmvC,gBAAiBpa,EAAgB/1B,MAAM2gB,YAAYD,aACnD0vB,UAAWra,EAAgB/1B,MAAM2gB,YAAY3f,OAC7CqvC,kBAAmBta,EAAgB/1B,MAAM4gB,gBAAgBC,WACzDC,gBAAiBiV,EAAgB/1B,MAAM8gB,oBAI3C,MAAO,CACLwZ,OAAAA,EACA7wC,eAAAA,EACA2gD,UAAAA,EACA4F,kBAAAA,EACAE,YAAAA,EACAC,gBAAAA,EACAC,UAAAA,EACAC,kBAAAA,EACAvvB,gBAAAA,EACAV,QAAAA,EACA2vB,cAAAA,EACAE,aAAAA,EACArI,QAAAA,EACAxT,SAAAA,EACAkT,sBAAAA,EACAC,eAAAA,MCxHN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCQA,IAAevrB,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,MACN0e,WAAY,CACV4V,eAAAA,GACAC,WAAAA,GACAC,eAAAA,GACAC,0BAAAA,GACAC,iBAAAA,GACAC,YAAAA,GACAC,aAAAA,GACAC,cAAAA,GACAC,YAAAA,GACAC,aAAAA,GACAC,eAAAA,IAEF10B,MAf6B,WAgB3B,IAAMmb,EAAQC,KAER30C,GAAQ26B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAMh0C,WAAWV,SAExCE,GAAqBy6B,EAAAA,EAAAA,KAAS,WAClC,MAAO,CACLx6B,KAAMu0C,EAAM1D,WAAahE,GAASsE,YAClC/wC,SAAUm0C,EAAM1D,WAAahE,GAASuE,gBACtC/wC,SAAUk0C,EAAM1D,WAAahE,GAASwE,gBACtC/wC,iBAAkBi0C,EAAM1D,WAAahE,GAASyE,0BAC9C/wC,WAAYg0C,EAAMwZ,0BAClBvtD,MAAO+zC,EAAM1D,WAAahE,GAASqE,aACnCzwC,MAAO8zC,EAAMnE,QACb1vC,aAAgC4J,IAAvBiqC,EAAM3D,iBAIbjwC,GAAa65B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM5zC,cAElCC,GAAY45B,EAAAA,EAAAA,KAAS,kBAAM+Z,EAAM9D,YAwCvC,OAtCAiH,EAAAA,EAAAA,KAAU,WACR,IAAMsW,EAAOn7B,SAASo7B,qBAAqB,QAAQ,GACnDD,EAAK5W,iBAAiB,QAAQ,SAAChmB,GAC7BmjB,EAAMqD,gBACNxmB,EAAMkJ,oBAER0zB,EAAK5W,iBAAiB,SAAS,SAAChmB,GAC9BmjB,EAAMyD,kBACN5mB,EAAMkJ,oBAER0zB,EAAK5W,iBAAiB,YAAY,SAAChmB,GACjCA,EAAMkJ,oBAER0zB,EAAK5W,iBAAiB,QAAQ,SAAChmB,GAC7B,GAAIA,EAAM88B,cAAgB98B,EAAM88B,aAAaC,MAAM,GAAI,CACrD,IAAMx7B,EAAOvB,EAAM88B,aAAaC,MAAM,GAAGx7B,KACzC4hB,EAAM3U,WAAWjN,GAEnBvB,EAAMkJ,oBAERoyB,GAAmB,CACjBJ,UADiB,WAEf,IAAM8B,EAAa7Z,EAAM7yB,OAAOhB,QAAQ7C,OACxC02B,EAAM8H,iBAAiB+R,EAAa,IAEtC7B,YALiB,WAMf,IAAM6B,EAAa7Z,EAAM7yB,OAAOhB,QAAQ7C,OACxC02B,EAAM8H,iBAAiB+R,EAAa,IAEtC5B,YATiB,WAUfjY,EAAM8H,iBAAiB,IAEzBoQ,aAZiB,WAaflY,EAAM8H,iBAAiBjlC,OAAOykB,wBAK7B,CACLh8B,MAAAA,EACAE,mBAAAA,EACAY,WAAAA,EACAC,UAAAA,MCxFN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAAStC,GAAQ,CAAC,YAAY,qBAEzF,ICVY+vD,GDUZ,MEAM,SAAUj1B,KACd,IAAMmb,EAAQC,KACd7R,GAAOP,aAAY,SAAC3V,GAClB8nB,EAAM1C,UAAUplB,MAElBkW,GAAON,aAAY,SAACjR,GAClB,IAAImjB,EAAMnE,QAGV,OAAQhf,GACN,KAAKi9B,GAAUC,WACb/Z,EAAMoD,YACN,MACF,KAAK0W,GAAUE,YACbha,EAAM3U,aACN,MACF,KAAKyuB,GAAUG,YACbja,EAAMzU,WAAW,CAAEqU,WAAW,IAC9B,MACF,KAAKka,GAAUI,eACbla,EAAMzU,aACN,MACF,KAAKuuB,GAAUK,YACbna,EAAMqD,gBACN,MACF,KAAKyW,GAAUM,gBACbpa,EAAMsD,gBACN,MACF,KAAKwW,GAAUO,uBACbra,EAAMsa,sBACN,MACF,KAAKR,GAAUS,oBACbva,EAAMuD,mBACN,MACF,KAAKuW,GAAUU,gBACbxa,EAAMwD,gBACN,MACF,KAAKsW,GAAUW,aACbza,EAAMyD,kBACN,MACF,KAAKqW,GAAUY,iBACb1a,EAAM2a,kBAAkBzyC,GAAYmN,WACpC,MACF,KAAKykC,GAAUc,cACb5a,EAAM2a,kBAAkBzyC,GAAY1X,QACpC,MACF,KAAKspD,GAAUe,YACb7a,EAAM2a,kBAAkBzyC,GAAYsN,MACpC,MACF,KAAKskC,GAAUgB,uBACb9a,EAAM2a,kBAAkBzyC,GAAYwN,iBACpC,MACF,KAAKokC,GAAUiB,YACb/a,EAAM2a,kBAAkBzyC,GAAY0N,MACpC,MACF,KAAKkkC,GAAUkB,eACbhb,EAAM2a,kBAAkBzyC,GAAY4N,SACpC,MACF,KAAKgkC,GAAUmB,gBACbjb,EAAM2a,kBAAkBzyC,GAAY8N,UACpC,MACF,KAAK8jC,GAAUoB,iBACblb,EAAM2a,kBAAkBzyC,GAAYgO,WACpC,MACF,KAAK4jC,GAAUqB,wBACbnb,EAAM2a,kBAAkBzyC,GAAYkO,kBACpC,MACF,KAAK0jC,GAAUsB,sBACbpb,EAAM2a,kBAAkBzyC,GAAYoO,gBACpC,MACF,KAAKwjC,GAAUuB,uBACbrb,EAAM2a,kBAAkBzyC,GAAYsO,iBACpC,MACF,KAAKsjC,GAAUwB,oBACbtb,EAAMsF,oBACN,MACF,KAAKwU,GAAUyB,uBACbvb,EAAMiF,uBACN,MACF,KAAK6U,GAAU0B,qBACbxb,EAAMkF,qBACN,MACF,KAAK4U,GAAU2B,YACbzb,EAAMmF,aACN,MACF,KAAK2U,GAAU4B,uBACb1b,EAAMsE,mBAAmBllC,GAAoBO,UAC7C,MACF,KAAKm6C,GAAU6B,6BACb3b,EAAMsE,mBAAmBllC,GAAoBiB,gBAC7C,MACF,KAAKy5C,GAAU8B,mCACb5b,EAAMsE,mBAAmBllC,GAAoBkB,sBAC7C,MACF,KAAKw5C,GAAU+B,8BACb7b,EAAMsE,mBAAmBllC,GAAoBmB,iBAC7C,MACF,KAAKu5C,GAAUgC,4BACb9b,EAAMsE,mBAAmBllC,GAAoBoB,eAC7C,MACF,KAAKs5C,GAAUiC,kCACb/b,EAAMsE,mBAAmBllC,GAAoBqB,qBAC7C,MACF,KAAKq5C,GAAUkC,+BACbhc,EAAMsE,mBAAmBllC,GAAoBsB,kBAC7C,MACF,KAAKo5C,GAAUmC,+BACbjc,EAAMsE,mBAAmBllC,GAAoBuB,kBAC7C,MACF,KAAKm5C,GAAUoC,+BACblc,EAAMsE,mBAAmBllC,GAAoBwB,kBAC7C,MACF,KAAKk5C,GAAUqC,+BACbnc,EAAMsE,mBAAmBllC,GAAoByB,kBAC7C,MACF,KAAKi5C,GAAUsC,0BACbpc,EAAMsE,mBAAmBllC,GAAoBe,aAC7C,MACF,KAAK25C,GAAUuC,iCACbrc,EAAMsE,mBAAmBllC,GAAoBgB,oBAC7C,MACF,KAAK05C,GAAUwC,WACbtc,EAAM2E,iBACN,MACF,KAAKmV,GAAUyC,UACbvc,EAAM4E,WACN,MACF,KAAKkV,GAAUtpD,OACbkjC,GAAYpjC,SACZ,MACF,KAAKwpD,GAAU0C,eACbxc,EAAM6E,qBACN,MACF,KAAKiV,GAAU2C,cACbzc,EAAM8E,eACN,MACF,KAAKgV,GAAU4C,eACb1c,EAAM+E,qBACN,MACF,KAAK+U,GAAU6C,cACb3c,EAAMgF,eACN,MACF,KAAK8U,GAAU8C,WACb5c,EAAMjC,YACN,MACF,KAAK+b,GAAU+C,mBACb7c,EAAMoF,uBACN,MACF,KAAK0U,GAAU/c,0BACbiD,EAAMqF,gCACN,UAGNjX,GAAOL,eACL,SAACS,EAAmBliB,EAAajW,EAAcy9B,GAC7CI,GAAY1F,EAAWliB,EAAKjW,EAAMy9B,MAGtC1F,GAAOJ,WACL,SACEQ,EACAliB,EACA4jB,EACA3L,EACAkE,GAEAuX,EAAM/C,cAAczO,EAAWliB,EAAK4jB,EAAQ3L,EAAM5W,KAAKoa,MAAMU,OAGjE2F,GAAOH,iBACL,SACEO,EACAliB,EACA4jB,EACA3L,EACAkE,GAEAuX,EAAM8c,oBAAoBtuB,EAAWliB,EAAK4jB,EAAQ3L,EAAM5W,KAAKoa,MAAMU,QAGvEtD,EAAAA,EAAAA,KACE,iBAAM,CAAC6a,EAAM1D,SAAU0D,EAAMnE,YAC7B,YAAsB,oBAApBS,EAAoB,KAAVpwC,EAAU,KACpBkiC,GAAOjD,gBAAgBmR,EAAsBpwC,MAGjDkiC,GAAOjD,gBAAgB6U,EAAM1D,SAAU0D,EAAMnE,UDpM/C,SAAYie,GACVA,EAAAA,cAAAA,YACAA,EAAAA,eAAAA,aACAA,EAAAA,eAAAA,aACAA,EAAAA,kBAAAA,eACAA,EAAAA,eAAAA,aACAA,EAAAA,mBAAAA,gBACAA,EAAAA,0BAAAA,sBACAA,EAAAA,uBAAAA,mBACAA,EAAAA,mBAAAA,iBACAA,EAAAA,gBAAAA,cACAA,EAAAA,oBAAAA,kBACAA,EAAAA,iBAAAA,eACAA,EAAAA,eAAAA,aACAA,EAAAA,0BAAAA,uBACAA,EAAAA,eAAAA,aACAA,EAAAA,kBAAAA,gBACAA,EAAAA,mBAAAA,gBACAA,EAAAA,oBAAAA,iBACAA,EAAAA,2BAAAA,uBACAA,EAAAA,yBAAAA,qBACAA,EAAAA,0BAAAA,sBACAA,EAAAA,uBAAAA,oBACAA,EAAAA,0BAAAA,uBACAA,EAAAA,wBAAAA,qBACAA,EAAAA,eAAAA,aACAA,EAAAA,0BAAAA,uBACAA,EAAAA,gCAAAA,4BACAA,EAAAA,sCAAAA,iCACAA,EAAAA,iCAAAA,6BACAA,EAAAA,+BAAAA,2BACAA,EAAAA,qCAAAA,gCACAA,EAAAA,kCAAAA,8BACAA,EAAAA,kCAAAA,8BACAA,EAAAA,kCAAAA,8BACAA,EAAAA,kCAAAA,8BACAA,EAAAA,6BAAAA,yBACAA,EAAAA,oCAAAA,+BACAA,EAAAA,kBAAAA,gBACAA,EAAAA,iBAAAA,eACAA,EAAAA,kBAAAA,gBACAA,EAAAA,iBAAAA,eACAA,EAAAA,cAAAA,YACAA,EAAAA,aAAAA,WACAA,EAAAA,UAAAA,SACAA,EAAAA,cAAAA,YACAA,EAAAA,sBAAAA,aACAA,EAAAA,6BAAAA,oBA/CF,CAAYA,KAAAA,GAAS,KEQrBxrB,GAAAA,IAAQhG,GAASkF,KAAM,0BAEvB0f,GAAAA,GAAAA,SAAAA,MAAA,OAAK,OAAa6P,GAAAA,KAElBC,KAEA,IAAMhd,GAAQC,KACdgd,QAAQC,WAAW,CACjB5uB,GAAAA,iBAEG6I,MAAK,SAAC3M,GACLwV,GAAMgI,iBAAiBxd,MAExBuL,OAAM,SAAC7d,GACN8nB,GAAM1C,UACJ,IAAIrwB,MAAM,2BAA6BiL,QAG7C,gCAAC,oHACoBoW,GAAAA,2BADpB,OACOlQ,EADP,OAEKA,GACF4hB,GAAM3U,WAAWjN,GAHpB,0CAAD,KAMC++B,SAAQ,WACT7uB,GAAAA,IAAQhG,GAASkF,KAAM,cACvB4vB,EAAAA,EAAAA,IAAUC,IAAKC,MAAM,Y,mBCjCnBC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB1nD,IAAjB2nD,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,IAOV,OAHAE,EAAoBJ,GAAUG,EAAQA,EAAOD,QAASH,GAG/CI,EAAOD,QAIfH,EAAoB55C,EAAIi6C,E,WCzBxB,IAAIC,EAAW,GACfN,EAAoBO,EAAI,SAASr4C,EAAQs4C,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,EAAAA,EACnB,IAAS3+C,EAAI,EAAGA,EAAIq+C,EAAS3+C,OAAQM,IAAK,CACrCu+C,EAAWF,EAASr+C,GAAG,GACvBw+C,EAAKH,EAASr+C,GAAG,GACjBy+C,EAAWJ,EAASr+C,GAAG,GAE3B,IAJA,IAGI4+C,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAS7+C,OAAQm/C,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAaxhD,OAAOC,KAAK6gD,EAAoBO,GAAGQ,OAAM,SAAS5yD,GAAO,OAAO6xD,EAAoBO,EAAEpyD,GAAKqyD,EAASM,OAC3JN,EAASQ,OAAOF,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbP,EAASU,OAAO/+C,IAAK,GACrB,IAAI3F,EAAImkD,SACEloD,IAAN+D,IAAiB4L,EAAS5L,IAGhC,OAAO4L,EAzBNw4C,EAAWA,GAAY,EACvB,IAAI,IAAIz+C,EAAIq+C,EAAS3+C,OAAQM,EAAI,GAAKq+C,EAASr+C,EAAI,GAAG,GAAKy+C,EAAUz+C,IAAKq+C,EAASr+C,GAAKq+C,EAASr+C,EAAI,GACrGq+C,EAASr+C,GAAK,CAACu+C,EAAUC,EAAIC,I,cCJ/BV,EAAoB9jD,EAAI,SAASkkD,GAChC,IAAIa,EAASb,GAAUA,EAAOc,WAC7B,WAAa,OAAOd,EAAO,YAC3B,WAAa,OAAOA,GAErB,OADAJ,EAAoBj4C,EAAEk5C,EAAQ,CAAE71B,EAAG61B,IAC5BA,G,cCLRjB,EAAoBj4C,EAAI,SAASo4C,EAASgB,GACzC,IAAI,IAAIhzD,KAAOgzD,EACXnB,EAAoBoB,EAAED,EAAYhzD,KAAS6xD,EAAoBoB,EAAEjB,EAAShyD,IAC5E+Q,OAAOmiD,eAAelB,EAAShyD,EAAK,CAAEmzD,YAAY,EAAMtkD,IAAKmkD,EAAWhzD,M,cCJ3E6xD,EAAoB5jD,EAAI,WACvB,GAA0B,kBAAfmlD,WAAyB,OAAOA,WAC3C,IACC,OAAOzkD,MAAQ,IAAI0kD,SAAS,cAAb,GACd,MAAO9mC,GACR,GAAsB,kBAAXiW,OAAqB,OAAOA,QALjB,G,cCAxBqvB,EAAoBoB,EAAI,SAASzrB,EAAK8rB,GAAQ,OAAOviD,OAAOwiD,UAAUC,eAAeC,KAAKjsB,EAAK8rB,I,cCK/F,IAAII,EAAkB,CACrB,IAAK,GAaN7B,EAAoBO,EAAEO,EAAI,SAASgB,GAAW,OAAoC,IAA7BD,EAAgBC,IAGrE,IAAIC,EAAuB,SAASC,EAA4BjzC,GAC/D,IAKIkxC,EAAU6B,EALVtB,EAAWzxC,EAAK,GAChBkzC,EAAclzC,EAAK,GACnBmzC,EAAUnzC,EAAK,GAGI9M,EAAI,EAC3B,GAAGu+C,EAAS2B,MAAK,SAAS3rD,GAAM,OAA+B,IAAxBqrD,EAAgBrrD,MAAe,CACrE,IAAIypD,KAAYgC,EACZjC,EAAoBoB,EAAEa,EAAahC,KACrCD,EAAoB55C,EAAE65C,GAAYgC,EAAYhC,IAGhD,GAAGiC,EAAS,IAAIh6C,EAASg6C,EAAQlC,GAGlC,IADGgC,GAA4BA,EAA2BjzC,GACrD9M,EAAIu+C,EAAS7+C,OAAQM,IACzB6/C,EAAUtB,EAASv+C,GAChB+9C,EAAoBoB,EAAES,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO9B,EAAoBO,EAAEr4C,IAG1Bk6C,EAAqBC,KAAK,8BAAgCA,KAAK,+BAAiC,GACpGD,EAAmB5/C,QAAQu/C,EAAqBO,KAAK,KAAM,IAC3DF,EAAmB3hD,KAAOshD,EAAqBO,KAAK,KAAMF,EAAmB3hD,KAAK6hD,KAAKF,I,GC/CvF,IAAIG,EAAsBvC,EAAoBO,OAAEhoD,EAAW,CAAC,MAAM,WAAa,OAAOynD,EAAoB,QAC1GuC,EAAsBvC,EAAoBO,EAAEgC,I","sources":["webpack://electron-shogi/./src/App.vue?991a","webpack://electron-shogi/./src/components/main/StandardLayout.vue?8292","webpack://electron-shogi/./src/components/main/BoardPane.vue?0a8c","webpack://electron-shogi/./src/components/primitive/BoardView.vue?ad5e","webpack://electron-shogi/./src/shogi/color.ts","webpack://electron-shogi/./src/shogi/piece.ts","webpack://electron-shogi/./src/shogi/direction.ts","webpack://electron-shogi/./src/shogi/square.ts","webpack://electron-shogi/./src/shogi/move.ts","webpack://electron-shogi/./src/shogi/board.ts","webpack://electron-shogi/./src/shogi/hand.ts","webpack://electron-shogi/./src/shogi/position.ts","webpack://electron-shogi/./src/shogi/record.ts","webpack://electron-shogi/./src/helpers/time.ts","webpack://electron-shogi/./src/helpers/string.ts","webpack://electron-shogi/./src/shogi/kakinoki.ts","webpack://electron-shogi/./src/shogi/csa.ts","webpack://electron-shogi/./src/shogi/detect.ts","webpack://electron-shogi/./src/assets/preload.ts","webpack://electron-shogi/./src/components/primitive/Types.ts","webpack://electron-shogi/./src/components/primitive/BoardLayout.ts","webpack://electron-shogi/./src/components/primitive/BoardView.vue?53c8","webpack://electron-shogi/./src/components/primitive/BoardView.vue","webpack://electron-shogi/./src/uri.ts","webpack://electron-shogi/./src/settings/usi.ts","webpack://electron-shogi/./src/settings/analysis.ts","webpack://electron-shogi/./src/settings/app.ts","webpack://electron-shogi/./src/ipc/log.ts","webpack://electron-shogi/./src/ipc/web.ts","webpack://electron-shogi/./src/settings/game.ts","webpack://electron-shogi/./src/settings/research.ts","webpack://electron-shogi/./src/ipc/api.ts","webpack://electron-shogi/./src/audio/index.ts","webpack://electron-shogi/./src/store/usi.ts","webpack://electron-shogi/./src/players/player.ts","webpack://electron-shogi/./src/store/record.ts","webpack://electron-shogi/./src/players/human.ts","webpack://electron-shogi/./src/players/usi.ts","webpack://electron-shogi/./src/store/game.ts","webpack://electron-shogi/./src/helpers/path.ts","webpack://electron-shogi/./src/store/bussy.ts","webpack://electron-shogi/./src/store/state.ts","webpack://electron-shogi/./src/store/message.ts","webpack://electron-shogi/./src/store/error.ts","webpack://electron-shogi/./src/helpers/datetime.ts","webpack://electron-shogi/./src/store/score.ts","webpack://electron-shogi/./src/store/analysis.ts","webpack://electron-shogi/./src/store/index.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?e66d","webpack://electron-shogi/./src/assets/icons.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?3913","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue","webpack://electron-shogi/./src/components/menu/FileMenu.vue?b2fd","webpack://electron-shogi/./src/helpers/dialog.ts","webpack://electron-shogi/./src/components/menu/FileMenu.vue?c6ef","webpack://electron-shogi/./src/components/menu/FileMenu.vue","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue?d858","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue?1c5e","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue","webpack://electron-shogi/./src/components/main/BoardPane.vue?7d48","webpack://electron-shogi/./src/components/main/BoardPane.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?973a","webpack://electron-shogi/./src/components/primitive/RecordView.vue?f707","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f9e","webpack://electron-shogi/./src/components/primitive/RecordView.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?61e0","webpack://electron-shogi/./src/components/main/RecordPane.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?e2c4","webpack://electron-shogi/./src/components/tab/RecordComment.vue?f244","webpack://electron-shogi/./src/components/tab/RecordComment.vue?7802","webpack://electron-shogi/./src/components/tab/RecordComment.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?8711","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?af6a","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue?83ee","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue?64c9","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?4973","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?6e00","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?ed08","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?37e9","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?7d22","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?8fcb","webpack://electron-shogi/./src/components/tab/RecordInfo.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?c156","webpack://electron-shogi/./src/components/main/TabPane.vue","webpack://electron-shogi/./src/components/main/StandardLayout.vue?15bf","webpack://electron-shogi/./src/components/main/StandardLayout.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?6eb5","webpack://electron-shogi/./src/helpers/form.ts","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue?c996","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?402b","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?6142","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue?3730","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?4613","webpack://electron-shogi/./src/components/dialog/GameDialog.vue","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?d8b1","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?110e","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?fab0","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?449c","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?18b4","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?12ff","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?7fc2","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?66a0","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?3002","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?f614","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?ef63","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?8006","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?eb48","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?f9a8","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?795b","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?13c3","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue","webpack://electron-shogi/./src/helpers/key.ts","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?880c","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?de87","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue","webpack://electron-shogi/./src/App.vue?847a","webpack://electron-shogi/./src/App.vue","webpack://electron-shogi/./src/ipc/menu.ts","webpack://electron-shogi/./src/ipc/setup.ts","webpack://electron-shogi/./src/main.ts","webpack://electron-shogi/webpack/bootstrap","webpack://electron-shogi/webpack/runtime/chunk loaded","webpack://electron-shogi/webpack/runtime/compat get default export","webpack://electron-shogi/webpack/runtime/define property getters","webpack://electron-shogi/webpack/runtime/global","webpack://electron-shogi/webpack/runtime/hasOwnProperty shorthand","webpack://electron-shogi/webpack/runtime/jsonp chunk loading","webpack://electron-shogi/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_AnalysisDialog = _resolveComponent(\"AnalysisDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_BussyMessage = _resolveComponent(\"BussyMessage\")!\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\")!\n  const _component_InfoMessage = _resolveComponent(\"InfoMessage\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"root\", _ctx.thema])\n  }, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.analysis)\n      ? (_openBlock(), _createBlock(_component_AnalysisDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.bussy)\n      ? (_openBlock(), _createBlock(_component_BussyMessage, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.confirm)\n      ? (_openBlock(), _createBlock(_component_ConfirmDialog, { key: 7 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_InfoMessage, { key: 8 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 9 }))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c97084ae\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = { class: \"top-pane\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_TabPane = _resolveComponent(\"TabPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          \"max-size\": _ctx.boardPaneMaxSize,\n          onResize: _ctx.onBoardPaneResize\n        }, null, 8, [\"max-size\", \"onResize\"]),\n        _createVNode(_component_RecordPane, {\n          class: \"top-right-pane\",\n          style: _normalizeStyle(_ctx.recordPaneStyle)\n        }, null, 8, [\"style\"])\n      ]),\n      _createVNode(_component_TabPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9f2180b4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 対局中断 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 解析 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 解析中断 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_12 = { class: \"control bottom\" }\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_14 = [\"disabled\"]\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_16 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" ファイル \")\nconst _hoisted_18 = [\"disabled\"]\nconst _hoisted_19 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n  const _component_FileMenu = _resolveComponent(\"FileMenu\")!\n  const _component_InitialPositionMenu = _resolveComponent(\"InitialPositionMenu\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_BoardView, {\n      \"piece-image-type\": _ctx.appSetting.pieceImage,\n      \"board-image-type\": _ctx.appSetting.boardImage,\n      \"board-label-type\": _ctx.appSetting.boardLabelType,\n      \"max-size\": _ctx.maxSize,\n      position: _ctx.position,\n      \"last-move\": _ctx.lastMove,\n      flip: _ctx.appSetting.boardFlipping,\n      \"allow-move\": _ctx.allowMove,\n      \"allow-edit\": _ctx.allowEdit,\n      \"black-player-name\": _ctx.blackPlayerName,\n      \"white-player-name\": _ctx.whitePlayerName,\n      \"black-player-time-ms\": _ctx.blackPlayerTimeMs,\n      \"black-player-byoyomi\": _ctx.blackPlayerByoyomi,\n      \"white-player-time-ms\": _ctx.whitePlayerTimeMs,\n      \"white-player-byoyomi\": _ctx.whitePlayerByoyomi,\n      onResize: _ctx.onResize,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                class: \"control-item\",\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.GAME\n                }, null, 8, [\"icon\"]),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                class: \"control-item\",\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                class: \"control-item\",\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESIGN\n                }, null, 8, [\"icon\"]),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                class: \"control-item\",\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESEARCH\n                }, null, 8, [\"icon\"]),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                class: \"control-item\",\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.END\n                }, null, 8, [\"icon\"]),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.analysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                class: \"control-item\",\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onAnalysis && _ctx.onAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.ANALYSIS\n                }, null, 8, [\"icon\"]),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endAnalysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                class: \"control-item\",\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndAnalysis && _ctx.onEndAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                class: \"control-item\",\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.EDIT\n                }, null, 8, [\"icon\"]),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                class: \"control-item\",\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CHECK\n                }, null, 8, [\"icon\"]),\n                _hoisted_10\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                class: \"control-item\",\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.SWAP\n                }, null, 8, [\"icon\"]),\n                _hoisted_11\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 10,\n                class: \"control-item\",\n                onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onInitPosition && _ctx.onInitPosition(...args)))\n              }, \" 局面の初期化 \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_13\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            disabled: !_ctx.controlStates.engineSettings,\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.ENGINE_SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_15\n          ], 8, _hoisted_14),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FLIP\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onFileAction && _ctx.onFileAction(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FILE\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            disabled: !_ctx.controlStates.removeAfter,\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.DELETE\n            }, null, 8, [\"icon\"]),\n            _hoisted_19\n          ], 8, _hoisted_18)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"piece-image-type\", \"board-image-type\", \"board-label-type\", \"max-size\", \"position\", \"last-move\", \"flip\", \"allow-move\", \"allow-edit\", \"black-player-name\", \"white-player-name\", \"black-player-time-ms\", \"black-player-byoyomi\", \"white-player-time-ms\", \"white-player-byoyomi\", \"onResize\", \"onMove\", \"onEdit\"]),\n    (_ctx.isFileMenuVisible)\n      ? (_openBlock(), _createBlock(_component_FileMenu, {\n          key: 0,\n          onClose: _cache[16] || (_cache[16] = ($event: any) => (_ctx.isFileMenuVisible = false))\n        }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.isInitialPositionMenuVisible)\n      ? (_openBlock(), _createBlock(_component_InitialPositionMenu, {\n          key: 1,\n          onClose: _cache[17] || (_cache[17] = ($event: any) => (_ctx.isInitialPositionMenuVisible = false))\n        }))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7b1939f2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"▲\" + _toDisplayString(_ctx.blackPlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"△\" + _toDisplayString(_ctx.whitePlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: piece.id,\n          class: \"piece\",\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.labels, (label) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: label.id,\n          class: \"label\",\n          style: _normalizeStyle(label.style)\n        }, _toDisplayString(label.character), 5))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.BLACK, pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.WHITE, pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nexport function promotedPieceType(pieceType: PieceType): PieceType {\n  return promoteMap[pieceType] || pieceType;\n}\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nexport function unpromotedPieceType(pieceType: PieceType): PieceType {\n  return unpromoteMap[pieceType] || pieceType;\n}\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同　\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += `(${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n  TSUME_SHOGI_2KINGS = \"tsumeShogi2Kings\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI_2KINGS) {\n      return;\n    }\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  readonly checked: boolean;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSFEN(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n      case InitialPositionType.TSUME_SHOGI_2KINGS:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (\n      type === InitialPositionType.TSUME_SHOGI ||\n      type === InitialPositionType.TSUME_SHOGI_2KINGS\n    ) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  get checked(): boolean {\n    return this._board.isChecked(this.color);\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color, { filled: move.to });\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isChecked(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isChecked(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isChecked(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSFEN(1);\n  }\n\n  getSFEN(nextMoveNumber: number): string {\n    let ret = `${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    if (sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    this._board.resetBySFEN(sections[0]);\n    this._color = parseSFENColor(sections[1]);\n    const hands = Hand.parseSFEN(sections[2]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length === 5 && sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    if (sections.length !== 4) {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[0])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[1])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[2])) {\n      return false;\n    }\n    if (!sections[3].match(/[0-9]+/)) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n\ntype PieceCounts = {\n  pawn: number;\n  lance: number;\n  knight: number;\n  silver: number;\n  gold: number;\n  bishop: number;\n  rook: number;\n  king: number;\n  promPawn: number;\n  promLance: number;\n  promKnight: number;\n  promSilver: number;\n  horse: number;\n  dragon: number;\n};\n\nexport function countExistingPieces(position: ImmutablePosition): PieceCounts {\n  const result: PieceCounts = {\n    pawn: 0,\n    lance: 0,\n    knight: 0,\n    silver: 0,\n    gold: 0,\n    bishop: 0,\n    rook: 0,\n    king: 0,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n  Square.all.forEach((square) => {\n    const piece = position.board.at(square);\n    if (piece) {\n      result[piece.type] += 1;\n    }\n  });\n  position.blackHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  position.whiteHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  return result;\n}\n\nexport function countNotExistingPieces(\n  position: ImmutablePosition\n): PieceCounts {\n  const existed = countExistingPieces(position);\n  return {\n    pawn: 18 - existed.pawn - existed.promPawn,\n    lance: 4 - existed.lance - existed.promLance,\n    knight: 4 - existed.knight - existed.promKnight,\n    silver: 4 - existed.silver - existed.promSilver,\n    gold: 4 - existed.gold,\n    bishop: 2 - existed.bishop - existed.horse,\n    rook: 2 - existed.rook - existed.dragon,\n    king: 2 - existed.king,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n}\n","import {\n  Position,\n  DoMoveOption,\n  ImmutablePosition,\n  Move,\n  Color,\n  reverseColor,\n  parseSFENMove,\n} from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TITLE = \"title\", // 表題\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport function getStandardMetadataDisplayName(key: RecordMetadataKey): string {\n  switch (key) {\n    case RecordMetadataKey.BLACK_NAME:\n      return \"先手\";\n    case RecordMetadataKey.WHITE_NAME:\n      return \"後手\";\n    case RecordMetadataKey.START_DATETIME:\n      return \"開始日時\";\n    case RecordMetadataKey.END_DATETIME:\n      return \"終了日時\";\n    case RecordMetadataKey.DATE:\n      return \"対局日\";\n    case RecordMetadataKey.TOURNAMENT:\n      return \"棋戦\";\n    case RecordMetadataKey.STRATEGY:\n      return \"戦型\";\n    case RecordMetadataKey.TITLE:\n      return \"表題\";\n    case RecordMetadataKey.TIME_LIMIT:\n      return \"持ち時間\";\n    case RecordMetadataKey.TIME_SPENT:\n      return \"消費時間\";\n    case RecordMetadataKey.PLACE:\n      return \"場所\";\n    case RecordMetadataKey.POSTED_ON:\n      return \"掲載\";\n    case RecordMetadataKey.NOTE:\n      return \"備考\";\n    case RecordMetadataKey.BLACK_SHORT_NAME:\n      return \"先手省略名\";\n    case RecordMetadataKey.WHITE_SHORT_NAME:\n      return \"後手省略名\";\n    case RecordMetadataKey.OPUS_NO:\n      return \"作品番号\";\n    case RecordMetadataKey.OPUS_NAME:\n      return \"作品名\";\n    case RecordMetadataKey.AUTHOR:\n      return \"作者\";\n    case RecordMetadataKey.PUBLISHED_ON:\n      return \"発表誌\";\n    case RecordMetadataKey.PUBLISHED_AT:\n      return \"発表年月\";\n    case RecordMetadataKey.SOURCE:\n      return \"出典\";\n    case RecordMetadataKey.LENGTH:\n      return \"手数\";\n    case RecordMetadataKey.INTEGRITY:\n      return \"完全性\";\n    case RecordMetadataKey.CATEGORY:\n      return \"分類\";\n    case RecordMetadataKey.AWARD:\n      return \"受賞\";\n  }\n}\n\nexport interface ImmutableRecordMetadata {\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey>;\n  getStandardMetadata(key: RecordMetadataKey): string | undefined;\n  get customMetadataKeys(): IterableIterator<string>;\n  getCustomMetadata(key: string): string | undefined;\n}\n\nexport class RecordMetadata {\n  private standard: Map<RecordMetadataKey, string>;\n  private custom: Map<string, string>;\n\n  constructor() {\n    this.standard = new Map<RecordMetadataKey, string>();\n    this.custom = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.standard.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.standard.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    if (value) {\n      this.standard.set(key, value);\n    } else {\n      this.standard.delete(key);\n    }\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.custom.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.custom.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    if (value) {\n      this.custom.set(key, value);\n    } else {\n      this.custom.delete(key);\n    }\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface ImmutableNode {\n  readonly number: number;\n  readonly prev: Node | null;\n  readonly next: Node | null;\n  readonly branch: Node | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  readonly isCheck: boolean;\n  readonly comment: string;\n  readonly customData: string | undefined;\n  readonly displayText: string;\n  readonly timeText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly isLastMove: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n}\n\nexport interface Node extends ImmutableNode {\n  comment: string;\n  customData: string | undefined;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass NodeImpl implements Node {\n  public next: NodeImpl | null;\n  public branch: NodeImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: NodeImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove,\n    public isCheck: boolean\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get timeText(): string {\n    const elapsed = millisecondsToMSS(this.elapsedMs);\n    const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n    return `${elapsed} / ${totalElapsed}`;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  get isLastMove(): boolean {\n    if (!this.next) {\n      return true;\n    }\n    for (let p: Node | null = this.next; p; p = p.branch) {\n      if (p.move instanceof Move) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: NodeImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  static newRootEntry(): NodeImpl {\n    return new NodeImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START, // move\n      false // isCheck\n    );\n  }\n}\n\nexport interface ImmutableRecord {\n  readonly metadata: ImmutableRecordMetadata;\n  readonly initialPosition: ImmutablePosition;\n  readonly position: ImmutablePosition;\n  readonly first: Node;\n  readonly current: Node;\n  readonly moves: Array<Node>; // TODO: forEach に統合したい。\n  readonly movesBefore: Array<Node>;\n  readonly length: number;\n  readonly branchBegin: Node;\n  readonly repetition: boolean;\n  readonly perpetualCheck: Color | null;\n  readonly usi: string;\n  readonly sfen: string;\n  forEach(handler: (node: ImmutableNode) => void): void;\n}\n\nexport default class Record {\n  public metadata: RecordMetadata;\n  private _initialPosition: ImmutablePosition;\n  private _position: Position;\n  private _first: NodeImpl;\n  private _current: NodeImpl;\n  private repetitionCounts: { [sfen: string]: number };\n  private repetitionStart: { [sfen: string]: number };\n\n  constructor(position?: ImmutablePosition) {\n    this.metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = NodeImpl.newRootEntry();\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): Node {\n    return this._first;\n  }\n\n  get current(): Node {\n    return this._current;\n  }\n\n  get moves(): Array<Node> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<Node> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<NodeImpl> {\n    const moves = new Array<NodeImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): Node {\n    return this._current.prev\n      ? (this._current.prev.next as Node)\n      : this._current;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    this.metadata = new RecordMetadata();\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first = NodeImpl.newRootEntry();\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this.decrementRepetition();\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as NodeImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n        this.incrementRepetition();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((node) => {\n      node.activeBranch = node.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this.decrementRepetition();\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n          this.incrementRepetition();\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    let isCheck = false;\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n      this.incrementRepetition();\n      isCheck = this.position.checked;\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new NodeImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move,\n        isCheck\n      );\n      this._current = this._current.next;\n      this._current.setElapsedMs(0);\n      return true;\n    }\n    let p: NodeImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new NodeImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move,\n      isCheck\n    );\n    this._current.setElapsedMs(0);\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n  }\n\n  private incrementRepetition(): void {\n    const sfen = this.position.sfen;\n    if (this.repetitionCounts[sfen]) {\n      this.repetitionCounts[sfen] += 1;\n    } else {\n      this.repetitionCounts[sfen] = 1;\n      this.repetitionStart[sfen] = this.current.number;\n    }\n  }\n\n  private decrementRepetition(): void {\n    const sfen = this.position.sfen;\n    this.repetitionCounts[sfen] -= 1;\n    if (this.repetitionCounts[sfen] === 0) {\n      delete this.repetitionCounts[sfen];\n      delete this.repetitionStart[sfen];\n    }\n  }\n\n  get repetition(): boolean {\n    return this.repetitionCounts[this.position.sfen] >= 4;\n  }\n\n  get perpetualCheck(): Color | null {\n    if (!this.repetition) {\n      return null;\n    }\n    const sfen = this.position.sfen;\n    const since = this.repetitionStart[sfen];\n    let black = true;\n    let white = true;\n    let color = this.position.color;\n    for (let p = this.current; p.number >= since; p = p.prev as Node) {\n      color = reverseColor(color);\n      if (p.isCheck) {\n        continue;\n      }\n      if (color === Color.BLACK) {\n        black = false;\n      } else {\n        white = false;\n      }\n    }\n    return black ? Color.BLACK : white ? Color.WHITE : null;\n  }\n\n  // USI プロトコルの position コマンドを返却します。\n  // USI プロトコルでは平手の場合に \"position startpos\" を使用することができるとされていますが、\n  // 一貫性を持たせるために \"position sfen\" のみを使用します。\n  get usi(): string {\n    let ret = \"position sfen \" + this.initialPosition.sfen + \" moves\";\n    this.movesBefore.forEach((node) => {\n      if (node.move instanceof Move) {\n        ret += \" \" + node.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get usiAll(): string {\n    let ret = this.usi;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      if (p.move instanceof Move) {\n        ret += \" \" + p.move.sfen;\n      }\n    }\n    return ret;\n  }\n\n  get sfen(): string {\n    return this.position.getSFEN(this._current.number + 1);\n  }\n\n  forEach(handler: (node: Node) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (node: NodeImpl) => void): void {\n    let p: NodeImpl | null = this._first;\n    const stack: NodeImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  static newByUSI(data: string): Record | Error {\n    const prefixPositionStartpos = \"position startpos \";\n    const prefixPositionSfen = \"position sfen \";\n    const prefixStartpos = \"startpos \";\n    const prefixSfen = \"sfen \";\n    const prefixMoves = \"moves \";\n    if (data.startsWith(prefixPositionStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixPositionStartpos.length)\n      );\n    } else if (data.startsWith(prefixPositionSfen)) {\n      return Record.newByUSIFromSFENPosition(\n        data.slice(prefixPositionSfen.length)\n      );\n    } else if (data.startsWith(prefixStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixStartpos.length)\n      );\n    } else if (data.startsWith(prefixSfen)) {\n      return Record.newByUSIFromSFENPosition(data.slice(prefixSfen.length));\n    } else if (data.startsWith(prefixMoves)) {\n      return Record.newByUSIFromMoves(new Position(), data);\n    } else {\n      return new Error(\"不正なUSI(1): \" + data);\n    }\n  }\n\n  private static newByUSIFromSFENPosition(data: string): Record | Error {\n    const sections = data.split(\" \");\n    if (sections.length < 4) {\n      return new Error(\"不正なUSI(2): \" + data);\n    }\n    const position = Position.newBySFEN(sections.slice(0, 4).join(\" \"));\n    if (!position) {\n      return new Error(\"不正なUSI(3): \" + data);\n    }\n    return Record.newByUSIFromMoves(position, sections.slice(4).join(\" \"));\n  }\n\n  private static newByUSIFromMoves(\n    position: ImmutablePosition,\n    data: string\n  ): Record | Error {\n    const record = new Record(position);\n    if (data.length === 0) {\n      return record;\n    }\n    const sections = data.split(\" \");\n    if (sections[0] !== \"moves\") {\n      return new Error(\"不正なUSI(4): \" + data);\n    }\n    for (let i = 1; i < sections.length; i++) {\n      const parsed = parseSFENMove(sections[i]);\n      if (!parsed) {\n        break;\n      }\n      let move = record.position.createMove(parsed.from, parsed.to);\n      if (!move) {\n        return new Error(\"不正な指し手: \" + sections[i]);\n      }\n      if (parsed.promote) {\n        move = move.withPromote();\n      }\n      record.append(move, { ignoreValidation: true });\n    }\n    return record;\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","export function appendLine(base: string, newLines: string): string {\n  return base + (!base || base.endsWith(\"\\n\") ? \"\" : \"\\n\") + newLines;\n}\n\nexport function toString(data: unknown): string {\n  return data instanceof Object ? JSON.stringify(data) : String(data);\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { appendLine } from \"@/helpers/string\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  SpecialMove,\n} from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  PROGRAM_COMMENT,\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^#/,\n    type: LineType.PROGRAM_COMMENT,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手番/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手番/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line,\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(王|玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section || section === \"なし\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let preMoveComment = \"\";\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          record.first.comment = preMoveComment;\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        if (inMoveSection) {\n          record.current.comment = appendLine(\n            record.current.comment,\n            parsed.data\n          );\n        } else {\n          preMoveComment = appendLine(preMoveComment, parsed.data);\n        }\n        break;\n      case LineType.PROGRAM_COMMENT:\n        break;\n      case LineType.UNKNOWN:\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n    record.first.comment = preMoveComment;\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"先手番\" + returnCode;\n  } else {\n    ret += \"後手番\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: ImmutableRecord,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((node) => {\n    if (node.number !== 0) {\n      if (!node.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + node.number + \"手\" + returnCode;\n      }\n      ret += node.number + \" \";\n      if (node.move instanceof Move) {\n        ret += formatMove(node.move);\n      } else {\n        ret += specialMoveToString[node.move];\n      }\n      const elapsed = millisecondsToMSS(node.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(node.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (node.isFirstBranch && node.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (node.comment.length !== 0) {\n      ret += \"*\" + node.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","// CSA file format (.csa)\n// See http://www2.computer-shogi.org/protocol/record_v22.html\n\nimport { Record } from \".\";\nimport { InitialPositionType } from \"./board\";\nimport { Color } from \"./color\";\nimport { ImmutableHand } from \"./hand\";\nimport Move from \"./move\";\nimport { Piece, PieceType, promotedPieceType } from \"./piece\";\nimport Position, {\n  countNotExistingPieces,\n  ImmutablePosition,\n} from \"./position\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  RecordMetadata,\n  RecordMetadataKey,\n  SpecialMove,\n} from \"./record\";\nimport Square from \"./square\";\n\nenum LineType {\n  VERSION,\n  COMMENT,\n  BLACK_NAME,\n  WHITE_NAME,\n  METADATA,\n  POSITION,\n  RANK,\n  PIECES,\n  FIRST_TURN,\n  MOVE,\n  SPECIAL_MOVE,\n  ELAPSED,\n}\n\nenum SectionType {\n  HEADER,\n  MOVE,\n  NEUTRAL,\n}\n\nconst linePatterns = [\n  {\n    pattern: /^V/,\n    type: LineType.VERSION,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^'/,\n    type: LineType.COMMENT,\n    sectionType: SectionType.NEUTRAL,\n  },\n  {\n    pattern: /^N\\+(.+)$/,\n    type: LineType.BLACK_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^N-(.+)$/,\n    type: LineType.WHITE_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^\\$([^:]+):(.+)$/,\n    type: LineType.METADATA,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^PI([1-9]{2}[A-Z]{2})*$/,\n    type: LineType.POSITION,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[1-9]( \\* |[-+][A-Z][A-Z]){9}$/,\n    type: LineType.RANK,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[-+]([0-9]{2}[A-Z]{2})*/,\n    type: LineType.PIECES,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+]$/,\n    type: LineType.FIRST_TURN,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+][0-9]{4}[A-Z]{2}/,\n    type: LineType.MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^%[-+A-Z_]+/,\n    type: LineType.SPECIAL_MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^T([0-9]+)/,\n    type: LineType.ELAPSED,\n    sectionType: SectionType.MOVE,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  line: string;\n  args: string[];\n  sectionType: SectionType;\n};\n\nfunction parseLine(line: string): Line[] {\n  const results = [];\n  const lines = line.match(/^['N$]/) ? [line] : line.split(\",\");\n  for (const line of lines) {\n    for (let i = 0; i < linePatterns.length; i++) {\n      const result = linePatterns[i].pattern.exec(line);\n      if (result) {\n        results.push({\n          type: linePatterns[i].type,\n          line: line,\n          args: result.slice(1),\n          sectionType: linePatterns[i].sectionType,\n        });\n      }\n    }\n  }\n  return results;\n}\n\nconst csaNameToRecordMetadataKey: { [key: string]: RecordMetadataKey } = {\n  EVENT: RecordMetadataKey.TITLE,\n  SITE: RecordMetadataKey.PLACE,\n  START_TIME: RecordMetadataKey.START_DATETIME,\n  END_TIME: RecordMetadataKey.END_DATETIME,\n  TIME_LIMIT: RecordMetadataKey.TIME_LIMIT,\n  OPENING: RecordMetadataKey.STRATEGY,\n};\n\nconst csaNameToPieceType: { [name: string]: PieceType } = {\n  FU: PieceType.PAWN,\n  KY: PieceType.LANCE,\n  KE: PieceType.KNIGHT,\n  GI: PieceType.SILVER,\n  KI: PieceType.GOLD,\n  KA: PieceType.BISHOP,\n  HI: PieceType.ROOK,\n  OU: PieceType.KING,\n  TO: PieceType.PROM_PAWN,\n  NY: PieceType.PROM_LANCE,\n  NK: PieceType.PROM_KNIGHT,\n  NG: PieceType.PROM_SILVER,\n  UM: PieceType.HORSE,\n  RY: PieceType.DRAGON,\n};\n\nfunction parsePosition(line: string, position: Position): void {\n  position.reset(InitialPositionType.STANDARD);\n  for (let i = 2; i + 4 <= line.length; i += 4) {\n    const file = Number(line[i]);\n    const rank = Number(line[i + 1]);\n    position.board.remove(new Square(file, rank));\n  }\n}\n\nfunction parseRank(line: string, position: Position): Error | undefined {\n  const rank = Number(line[1]);\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const begin = x * 3 + 2;\n    const section = line.slice(begin, begin + 3);\n    if (section[0] === \" \") {\n      continue;\n    }\n    const color = section[0] === \"+\" ? Color.BLACK : Color.WHITE;\n    const pieceType = csaNameToPieceType[section.slice(1)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    position.board.set(new Square(file, rank), new Piece(color, pieceType));\n  }\n}\n\nfunction parsePieces(line: string, position: Position): Error | undefined {\n  const color = line[1] === \"+\" ? Color.BLACK : Color.WHITE;\n  for (let begin = 2; begin + 4 <= line.length; begin += 4) {\n    const section = line.slice(begin, begin + 4);\n    if (section === \"00AL\") {\n      const counts = countNotExistingPieces(position);\n      if (color === Color.BLACK) {\n        position.blackHand.forEach((pieceType) => {\n          position.blackHand.add(pieceType, counts[pieceType]);\n        });\n      } else {\n        position.whiteHand.forEach((pieceType) => {\n          position.whiteHand.add(pieceType, counts[pieceType]);\n        });\n      }\n      return;\n    }\n    const file = Number(section[0]);\n    const rank = Number(section[1]);\n    const pieceType = csaNameToPieceType[section.slice(2)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    if (file !== 0 && rank !== 0) {\n      position.board.set(new Square(file, rank), new Piece(color, pieceType));\n    } else if (color === Color.BLACK) {\n      position.blackHand.add(pieceType, 1);\n    } else {\n      position.whiteHand.add(pieceType, 1);\n    }\n  }\n}\n\nfunction parseMove(line: string, position: ImmutablePosition): Move | Error {\n  const color = line[0] === \"+\" ? Color.BLACK : Color.WHITE;\n  if (color != position.color) {\n    return new Error(\"不正な手番: \" + line);\n  }\n  const fromFile = Number(line[1]);\n  const fromRank = Number(line[2]);\n  const toFile = Number(line[3]);\n  const toRank = Number(line[4]);\n  const pieceType = csaNameToPieceType[line.slice(5, 7)];\n  if (!pieceType) {\n    return new Error(\"不正な駒の種類: \" + line);\n  }\n  const from =\n    fromFile === 0 && fromRank === 0\n      ? pieceType\n      : new Square(fromFile, fromRank);\n  const to = new Square(toFile, toRank);\n  let move = position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + line);\n  }\n  if (from instanceof Square) {\n    const basePiece = position.board.at(from);\n    if (!basePiece) {\n      return new Error(\"存在しない駒: \" + line);\n    }\n    if (basePiece.type !== pieceType) {\n      if (basePiece.promoted().type === pieceType) {\n        move = move.withPromote();\n      } else {\n        return new Error(\"存在しない駒: \" + line);\n      }\n    }\n  }\n  return move;\n}\n\nfunction parseSpecialMove(line: string): SpecialMove | undefined {\n  switch (line) {\n    case \"%TORYO\":\n      return SpecialMove.RESIGN;\n    case \"%CHUDAN\":\n      return SpecialMove.INTERRUPT;\n    case \"%SENNICHITE\":\n      return SpecialMove.REPETITION_DRAW;\n    case \"%TIME_UP\":\n      return SpecialMove.TIMEOUT;\n    case \"%ILLEGAL_MOVE\":\n      return SpecialMove.FOUL_LOSE;\n    case \"%JISHOGI\":\n      return SpecialMove.DRAW;\n    case \"%KACHI\":\n      return SpecialMove.ENTERING_OF_KING;\n    case \"%HIKIWAKE\":\n      return SpecialMove.DRAW;\n    case \"%TSUMI\":\n      return SpecialMove.MATE;\n  }\n}\n\nexport function importCSA(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const position = new Position();\n  position.reset(InitialPositionType.EMPTY);\n  let inMoveSection = false;\n  const lines = data.replace(/\\r?\\n\\//, \"\").split(/\\r?\\n/);\n  for (const line of lines) {\n    for (const parsed of parseLine(line)) {\n      if (\n        (parsed.sectionType === SectionType.HEADER && inMoveSection) ||\n        (parsed.sectionType === SectionType.MOVE && !inMoveSection)\n      ) {\n        return new Error(\"不正な行が検出されました: \" + parsed.line);\n      }\n      switch (parsed.type) {\n        case LineType.VERSION:\n          break;\n        case LineType.COMMENT:\n          break;\n        case LineType.BLACK_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.BLACK_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.WHITE_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.WHITE_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.METADATA: {\n          const key = csaNameToRecordMetadataKey[parsed.args[0]];\n          if (key) {\n            metadata.setStandardMetadata(key, parsed.args[1]);\n          } else {\n            metadata.setCustomMetadata(parsed.args[0], parsed.args[1]);\n          }\n          break;\n        }\n        case LineType.POSITION:\n          parsePosition(parsed.line, position);\n          break;\n        case LineType.RANK: {\n          const error = parseRank(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.PIECES: {\n          const error = parsePieces(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.FIRST_TURN:\n          if (parsed.line[0] === \"+\") {\n            position.setColor(Color.BLACK);\n          } else {\n            position.setColor(Color.WHITE);\n          }\n          record.clear(position);\n          inMoveSection = true;\n          break;\n        case LineType.MOVE: {\n          const moveOrError = parseMove(parsed.line, record.position);\n          if (moveOrError instanceof Error) {\n            return moveOrError;\n          }\n          record.append(moveOrError, { ignoreValidation: true });\n          break;\n        }\n        case LineType.SPECIAL_MOVE: {\n          const specialMove = parseSpecialMove(parsed.line);\n          if (specialMove) {\n            record.append(specialMove, { ignoreValidation: true });\n          }\n          break;\n        }\n        case LineType.ELAPSED:\n          record.current.setElapsedMs(Number(parsed.args[0]) * 1e3);\n          break;\n      }\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\ntype CSAExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  const blackName =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (blackName) {\n    ret += \"N+\" + blackName + returnCode;\n  }\n  const whiteName =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (whiteName) {\n    ret += \"N-\" + whiteName + returnCode;\n  }\n  const event =\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PUBLISHED_ON);\n  if (event) {\n    ret += \"$EVENT:\" + event + returnCode;\n  }\n  const site = metadata.getStandardMetadata(RecordMetadataKey.PLACE);\n  if (site) {\n    ret += \"$SITE:\" + site + returnCode;\n  }\n  const startTime =\n    metadata.getStandardMetadata(RecordMetadataKey.START_DATETIME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (startTime) {\n    // 年月日 YYYY/MM/DD (10文字) については KIF 形式と共通\n    ret += \"$START_TIME:\" + startTime.slice(10) + returnCode;\n  }\n  const endTime = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (endTime) {\n    ret += \"$END_TIME:\" + endTime.slice(10) + returnCode;\n  }\n  const opening = metadata.getStandardMetadata(RecordMetadataKey.STRATEGY);\n  if (opening) {\n    ret += \"$OPENING:\" + opening + returnCode;\n  }\n  // TODO: 持ち時間（CSA形式に合致する場合のみ）\n  return ret;\n}\n\nconst pieceTypeToString = {\n  king: \"OU\",\n  rook: \"HI\",\n  dragon: \"RY\",\n  bishop: \"KA\",\n  horse: \"UM\",\n  gold: \"KI\",\n  silver: \"GI\",\n  promSilver: \"NG\",\n  knight: \"KE\",\n  promKnight: \"NK\",\n  lance: \"KY\",\n  promLance: \"NY\",\n  pawn: \"FU\",\n  promPawn: \"TO\",\n};\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    for (let i = 0; i < n; i++) {\n      ret += \"00\" + pieceTypeToString[pieceType];\n    }\n  });\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (let rank = 1; rank <= 9; rank += 1) {\n    ret += \"P\" + rank;\n    for (let file = 9; file >= 1; file -= 1) {\n      const piece = position.board.at(new Square(file, rank));\n      if (!piece) {\n        ret += \" * \";\n      } else if (piece.color === Color.BLACK) {\n        ret += \"+\" + pieceTypeToString[piece.type];\n      } else {\n        ret += \"-\" + pieceTypeToString[piece.type];\n      }\n    }\n    ret += returnCode;\n  }\n  ret += \"P+\" + formatHand(position.blackHand) + returnCode;\n  ret += \"P-\" + formatHand(position.whiteHand) + returnCode;\n  ret += (position.color === Color.BLACK ? \"+\" : \"-\") + returnCode;\n  return ret;\n}\n\nfunction formatSquare(square: Square | PieceType): string {\n  return square instanceof Square ? `${square.file}${square.rank}` : \"00\";\n}\n\nfunction formatMove(move: Move): string {\n  return (\n    (move.color === Color.BLACK ? \"+\" : \"-\") +\n    formatSquare(move.from) +\n    formatSquare(move.to) +\n    pieceTypeToString[\n      move.promote ? promotedPieceType(move.pieceType) : move.pieceType\n    ]\n  );\n}\n\nfunction formatSpecialMove(move: SpecialMove): string | undefined {\n  switch (move) {\n    case SpecialMove.RESIGN:\n      return \"%TORYO\";\n    case SpecialMove.INTERRUPT:\n      return \"%CHUDAN\";\n    case SpecialMove.REPETITION_DRAW:\n      return \"%SENNICHITE\";\n    case SpecialMove.TIMEOUT:\n      return \"%TIME_UP\";\n    case SpecialMove.FOUL_LOSE:\n      return \"%ILLEGAL_MOVE\";\n    case SpecialMove.DRAW:\n      return \"%JISHOGI\";\n    case SpecialMove.ENTERING_OF_KING:\n      return \"%KACHI\";\n    case SpecialMove.MATE:\n      return \"%TSUMI\";\n  }\n}\n\nexport function exportCSA(\n  record: ImmutableRecord,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"' CSA形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += \"V2.2\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  record.moves.forEach((node) => {\n    if (node.number === 0) {\n      return;\n    }\n    let move: string | undefined;\n    if (node.move instanceof Move) {\n      move = formatMove(node.move);\n    } else {\n      move = formatSpecialMove(node.move);\n    }\n    if (move) {\n      ret += move + returnCode;\n      ret += \"T\" + Math.floor(node.elapsedMs / 1e3) + returnCode;\n    }\n  });\n  return ret;\n}\n","import { Position } from \".\";\n\nexport enum RecordFormatType {\n  USI,\n  SFEN,\n  KIF,\n  CSA,\n}\n\nexport function detectRecordFormat(data: string): RecordFormatType {\n  // USI\n  if (\n    data.startsWith(\"position sfen \") ||\n    data.startsWith(\"position startpos \") ||\n    data.startsWith(\"sfen \") ||\n    data.startsWith(\"startpos \") ||\n    data.startsWith(\"moves \")\n  ) {\n    return RecordFormatType.USI;\n  }\n\n  // SFEN\n  if (Position.isValidSFEN(data)) {\n    return RecordFormatType.SFEN;\n  }\n\n  // KIF vs CSA: 行頭の文字の出現頻度を比較する。\n  const pattKIF = /(^|\\n)[#0-9開終棋手戦表持秒記消場掲備先後作発出完分受]/g;\n  const pattCSA = /(^|,|\\n)[-+$%'VNPT]/g;\n  const matchedKIF = data.match(pattKIF);\n  const matchedCSA = data.match(pattCSA);\n  const evalKIF = matchedKIF ? matchedKIF.length : 0;\n  const evalCSA = matchedCSA ? matchedCSA.length : 0;\n  return evalKIF >= evalCSA ? RecordFormatType.KIF : RecordFormatType.CSA;\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","import {\n  handPieceTypes,\n  ImmutableHand,\n  PieceType,\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum PieceImageType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_DARK = \"hitomojiDark\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n  HITOMOJI_GOTHIC_DARK = \"hitomojiGothicDark\",\n}\n\nexport enum BoardImageType {\n  LIGHT = \"light\",\n  WARM = \"warm\",\n  RESIN = \"resin\",\n  DARK = \"dark\",\n}\n\nexport enum BoardLabelType {\n  NONE = \"none\",\n  STANDARD = \"standard\",\n}\n\ntype PieceImages = {\n  black: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n  white: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n};\n\nconst layoutTemplate = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#0088ff\", opacity: \"0.8\" },\n      lastMoveTo: { \"background-color\": \"#44cc44\", opacity: \"0.8\" },\n      lastMoveFrom: { \"background-color\": \"#44cc44\", opacity: \"0.4\" },\n    },\n  },\n  label: {\n    fontSize: 24,\n  },\n  piece: {\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst pieceImageMap: { [key: string]: PieceImages } = {\n  [PieceImageType.HITOMOJI]: {\n    black: {\n      pawn: \"./piece/hitomoji/black_pawn.png\",\n      lance: \"./piece/hitomoji/black_lance.png\",\n      knight: \"./piece/hitomoji/black_knight.png\",\n      silver: \"./piece/hitomoji/black_silver.png\",\n      gold: \"./piece/hitomoji/black_gold.png\",\n      bishop: \"./piece/hitomoji/black_bishop.png\",\n      rook: \"./piece/hitomoji/black_rook.png\",\n      king: \"./piece/hitomoji/black_king.png\",\n      king2: \"./piece/hitomoji/black_king2.png\",\n      promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n      horse: \"./piece/hitomoji/black_horse.png\",\n      dragon: \"./piece/hitomoji/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji/white_pawn.png\",\n      lance: \"./piece/hitomoji/white_lance.png\",\n      knight: \"./piece/hitomoji/white_knight.png\",\n      silver: \"./piece/hitomoji/white_silver.png\",\n      gold: \"./piece/hitomoji/white_gold.png\",\n      bishop: \"./piece/hitomoji/white_bishop.png\",\n      rook: \"./piece/hitomoji/white_rook.png\",\n      king: \"./piece/hitomoji/white_king.png\",\n      king2: \"./piece/hitomoji/white_king2.png\",\n      promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n      horse: \"./piece/hitomoji/white_horse.png\",\n      dragon: \"./piece/hitomoji/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_DARK]: {\n    black: {\n      pawn: \"./piece/hitomoji_dark/black_pawn.png\",\n      lance: \"./piece/hitomoji_dark/black_lance.png\",\n      knight: \"./piece/hitomoji_dark/black_knight.png\",\n      silver: \"./piece/hitomoji_dark/black_silver.png\",\n      gold: \"./piece/hitomoji_dark/black_gold.png\",\n      bishop: \"./piece/hitomoji_dark/black_bishop.png\",\n      rook: \"./piece/hitomoji_dark/black_rook.png\",\n      king: \"./piece/hitomoji_dark/black_king.png\",\n      king2: \"./piece/hitomoji_dark/black_king2.png\",\n      promPawn: \"./piece/hitomoji_dark/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_dark/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_dark/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_dark/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_dark/black_horse.png\",\n      dragon: \"./piece/hitomoji_dark/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_dark/white_pawn.png\",\n      lance: \"./piece/hitomoji_dark/white_lance.png\",\n      knight: \"./piece/hitomoji_dark/white_knight.png\",\n      silver: \"./piece/hitomoji_dark/white_silver.png\",\n      gold: \"./piece/hitomoji_dark/white_gold.png\",\n      bishop: \"./piece/hitomoji_dark/white_bishop.png\",\n      rook: \"./piece/hitomoji_dark/white_rook.png\",\n      king: \"./piece/hitomoji_dark/white_king.png\",\n      king2: \"./piece/hitomoji_dark/white_king2.png\",\n      promPawn: \"./piece/hitomoji_dark/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_dark/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_dark/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_dark/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_dark/white_horse.png\",\n      dragon: \"./piece/hitomoji_dark/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/black_rook.png\",\n      king: \"./piece/hitomoji_gothic/black_king.png\",\n      king2: \"./piece/hitomoji_gothic/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/white_rook.png\",\n      king: \"./piece/hitomoji_gothic/white_king.png\",\n      king2: \"./piece/hitomoji_gothic/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC_DARK]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic_dark/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic_dark/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic_dark/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic_dark/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic_dark/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic_dark/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic_dark/black_rook.png\",\n      king: \"./piece/hitomoji_gothic_dark/black_king.png\",\n      king2: \"./piece/hitomoji_gothic_dark/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic_dark/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic_dark/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic_dark/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic_dark/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic_dark/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic_dark/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic_dark/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic_dark/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic_dark/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic_dark/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic_dark/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic_dark/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic_dark/white_rook.png\",\n      king: \"./piece/hitomoji_gothic_dark/white_king.png\",\n      king2: \"./piece/hitomoji_gothic_dark/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic_dark/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic_dark/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic_dark/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic_dark/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic_dark/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic_dark/white_dragon.png\",\n    },\n  },\n};\n\nconst boardImageMap = {\n  [BoardImageType.LIGHT]: \"./board/light.png\",\n  [BoardImageType.WARM]: \"./board/warm.png\",\n  [BoardImageType.RESIN]: \"./board/resin.png\",\n  [BoardImageType.DARK]: \"./board/dark.png\",\n};\n\nconst handColorMap = {\n  [BoardImageType.LIGHT]: \"#8b4513\",\n  [BoardImageType.WARM]: \"#8b4513\",\n  [BoardImageType.RESIN]: \"#8b4513\",\n  [BoardImageType.DARK]: \"#333333\",\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n  size: RectSize;\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype LabelLayout = {\n  id: string;\n  character: string;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: PieceType;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  labels: LabelLayout[];\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nconst rankCharMap: { [n: number]: string } = {\n  1: \"一\",\n  2: \"二\",\n  3: \"三\",\n  4: \"四\",\n  5: \"五\",\n  6: \"六\",\n  7: \"七\",\n  8: \"八\",\n  9: \"九\",\n};\n\nexport default class LayoutBuilder {\n  private pieceImages: PieceImages;\n  private boardImage: string;\n  private handColor: string;\n  private boardLabelType: BoardLabelType;\n\n  constructor(\n    pieceImageType: PieceImageType,\n    boardImageType: BoardImageType,\n    boardLabelType: BoardLabelType\n  ) {\n    this.pieceImages =\n      pieceImageMap[pieceImageType] || pieceImageMap[PieceImageType.HITOMOJI];\n    this.boardImage = boardImageMap[boardImageType];\n    this.handColor = handColorMap[boardImageType];\n    this.boardLabelType = boardLabelType;\n  }\n\n  preload(): void {\n    preloadImage(this.boardImage);\n    Object.values(this.pieceImages.black).forEach(preloadImage);\n    Object.values(this.pieceImages.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / layoutTemplate.frame.width;\n    if (layoutTemplate.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / layoutTemplate.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      const height = layoutTemplate.frame.height * ratio;\n      const width = layoutTemplate.frame.width * ratio;\n      return {\n        style: {\n          height: height + \"px\",\n          width: width + \"px\",\n        },\n        size: new RectSize(width, height),\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.boardImage;\n      const x = layoutTemplate.board.x * ratio;\n      const y = layoutTemplate.board.y * ratio;\n      const width = layoutTemplate.board.width * ratio;\n      const height = layoutTemplate.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildLabelLayout = (boardLayout: BoardLayout): LabelLayout[] => {\n      const layouts: LabelLayout[] = [];\n      if (this.boardLabelType == BoardLabelType.NONE) {\n        return layouts;\n      }\n      const fontSize = layoutTemplate.label.fontSize * ratio;\n      const shadow = fontSize * 0.1;\n      const commonStyle = {\n        color: \"black\",\n        \"font-size\": fontSize + \"px\",\n        \"font-weight\": \"bold\",\n        \"text-shadow\": `${shadow}px ${shadow}px  ${shadow}px white`,\n      };\n      for (let rank = 1; rank <= 9; rank++) {\n        const x =\n          boardLayout.x -\n          fontSize * 0.5 +\n          (flip ? 0 : layoutTemplate.board.width) * ratio +\n          layoutTemplate.board.leftPiecePadding * 0.5 * ratio * (flip ? 1 : -1);\n        const y =\n          boardLayout.y -\n          fontSize * 0.5 +\n          (layoutTemplate.board.topSquarePadding +\n            ((flip ? 10 - rank : rank) - 0.5) *\n              layoutTemplate.board.squreHeight) *\n            ratio;\n        layouts.push({\n          id: \"rank\" + rank,\n          character: rankCharMap[rank],\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            ...commonStyle,\n          },\n        });\n      }\n      for (let file = 1; file <= 9; file++) {\n        const x =\n          boardLayout.x -\n          fontSize * 0.5 +\n          (layoutTemplate.board.leftPiecePadding +\n            (9.5 - (flip ? 10 - file : file)) *\n              layoutTemplate.board.squreWidth) *\n            ratio;\n        const y =\n          boardLayout.y -\n          fontSize * 0.5 +\n          (flip ? layoutTemplate.board.height : 0) * ratio +\n          layoutTemplate.board.topSquarePadding * 0.5 * ratio * (flip ? -1 : 1);\n        layouts.push({\n          id: \"file\" + file,\n          character: String(file),\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            ...commonStyle,\n          },\n        });\n      }\n      return layouts;\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.pieceImages[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftPiecePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topPiecePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.piece.width * ratio;\n        const height = layoutTemplate.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftSquarePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topSquarePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.board.squreWidth * ratio;\n        const height = layoutTemplate.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveTo,\n          };\n        }\n        if (\n          lastMove &&\n          lastMove.from instanceof Square &&\n          square.equals(lastMove.from)\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveFrom,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = layoutTemplate.hand[displayColor].x * ratio;\n      const standY = layoutTemplate.hand[displayColor].y * ratio;\n      const standWidth = layoutTemplate.hand.width * ratio;\n      const standHeight = layoutTemplate.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": this.handColor,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (layoutTemplate.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (layoutTemplate.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = layoutTemplate.piece.width * ratio;\n        const pieceHeight = layoutTemplate.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.pieceImages[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.pieceImages[color][promoted.type];\n      const notPromoteImagePath = this.pieceImages[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (layoutTemplate.board.leftSquarePadding +\n          layoutTemplate.board.squreWidth *\n            (square.x === 0 ? 0 : square.x === 8 ? 7 : square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (layoutTemplate.board.topSquarePadding +\n          layoutTemplate.board.squreHeight * square.y) *\n          ratio;\n      const width = layoutTemplate.board.squreWidth * 2 * ratio;\n      const height = layoutTemplate.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left:\n            layoutTemplate.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: layoutTemplate.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: layoutTemplate.turn.width * ratio - borderWidth + \"px\",\n          height: layoutTemplate.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": layoutTemplate.turn.fontSize * ratio + \"px\",\n          \"border-radius\": layoutTemplate.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.playerName[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.playerName[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.playerName.width * ratio + \"px\",\n          height: layoutTemplate.playerName.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.clock[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.clock[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.clock.width * ratio + \"px\",\n          height: layoutTemplate.clock.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: layoutTemplate.control.left.x * ratio + \"px\",\n            top: layoutTemplate.control.left.y * ratio + \"px\",\n            width: layoutTemplate.control.left.width * ratio + \"px\",\n            height: layoutTemplate.control.left.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: layoutTemplate.control.right.x * ratio + \"px\",\n            top: layoutTemplate.control.right.y * ratio + \"px\",\n            width: layoutTemplate.control.right.width * ratio + \"px\",\n            height: layoutTemplate.control.right.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const labelLayout = buildLabelLayout(boardLayout);\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      labels: labelLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","\nimport {\n  PieceType,\n  Square,\n  Piece,\n  Color,\n  Move,\n  ImmutablePosition,\n} from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardImageType,\n  BoardLabelType,\n  PieceImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"BoardView\",\n  props: {\n    pieceImageType: {\n      type: String as PropType<PieceImageType>,\n      required: true,\n    },\n    boardImageType: {\n      type: String as PropType<BoardImageType>,\n      required: true,\n    },\n    boardLabelType: {\n      type: String as PropType<BoardLabelType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Object as PropType<Move | null>,\n      required: false,\n      default: null,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n      default: \"先手\",\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n      default: \"後手\",\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n  },\n  emits: [\"resize\", \"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(\n        props.pieceImageType,\n        props.boardImageType,\n        props.boardLabelType\n      );\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() => {\n      const margin = new RectSize(20, 20);\n      const layout = layoutBuilder.value.build(\n        props.maxSize.reduce(margin),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      );\n      context.emit(\"resize\", layout.frame.size.add(margin));\n      return layout;\n    });\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n      Color,\n    };\n  },\n});\n","import { render } from \"./BoardView.vue?vue&type=template&id=7b1939f2&scoped=true&ts=true\"\nimport script from \"./BoardView.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardView.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=7b1939f2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7b1939f2\"]])\n\nexport default __exports__","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { issueEngineURI } from \"@/uri\";\n\n// reserved option names\nexport const USIPonder = \"USI_Ponder\";\nexport const USIHash = \"USI_Hash\";\nexport const USIMultiPV = \"USI_MultiPV\";\n\n// well-known option names\nexport const Threads = \"Threads\";\nexport const NumberOfThreads = \"NumberOfThreads\";\nexport const MultiPV = \"MultiPV\";\n\nexport type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption | null | undefined\n): string | number | undefined {\n  if (!option) {\n    return;\n  }\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function duplicateEngineSetting(\n  src: USIEngineSetting\n): USIEngineSetting {\n  const engine: USIEngineSetting = JSON.parse(JSON.stringify(src));\n  engine.uri = issueEngineURI();\n  engine.name += \" のコピー\";\n  return engine;\n}\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      if (a.name !== b.name) {\n        return a.name > b.name ? 1 : -1;\n      }\n      if (a.defaultName !== b.defaultName) {\n        return a.defaultName > b.defaultName ? 1 : -1;\n      }\n      return a.uri > b.uri ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","import { USIEngineSetting } from \"./usi\";\n\ntype StartCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype EndCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype PerMoveCriteria = {\n  maxSeconds: number;\n};\n\nexport enum CommentBehavior {\n  NONE = \"none\",\n  INSERT = \"insert\",\n  APPEND = \"append\",\n  OVERWRITE = \"overwrite\",\n}\n\nexport type AnalysisSetting = {\n  usi?: USIEngineSetting;\n  startCriteria: StartCriteria;\n  endCriteria: EndCriteria;\n  perMoveCriteria: PerMoveCriteria;\n  commentBehavior: CommentBehavior;\n};\n\nexport function defaultAnalysisSetting(): AnalysisSetting {\n  return {\n    startCriteria: {\n      enableNumber: false,\n      number: 20,\n    },\n    endCriteria: {\n      enableNumber: false,\n      number: 100,\n    },\n    perMoveCriteria: {\n      maxSeconds: 5,\n    },\n    commentBehavior: CommentBehavior.INSERT,\n  };\n}\n","import {\n  PieceImageType,\n  BoardImageType,\n  BoardLabelType,\n} from \"@/components/primitive/BoardLayout\";\n\nexport enum Thema {\n  STANDARD = \"standard\",\n  CHERRY_BLOSSOM = \"cherry-blossom\",\n  DARK = \"dark\",\n}\n\nexport enum Tab {\n  RECORD_INFO = \"recordInfo\",\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  PV = \"pv\",\n  CHART = \"chart\",\n  PERCENTAGE_CHART = \"percentageChart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  thema: Thema;\n  pieceImage: PieceImageType;\n  boardImage: BoardImageType;\n  boardLabelType: BoardLabelType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  tab: Tab;\n  returnCode: string;\n  coefficientInSigmoid: number;\n  badMoveLevelThreshold1: number;\n  badMoveLevelThreshold2: number;\n  badMoveLevelThreshold3: number;\n  badMoveLevelThreshold4: number;\n  showElapsedTimeInRecordView: boolean;\n  showCommentInRecordView: boolean;\n  enableAppLog: boolean;\n  enableUSILog: boolean;\n};\n\nexport type AppSettingUpdate = {\n  thema?: Thema;\n  pieceImage?: PieceImageType;\n  boardImage?: BoardImageType;\n  boardLabelType?: BoardLabelType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  tab?: Tab;\n  returnCode?: string;\n  coefficientInSigmoid?: number;\n  badMoveLevelThreshold1?: number;\n  badMoveLevelThreshold2?: number;\n  badMoveLevelThreshold3?: number;\n  badMoveLevelThreshold4?: number;\n  showElapsedTimeInRecordView?: boolean;\n  showCommentInRecordView?: boolean;\n  enableAppLog?: boolean;\n  enableUSILog?: boolean;\n};\n\nexport function defaultAppSetting(returnCode?: string): AppSetting {\n  return {\n    thema: Thema.STANDARD,\n    pieceImage: PieceImageType.HITOMOJI,\n    boardImage: BoardImageType.LIGHT,\n    boardLabelType: BoardLabelType.STANDARD,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    tab: Tab.RECORD_INFO,\n    returnCode: returnCode || \"\\r\\n\",\n    coefficientInSigmoid: 600,\n    badMoveLevelThreshold1: 5,\n    badMoveLevelThreshold2: 10,\n    badMoveLevelThreshold3: 20,\n    badMoveLevelThreshold4: 50,\n    showElapsedTimeInRecordView: true,\n    showCommentInRecordView: true,\n    enableAppLog: false,\n    enableUSILog: false,\n  };\n}\n\nexport function validateAppSetting(setting: AppSetting): Error | undefined {\n  if (setting.pieceVolume < 0 || setting.pieceVolume > 100) {\n    return new Error(\"駒音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockVolume < 0 || setting.clockVolume > 100) {\n    return new Error(\"時計音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockPitch < 220 || setting.clockPitch > 880) {\n    return new Error(\"時計音の高さには220Hz～880Hzの値を指定してください。\");\n  }\n  if (setting.coefficientInSigmoid <= 0) {\n    return new Error(\"勝率換算係数には0より大きい値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold1 < 1 ||\n    setting.badMoveLevelThreshold1 > 100\n  ) {\n    return new Error(\"緩手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold2 < 1 ||\n    setting.badMoveLevelThreshold2 > 100\n  ) {\n    return new Error(\"疑問手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold3 < 1 ||\n    setting.badMoveLevelThreshold3 > 100\n  ) {\n    return new Error(\"悪手には1%～100%の閾値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold4 < 1 ||\n    setting.badMoveLevelThreshold4 > 100\n  ) {\n    return new Error(\"大悪手には1%～100%の値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold1 >= setting.badMoveLevelThreshold2) {\n    return new Error(\"緩手には疑問手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold2 >= setting.badMoveLevelThreshold3) {\n    return new Error(\"疑問手には悪手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold3 >= setting.badMoveLevelThreshold4) {\n    return new Error(\"悪手には大悪手より小さい値を指定してください。\");\n  }\n}\n","export enum LogLevel {\n  INFO = \"info\",\n  WARN = \"warn\",\n  ERROR = \"error\",\n}\n","import { defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { LogLevel } from \"./log\";\nimport { Bridge } from \"./api\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  ANALYSIS_SETTING = \"analysisSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: Bridge = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Uint8Array> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadAnalysisSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.ANALYSIS_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAnalysisSetting());\n    }\n    return JSON.stringify({\n      ...defaultAnalysisSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAnalysisSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.ANALYSIS_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  async usiLaunch(): Promise<number> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async usiGo(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGoPonder(): Promise<void> {\n    // Do Nothing\n  },\n  async usiPonderHit(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGoInfinite(): Promise<void> {\n    // Do Nothing\n  },\n  async usiStop(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGameover(): Promise<void> {\n    // Do Nothing\n  },\n  async usiQuit(): Promise<void> {\n    // Do Nothing\n  },\n  log(level: LogLevel, message: string): void {\n    switch (level) {\n      case LogLevel.INFO:\n        console.log(message);\n        break;\n      case LogLevel.WARN:\n        console.warn(message);\n        break;\n      case LogLevel.ERROR:\n        console.error(message);\n        break;\n    }\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n  onUSIPonderInfo(): void {\n    // Do Nothing\n  },\n};\n","import { InitialPositionType } from \"@/shogi\";\nimport { USIEngineSetting } from \"./usi\";\nimport * as uri from \"@/uri\";\n\nexport type PlayerSetting = {\n  name: string;\n  uri: string;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとフィッシャールールは併用できません。\");\n  }\n  return;\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","import { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { GameSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { MenuEvent } from \"@/ipc/menu\";\nimport { USIInfoSender } from \"@/store/usi\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { AppState } from \"@/store/state\";\nimport { GameResult } from \"@/players/player\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { LogLevel } from \"./log\";\n\nexport interface Bridge {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(appState: AppState, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Uint8Array>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Uint8Array): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadAnalysisSetting(): Promise<string>;\n  saveAnalysisSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  usiLaunch(json: string): Promise<number>;\n  usiGo(\n    sessionID: number,\n    usi: string,\n    json: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    json: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiPonderHit(sessionID: number): Promise<void>;\n  usiGoInfinite(sessionID: number, usi: string): Promise<void>;\n  usiStop(sessionID: number): Promise<void>;\n  usiGameover(sessionID: number, result: GameResult): Promise<void>;\n  usiQuit(sessionID: number): Promise<void>;\n  log(level: LogLevel, message: string): void;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sfen: string,\n      ponder?: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n  onUSIPonderInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n}\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(appState: AppState, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Uint8Array>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Uint8Array): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<AppSetting>;\n  saveAppSetting(setting: AppSetting): Promise<void>;\n  loadResearchSetting(): Promise<ResearchSetting>;\n  saveResearchSetting(setting: ResearchSetting): Promise<void>;\n  loadAnalysisSetting(): Promise<AnalysisSetting>;\n  saveAnalysisSetting(setting: AnalysisSetting): Promise<void>;\n  loadGameSetting(): Promise<GameSetting>;\n  saveGameSetting(setting: GameSetting): Promise<void>;\n  loadUSIEngineSetting(): Promise<USIEngineSettings>;\n  saveUSIEngineSetting(setting: USIEngineSettings): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<USIEngineSetting>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  usiLaunch(setting: USIEngineSetting): Promise<number>;\n  usiGo(\n    sessionID: number,\n    usi: string,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiPonderHit(sessionID: number): Promise<void>;\n  usiGoInfinite(sessionID: number, usi: string): Promise<void>;\n  usiStop(sessionID: number): Promise<void>;\n  usiGameover(sessionID: number, result: GameResult): Promise<void>;\n  usiQuit(sessionID: number): Promise<void>;\n  log(level: LogLevel, message: string): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI: Bridge;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport const bridge: Bridge = getWindowObject().electronShogiAPI || webAPI;\n\nconst api: API = {\n  ...bridge,\n  async loadAppSetting(): Promise<AppSetting> {\n    return JSON.parse(await bridge.loadAppSetting());\n  },\n  saveAppSetting(setting: AppSetting): Promise<void> {\n    return bridge.saveAppSetting(JSON.stringify(setting));\n  },\n  async loadResearchSetting(): Promise<ResearchSetting> {\n    return JSON.parse(await bridge.loadResearchSetting());\n  },\n  saveResearchSetting(setting: ResearchSetting): Promise<void> {\n    return bridge.saveResearchSetting(JSON.stringify(setting));\n  },\n  async loadAnalysisSetting(): Promise<AnalysisSetting> {\n    return JSON.parse(await bridge.loadAnalysisSetting());\n  },\n  saveAnalysisSetting(setting: AnalysisSetting): Promise<void> {\n    return bridge.saveAnalysisSetting(JSON.stringify(setting));\n  },\n  async loadGameSetting(): Promise<GameSetting> {\n    return JSON.parse(await bridge.loadGameSetting());\n  },\n  saveGameSetting(setting: GameSetting): Promise<void> {\n    return bridge.saveGameSetting(JSON.stringify(setting));\n  },\n  async loadUSIEngineSetting(): Promise<USIEngineSettings> {\n    return new USIEngineSettings(await bridge.loadUSIEngineSetting());\n  },\n  saveUSIEngineSetting(settings: USIEngineSettings): Promise<void> {\n    return bridge.saveUSIEngineSetting(settings.json);\n  },\n  async getUSIEngineInfo(path: string): Promise<USIEngineSetting> {\n    return JSON.parse(await bridge.getUSIEngineInfo(path));\n  },\n  usiLaunch(setting: USIEngineSetting): Promise<number> {\n    return bridge.usiLaunch(JSON.stringify(setting));\n  },\n  usiGo(\n    sessionID: number,\n    usi: string,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    return bridge.usiGo(\n      sessionID,\n      usi,\n      JSON.stringify(gameSetting),\n      blackTimeMs,\n      whiteTimeMs\n    );\n  },\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    return bridge.usiGoPonder(\n      sessionID,\n      usi,\n      JSON.stringify(gameSetting),\n      blackTimeMs,\n      whiteTimeMs\n    );\n  },\n};\n\nexport default api;\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","import { ImmutablePosition, Move, Position } from \"@/shogi\";\n\nexport enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"先手\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"後手\";\n    case USIInfoSender.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n\nexport type USIIteration = {\n  position: string;\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n  public ponderMove?: string;\n\n  constructor(\n    public sessionID: number,\n    public name: string,\n    public sfen: string\n  ) {\n    this.iterates = [];\n  }\n\n  get latestIteration(): USIIteration[] {\n    const result: USIIteration[] = [];\n    const multiPVSet = new Set();\n    const moveSet = new Set();\n    for (const iterate of this.iterates) {\n      const move = iterate.pv ? iterate.pv[0] : undefined;\n      if (!multiPVSet.has(iterate.multiPV) && !moveSet.has(move)) {\n        result.push(iterate);\n        multiPVSet.add(iterate.multiPV);\n        moveSet.add(move);\n      }\n    }\n    return result.sort((a, b) => {\n      return (a.multiPV || 1) - (b.multiPV || 1);\n    });\n  }\n\n  update(sfen: string, update: InfoCommand, ponderMove?: Move): void {\n    const position = Position.newBySFEN(sfen);\n    const iterate: USIIteration = {\n      position: sfen,\n    };\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = position ? formatPV(position, update.pv) : \"\";\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position && position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      // USI プロトコルにおいて nodes は読み筋と関係なく定期的に送る事ができるとされている。\n      // ただ、多くのエンジンが読み筋と一緒に送ってくるため読み筋等がある場合にはそちらにも記録する。\n      if (update.nodes !== undefined) {\n        iterate.nodes = update.nodes;\n      }\n      this.iterates.unshift(iterate);\n    }\n    this.ponderMove = ponderMove?.getDisplayText();\n  }\n}\n\ntype USIUpdate = {\n  sessionID: number;\n  sfen: string;\n  sender: USIInfoSender;\n  name: string;\n  info: InfoCommand;\n  ponderMove?: Move;\n};\n\nexport class USIMonitor {\n  private _blackPlayer?: USIPlayerMonitor;\n  private _whitePlayer?: USIPlayerMonitor;\n  private _researcher?: USIPlayerMonitor;\n  private updateQueue: USIUpdate[];\n  private timeoutHandle?: number;\n\n  constructor() {\n    this.updateQueue = [];\n  }\n\n  get blackPlayer(): USIPlayerMonitor | undefined {\n    return this._blackPlayer;\n  }\n\n  get whitePlayer(): USIPlayerMonitor | undefined {\n    return this._whitePlayer;\n  }\n\n  get researcher(): USIPlayerMonitor | undefined {\n    return this._researcher;\n  }\n\n  update(\n    sessionID: number,\n    position: ImmutablePosition,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand,\n    ponderMove?: Move\n  ): void {\n    this.updateQueue.push({\n      sessionID,\n      sfen: position.sfen,\n      sender,\n      name,\n      info,\n      ponderMove,\n    });\n    if (!this.timeoutHandle) {\n      this.timeoutHandle = window.setTimeout(() => {\n        this.dequeue();\n      }, 100);\n    }\n  }\n\n  private dequeue() {\n    for (const update of this.updateQueue) {\n      this._update(update);\n    }\n    this.updateQueue = [];\n    this.timeoutHandle = undefined;\n  }\n\n  private _update(update: USIUpdate) {\n    switch (update.sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        if (\n          !this._blackPlayer ||\n          this._blackPlayer.sessionID !== update.sessionID ||\n          this._blackPlayer.sfen !== update.sfen\n        ) {\n          this._blackPlayer = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._blackPlayer.update(update.sfen, update.info, update.ponderMove);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        if (\n          !this._whitePlayer ||\n          this._whitePlayer.sessionID !== update.sessionID ||\n          this._whitePlayer.sfen !== update.sfen\n        ) {\n          this._whitePlayer = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._whitePlayer.update(update.sfen, update.info, update.ponderMove);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.RESEARCHER:\n        if (\n          !this._researcher ||\n          this._researcher.sessionID !== update.sessionID ||\n          this._researcher.sfen !== update.sfen\n        ) {\n          this._researcher = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._researcher.update(update.sfen, update.info);\n        this._blackPlayer = undefined;\n        this._whitePlayer = undefined;\n        break;\n    }\n  }\n}\n","import { GameSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\n\nexport enum GameResult {\n  WIN = \"win\",\n  LOSE = \"lose\",\n  DRAW = \"draw\",\n}\n\nexport interface SearchHandler {\n  onMove: (move: Move) => void;\n  onResign: () => void;\n  onWin: () => void;\n  onError: (e: unknown) => void;\n}\n\nexport interface Player {\n  isEngine(): boolean;\n  startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void>;\n  startPonder(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stop(): Promise<void>;\n  gameover(result: GameResult): Promise<void>;\n  close(): Promise<void>;\n}\n","import { secondsToMSS } from \"@/helpers/time\";\nimport { TimeLimitSetting } from \"@/settings/game\";\nimport { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/store/usi\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MATE_SCORE = 30000;\n\nexport class RecordCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  updateScore(color: Color, sender: USIInfoSender, score: number): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] =\n          color === Color.BLACK ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.multipv !== undefined && command.multipv !== 1) {\n      return;\n    }\n    if (command.scoreCP) {\n      this.updateScore(color, sender, command.scoreCP);\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MATE_SCORE : -MATE_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n\nexport function formatTimeLimitCSA(setting: TimeLimitSetting): string {\n  return (\n    secondsToMSS(setting.timeSeconds) +\n    \"+\" +\n    String(setting.byoyomi).padStart(2, \"0\")\n  );\n}\n","import { GameSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\nimport { Player, SearchHandler } from \"./player\";\n\nexport class HumanPlayer implements Player {\n  private searchHandler?: SearchHandler;\n\n  isEngine(): boolean {\n    return false;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n  }\n\n  async startPonder(): Promise<void> {\n    // do nothing\n  }\n\n  async stop(): Promise<void> {\n    // do nothing\n  }\n\n  async gameover(): Promise<void> {\n    // do nothing\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n  }\n\n  doMove(move: Move) {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onMove(move);\n    }\n  }\n\n  resign() {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onResign();\n    }\n  }\n}\n\nexport const humanPlayer = new HumanPlayer();\n","import api from \"@/ipc/api\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  USIEngineSetting,\n  USIPonder,\n} from \"@/settings/usi\";\nimport { ImmutableRecord, Position } from \"@/shogi\";\nimport { GameResult, Player, SearchHandler } from \"./player\";\n\nexport class USIPlayer implements Player {\n  private setting: USIEngineSetting;\n  private sessionID: number;\n  private usi?: string;\n  private position?: Position;\n  private searchHandler?: SearchHandler;\n  private ponder?: string;\n  private inPonder: boolean;\n\n  constructor(setting: USIEngineSetting) {\n    this.setting = setting;\n    this.sessionID = 0;\n    this.inPonder = false;\n  }\n\n  async launch(): Promise<void> {\n    this.sessionID = await api.usiLaunch(this.setting);\n    usiPlayers[this.sessionID] = this;\n  }\n\n  isEngine(): boolean {\n    return true;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n    this.usi = record.usi;\n    this.position = record.position.clone();\n    if (this.inPonder && this.ponder === this.usi) {\n      api.usiPonderHit(this.sessionID);\n    } else {\n      await api.usiGo(\n        this.sessionID,\n        this.usi,\n        gameSetting,\n        blackTimeMs,\n        whiteTimeMs\n      );\n    }\n    this.inPonder = false;\n    this.ponder = undefined;\n  }\n\n  async startPonder(\n    record: ImmutableRecord,\n    gameSetting: GameSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    if (!this.ponder || !this.ponder.startsWith(record.usi)) {\n      return;\n    }\n    const ponderSetting = getUSIEngineOptionCurrentValue(\n      this.setting.options[USIPonder]\n    );\n    if (ponderSetting !== \"true\") {\n      return;\n    }\n    this.inPonder = true;\n    await api.usiGoPonder(\n      this.sessionID,\n      this.ponder,\n      gameSetting,\n      blackTimeMs,\n      whiteTimeMs\n    );\n  }\n\n  async startResearch(record: ImmutableRecord): Promise<void> {\n    this.searchHandler = undefined;\n    this.usi = record.usi;\n    await api.usiGoInfinite(this.sessionID, record.usi);\n  }\n\n  async stop(): Promise<void> {\n    await api.usiStop(this.sessionID);\n  }\n\n  async gameover(result: GameResult): Promise<void> {\n    await api.usiGameover(this.sessionID, result);\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n    await api.usiQuit(this.sessionID);\n    delete usiPlayers[this.sessionID];\n  }\n\n  onBestMove(usi: string, sfen: string, ponder?: string): void {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (!searchHandler || !this.position) {\n      return;\n    }\n    if (usi !== this.usi) {\n      return;\n    }\n    if (sfen === \"resign\") {\n      searchHandler.onResign();\n      return;\n    }\n    if (sfen === \"win\") {\n      searchHandler.onWin();\n      return;\n    }\n    const move = this.position.createMoveBySFEN(sfen);\n    if (!move) {\n      searchHandler.onError(\"エンジンから不明な指し手を受信しました:\" + sfen);\n      searchHandler.onResign();\n      return;\n    }\n    this.ponder = ponder && `${usi} ${sfen} ${ponder}`;\n    searchHandler.onMove(move);\n  }\n}\n\nexport const usiPlayers: { [sessionID: number]: USIPlayer } = {};\n\nexport function usiBestMove(\n  sessionID: number,\n  usi: string,\n  sfen: string,\n  ponder?: string\n) {\n  const player = usiPlayers[sessionID];\n  if (!player) {\n    return;\n  }\n  player.onBestMove(usi, sfen, ponder);\n}\n","import { LogLevel } from \"@/ipc/log\";\nimport api from \"@/ipc/api\";\nimport { GameResult, Player } from \"@/players/player\";\nimport { humanPlayer } from \"@/players/human\";\nimport { USIPlayer } from \"@/players/usi\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n} from \"@/settings/game\";\nimport {\n  Color,\n  ImmutableRecord,\n  Move,\n  Record,\n  reverseColor,\n  SpecialMove,\n} from \"@/shogi\";\nimport * as uri from \"@/uri\";\n\nexport interface PlayerBuilder {\n  build(playerSetting: PlayerSetting): Promise<Player>;\n}\n\nexport const defaultPlayerBuilder: PlayerBuilder = {\n  async build(playerSetting: PlayerSetting): Promise<Player> {\n    if (playerSetting.uri === uri.ES_HUMAN) {\n      return humanPlayer;\n    } else if (uri.isUSIEngine(playerSetting.uri) && playerSetting.usi) {\n      const player = new USIPlayer(playerSetting.usi);\n      await player.launch();\n      return player;\n    }\n    throw new Error(\"予期せぬプレイヤーURIです: \" + playerSetting.uri);\n  },\n};\n\ntype PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\nexport interface GameHandlers {\n  onMove(move: Move): ImmutableRecord;\n  onEndGame(specialMove?: SpecialMove): void;\n  onBeepShort(): void;\n  onBeepUnlimited(): void;\n  onStopBeep(): void;\n  onError(e: unknown): void;\n}\n\nenum GameState {\n  IDLE = \"idle\",\n  ACTIVE = \"active\",\n  PENDING = \"pending\",\n  BUSSY = \"bussy\",\n}\n\nexport class GameManager {\n  private state: GameState;\n  private handlers: GameHandlers;\n  private playerBuilder: PlayerBuilder;\n  private blackState: PlayerState;\n  private whiteState: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private _setting: GameSetting;\n  private blackPlayer?: Player;\n  private whitePlayer?: Player;\n  private lastEventID: number;\n  private record: ImmutableRecord;\n\n  constructor(playerBuilder: PlayerBuilder, handlers: GameHandlers) {\n    this.state = GameState.IDLE;\n    this.handlers = handlers;\n    this.playerBuilder = playerBuilder;\n    this.blackState = { timeMs: 0, byoyomi: 0 };\n    this.whiteState = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this._setting = defaultGameSetting();\n    this.lastEventID = 0;\n    this.record = new Record();\n  }\n\n  get blackTimeMs(): number {\n    return this.blackState.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.blackState.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.whiteState.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.whiteState.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  async startGame(\n    setting: GameSetting,\n    record: ImmutableRecord\n  ): Promise<void> {\n    if (this.state !== GameState.IDLE) {\n      throw Error(\n        \"前回の対局が正常に終了できていません。アプリを再起動してください。\"\n      );\n    }\n    this.blackState.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.blackState.byoyomi = setting.timeLimit.byoyomi;\n    this.whiteState.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.whiteState.byoyomi = setting.timeLimit.byoyomi;\n    this._setting = setting;\n    this.record = record;\n    try {\n      this.blackPlayer = await this.playerBuilder.build(setting.black);\n      this.whitePlayer = await this.playerBuilder.build(setting.white);\n    } catch (e) {\n      try {\n        await this.closePlayers();\n      } catch (errorOnClose) {\n        this.handlers.onError(errorOnClose);\n      }\n      throw e;\n    }\n    this.state = GameState.ACTIVE;\n    setTimeout(() => this.next());\n  }\n\n  private next(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"予期せぬステータスです: GameManager.next(): \" + this.state\n      );\n      return;\n    }\n    const color = this.record.position.color;\n    this.startTimer(color);\n    const player = this.getPlayer(color);\n    const ponderPlayer = this.getPlayer(reverseColor(color));\n    if (!player || !ponderPlayer) {\n      this.handlers.onError(\n        \"致命的なエラーが発生しました: GameManager.next(): player is undefined\"\n      );\n      return;\n    }\n    const eventID = this.issueEventID();\n    player\n      .startSearch(\n        this.record,\n        this.setting,\n        this.blackTimeMs,\n        this.whiteTimeMs,\n        {\n          onMove: (move: Move) => this.onMove(eventID, move),\n          onResign: () => this.onResign(eventID),\n          onWin: () => this.onWin(eventID),\n          onError: (e) => this.handlers.onError(e),\n        }\n      )\n      .catch((e) => {\n        this.handlers.onError(\n          new Error(\"プレイヤーにコマンドを送信できませんでした: \" + e)\n        );\n      });\n    ponderPlayer\n      .startPonder(\n        this.record,\n        this.setting,\n        this.blackTimeMs,\n        this.whiteTimeMs\n      )\n      .catch((e) => {\n        this.handlers.onError(\n          new Error(\"プレイヤーにPonderコマンドを送信できませんでした: \" + e)\n        );\n      });\n  }\n\n  private onMove(eventID: number, move: Move): void {\n    if (eventID !== this.lastEventID) {\n      api.log(LogLevel.WARN, \"指し手を受信しましたが既にイベントは無効です。\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(\n        LogLevel.WARN,\n        \"指し手を受信しましたが既に対局中ではありません。\"\n      );\n      return;\n    }\n    if (!this.record.position.isValidMove(move)) {\n      this.handlers.onError(\"反則手: \" + move.getDisplayText());\n      this.endGame(SpecialMove.FOUL_LOSE);\n      return;\n    }\n    this.incrementTime(this.record.position.color);\n    this.record = this.handlers.onMove(move);\n    const faulColor = this.record.perpetualCheck;\n    if (faulColor) {\n      if (faulColor === this.record.position.color) {\n        this.endGame(SpecialMove.FOUL_LOSE);\n        return;\n      } else {\n        this.endGame(SpecialMove.FOUL_WIN);\n        return;\n      }\n    } else if (this.record.repetition) {\n      this.endGame(SpecialMove.REPETITION_DRAW);\n      return;\n    }\n    this.next();\n  }\n\n  private onResign(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      api.log(LogLevel.WARN, \"投了を受信しましたが既にイベントは無効です。\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(LogLevel.WARN, \"投了を受信しましたが既に対局中ではありません。\");\n      return;\n    }\n    this.endGame(SpecialMove.RESIGN);\n  }\n\n  private onWin(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      api.log(\n        LogLevel.WARN,\n        \"勝ち宣言を受信しましたが既にイベントは無効です。\"\n      );\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(\n        LogLevel.WARN,\n        \"勝ち宣言を受信しましたが既に対局中ではありません。\"\n      );\n      return;\n    }\n    this.endGame(SpecialMove.ENTERING_OF_KING);\n  }\n\n  private onTimeout(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"予期せぬステータスです: GameManager.onTimeout(): \" + this.state\n      );\n      return;\n    }\n    this.endGame(SpecialMove.TIMEOUT);\n  }\n\n  private startTimer(color: Color): void {\n    this.stopTimer();\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.setting.timeLimit.byoyomi;\n    this._elapsedMs = 0;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.setting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        this.timeout(color);\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          this.handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          this.handlers.onBeepShort();\n        }\n      } else if (!this.setting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          this.handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          this.handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  private timeout(color: Color): void {\n    this.stopTimer();\n    const player = this.getPlayer(color);\n    if (player && player.isEngine() && !this.setting.enableEngineTimeout) {\n      player.stop().catch((e) => {\n        this.handlers.onError(\n          new Error(\"プレイヤーにコマンドを送信できませんでした: \" + e)\n        );\n      });\n      return;\n    }\n    this.onTimeout();\n  }\n\n  endGame(specialMove?: SpecialMove): void {\n    if (this.state !== GameState.ACTIVE && this.state !== GameState.PENDING) {\n      return;\n    }\n    this.state = GameState.BUSSY;\n    this.stopTimer();\n    this.endGameAsync(specialMove)\n      .then(() => {\n        this.state = GameState.IDLE;\n      })\n      .catch((e) => {\n        this.handlers.onError(e);\n        this.state = GameState.PENDING;\n      });\n  }\n\n  private async endGameAsync(specialMove?: SpecialMove): Promise<void> {\n    if (specialMove) {\n      const color = this.record.position.color;\n      await this.sendGameResults(color, specialMove);\n    }\n    await this.closePlayers();\n    this.handlers.onEndGame(specialMove);\n  }\n\n  private async sendGameResults(\n    color: Color,\n    specialMove: SpecialMove\n  ): Promise<void> {\n    if (this.blackPlayer) {\n      const gameResult = this.getGameResult(color, Color.BLACK, specialMove);\n      if (gameResult) {\n        await this.blackPlayer.gameover(gameResult);\n      }\n    }\n    if (this.whitePlayer) {\n      const gameResult = this.getGameResult(color, Color.WHITE, specialMove);\n      if (gameResult) {\n        await this.whitePlayer.gameover(gameResult);\n      }\n    }\n  }\n\n  private getGameResult(\n    currentColor: Color,\n    playerColor: Color,\n    specialMove: SpecialMove\n  ): GameResult | null {\n    switch (specialMove) {\n      case SpecialMove.FOUL_WIN:\n      case SpecialMove.ENTERING_OF_KING:\n        return currentColor == playerColor ? GameResult.WIN : GameResult.LOSE;\n      case SpecialMove.RESIGN:\n      case SpecialMove.MATE:\n      case SpecialMove.TIMEOUT:\n      case SpecialMove.FOUL_LOSE:\n        return currentColor == playerColor ? GameResult.LOSE : GameResult.WIN;\n      case SpecialMove.DRAW:\n      case SpecialMove.REPETITION_DRAW:\n        return GameResult.DRAW;\n    }\n    return null;\n  }\n\n  private stopTimer(): void {\n    this.handlers.onStopBeep();\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n  }\n\n  private incrementTime(color: Color): void {\n    this.getPlayerState(color).timeMs += this.setting.timeLimit.increment * 1e3;\n  }\n\n  private async closePlayers(): Promise<void> {\n    if (this.blackPlayer) {\n      await this.blackPlayer.close();\n      this.blackPlayer = undefined;\n    }\n    if (this.whitePlayer) {\n      await this.whitePlayer.close();\n      this.whitePlayer = undefined;\n    }\n  }\n\n  private getPlayer(color: Color): Player | undefined {\n    switch (color) {\n      case Color.BLACK:\n        return this.blackPlayer;\n      case Color.WHITE:\n        return this.whitePlayer;\n    }\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.blackState;\n      case Color.WHITE:\n        return this.whiteState;\n    }\n  }\n\n  private issueEventID(): number {\n    this.lastEventID += 1;\n    return this.lastEventID;\n  }\n}\n","import { RecordMetadata, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(metadata: RecordMetadata): string {\n  let ret = getDateString(metadata);\n  const title =\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NO) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PLACE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.POSTED_ON) ||\n    metadata.getStandardMetadata(RecordMetadataKey.AUTHOR);\n  if (title) {\n    ret += \"_\" + title;\n  }\n  const black =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (black) {\n    ret += \"_\" + black;\n  }\n  const white =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (white) {\n    ret += \"_\" + white;\n  }\n  return ret + \".kif\";\n}\n\nfunction getDateString(metadata: RecordMetadata): string {\n  const date = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return date\n      .trim()\n      .replaceAll(\" \", \"_\")\n      .replaceAll(\"/\", \"\")\n      .replaceAll(\":\", \"\");\n  }\n  return new Date()\n    .toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    })\n    .replaceAll(\"/\", \"\");\n}\n","export class BussyStore {\n  private count: number;\n\n  constructor() {\n    this.count = 0;\n  }\n\n  get isBussy(): boolean {\n    return this.count !== 0;\n  }\n\n  retain(): void {\n    this.count += 1;\n  }\n\n  release(): void {\n    this.count -= 1;\n  }\n}\n","export enum AppState {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  ANALYSIS = \"analysis\",\n  ANALYSIS_DIALOG = \"analysisDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  TEMPORARY = \"temporary\",\n}\n","export class MessageStore {\n  private _queue: string[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get message(): string {\n    return this._queue[0];\n  }\n\n  get hasMessage(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  enqueue(message: string): void {\n    this._queue.push(message);\n  }\n\n  dequeue(): void {\n    this._queue.shift();\n  }\n}\n\nexport type MessageState = {\n  queue: string[];\n};\n","export class ErrorStore {\n  private _queue: Error[];\n\n  constructor() {\n    this._queue = [];\n  }\n\n  get errors(): Error[] {\n    return this._queue;\n  }\n\n  get hasError(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  push(e: unknown): void {\n    if (e instanceof Error) {\n      this._queue.push(e);\n    } else {\n      this._queue.push(new Error(\"\" + e));\n    }\n  }\n\n  clear(): void {\n    this._queue = [];\n  }\n}\n","export function getDateString(date?: Date): string {\n  return (date || new Date()).toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  });\n}\n\nexport function getDateTimeString(date?: Date): string {\n  return (date || new Date()).toLocaleTimeString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: false,\n  });\n}\n","import { AppSetting } from \"@/settings/app\";\n\nexport function getSituationText(score: number): string {\n  if (score >= 1500) {\n    return \"先手勝勢\";\n  } else if (score >= 600) {\n    return \"先手優勢\";\n  } else if (score >= 400) {\n    return \"先手有利\";\n  } else if (score >= 200) {\n    return \"先手有望\";\n  } else if (score >= -200) {\n    return \"互角\";\n  } else if (score >= -400) {\n    return \"後手有望\";\n  } else if (score >= -600) {\n    return \"後手有利\";\n  } else if (score >= -1500) {\n    return \"後手優勢\";\n  } else {\n    return \"後手勝勢\";\n  }\n}\n\nexport function scoreToPercentage(\n  score: number,\n  appSetting: AppSetting\n): number {\n  return 100 / (1 + Math.exp(-score / appSetting.coefficientInSigmoid));\n}\n\nexport function getMoveAccuracyText(\n  before: number,\n  after: number,\n  appSetting: AppSetting\n): string | null {\n  const loss =\n    scoreToPercentage(before, appSetting) -\n    scoreToPercentage(after, appSetting);\n  if (loss >= appSetting.badMoveLevelThreshold4) {\n    return \"大悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold3) {\n    return \"悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold2) {\n    return \"疑問手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold1) {\n    return \"緩手\";\n  }\n  return null;\n}\n","import { USIPlayer } from \"@/players/usi\";\nimport { AnalysisSetting, CommentBehavior } from \"@/settings/analysis\";\nimport { AppSetting } from \"@/settings/app\";\nimport { USIEngineSetting } from \"@/settings/usi\";\nimport {\n  Color,\n  ImmutablePosition,\n  ImmutableRecord,\n  Move,\n  reverseColor,\n} from \"@/shogi\";\nimport { getMoveAccuracyText, getSituationText } from \"./score\";\nimport { InfoCommand } from \"./usi\";\n\nexport interface AnalysisResult {\n  number: number;\n  score?: number;\n  negaScore?: number;\n  scoreDelta?: number;\n  mate?: number;\n  pv?: Move[];\n  isBestMove?: boolean;\n}\n\nexport interface AnalysisHandler {\n  onResult(result: AnalysisResult): void;\n  onNext(number: number): ImmutableRecord | null;\n  onFinish(): void;\n  onError(e: unknown): void;\n}\n\nexport class AnalysisManager {\n  private handler: AnalysisHandler;\n  private researcher?: USIPlayer;\n  private _setting: AnalysisSetting;\n  private number?: number;\n  private actualMove?: Move;\n  private color: Color;\n  private lastScore?: number;\n  private score?: number;\n  private mate?: number;\n  private lastPV?: Move[];\n  private pv?: Move[];\n  private timerHandle?: number;\n\n  constructor(setting: AnalysisSetting, handler: AnalysisHandler) {\n    if (!setting.usi) {\n      throw new Error(\"エンジンが設定されていません。\");\n    }\n    this._setting = setting;\n    this.handler = handler;\n    this.color = Color.BLACK;\n  }\n\n  get setting(): AnalysisSetting {\n    return this._setting;\n  }\n\n  async start(): Promise<void> {\n    await this.setupEngine(this.setting.usi as USIEngineSetting);\n    setTimeout(() => this.next());\n  }\n\n  private async setupEngine(setting: USIEngineSetting): Promise<void> {\n    await this.closeEngine();\n    const researcher = new USIPlayer(setting);\n    await researcher.launch();\n    this.researcher = researcher;\n  }\n\n  private finish(): void {\n    this.handler.onFinish();\n    this.close();\n  }\n\n  close(): void {\n    this.clearTimer();\n    this.closeEngine().catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private next(): void {\n    this.clearTimer();\n    this.onResult();\n\n    this.actualMove = undefined;\n    this.lastScore = this.score;\n    this.score = undefined;\n    this.mate = undefined;\n    this.lastPV = this.pv;\n    this.pv = undefined;\n    this.number =\n      this.number !== undefined\n        ? this.number + 1\n        : this.setting.startCriteria.enableNumber\n        ? this.setting.startCriteria.number - 1\n        : 0;\n    if (\n      this.setting.endCriteria.enableNumber &&\n      this.number >= this.setting.endCriteria.number\n    ) {\n      this.finish();\n      return;\n    }\n\n    const record = this.handler.onNext(this.number);\n    if (!record) {\n      this.finish();\n      return;\n    }\n    if (!record.current.next && !(record.current.move instanceof Move)) {\n      this.finish();\n      return;\n    }\n    this.actualMove =\n      record.current.move instanceof Move ? record.current.move : undefined;\n    this.color = reverseColor(record.position.color);\n    this.timerHandle = window.setTimeout(\n      () => this.next(),\n      this.setting.perMoveCriteria.maxSeconds * 1e3\n    );\n    this.goAsync(record).catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private clearTimer(): void {\n    if (this.timerHandle) {\n      clearTimeout(this.timerHandle);\n      this.timerHandle = undefined;\n    }\n  }\n\n  private onResult(): void {\n    if (this.number === undefined) {\n      return;\n    }\n    this.handler.onResult({\n      number: this.number,\n      score: this.score,\n      negaScore: this.score\n        ? this.color === Color.BLACK\n          ? this.score\n          : -this.score\n        : undefined,\n      scoreDelta:\n        this.score !== undefined && this.lastScore !== undefined\n          ? this.color === Color.BLACK\n            ? this.score - this.lastScore\n            : -(this.score - this.lastScore)\n          : undefined,\n      mate: this.mate,\n      pv: this.pv,\n      isBestMove:\n        this.actualMove && this.lastPV\n          ? this.actualMove.equals(this.lastPV[0])\n          : undefined,\n    });\n  }\n\n  async goAsync(record: ImmutableRecord): Promise<void> {\n    if (this.researcher) {\n      await this.researcher.startResearch(record);\n    }\n  }\n\n  private async closeEngine(): Promise<void> {\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n  }\n\n  updateUSIInfo(position: ImmutablePosition, info: InfoCommand): void {\n    if (info.multipv !== undefined && info.multipv !== 1) {\n      return;\n    }\n    if (info.scoreCP !== undefined) {\n      this.score =\n        position.color === Color.BLACK ? info.scoreCP : -info.scoreCP;\n    }\n    if (info.scoreMate) {\n      this.mate = Math.abs(info.scoreMate);\n    }\n    if (info.pv && info.pv.length !== 0) {\n      this.pv = [];\n      const pos = position.clone();\n      for (const sfen of info.pv) {\n        const move = pos.createMoveBySFEN(sfen);\n        if (!move || !pos.doMove(move)) {\n          break;\n        }\n        this.pv.push(move);\n      }\n    } else if (info.currmove) {\n      const move = position.createMoveBySFEN(info.currmove);\n      if (move) {\n        this.pv = [move];\n      }\n    }\n  }\n}\n\nexport function buildRecordComment(\n  result: AnalysisResult,\n  appSetting: AppSetting\n): string {\n  let comment = \"\";\n  if (result.mate) {\n    comment += `${result.mate}手詰\\n`;\n  }\n  if (\n    result.scoreDelta !== undefined &&\n    result.negaScore !== undefined &&\n    !result.isBestMove\n  ) {\n    const text = getMoveAccuracyText(\n      result.negaScore - result.scoreDelta,\n      result.negaScore,\n      appSetting\n    );\n    if (text) {\n      comment += `【${text}】\\n`;\n    }\n  }\n  if (result.score !== undefined) {\n    comment += `#評価値=${result.score}\\n`;\n    comment += getSituationText(result.score) + \"\\n\";\n  }\n  if (result.pv && result.pv.length !== 0) {\n    for (const move of result.pv) {\n      comment += `${move.getDisplayText()}`;\n    }\n    comment += \"\\n\";\n  }\n  return comment;\n}\n\nexport function loadScoreFromRecordComment(\n  comment: string\n): number | undefined {\n  const lines = comment.split(\"\\n\");\n  for (const line of lines) {\n    const matched = /^#評価値=([+-.0-9]+)/.exec(line);\n    if (matched) {\n      return Number(matched[1]);\n    }\n  }\n}\n\nexport function appendAnalysisComment(\n  org: string,\n  add: string,\n  behavior: CommentBehavior\n): string {\n  const sep = org ? \"\\n\" : \"\";\n  switch (behavior) {\n    case CommentBehavior.NONE:\n      return org;\n    case CommentBehavior.INSERT:\n      return add + sep + org;\n    case CommentBehavior.APPEND:\n      return org + sep + add;\n    case CommentBehavior.OVERWRITE:\n      return add;\n  }\n}\n","import api from \"@/ipc/api\";\nimport {\n  Color,\n  detectRecordFormat,\n  exportCSA,\n  ImmutableRecord,\n  importCSA,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n  exportKakinoki,\n  importKakinoki,\n  RecordFormatType,\n} from \"@/shogi\";\nimport { reactive, UnwrapNestedRefs } from \"vue\";\nimport iconv from \"iconv-lite\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n  validateAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/store/usi\";\nimport { formatTimeLimitCSA, RecordCustomData } from \"./record\";\nimport { defaultPlayerBuilder, GameManager } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { BussyStore } from \"./bussy\";\nimport { USIPlayerMonitor, USIMonitor } from \"./usi\";\nimport { AppState } from \"./state\";\nimport { MessageStore } from \"./message\";\nimport { ErrorStore } from \"./error\";\nimport * as uri from \"@/uri\";\nimport { Confirmation } from \"./confirm\";\nimport { getDateString, getDateTimeString } from \"@/helpers/datetime\";\nimport {\n  AnalysisManager,\n  AnalysisResult,\n  appendAnalysisComment,\n  buildRecordComment,\n  loadScoreFromRecordComment,\n} from \"./analysis\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { USIPlayer } from \"@/players/usi\";\nimport { LogLevel } from \"@/ipc/log\";\nimport { toString } from \"@/helpers/string\";\n\nexport class Store {\n  private _bussy: BussyStore;\n  private _message: MessageStore;\n  private _error: ErrorStore;\n  private _appSetting: AppSetting;\n  private _appState: AppState;\n  private lastAppState?: AppState;\n  private _isAppSettingDialogVisible: boolean;\n  private _confirmation?: Confirmation;\n  private _usi: USIMonitor;\n  private game: GameManager;\n  private researcher?: USIPlayer;\n  private analysis?: AnalysisManager;\n  private unlimitedBeepHandler?: AudioEventHandler;\n  private _recordFilePath?: string;\n  private _record: Record;\n\n  constructor() {\n    this._bussy = new BussyStore();\n    this._message = new MessageStore();\n    this._error = new ErrorStore();\n    this._appSetting = defaultAppSetting();\n    this._appState = AppState.NORMAL;\n    this._isAppSettingDialogVisible = false;\n    this._usi = new USIMonitor();\n    this.game = new GameManager(defaultPlayerBuilder, this);\n    this._record = new Record();\n  }\n\n  get isBussy(): boolean {\n    return this._bussy.isBussy;\n  }\n\n  retainBussyState(): void {\n    return this._bussy.retain();\n  }\n\n  releaseBussyState(): void {\n    return this._bussy.release();\n  }\n\n  get message(): string {\n    return this._message.message;\n  }\n\n  get hasMessage(): boolean {\n    return this._message.hasMessage;\n  }\n\n  enqueueMessage(message: string): void {\n    this._message.enqueue(message);\n  }\n\n  dequeueMessage(): void {\n    this._message.dequeue();\n  }\n\n  get errors(): Error[] {\n    return this._error.errors;\n  }\n\n  get hasError(): boolean {\n    return this._error.hasError;\n  }\n\n  pushError(e: unknown): void {\n    api.log(LogLevel.ERROR, toString(e));\n    this._error.push(e);\n  }\n\n  clearErrors(): void {\n    this._error.clear();\n  }\n\n  get appSetting(): AppSetting {\n    return this._appSetting;\n  }\n\n  async updateAppSetting(update: AppSettingUpdate): Promise<void> {\n    const newAppSetting = {\n      ...this.appSetting,\n      ...update,\n    };\n    const error = validateAppSetting(newAppSetting);\n    if (error) {\n      throw error;\n    }\n    await api.saveAppSetting(newAppSetting);\n    this._appSetting = newAppSetting;\n  }\n\n  flipBoard(): void {\n    this._appSetting.boardFlipping = !this.appSetting.boardFlipping;\n    api.saveAppSetting(this.appSetting);\n  }\n\n  get appState(): AppState {\n    return this._appState;\n  }\n\n  get confirmation(): string | undefined {\n    return this._confirmation?.message;\n  }\n\n  showConfirmation(confirmation: Confirmation): void {\n    if (this.appState == AppState.TEMPORARY) {\n      api.log(\n        LogLevel.ERROR,\n        \"確認ダイアログを多重に表示しようとしました。\" +\n          ` lastAppState=${this.lastAppState}` +\n          (this._confirmation\n            ? ` currentMessage=${this._confirmation.message}`\n            : \"\") +\n          ` newMessage=${confirmation.message}`\n      );\n      return;\n    }\n    this._confirmation = confirmation;\n    this.lastAppState = this.appState;\n    this._appState = AppState.TEMPORARY;\n  }\n\n  confirmationOk(): void {\n    const onOk = this._confirmation?.onOk;\n    this._confirmation = undefined;\n    if (this.lastAppState) {\n      this._appState = this.lastAppState;\n      this.lastAppState = undefined;\n    }\n    if (onOk) {\n      onOk();\n    }\n  }\n\n  confirmationCancel(): void {\n    const onCancel = this._confirmation?.onCancel;\n    this._confirmation = undefined;\n    if (this.lastAppState) {\n      this._appState = this.lastAppState;\n      this.lastAppState = undefined;\n    }\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  showPasteDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.PASTE_DIALOG;\n    }\n  }\n\n  showGameDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.GAME_DIALOG;\n    }\n  }\n\n  showResearchDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.RESEARCH_DIALOG;\n    }\n  }\n\n  showAnalysisDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.ANALYSIS_DIALOG;\n    }\n  }\n\n  showUsiEngineManagementDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.USI_ENGINE_SETTING_DIALOG;\n    }\n  }\n\n  closeModalDialog(): void {\n    if (\n      this.appState === AppState.PASTE_DIALOG ||\n      this.appState === AppState.GAME_DIALOG ||\n      this.appState === AppState.RESEARCH_DIALOG ||\n      this.appState === AppState.ANALYSIS_DIALOG ||\n      this.appState === AppState.USI_ENGINE_SETTING_DIALOG\n    ) {\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  get isAppSettingDialogVisible(): boolean {\n    return this._isAppSettingDialogVisible;\n  }\n\n  showAppSettingDialog(): void {\n    this._isAppSettingDialogVisible = true;\n  }\n\n  closeAppSettingDialog(): void {\n    this._isAppSettingDialogVisible = false;\n  }\n\n  get usiBlackPlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.blackPlayer;\n  }\n\n  get usiWhitePlayerMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.whitePlayer;\n  }\n\n  get usiResearcherMonitor(): USIPlayerMonitor | undefined {\n    return this._usi.researcher;\n  }\n\n  updateUSIInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    if (this.record.usi !== usi) {\n      return;\n    }\n    this._usi.update(sessionID, this.record.position, sender, name, info);\n    const data = new RecordCustomData(this.record.current.customData);\n    data.updateUSIInfo(this.record.position.color, sender, info);\n    this.record.current.customData = data.stringify();\n    if (this.analysis) {\n      this.analysis.updateUSIInfo(this.record.position, info);\n    }\n  }\n\n  updateUSIPonderInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: InfoCommand\n  ): void {\n    const record = Record.newByUSI(usi);\n    if (record instanceof Error) {\n      api.log(LogLevel.ERROR, `invalid USI: ${usi} (updateUSIPonderInfo)`);\n      return;\n    }\n    const ponderMove = record.current.move;\n    if (!(ponderMove instanceof Move)) {\n      return;\n    }\n    this._usi.update(\n      sessionID,\n      record.position,\n      sender,\n      name,\n      info,\n      ponderMove\n    );\n  }\n\n  get gameSetting(): GameSetting {\n    return this.game.setting;\n  }\n\n  get blackTimeMs(): number {\n    return this.game.blackTimeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.game.blackByoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.game.whiteTimeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.game.whiteByoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this.game.elapsedMs;\n  }\n\n  startGame(setting: GameSetting): void {\n    this.startGameAsync(setting).catch((e) => {\n      this.pushError(\"対局の初期化中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async startGameAsync(setting: GameSetting): Promise<void> {\n    if (this.appState !== AppState.GAME_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await api.saveGameSetting(setting);\n      this.initializeRecordForGame(setting);\n      this.initializeDisplaySettingForGame(setting);\n      await this.game.startGame(setting, this.record);\n      this._appState = AppState.GAME;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  private initializeRecordForGame(setting: GameSetting): void {\n    if (setting.startPosition) {\n      const position = new Position();\n      position.reset(setting.startPosition);\n      this._record.clear(position);\n      this.onUpdatePosition();\n      this.clearRecordFilePath();\n    }\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.BLACK_NAME,\n      setting.black.name\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.WHITE_NAME,\n      setting.white.name\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.DATE,\n      getDateString()\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.START_DATETIME,\n      getDateTimeString()\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.TIME_LIMIT,\n      formatTimeLimitCSA(setting.timeLimit)\n    );\n  }\n\n  private initializeDisplaySettingForGame(setting: GameSetting): void {\n    if (setting.humanIsFront) {\n      let flip = this.appSetting.boardFlipping;\n      if (\n        setting.black.uri === uri.ES_HUMAN &&\n        setting.white.uri !== uri.ES_HUMAN\n      ) {\n        flip = false;\n      } else if (\n        setting.black.uri !== uri.ES_HUMAN &&\n        setting.white.uri === uri.ES_HUMAN\n      ) {\n        flip = true;\n      }\n      if (flip !== this.appSetting.boardFlipping) {\n        this.flipBoard();\n      }\n    }\n  }\n\n  stopGame(): void {\n    if (this.appState === AppState.GAME) {\n      this.game.endGame(SpecialMove.INTERRUPT);\n    }\n  }\n\n  onMove(move: Move): ImmutableRecord {\n    if (this.appState === AppState.GAME) {\n      this._record.append(move, {\n        ignoreValidation: true,\n      });\n      this.onUpdatePosition();\n      this.record.current.setElapsedMs(this.elapsedMs);\n      playPieceBeat(this.appSetting.pieceVolume);\n    }\n    return this.record;\n  }\n\n  onEndGame(specialMove?: SpecialMove): void {\n    if (this.appState !== AppState.GAME) {\n      return;\n    }\n    if (specialMove) {\n      this.enqueueMessage(\n        `対局終了（${specialMoveToDisplayString(specialMove)})`\n      );\n    }\n    this._record.append(specialMove || SpecialMove.INTERRUPT);\n    this.onUpdatePosition();\n    this._record.current.setElapsedMs(this.elapsedMs);\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.END_DATETIME,\n      getDateTimeString()\n    );\n    this._appState = AppState.NORMAL;\n  }\n\n  onBeepShort(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    beepShort({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onBeepUnlimited(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    this.unlimitedBeepHandler = beepUnlimited({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onStopBeep(): void {\n    if (this.unlimitedBeepHandler) {\n      this.unlimitedBeepHandler.stop();\n      this.unlimitedBeepHandler = undefined;\n    }\n  }\n\n  doMove(move: Move): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    this._record.append(move);\n    this.onUpdatePosition();\n    playPieceBeat(this.appSetting.pieceVolume);\n  }\n\n  onNext(number: number): ImmutableRecord | null {\n    if (this.appState === AppState.ANALYSIS) {\n      this._record.goto(number);\n      return this.record.current.number === number ? this.record : null;\n    }\n    return null;\n  }\n\n  onResult(result: AnalysisResult): void {\n    if (this.appState === AppState.ANALYSIS && this.analysis) {\n      const comment = buildRecordComment(result, this.appSetting);\n      if (comment) {\n        this._record.current.comment = appendAnalysisComment(\n          this._record.current.comment,\n          comment,\n          this.analysis.setting.commentBehavior\n        );\n      }\n    }\n  }\n\n  onFinish(): void {\n    if (this.appState === AppState.ANALYSIS) {\n      this._message.enqueue(\"棋譜解析が終了しました。\");\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  onError(e: unknown): void {\n    this.pushError(e);\n  }\n\n  startResearch(researchSetting: ResearchSetting): void {\n    this.startResearchAsync(researchSetting)\n      .then(() => {\n        this.onUpdatePosition();\n      })\n      .catch((e) => {\n        this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n      });\n  }\n\n  private async startResearchAsync(\n    researchSetting: ResearchSetting\n  ): Promise<void> {\n    if (this.appState !== AppState.RESEARCH_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await api.saveResearchSetting(researchSetting);\n      if (!researchSetting.usi) {\n        throw new Error(\"エンジンが設定されていません。\");\n      }\n      const researcher = new USIPlayer(researchSetting.usi);\n      await researcher.launch();\n      this.researcher = researcher;\n      this._appState = AppState.RESEARCH;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  stopResearch(): void {\n    if (this.appState !== AppState.RESEARCH) {\n      return;\n    }\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n    this._appState = AppState.NORMAL;\n  }\n\n  startAnalysis(analysisSetting: AnalysisSetting): void {\n    this.startAnalysisAsync(analysisSetting).catch((e) => {\n      this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async startAnalysisAsync(analysisSetting: AnalysisSetting) {\n    if (this.appState !== AppState.ANALYSIS_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      await api.saveAnalysisSetting(analysisSetting);\n      const analysis = new AnalysisManager(analysisSetting, this);\n      await analysis.start();\n      this.analysis = analysis;\n      this._appState = AppState.ANALYSIS;\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  stopAnalysis(): void {\n    if (this.appState !== AppState.ANALYSIS) {\n      return;\n    }\n    if (this.analysis) {\n      this.analysis.close();\n      this.analysis = undefined;\n    }\n    this._appState = AppState.NORMAL;\n  }\n\n  private onUpdatePosition(): void {\n    if (this.researcher) {\n      this.researcher.startResearch(this.record);\n    }\n  }\n\n  get recordFilePath(): string | undefined {\n    return this._recordFilePath;\n  }\n\n  private updateRecordFilePath(recordFilePath: string): void {\n    this._recordFilePath = recordFilePath;\n  }\n\n  private clearRecordFilePath(): void {\n    this._recordFilePath = undefined;\n  }\n\n  get record(): ImmutableRecord {\n    return this._record;\n  }\n\n  newRecord(): void {\n    if (this.appState != AppState.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の棋譜は削除されます。よろしいですか？\",\n      onOk: () => {\n        this._record.clear();\n        this.onUpdatePosition();\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  updateRecordComment(comment: string): void {\n    this.record.current.comment = comment;\n  }\n\n  updateStandardRecordMetadata(update: {\n    key: RecordMetadataKey;\n    value: string;\n  }): void {\n    this._record.metadata.setStandardMetadata(update.key, update.value);\n  }\n\n  insertSpecialMove(specialMove: SpecialMove): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    this._record.append(specialMove);\n    this.onUpdatePosition();\n  }\n\n  startPositionEditing(): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の棋譜は削除されます。よろしいですか？\",\n      onOk: () => {\n        this._appState = AppState.POSITION_EDITING;\n        this._record.clear(this.record.position);\n        this.onUpdatePosition();\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  endPositionEditing(): void {\n    // FIXME: 局面整合性チェック\n    if (this.appState === AppState.POSITION_EDITING) {\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  initializePosition(initialPositionType: InitialPositionType): void {\n    if (this.appState != AppState.POSITION_EDITING) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の局面は破棄されます。よろしいですか？\",\n      onOk: () => {\n        const position = new Position();\n        position.reset(initialPositionType);\n        this._record.clear(position);\n        this.onUpdatePosition();\n        this.clearRecordFilePath();\n      },\n    });\n  }\n\n  changeTurn(): void {\n    if (this.appState != AppState.POSITION_EDITING) {\n      return;\n    }\n    const position = this.record.position.clone();\n    position.setColor(reverseColor(position.color));\n    this._record.clear(position);\n    this.onUpdatePosition();\n    this.clearRecordFilePath();\n  }\n\n  editPosition(change: PositionChange): void {\n    if (this.appState === AppState.POSITION_EDITING) {\n      const position = this.record.position.clone();\n      position.edit(change);\n      this._record.clear(position);\n      this.onUpdatePosition();\n      this.clearRecordFilePath();\n    }\n  }\n\n  changeMoveNumber(number: number): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    this._record.goto(number);\n    this.onUpdatePosition();\n  }\n\n  changeBranch(index: number): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    if (this.record.current.branchIndex === index) {\n      return;\n    }\n    this._record.switchBranchByIndex(index);\n    this.onUpdatePosition();\n  }\n\n  removeRecordAfter(): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    if (this.record.current.isLastMove) {\n      this._record.removeAfter();\n      this.onUpdatePosition();\n      return;\n    }\n    this.showConfirmation({\n      message: `${this.record.current.number}手目以降を削除します。よろしいですか？`,\n      onOk: () => {\n        this._record.removeAfter();\n        this.onUpdatePosition();\n      },\n    });\n  }\n\n  copyRecordKIF(): void {\n    const str = exportKakinoki(this._record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordCSA(): void {\n    const str = exportCSA(this._record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIBefore(): void {\n    const str = this._record.usi;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIAll(): void {\n    const str = this._record.usiAll;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyBoardSFEN(): void {\n    const str = this._record.sfen;\n    navigator.clipboard.writeText(str);\n  }\n\n  pasteRecord(data: string): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    let recordOrError: Record | Error;\n    switch (detectRecordFormat(data)) {\n      case RecordFormatType.SFEN: {\n        const position = Position.newBySFEN(data);\n        recordOrError = position\n          ? new Record(position)\n          : new Error(\"局面を読み込めませんでした。\");\n        break;\n      }\n      case RecordFormatType.USI:\n        recordOrError =\n          Record.newByUSI(data) || new Error(\"棋譜を読み込めませんでした。\");\n        break;\n      case RecordFormatType.KIF:\n        recordOrError = importKakinoki(data);\n        break;\n      case RecordFormatType.CSA:\n        recordOrError = importCSA(data);\n        break;\n      default:\n        recordOrError = new Error(\"棋譜フォーマットの検出ができませんでした。\");\n        break;\n    }\n    if (recordOrError instanceof Error) {\n      this.pushError(recordOrError);\n      return;\n    }\n    this.clearRecordFilePath();\n    this._record = recordOrError;\n    this.restoreCustomData();\n    this.onUpdatePosition();\n  }\n\n  openRecord(path?: string): void {\n    this.openRecordAsync(path).catch((e) => {\n      this.pushError(\"棋譜の読み込み中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async openRecordAsync(path?: string): Promise<void> {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      if (!path) {\n        path = await api.showOpenRecordDialog();\n        if (!path) {\n          return;\n        }\n      }\n      const data = await api.openRecord(path);\n      let recordOrError: Record | Error;\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = path.match(/\\.kif$/)\n          ? iconv.decode(data as Buffer, \"Shift_JIS\")\n          : new TextDecoder().decode(data);\n        recordOrError = importKakinoki(str);\n      } else if (path.match(/\\.csa$/)) {\n        recordOrError = importCSA(new TextDecoder().decode(data));\n      } else {\n        recordOrError = new Error(\"不明なファイル形式: \" + path);\n      }\n      if (recordOrError instanceof Error) {\n        throw recordOrError;\n      }\n      this.updateRecordFilePath(path);\n      this._record = recordOrError;\n      this.restoreCustomData();\n      this.onUpdatePosition();\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  private restoreCustomData(): void {\n    this._record.forEach((node) => {\n      const score = loadScoreFromRecordComment(node.comment);\n      if (score !== undefined) {\n        const data = new RecordCustomData(node.customData);\n        data.updateScore(Color.BLACK, USIInfoSender.RESEARCHER, score);\n        node.customData = data.stringify();\n      }\n    });\n  }\n\n  saveRecord(options?: { overwrite: boolean }): void {\n    this.saveRecordAsync(options).catch((e) => {\n      this.pushError(\"棋譜の保存中にエラーが出ました: \" + e);\n    });\n  }\n\n  private async saveRecordAsync(options?: {\n    overwrite: boolean;\n  }): Promise<void> {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    try {\n      let path = this.recordFilePath;\n      if (!options?.overwrite || !path) {\n        const defaultPath = defaultRecordFileName(this._record.metadata);\n        path = await api.showSaveRecordDialog(defaultPath);\n        if (!path) {\n          return;\n        }\n      }\n      let data: Uint8Array;\n      if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n        const str = exportKakinoki(this.record, {\n          returnCode: this.appSetting.returnCode,\n        });\n        data = path.match(/\\.kif$/)\n          ? iconv.encode(str, \"Shift_JIS\")\n          : new TextEncoder().encode(str);\n      } else if (path.match(/\\.csa$/)) {\n        data = new TextEncoder().encode(\n          exportCSA(this.record, {\n            returnCode: this.appSetting.returnCode,\n          })\n        );\n      } else {\n        throw new Error(\"不明なファイル形式: \" + path);\n      }\n      await api.saveRecord(path, data);\n      this.updateRecordFilePath(path);\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  get isMovableByUser() {\n    switch (this.appState) {\n      case AppState.NORMAL:\n      case AppState.RESEARCH:\n        return true;\n      case AppState.GAME:\n        return (\n          (this.record.position.color === Color.BLACK\n            ? this.gameSetting.black.uri\n            : this.gameSetting.white.uri) === uri.ES_HUMAN\n        );\n    }\n    return false;\n  }\n}\n\nconst store = reactive<Store>(new Store());\n\nexport function useStore(): UnwrapNestedRefs<Store> {\n  return store;\n}\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source,\n    draggable: \"false\"\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  QUIZ = \"quiz\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  FILE = \"file\",\n  OPEN = \"open\",\n  SAVE = \"save\",\n  SAVE_AS = \"saveAs\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  PV = \"pv\",\n  CHART = \"chart\",\n  PERCENT = \"percent\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n  QUESTION = \"question\",\n  ANALYSIS = \"analysis\",\n  DESCRIPTION = \"description\",\n  PLAY = \"play\",\n  CLOSE = \"close\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.QUIZ]: \"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.FILE]: \"icon/draft_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.OPEN]: \"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.SAVE]: \"icon/save_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.SAVE_AS]: \"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.PV]: \"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.PERCENT]: \"icon/percent_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n  [Icon.QUESTION]: \"icon/help_white_24dp.svg\",\n  [Icon.ANALYSIS]: \"icon/query_stats_white_24dp.svg\",\n  [Icon.DESCRIPTION]: \"icon/description_white_24dp.svg\",\n  [Icon.PLAY]: \"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg\",\n  [Icon.CLOSE]: \"icon/close_FILL0_wght400_GRAD0_opsz48.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"ButtonIcon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./ButtonIcon.vue?vue&type=template&id=4208878a&ts=true\"\nimport script from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-15a0289b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"background\"\n}\nconst _hoisted_2 = { class: \"groups\" }\nconst _hoisted_3 = { class: \"group\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"戻る\", -1))\nconst _hoisted_5 = { class: \"group\" }\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"初期化\", -1))\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"開く\", -1))\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"上書き保存\", -1))\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"保存\", -1))\nconst _hoisted_14 = { class: \"group\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・KIF\", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・CSA\", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・USI\", -1))\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・SFEN\", -1))\nconst _hoisted_19 = [\"disabled\"]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"貼り付け\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClose && _ctx.onClose(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.CLOSE\n            }, null, 8, [\"icon\"]),\n            _hoisted_4\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            disabled: !_ctx.states.newFile,\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onNewFile && _ctx.onNewFile(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FILE\n            }, null, 8, [\"icon\"]),\n            _hoisted_7\n          ], 8, _hoisted_6),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            disabled: !_ctx.states.open,\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onOpen && _ctx.onOpen(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.OPEN\n            }, null, 8, [\"icon\"]),\n            _hoisted_9\n          ], 8, _hoisted_8),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            disabled: !_ctx.states.saveAs,\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onSave && _ctx.onSave(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SAVE\n            }, null, 8, [\"icon\"]),\n            _hoisted_11\n          ], 8, _hoisted_10),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            disabled: !_ctx.states.save,\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onSaveAs && _ctx.onSaveAs(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SAVE_AS\n            }, null, 8, [\"icon\"]),\n            _hoisted_13\n          ], 8, _hoisted_12)\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onCopyKIF && _ctx.onCopyKIF(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onCopyCSA && _ctx.onCopyCSA(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onCopyUSI && _ctx.onCopyUSI(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onCopySFEN && _ctx.onCopySFEN(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            disabled: !_ctx.states.paste,\n            onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.PASTE\n            }, null, 8, [\"icon\"]),\n            _hoisted_20\n          ], 8, _hoisted_19)\n        ])\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\n\nexport default defineComponent({\n  name: \"FileMenu\",\n  components: {\n    ButtonIcon,\n  },\n  emits: [\"close\"],\n  setup(_, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    const onClose = () => {\n      context.emit(\"close\");\n    };\n    const onNewFile = () => {\n      store.newRecord();\n      context.emit(\"close\");\n    };\n    const onOpen = () => {\n      store.openRecord();\n      context.emit(\"close\");\n    };\n    const onSave = () => {\n      store.saveRecord({ overwrite: true });\n      context.emit(\"close\");\n    };\n    const onSaveAs = () => {\n      store.saveRecord();\n      context.emit(\"close\");\n    };\n    const onCopyKIF = () => {\n      store.copyRecordKIF();\n      context.emit(\"close\");\n    };\n    const onCopyCSA = () => {\n      store.copyRecordCSA();\n      context.emit(\"close\");\n    };\n    const onCopyUSI = () => {\n      store.copyRecordUSIAll();\n      context.emit(\"close\");\n    };\n    const onCopySFEN = () => {\n      store.copyBoardSFEN();\n      context.emit(\"close\");\n    };\n    const onPaste = () => {\n      store.showPasteDialog();\n      context.emit(\"close\");\n    };\n    const states = computed(() => {\n      return {\n        newFile: store.appState === AppState.NORMAL,\n        open: store.appState === AppState.NORMAL,\n        save: store.appState === AppState.NORMAL,\n        saveAs: store.appState === AppState.NORMAL,\n        paste: store.appState === AppState.NORMAL,\n      };\n    });\n    return {\n      dialog,\n      Icon,\n      onClose,\n      onNewFile,\n      onOpen,\n      onSave,\n      onSaveAs,\n      onCopyKIF,\n      onCopyCSA,\n      onCopyUSI,\n      onCopySFEN,\n      onPaste,\n      states,\n    };\n  },\n});\n","import { render } from \"./FileMenu.vue?vue&type=template&id=15a0289b&scoped=true&ts=true\"\nimport script from \"./FileMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./FileMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./FileMenu.vue?vue&type=style&index=0&id=15a0289b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-15a0289b\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d7f89dd8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"background\"\n}\nconst _hoisted_2 = { class: \"groups\" }\nconst _hoisted_3 = { class: \"group\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"戻る\", -1))\nconst _hoisted_5 = { class: \"group\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"平手\", -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"香落ち\", -1))\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"右香落ち\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"角落ち\", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"飛車落ち\", -1))\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"飛車香落ち\", -1))\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"2枚落ち\", -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"4枚落ち\", -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"6枚落ち\", -1))\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"8枚落ち\", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"詰め将棋\", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"双玉詰め将棋\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClose && _ctx.onClose(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.CLOSE\n            }, null, 8, [\"icon\"]),\n            _hoisted_4\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStandard && _ctx.onStandard(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_6\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapLance && _ctx.onHandicapLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_7\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRightLance && _ctx.onHandicapRightLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_8\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapBishop && _ctx.onHandicapBishop(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_9\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRook && _ctx.onHandicapRook(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_10\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRookLance && _ctx.onHandicapRookLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_11\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap2Pieces && _ctx.onHandicap2Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_12\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap4Pieces && _ctx.onHandicap4Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_13\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap6Pieces && _ctx.onHandicap6Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_14\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap8Pieces && _ctx.onHandicap8Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onTsumeShogi && _ctx.onTsumeShogi(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.QUIZ\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"button\",\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onTsumeShogi2Kings && _ctx.onTsumeShogi2Kings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.QUIZ\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ])\n        ])\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\nimport { InitialPositionType } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"InitialPositionMenu\",\n  components: {\n    ButtonIcon,\n  },\n  emits: [\"close\"],\n  setup(_, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    const onClose = () => {\n      context.emit(\"close\");\n    };\n    const onStandard = () => {\n      store.initializePosition(InitialPositionType.STANDARD);\n      context.emit(\"close\");\n    };\n    const onHandicapLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicapRightLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicapBishop = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n      context.emit(\"close\");\n    };\n    const onHandicapRook = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n      context.emit(\"close\");\n    };\n    const onHandicapRookLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicap2Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap4Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap6Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap8Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n      context.emit(\"close\");\n    };\n    const onTsumeShogi = () => {\n      store.initializePosition(InitialPositionType.TSUME_SHOGI);\n      context.emit(\"close\");\n    };\n    const onTsumeShogi2Kings = () => {\n      store.initializePosition(InitialPositionType.TSUME_SHOGI_2KINGS);\n      context.emit(\"close\");\n    };\n    return {\n      dialog,\n      Icon,\n      onClose,\n      onStandard,\n      onHandicapLance,\n      onHandicapRightLance,\n      onHandicapBishop,\n      onHandicapRook,\n      onHandicapRookLance,\n      onHandicap2Pieces,\n      onHandicap4Pieces,\n      onHandicap6Pieces,\n      onHandicap8Pieces,\n      onTsumeShogi,\n      onTsumeShogi2Kings,\n    };\n  },\n});\n","import { render } from \"./InitialPositionMenu.vue?vue&type=template&id=d7f89dd8&scoped=true&ts=true\"\nimport script from \"./InitialPositionMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./InitialPositionMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./InitialPositionMenu.vue?vue&type=style&index=0&id=d7f89dd8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d7f89dd8\"]])\n\nexport default __exports__","\nimport { computed, defineComponent, ref } from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport { Move, PositionChange, RecordMetadataKey } from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { AppState } from \"@/store/state\";\nimport { humanPlayer } from \"@/players/human\";\nimport { Icon } from \"@/assets/icons\";\nimport FileMenu from \"@/components/menu/FileMenu.vue\";\nimport InitialPositionMenu from \"@/components/menu/InitialPositionMenu.vue\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  components: {\n    BoardView,\n    ButtonIcon,\n    FileMenu,\n    InitialPositionMenu,\n  },\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  emits: [\"resize\"],\n  setup(_, context) {\n    const store = useStore();\n    const isFileMenuVisible = ref(false);\n    const isInitialPositionMenuVisible = ref(false);\n\n    const onResize = (size: RectSize) => {\n      context.emit(\"resize\", size);\n    };\n\n    const onMove = (move: Move) => {\n      if (store.appState === AppState.GAME) {\n        humanPlayer.doMove(move);\n      } else {\n        store.doMove(move);\n      }\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.editPosition(change);\n    };\n\n    const onGame = () => {\n      store.showGameDialog();\n    };\n\n    const onStop = () => {\n      store.stopGame();\n    };\n\n    const onResign = () => {\n      humanPlayer.resign();\n    };\n\n    const onResearch = () => {\n      store.showResearchDialog();\n    };\n\n    const onEndResearch = () => {\n      store.stopResearch();\n    };\n\n    const onAnalysis = () => {\n      store.showAnalysisDialog();\n    };\n\n    const onEndAnalysis = () => {\n      store.stopAnalysis();\n    };\n\n    const onStartEditPosition = () => {\n      store.startPositionEditing();\n    };\n\n    const onEndEditPosition = () => {\n      store.endPositionEditing();\n    };\n\n    const onInitPosition = () => {\n      isInitialPositionMenuVisible.value = true;\n    };\n\n    const onChangeTurn = () => {\n      store.changeTurn();\n    };\n\n    const onOpenAppSettings = () => {\n      store.showAppSettingDialog();\n    };\n\n    const onOpenEngineSettings = () => {\n      store.showUsiEngineManagementDialog();\n    };\n\n    const onFlip = () => {\n      useStore().flipBoard();\n    };\n\n    const onFileAction = () => {\n      isFileMenuVisible.value = true;\n    };\n\n    const onRemoveAfter = () => {\n      store.removeRecordAfter();\n    };\n\n    const allowEdit = computed(\n      () => store.appState === AppState.POSITION_EDITING\n    );\n\n    const allowMove = computed(() => store.isMovableByUser);\n\n    const appSetting = computed(() => store.appSetting);\n\n    const position = computed(() => store.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.record.current.move;\n      return move instanceof Move ? move : undefined;\n    });\n\n    const blackPlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.appState === AppState.GAME ? store.blackTimeMs : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.appState === AppState.GAME ? store.blackByoyomi : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.appState === AppState.GAME ? store.whiteTimeMs : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.appState === AppState.GAME ? store.whiteByoyomi : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.appState === AppState.NORMAL,\n        stop: store.appState === AppState.GAME,\n        resign: store.appState === AppState.GAME && store.isMovableByUser,\n        research: store.appState === AppState.NORMAL,\n        endResearch: store.appState === AppState.RESEARCH,\n        analysis: store.appState === AppState.NORMAL,\n        endAnalysis: store.appState === AppState.ANALYSIS,\n        startEditPosition: store.appState === AppState.NORMAL,\n        endEditPosition: store.appState === AppState.POSITION_EDITING,\n        initPosition: store.appState === AppState.POSITION_EDITING,\n        removeAfter:\n          store.appState === AppState.NORMAL ||\n          store.appState === AppState.RESEARCH,\n        engineSettings: store.appState === AppState.NORMAL,\n      };\n    });\n\n    return {\n      isFileMenuVisible,\n      isInitialPositionMenuVisible,\n      appSetting,\n      position,\n      lastMove,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onResize,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onAnalysis,\n      onEndAnalysis,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPosition,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onFileAction,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=9f2180b4&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=9f2180b4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9f2180b4\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2f3c443f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"record-pane\" }\nconst _hoisted_2 = { class: \"record\" }\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = [\"checked\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-elapsed-time\" }, \"消費時間\", -1))\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = [\"checked\"]\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-comment\" }, \"コメント\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordView = _resolveComponent(\"RecordView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_RecordView, {\n        record: _ctx.record,\n        operational: _ctx.isRecordOperational,\n        \"show-comment\": _ctx.showComment,\n        \"show-elapsed-time\": _ctx.showElapsedTime,\n        onGoBegin: _ctx.goBegin,\n        onGoBack: _ctx.goBack,\n        onGoForward: _ctx.goForward,\n        onGoEnd: _ctx.goEnd,\n        onSelectMove: _ctx.selectMove,\n        onSelectBranch: _ctx.selectBranch\n      }, null, 8, [\"record\", \"operational\", \"show-comment\", \"show-elapsed-time\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"input\", {\n          id: \"show-elapsed-time\",\n          type: \"checkbox\",\n          checked: _ctx.showElapsedTime,\n          onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onToggleElapsedTime && _ctx.onToggleElapsedTime(...args)))\n        }, null, 40, _hoisted_5),\n        _hoisted_6\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"input\", {\n          id: \"show-comment\",\n          type: \"checkbox\",\n          checked: _ctx.showComment,\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onToggleComment && _ctx.onToggleComment(...args)))\n        }, null, 40, _hoisted_8),\n        _hoisted_9\n      ])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-69eb6261\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"record-view\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = {\n  ref: \"moveList\",\n  class: \"move-list\"\n}\nconst _hoisted_8 = [\"value\", \"onClick\"]\nconst _hoisted_9 = { class: \"move-number\" }\nconst _hoisted_10 = { class: \"move-text\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"move-time\"\n}\nconst _hoisted_12 = {\n  key: 1,\n  class: \"move-comment\"\n}\nconst _hoisted_13 = {\n  ref: \"branchList\",\n  class: \"branch-list\"\n}\nconst _hoisted_14 = [\"value\", \"onClick\"]\nconst _hoisted_15 = { class: \"move-text\" }\nconst _hoisted_16 = {\n  key: 0,\n  class: \"move-comment\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.FIRST\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_3),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BACK\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_4),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.NEXT\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_5),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.LAST\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_6)\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: move.number,\n          class: _normalizeClass([\"move-element\", { 'has-branch': move.hasBranch, selected: move.selected }]),\n          value: move.number,\n          onClick: ($event: any) => (_ctx.changeNumber(move.number))\n        }, [\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(move.number !== 0 ? move.number : \"\"), 1),\n          _createElementVNode(\"div\", _hoisted_10, _toDisplayString(move.text), 1),\n          (_ctx.showElapsedTime)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(move.time), 1))\n            : _createCommentVNode(\"\", true),\n          (_ctx.showComment)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString(move.comment), 1))\n            : _createCommentVNode(\"\", true)\n        ], 10, _hoisted_8))\n      }), 128))\n    ], 512),\n    _createElementVNode(\"div\", _hoisted_13, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: branch.index,\n          class: _normalizeClass([\"move-element\", { selected: branch.selected }]),\n          value: branch.index,\n          onClick: ($event: any) => (_ctx.changeBranch(branch.index))\n        }, [\n          _createElementVNode(\"div\", _hoisted_15, _toDisplayString(branch.text), 1),\n          (_ctx.showComment)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _toDisplayString(branch.comment), 1))\n            : _createCommentVNode(\"\", true)\n        ], 10, _hoisted_14))\n      }), 128))\n    ], 512)\n  ]))\n}","\nimport { ImmutableRecord, Node } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref, PropType, onUpdated } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"RecordView\",\n  components: {\n    ButtonIcon,\n  },\n  props: {\n    record: {\n      type: Object as PropType<ImmutableRecord>,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n    showElapsedTime: {\n      type: Boolean,\n      required: false,\n    },\n    showComment: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref<HTMLDivElement | null> = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      if (props.operational) {\n        context.emit(\"goBegin\");\n      }\n    };\n\n    const goBack = () => {\n      if (props.operational) {\n        context.emit(\"goBack\");\n      }\n    };\n\n    const goForward = () => {\n      if (props.operational) {\n        context.emit(\"goForward\");\n      }\n    };\n\n    const goEnd = () => {\n      if (props.operational) {\n        context.emit(\"goEnd\");\n      }\n    };\n\n    const changeNumber = (number: number) => {\n      if (props.operational) {\n        context.emit(\"selectMove\", Number(number));\n      }\n    };\n\n    const changeBranch = (index: number) => {\n      if (props.operational) {\n        context.emit(\"selectBranch\", Number(index));\n      }\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        number: number;\n        text: string;\n        time: string;\n        hasBranch: boolean;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          time: elem.number != 0 ? elem.timeText : \"\",\n          hasBranch: elem.hasBranch,\n          comment: elem.comment,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      let p: Node | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayText,\n          comment: p.comment,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    onUpdated(() => {\n      const moveListElement = moveList.value as HTMLElement;\n      moveListElement.childNodes.forEach((elem) => {\n        if (\n          elem instanceof HTMLElement &&\n          elem.classList.contains(\"selected\")\n        ) {\n          elem.scrollIntoView({ behavior: \"auto\", block: \"nearest\" });\n        }\n      });\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./RecordView.vue?vue&type=template&id=69eb6261&scoped=true&ts=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordView.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=69eb6261&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-69eb6261\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordView from \"@/components/primitive/RecordView.vue\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    RecordView,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.changeMoveNumber(number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.changeBranch(index);\n    };\n\n    const onToggleElapsedTime = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showElapsedTimeInRecordView: checkbox.checked,\n      });\n    };\n\n    const onToggleComment = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showCommentInRecordView: checkbox.checked,\n      });\n    };\n\n    const isRecordOperational = computed(() => {\n      return (\n        store.appState === AppState.NORMAL ||\n        store.appState === AppState.RESEARCH\n      );\n    });\n    const showComment = computed(\n      () => store.appSetting.showCommentInRecordView\n    );\n    const showElapsedTime = computed(\n      () => store.appSetting.showElapsedTimeInRecordView\n    );\n\n    const record = computed(() => store.record);\n\n    return {\n      isRecordOperational,\n      showElapsedTime,\n      showComment,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n      onToggleElapsedTime,\n      onToggleComment,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=2f3c443f&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=2f3c443f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2f3c443f\"]])\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-a0779d9e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 棋譜情報 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" コメント \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 読み筋 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 評価値 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 期待勝率 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_10 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_RecordInfo = _resolveComponent(\"RecordInfo\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.activeTab === 'invisible')\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            style: _normalizeStyle(`height: calc(100% - ${_ctx.headerHeight}px);`)\n          }, null, 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.RECORD_INFO)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.DESCRIPTION\n          }, null, 8, [\"icon\"]),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.COMMENT)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.COMMENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.SEARCH)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.BRAIN\n          }, null, 8, [\"icon\"]),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.PV }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.PV)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.PV\n          }, null, 8, [\"icon\"]),\n          _hoisted_6\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.CHART\n          }, null, 8, [\"icon\"]),\n          _hoisted_7\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.PERCENTAGE_CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.PERCENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_8\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.INVISIBLE }]),\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.INVISIBLE)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.ARROW_DROP\n          }, null, 8, [\"icon\"]),\n          _hoisted_9\n        ], 2)\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(_component_RecordInfo, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          size: _ctx.contentSize,\n          \"history-mode\": true\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.PV }]),\n          size: _ctx.contentSize,\n          \"history-mode\": false\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.RAW\n        }, null, 8, [\"class\", \"size\", \"type\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.WIN_RATE\n        }, null, 8, [\"class\", \"size\", \"type\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-74746424\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.record.current.comment);\n    const readonly = computed(() => store.appState != AppState.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.updateRecordComment(comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=74746424&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=74746424&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-74746424\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3b22508c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.blackPlayer.name,\n            info: _ctx.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.whitePlayer.name,\n            info: _ctx.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.researcher.name,\n            info: _ctx.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createBlock as _createBlock, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3fd4e856\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"予想手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = { class: \"header\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_20 = { class: \"value\" }\nconst _hoisted_21 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-3fd4e856><div class=\\\"list-column time\\\" data-v-3fd4e856>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-3fd4e856>順位</div><div class=\\\"list-column depth\\\" data-v-3fd4e856>深さ</div><div class=\\\"list-column nodes\\\" data-v-3fd4e856>探索局面数</div><div class=\\\"list-column score\\\" data-v-3fd4e856>評価値</div></div>\", 1)\nconst _hoisted_22 = { class: \"list-column time\" }\nconst _hoisted_23 = { class: \"list-column multipv-index\" }\nconst _hoisted_24 = { class: \"list-column depth\" }\nconst _hoisted_25 = { class: \"list-column nodes\" }\nconst _hoisted_26 = { class: \"list-column score\" }\nconst _hoisted_27 = { class: \"list-column score-flag\" }\nconst _hoisted_28 = { class: \"list-column text\" }\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = /*#__PURE__*/_createTextVNode(\" 再現 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_PVPreviewDialog = _resolveComponent(\"PVPreviewDialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.ponderMove ? _ctx.info.ponderMove : \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_18, [\n          _hoisted_19,\n          _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_21,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 37}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.historyMode\n            ? _ctx.info.iterates\n            : _ctx.info.latestIteration, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: _normalizeClass([\"list-item\", { highlight: _ctx.historyMode && iterate.multiPV === 1 }])\n          }, [\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_25, _toDisplayString(iterate.nodes), 1),\n            _createElementVNode(\"div\", _hoisted_26, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_27, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_28, [\n              (iterate.pv && iterate.pv.length !== 0 && iterate.text)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    onClick: ($event: any) => (_ctx.showPreview(iterate))\n                  }, [\n                    _createVNode(_component_ButtonIcon, {\n                      class: \"icon\",\n                      icon: _ctx.Icon.PLAY\n                    }, null, 8, [\"icon\"]),\n                    _hoisted_30\n                  ], 8, _hoisted_29))\n                : _createCommentVNode(\"\", true),\n              _createTextVNode(\" \" + _toDisplayString(iterate.text), 1)\n            ])\n          ], 2))\n        }), 128))\n      ], 4),\n      (_ctx.preview)\n        ? (_openBlock(), _createBlock(_component_PVPreviewDialog, {\n            key: 0,\n            position: _ctx.preview.position,\n            pv: _ctx.preview.pv,\n            infos: _ctx.preview.infos,\n            onClose: _ctx.closePreview\n          }, null, 8, [\"position\", \"pv\", \"infos\", \"onClose\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0317ad55\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"control top\" }\nconst _hoisted_3 = { class: \"control-row\" }\nconst _hoisted_4 = { class: \"control-row\" }\nconst _hoisted_5 = { class: \"control-row\" }\nconst _hoisted_6 = { class: \"informations\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createVNode(_component_BoardView, {\n        class: \"board\",\n        \"piece-image-type\": _ctx.appSetting.pieceImage,\n        \"board-image-type\": _ctx.appSetting.boardImage,\n        \"board-label-type\": _ctx.appSetting.boardLabelType,\n        \"max-size\": _ctx.maxSize,\n        position: _ctx.pos,\n        \"last-move\": _ctx.lastMove,\n        flip: _ctx.flip\n      }, {\n        \"right-control\": _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.doFlip && _ctx.doFlip(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.FLIP\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CLOSE\n                }, null, 8, [\"icon\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.goBegin && _ctx.goBegin(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.FIRST\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.goEnd && _ctx.goEnd(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.LAST\n                }, null, 8, [\"icon\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.goBack && _ctx.goBack(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.BACK\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.goForward && _ctx.goForward(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.NEXT\n                }, null, 8, [\"icon\"])\n              ])\n            ])\n          ])\n        ]),\n        _: 1\n      }, 8, [\"piece-image-type\", \"board-image-type\", \"board-label-type\", \"max-size\", \"position\", \"last-move\", \"flip\"]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.infos, (info) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: info,\n            class: \"information\"\n          }, _toDisplayString(info), 1))\n        }), 128))\n      ])\n    ], 512)\n  ]))\n}","\nimport { Move, Position, Record } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport {\n  defineComponent,\n  onMounted,\n  PropType,\n  Ref,\n  ref,\n  reactive,\n  watch,\n  onUnmounted,\n} from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { computed } from \"@vue/reactivity\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"PVPreviewDialog\",\n  components: { BoardView, ButtonIcon },\n  props: {\n    position: {\n      type: String,\n      required: true,\n    },\n    pv: {\n      type: Object as PropType<string[]>,\n      required: true,\n    },\n    infos: {\n      type: Object as PropType<string[]>,\n      default: [] as string[],\n      required: false,\n    },\n  },\n  emits: [\"close\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const maxSize = reactive(new RectSize(0, 0));\n    const record = reactive(new Record());\n    const flip: Ref<boolean> = ref(store.appSetting.boardFlipping);\n\n    const updateSize = () => {\n      maxSize.width = window.innerWidth * 0.8;\n      maxSize.height = window.innerHeight * 0.8 - 80;\n    };\n\n    const updateRecord = () => {\n      const position = Position.newBySFEN(props.position);\n      if (!position) {\n        return;\n      }\n      record.clear(position);\n      for (const sfen of props.pv) {\n        const move = record.position.createMoveBySFEN(sfen);\n        if (!move) {\n          break;\n        }\n        record.append(move, { ignoreValidation: true });\n      }\n      record.goto(1);\n    };\n\n    onMounted(async () => {\n      updateSize();\n      updateRecord();\n      window.addEventListener(\"resize\", updateSize);\n      showModalDialog(dialog.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n    });\n\n    watch([() => props.position, () => props.pv], () => {\n      updateRecord();\n      showModalDialog(dialog.value);\n    });\n\n    const close = () => {\n      context.emit(\"close\");\n    };\n\n    const goBegin = () => {\n      record.goto(0);\n    };\n\n    const goEnd = () => {\n      record.goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const goBack = () => {\n      record.goBack();\n    };\n\n    const goForward = () => {\n      record.goForward();\n    };\n\n    const doFlip = () => {\n      flip.value = !flip.value;\n    };\n\n    const pos = computed(() => record.position);\n    const lastMove = computed(() =>\n      record.current.move instanceof Move ? record.current.move : null\n    );\n\n    return {\n      dialog,\n      appSetting: store.appSetting,\n      pos,\n      lastMove,\n      maxSize,\n      flip,\n      close,\n      goBegin,\n      goEnd,\n      goBack,\n      goForward,\n      doFlip,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./PVPreviewDialog.vue?vue&type=template&id=0317ad55&scoped=true&ts=true\"\nimport script from \"./PVPreviewDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PVPreviewDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PVPreviewDialog.vue?vue&type=style&index=0&id=0317ad55&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0317ad55\"]])\n\nexport default __exports__","\nimport { USIIteration, USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent, ref } from \"vue\";\nimport { Icon } from \"@/assets/icons\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport PVPreviewDialog from \"@/components/dialog/PVPreviewDialog.vue\";\n\ntype Preview = {\n  position: string;\n  pv: string[];\n  infos: string[];\n};\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  components: {\n    ButtonIcon,\n    PVPreviewDialog,\n  },\n  props: {\n    historyMode: {\n      type: Boolean,\n      required: true,\n    },\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n  setup: () => {\n    const preview = ref<Preview | null>(null);\n    const showPreview = (ite: USIIteration) => {\n      const infos = [];\n      if (ite.depth !== undefined) {\n        infos.push(`深さ=${ite.depth}`);\n      }\n      if (ite.selectiveDepth !== undefined) {\n        infos.push(`選択的深さ=${ite.selectiveDepth}`);\n      }\n      if (ite.score) {\n        infos.push(`評価値=${ite.score}`);\n        if (ite.lowerBound) {\n          infos.push(\"（下界値）\");\n        }\n        if (ite.upperBound) {\n          infos.push(\"（上界値）\");\n        }\n      }\n      if (ite.scoreMate) {\n        infos.push(`詰み手数=${ite.scoreMate}`);\n      }\n      if (ite.multiPV) {\n        infos.push(`順位=${ite.multiPV}`);\n      }\n      preview.value = {\n        position: ite.position,\n        pv: ite.pv || [],\n        infos: [infos.join(\" / \"), ite.text || \"\"],\n      };\n    };\n    const closePreview = () => {\n      preview.value = null;\n    };\n    return {\n      Icon,\n      preview,\n      showPreview,\n      closePreview,\n    };\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=3fd4e856&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=3fd4e856&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3fd4e856\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/tab/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n    historyMode: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const blackPlayer = computed(() => store.usiBlackPlayerMonitor);\n    const whitePlayer = computed(() => store.usiWhitePlayerMonitor);\n    const researcher = computed(() => store.usiResearcherMonitor);\n    const elementHeight = computed(() => {\n      const n =\n        (store.usiBlackPlayerMonitor ? 1 : 0) +\n        (store.usiWhitePlayerMonitor ? 1 : 0) +\n        (store.usiResearcherMonitor ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      blackPlayer,\n      whitePlayer,\n      researcher,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=3b22508c&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=3b22508c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b22508c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-dbdea358\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { RecordCustomData } from \"@/store/record\";\nimport {\n  defineComponent,\n  onMounted,\n  onUnmounted,\n  PropType,\n  ref,\n  Ref,\n  watch,\n} from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/store/usi\";\nimport { ImmutableRecord } from \"@/shogi\";\nimport { scoreToPercentage } from \"@/store/score\";\nimport { AppSetting, Thema } from \"@/settings/app\";\n\nconst MAX_SCORE = 2000;\nconst MIN_SCORE = -MAX_SCORE;\n\ntype ColorPalette = {\n  main: string;\n  ticks: string;\n  grid: string;\n  head: string;\n  blackPlayer: string;\n  whitePlayer: string;\n  researcher: string;\n};\n\nfunction getColorPalette(thema: Thema): ColorPalette {\n  switch (thema) {\n    default:\n      return {\n        main: \"black\",\n        ticks: \"dimgray\",\n        grid: \"lightgray\",\n        head: \"red\",\n        blackPlayer: \"royalblue\",\n        whitePlayer: \"darkorange\",\n        researcher: \"darkgreen\",\n      };\n    case Thema.DARK:\n      return {\n        main: \"white\",\n        ticks: \"darkgray\",\n        grid: \"dimgray\",\n        head: \"red\",\n        blackPlayer: \"deepskyblue\",\n        whitePlayer: \"orange\",\n        researcher: \"mediumseagreen\",\n      };\n  }\n}\n\nexport enum EvaluationChartType {\n  RAW = \"raw\",\n  WIN_RATE = \"winRate\",\n}\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n    type: {\n      type: String as PropType<EvaluationChartType>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n    let maxScore = MAX_SCORE;\n    let minScore = MIN_SCORE;\n    if (props.type === EvaluationChartType.WIN_RATE) {\n      maxScore = 100;\n      minScore = 0;\n    }\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: ImmutableRecord,\n      appSetting: AppSetting\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((node) => {\n        const data = new RecordCustomData(node.customData);\n        let value = data.evaluation && data.evaluation[sender];\n        if (value !== undefined) {\n          switch (props.type) {\n            case EvaluationChartType.RAW:\n              value = Math.min(Math.max(value, MIN_SCORE), MAX_SCORE);\n              break;\n            case EvaluationChartType.WIN_RATE:\n              value = scoreToPercentage(value, appSetting);\n              break;\n          }\n          dataPoints.push({\n            x: node.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: ImmutableRecord, palette: ColorPalette) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: palette.head,\n        data: [\n          { x: record.current.number, y: maxScore },\n          { x: record.current.number, y: minScore },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (\n      record: ImmutableRecord,\n      appSetting: AppSetting,\n      palette: ColorPalette\n    ) => {\n      return [\n        verticalLine(record, palette),\n        buildDataset(\n          palette.blackPlayer,\n          USIInfoSender.BLACK_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(\n          palette.whitePlayer,\n          USIInfoSender.WHITE_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(\n          palette.researcher,\n          USIInfoSender.RESEARCHER,\n          record,\n          appSetting\n        ),\n      ];\n    };\n\n    const buildScalesOption = (\n      record: ImmutableRecord,\n      palette: ColorPalette\n    ) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n          ticks: { color: palette.ticks },\n          grid: { color: palette.grid },\n        },\n        y: {\n          min: minScore,\n          max: maxScore,\n          ticks: { color: palette.ticks },\n          grid: { color: palette.grid },\n        },\n      };\n    };\n\n    const updateChart = (record: ImmutableRecord, appSetting: AppSetting) => {\n      const palette = getColorPalette(appSetting.thema);\n      chart.data.datasets = buildDatasets(record, appSetting, palette);\n      chart.options.color = palette.main;\n      chart.options.scales = buildScalesOption(record, palette);\n      chart.update();\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.changeMoveNumber(number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: [],\n        },\n        options: {\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.record, store.appSetting],\n      ([record, appSetting]) =>\n        updateChart(record as ImmutableRecord, appSetting as AppSetting),\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=dbdea358&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=dbdea358&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dbdea358\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1fb9186d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"element\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"key\" }, \"ファイル\", -1))\nconst _hoisted_3 = { class: \"value\" }\nconst _hoisted_4 = { class: \"key\" }\nconst _hoisted_5 = [\"value\", \"onInput\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      ref: \"root\",\n      class: \"root\",\n      style: _normalizeStyle(`height:${_ctx.size.height}px`)\n    }, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.filePath || \"（新規棋譜）\"), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.list, (element) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: element.key,\n          class: \"element\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(element.displayName), 1),\n          _createElementVNode(\"input\", {\n            class: \"value\",\n            value: element.value,\n            onInput: ($event: any) => (_ctx.change($event, element.key))\n          }, null, 40, _hoisted_5)\n        ]))\n      }), 128))\n    ], 4)\n  ]))\n}","\nimport { getStandardMetadataDisplayName, RecordMetadataKey } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, Ref, ref } from \"vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const root: Ref = ref(null);\n    const store = useStore();\n    const filePath = computed(() => store.recordFilePath);\n    const list = computed(() => {\n      return Object.values(RecordMetadataKey).map((key) => {\n        const metadata = store.record.metadata;\n        return {\n          key: key,\n          displayName: getStandardMetadataDisplayName(key),\n          value: metadata.getStandardMetadata(key) || \"\",\n        };\n      });\n    });\n\n    onMounted(() => {\n      root.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      root.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    const change = (event: Event, key: RecordMetadataKey) => {\n      const input = event.target as HTMLInputElement;\n      store.updateStandardRecordMetadata({\n        key,\n        value: input.value,\n      });\n    };\n\n    return {\n      root,\n      filePath,\n      list,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordInfo.vue?vue&type=template&id=1fb9186d&scoped=true&ts=true\"\nimport script from \"./RecordInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordInfo.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordInfo.vue?vue&type=style&index=0&id=1fb9186d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fb9186d\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/tab/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/tab/EngineAnalytics.vue\";\nimport EvaluationChart, {\n  EvaluationChartType,\n} from \"@/components/tab/EvaluationChart.vue\";\nimport RecordInfo from \"@/components/tab/RecordInfo.vue\";\nimport { useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Tab } from \"@/settings/app\";\nimport { Icon } from \"@/assets/icons\";\nimport api from \"@/ipc/api\";\nimport { LogLevel } from \"@/ipc/log\";\nimport { toString } from \"@/helpers/string\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"TabPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    RecordInfo,\n    ButtonIcon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: Tab) => {\n      store\n        .updateAppSetting({\n          tab: id,\n        })\n        .catch((e) => {\n          api.log(LogLevel.WARN, toString(e));\n        });\n    };\n    const activeTab = computed(() => store.appSetting.tab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      headerHeight,\n      changeSelect,\n      Icon,\n      Tab,\n      EvaluationChartType,\n    };\n  },\n});\n","import { render } from \"./TabPane.vue?vue&type=template&id=a0779d9e&scoped=true&ts=true\"\nimport script from \"./TabPane.vue?vue&type=script&lang=ts\"\nexport * from \"./TabPane.vue?vue&type=script&lang=ts\"\n\nimport \"./TabPane.vue?vue&type=style&index=0&id=a0779d9e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a0779d9e\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport TabPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minTabHeight,\n} from \"./TabPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { Tab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    TabPane,\n  },\n  setup() {\n    const windowSize = reactive(new RectSize(0, 0));\n    const boardPaneSize = ref(new RectSize(0, 0));\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n    });\n\n    const onBoardPaneResize = (size: RectSize) => {\n      boardPaneSize.value = size;\n    };\n\n    const boardPaneMaxSize = computed(() => {\n      const minTabPaneHeight =\n        useStore().appSetting.tab !== Tab.INVISIBLE\n          ? minTabHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minTabPaneHeight\n      );\n    });\n\n    const recordPaneStyle = computed(() => {\n      return {\n        width: `${windowSize.width - boardPaneSize.value.width}px`,\n        height: `${boardPaneSize.value.height}px`,\n      };\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - boardPaneSize.value.height\n      );\n    });\n\n    return {\n      boardPaneMaxSize,\n      recordPaneStyle,\n      bottomPaneSize,\n      onBoardPaneResize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=c97084ae&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=c97084ae&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c97084ae\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c5c0e252\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_7 = { class: \"player\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_9 = { class: \"players-control\" }\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 先後入れ替え \")\nconst _hoisted_11 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_12 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_13 = { class: \"dialog-form-item\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_15 = {\n  ref: \"hours\",\n  class: \"time-input\",\n  type: \"number\",\n  min: \"0\",\n  max: \"99\",\n  step: \"1\"\n}\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_17 = {\n  ref: \"minutes\",\n  class: \"time-input\",\n  type: \"number\",\n  min: \"0\",\n  max: \"59\",\n  step: \"1\"\n}\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_19 = { class: \"dialog-form-item\" }\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_21 = {\n  ref: \"byoyomi\",\n  class: \"time-input single\",\n  type: \"number\",\n  min: \"0\",\n  max: \"60\",\n  step: \"1\"\n}\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_23 = { class: \"dialog-form-item\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_25 = {\n  ref: \"increment\",\n  class: \"time-input single\",\n  type: \"number\",\n  min: \"0\",\n  max: \"99\",\n  step: \"1\"\n}\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_27 = { class: \"dialog-form-area flags\" }\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = { ref: \"startPosition\" }\nconst _hoisted_30 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-c5c0e252>現在の局面</option><option value=\\\"standard\\\" data-v-c5c0e252>平手</option><option value=\\\"handicapLance\\\" data-v-c5c0e252>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-c5c0e252>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-c5c0e252>角落ち</option><option value=\\\"handicapRook\\\" data-v-c5c0e252>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-c5c0e252>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-c5c0e252>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-c5c0e252>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-c5c0e252>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-c5c0e252>8枚落ち</option>\", 11)\nconst _hoisted_41 = [\n  _hoisted_30\n]\nconst _hoisted_42 = { class: \"dialog-form-item\" }\nconst _hoisted_43 = {\n  id: \"disable-engine-timeout\",\n  ref: \"enableEngineTimeout\",\n  type: \"checkbox\"\n}\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_45 = { class: \"dialog-form-item\" }\nconst _hoisted_46 = {\n  id: \"human-is-front\",\n  ref: \"humanIsFront\",\n  type: \"checkbox\"\n}\nconst _hoisted_47 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"人を手前に表示する\", -1))\nconst _hoisted_48 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createVNode(_component_PlayerSelector, {\n              players: _ctx.players,\n              \"player-uri\": _ctx.blackPlayerURI,\n              \"engine-settings\": _ctx.engineSettings.json,\n              \"display-ponder-state\": true,\n              \"display-thread-state\": true,\n              \"display-multi-pv-state\": true,\n              onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n              onSelectPlayer: _ctx.onSelectBlackPlayer\n            }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _hoisted_8,\n            (_ctx.whitePlayerURI)\n              ? (_openBlock(), _createBlock(_component_PlayerSelector, {\n                  key: 0,\n                  players: _ctx.players,\n                  \"player-uri\": _ctx.whitePlayerURI,\n                  \"engine-settings\": _ctx.engineSettings.json,\n                  \"display-ponder-state\": true,\n                  \"display-thread-state\": true,\n                  \"display-multi-pv-state\": true,\n                  onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n                  onSelectPlayer: _ctx.onSelectWhitePlayer\n                }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"]))\n              : _createCommentVNode(\"\", true)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SWAP_H\n            }, null, 8, [\"icon\"]),\n            _hoisted_10\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createElementVNode(\"div\", _hoisted_13, [\n            _hoisted_14,\n            _createElementVNode(\"input\", _hoisted_15, null, 512),\n            _hoisted_16,\n            _createElementVNode(\"input\", _hoisted_17, null, 512),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"div\", _hoisted_19, [\n            _hoisted_20,\n            _createElementVNode(\"input\", _hoisted_21, null, 512),\n            _hoisted_22\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _hoisted_24,\n            _createElementVNode(\"input\", _hoisted_25, null, 512),\n            _hoisted_26\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_27, [\n          _createElementVNode(\"div\", _hoisted_28, [\n            _createElementVNode(\"select\", _hoisted_29, _hoisted_41, 512)\n          ]),\n          _createElementVNode(\"div\", _hoisted_42, [\n            _createElementVNode(\"input\", _hoisted_43, null, 512),\n            _hoisted_44\n          ]),\n          _createElementVNode(\"div\", _hoisted_45, [\n            _createElementVNode(\"input\", _hoisted_46, null, 512),\n            _hoisted_47\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_48, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","export function readInputAsNumber(input: HTMLInputElement): number {\n  let value = Number(input.value);\n  if (input.max) {\n    value = Math.min(value, Number(input.max));\n  }\n  if (input.min) {\n    value = Math.max(value, Number(input.min));\n  }\n  return value;\n}\n","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7083fac1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = [\"value\"]\nconst _hoisted_4 = {\n  key: 0,\n  class: \"player-info\"\n}\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"先読み(Ponder):\", -1))\nconst _hoisted_6 = { class: \"player-info-value\" }\nconst _hoisted_7 = {\n  key: 1,\n  class: \"player-info\"\n}\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"スレッド数:\", -1))\nconst _hoisted_9 = { class: \"player-info-value\" }\nconst _hoisted_10 = {\n  key: 2,\n  class: \"player-info\"\n}\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"マルチPV:\", -1))\nconst _hoisted_12 = { class: \"player-info-value\" }\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" 設定 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"select\", {\n          ref: \"playerSelect\",\n          class: \"player-select\",\n          size: \"1\",\n          value: _ctx.playerUri,\n          onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onPlayerChange && _ctx.onPlayerChange(...args)))\n        }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n            return (_openBlock(), _createElementBlock(\"option\", {\n              key: player.uri,\n              value: player.uri\n            }, _toDisplayString(player.name), 9, _hoisted_3))\n          }), 128))\n        ], 40, _hoisted_2),\n        (_ctx.displayPonderState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n              _hoisted_5,\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.ponderState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_ctx.displayThreadState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n              _hoisted_8,\n              _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_ctx.threadState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_ctx.displayMultiPvState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n              _hoisted_11,\n              _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_ctx.multiPVState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"button\", {\n          class: \"player-setting\",\n          disabled: !_ctx.isPlayerSettingEnabled,\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.openPlayerSetting && _ctx.openPlayerSetting(...args)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.SETTINGS\n          }, null, 8, [\"icon\"]),\n          _hoisted_14\n        ], 8, _hoisted_13)\n      ])\n    ]),\n    (_ctx.engineSettingDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.engineSettingDialog,\n          \"ok-button-text\": \"保存\",\n          onOk: _ctx.savePlayerSetting,\n          onCancel: _ctx.closePlayerSetting\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-01e76537\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  ref: \"engineNameInput\",\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: option.name,\n            class: \"option\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, _toDisplayString(_ctx.okButtonText), 1),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport api from \"@/ipc/api\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      required: true,\n    },\n    okButtonText: {\n      type: String,\n      required: false,\n      default: \"OK\",\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.retainBussyState();\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await api.getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.pushError(e);\n        context.emit(\"cancel\");\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.retainBussyState();\n      try {\n        const path = await api.showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.retainBussyState();\n      try {\n        await api.sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? readInputAsNumber(elem as HTMLInputElement)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=01e76537&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=01e76537&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01e76537\"]])\n\nexport default __exports__","\nimport { computed, defineComponent, PropType, Ref, ref } from \"vue\";\nimport * as uri from \"@/uri\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  USIEngineSetting,\n  USIEngineSettings,\n  USIPonder,\n  USIMultiPV,\n  Threads,\n  NumberOfThreads,\n  MultiPV,\n} from \"@/settings/usi\";\n\ntype Player = {\n  name: string;\n  uri: string;\n};\n\nexport default defineComponent({\n  name: \"PlayerSelector\",\n  components: {\n    ButtonIcon,\n    USIEngineOptionDialog,\n  },\n  props: {\n    players: {\n      type: Array as PropType<Player[]>,\n      required: true,\n    },\n    playerUri: {\n      type: String,\n      required: true,\n    },\n    engineSettings: {\n      type: String,\n      required: true,\n    },\n    displayPonderState: {\n      type: Boolean,\n      default: false,\n    },\n    displayThreadState: {\n      type: Boolean,\n      default: false,\n    },\n    displayMultiPvState: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  emits: [\"select-player\", \"update-engine-setting\"],\n  setup(props, context) {\n    const playerSelect: Ref = ref(null);\n    const engineSettingDialog: Ref<USIEngineSetting | null> = ref(null);\n\n    const ponderState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      return getUSIEngineOptionCurrentValue(engine.options[USIPonder]) ===\n        \"true\"\n        ? \"ON\"\n        : \"OFF\";\n    });\n\n    const threadState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      const threads =\n        getUSIEngineOptionCurrentValue(engine.options[Threads]) ||\n        getUSIEngineOptionCurrentValue(engine.options[NumberOfThreads]);\n      return threads;\n    });\n\n    const multiPVState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      const multiPV =\n        getUSIEngineOptionCurrentValue(engine.options[USIMultiPV]) ||\n        getUSIEngineOptionCurrentValue(engine.options[MultiPV]);\n      return multiPV;\n    });\n\n    const isPlayerSettingEnabled = computed(() => {\n      return uri.isUSIEngine(props.playerUri);\n    });\n\n    const openPlayerSetting = () => {\n      if (uri.isUSIEngine(props.playerUri)) {\n        const settings = new USIEngineSettings(props.engineSettings);\n        const engine = settings.getEngine(props.playerUri);\n        engineSettingDialog.value = engine;\n      }\n    };\n\n    const savePlayerSetting = (setting: USIEngineSetting) => {\n      engineSettingDialog.value = null;\n      context.emit(\"update-engine-setting\", setting);\n    };\n\n    const closePlayerSetting = () => {\n      engineSettingDialog.value = null;\n    };\n\n    const onPlayerChange = () => {\n      context.emit(\"select-player\", playerSelect.value.value);\n    };\n\n    return {\n      playerSelect,\n      ponderState,\n      threadState,\n      multiPVState,\n      isPlayerSettingEnabled,\n      engineSettingDialog,\n      onPlayerChange,\n      openPlayerSetting,\n      savePlayerSetting,\n      closePlayerSetting,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./PlayerSelector.vue?vue&type=template&id=7083fac1&scoped=true&ts=true\"\nimport script from \"./PlayerSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./PlayerSelector.vue?vue&type=script&lang=ts\"\n\nimport \"./PlayerSelector.vue?vue&type=style&index=0&id=7083fac1&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7083fac1\"]])\n\nexport default __exports__","\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed, onUpdated } from \"vue\";\nimport api from \"@/ipc/api\";\nimport { useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { Icon } from \"@/assets/icons\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    ButtonIcon,\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const blackPlayerURI = ref(\"\");\n    const whitePlayerURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      try {\n        gameSetting.value = await api.loadGameSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        blackPlayerURI.value = gameSetting.value.black.uri;\n        whitePlayerURI.value = gameSetting.value.white.uri;\n        showModalDialog(dialog.value);\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    let defaultValueApplied = false;\n    onUpdated(() => {\n      if (!defaultValueApplied) {\n        hours.value.value = Math.floor(\n          gameSetting.value.timeLimit.timeSeconds / 3600\n        );\n        minutes.value.value =\n          Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60;\n        byoyomi.value.value = gameSetting.value.timeLimit.byoyomi;\n        increment.value.value = gameSetting.value.timeLimit.increment;\n        startPosition.value.value =\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\";\n        enableEngineTimeout.value.checked =\n          gameSetting.value.enableEngineTimeout;\n        humanIsFront.value.checked = gameSetting.value.humanIsFront;\n        defaultValueApplied = true;\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (uri.isUSIEngine(playerURI)) {\n        const engine = engineSettings.value.getEngine(playerURI);\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerURI.value),\n        white: buildPlayerSetting(whitePlayerURI.value),\n        timeLimit: {\n          timeSeconds:\n            (readInputAsNumber(hours.value) * 60 +\n              readInputAsNumber(minutes.value)) *\n            60,\n          byoyomi: readInputAsNumber(byoyomi.value),\n          increment: readInputAsNumber(increment.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        humanIsFront: humanIsFront.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.pushError(error);\n      } else {\n        store.startGame(gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectBlackPlayer = (uri: string) => {\n      blackPlayerURI.value = uri;\n    };\n    const onSelectWhitePlayer = (uri: string) => {\n      whitePlayerURI.value = uri;\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerURI.value, whitePlayerURI.value] = [\n        whitePlayerURI.value,\n        blackPlayerURI.value,\n      ];\n    };\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSettings.value.engineList,\n      ];\n    });\n\n    return {\n      dialog,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      humanIsFront,\n      engineSettings,\n      blackPlayerURI,\n      whitePlayerURI,\n      players,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectBlackPlayer,\n      onSelectWhitePlayer,\n      onSwapColor,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=c5c0e252&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=c5c0e252&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c5c0e252\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-34690848\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"root\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_PlayerSelector, {\n            players: _ctx.engines,\n            \"player-uri\": _ctx.engineURI,\n            \"engine-settings\": _ctx.engineSettings.json,\n            \"display-thread-state\": true,\n            \"display-multi-pv-state\": true,\n            onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n            onSelectPlayer: _ctx.onSelectPlayer\n          }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport api from \"@/ipc/api\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  components: {\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const engineURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await api.loadResearchSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        engineURI.value = researchSetting.value.usi?.uri || \"\";\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const engines = computed(() => engineSettings.value.engineList);\n\n    const onStart = () => {\n      if (\n        !engineURI.value ||\n        !engineSettings.value.hasEngine(engineURI.value)\n      ) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engineSetting = engineSettings.value.getEngine(engineURI.value);\n      const researchSetting: ResearchSetting = {\n        usi: engineSetting,\n      };\n      store.startResearch(researchSetting);\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectPlayer = (uri: string) => {\n      engineURI.value = uri;\n    };\n\n    return {\n      dialog,\n      engineSettings,\n      engineURI,\n      engines,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectPlayer,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=34690848&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=34690848&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-34690848\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ca1beda\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: engine.uri,\n              class: \"engine\",\n              value: engine.uri\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \"設定\", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.duplicate(engine.uri))\n              }, \"複製\", 8, _hoisted_8),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \"削除\", 8, _hoisted_9)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","\nimport api from \"@/ipc/api\";\nimport {\n  duplicateEngineSetting,\n  USIEngineSetting,\n  USIEngineSettings,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await api.loadUSIEngineSetting();\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.retainBussyState();\n        const path = await api.showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await api.getUSIEngineInfo(path));\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const duplicate = (uri: string) => {\n      const src = setting.value.getEngine(uri);\n      const engine = duplicateEngineSetting(src);\n      setting.value.addEngine(engine);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.retainBussyState();\n        await api.saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.closeModalDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeModalDialog();\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      duplicate,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=9ca1beda&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=9ca1beda&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9ca1beda\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4393f78a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"section\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"外観\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"テーマ\", -1))\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = [\"value\"]\nconst _hoisted_10 = { class: \"dialog-form-item\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒画像\", -1))\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"盤画像\", -1))\nconst _hoisted_16 = [\"value\"]\nconst _hoisted_17 = [\"value\"]\nconst _hoisted_18 = { class: \"dialog-form-item\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"段・筋を表示\", -1))\nconst _hoisted_20 = [\"checked\"]\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", { class: \"separator\" }, null, -1))\nconst _hoisted_22 = { class: \"section\" }\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"音\", -1))\nconst _hoisted_24 = { class: \"dialog-form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_26 = [\"value\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_30 = [\"value\"]\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_34 = [\"value\"]\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_36 = { class: \"dialog-form-item\" }\nconst _hoisted_37 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_38 = [\"value\"]\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_40 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_41 = [\n  _hoisted_39,\n  _hoisted_40\n]\nconst _hoisted_42 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", { class: \"separator\" }, null, -1))\nconst _hoisted_43 = { class: \"section\" }\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"ファイル\", -1))\nconst _hoisted_45 = { class: \"dialog-form-item\" }\nconst _hoisted_46 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"改行文字\", -1))\nconst _hoisted_47 = [\"value\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"crlf\" }, \"CR + LF (Windows)\", -1))\nconst _hoisted_49 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"lf\" }, \"LF (UNIX/Mac)\", -1))\nconst _hoisted_50 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"cr\" }, \"CR (90年代Mac)\", -1))\nconst _hoisted_51 = [\n  _hoisted_48,\n  _hoisted_49,\n  _hoisted_50\n]\nconst _hoisted_52 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", { class: \"separator\" }, null, -1))\nconst _hoisted_53 = { class: \"section\" }\nconst _hoisted_54 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"評価値・期待勝率\", -1))\nconst _hoisted_55 = { class: \"dialog-form-item\" }\nconst _hoisted_56 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"勝率換算係数\", -1))\nconst _hoisted_57 = [\"value\"]\nconst _hoisted_58 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"(推奨: 600 から 1500 まで)\", -1))\nconst _hoisted_59 = { class: \"dialog-form-item\" }\nconst _hoisted_60 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"緩手の閾値\", -1))\nconst _hoisted_61 = [\"value\"]\nconst _hoisted_62 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_63 = { class: \"dialog-form-item\" }\nconst _hoisted_64 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"疑問手の閾値\", -1))\nconst _hoisted_65 = [\"value\"]\nconst _hoisted_66 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_67 = { class: \"dialog-form-item\" }\nconst _hoisted_68 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"悪手の閾値\", -1))\nconst _hoisted_69 = [\"value\"]\nconst _hoisted_70 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_71 = { class: \"dialog-form-item\" }\nconst _hoisted_72 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"大悪手の閾値\", -1))\nconst _hoisted_73 = [\"value\"]\nconst _hoisted_74 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_75 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", { class: \"separator\" }, null, -1))\nconst _hoisted_76 = { class: \"section\" }\nconst _hoisted_77 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"開発者向け\", -1))\nconst _hoisted_78 = { class: \"dialog-form-item\" }\nconst _hoisted_79 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"アプリログを出力\", -1))\nconst _hoisted_80 = [\"checked\"]\nconst _hoisted_81 = {\n  key: 0,\n  class: \"dialog-form-item-unit\"\n}\nconst _hoisted_82 = {\n  key: 1,\n  class: \"dialog-form-item-unit\"\n}\nconst _hoisted_83 = { class: \"dialog-form-item\" }\nconst _hoisted_84 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"USI通信ログを出力\", -1))\nconst _hoisted_85 = [\"checked\"]\nconst _hoisted_86 = {\n  key: 0,\n  class: \"dialog-form-item-unit\"\n}\nconst _hoisted_87 = {\n  key: 1,\n  class: \"dialog-form-item-unit\"\n}\nconst _hoisted_88 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"select\", {\n              ref: \"thema\",\n              value: _ctx.appSetting.thema\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.themaOptions, (themaOption) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: themaOption.value,\n                  value: themaOption.value\n                }, _toDisplayString(themaOption.name), 9, _hoisted_9))\n              }), 128))\n            ], 8, _hoisted_8)\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _hoisted_11,\n            _createElementVNode(\"select\", {\n              ref: \"pieceImage\",\n              value: _ctx.appSetting.pieceImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pieceImageTypes, (pieceImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: pieceImageType.value,\n                  value: pieceImageType.value\n                }, _toDisplayString(pieceImageType.name), 9, _hoisted_13))\n              }), 128))\n            ], 8, _hoisted_12)\n          ]),\n          _createElementVNode(\"div\", _hoisted_14, [\n            _hoisted_15,\n            _createElementVNode(\"select\", {\n              ref: \"boardImage\",\n              value: _ctx.appSetting.boardImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardImageTypes, (boardImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: boardImageType.value,\n                  value: boardImageType.value\n                }, _toDisplayString(boardImageType.name), 9, _hoisted_17))\n              }), 128))\n            ], 8, _hoisted_16)\n          ]),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _hoisted_19,\n            _createElementVNode(\"input\", {\n              ref: \"displayBoardLabels\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.boardLabelType != _ctx.BoardLabelType.NONE,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_20)\n          ])\n        ]),\n        _hoisted_21,\n        _createElementVNode(\"div\", _hoisted_22, [\n          _hoisted_23,\n          _createElementVNode(\"div\", _hoisted_24, [\n            _hoisted_25,\n            _createElementVNode(\"input\", {\n              ref: \"pieceVolume\",\n              value: _ctx.appSetting.pieceVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_26),\n            _hoisted_27\n          ]),\n          _createElementVNode(\"div\", _hoisted_28, [\n            _hoisted_29,\n            _createElementVNode(\"input\", {\n              ref: \"clockVolume\",\n              value: _ctx.appSetting.clockVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_30),\n            _hoisted_31\n          ]),\n          _createElementVNode(\"div\", _hoisted_32, [\n            _hoisted_33,\n            _createElementVNode(\"input\", {\n              ref: \"clockPitch\",\n              value: _ctx.appSetting.clockPitch,\n              type: \"number\",\n              max: \"880\",\n              min: \"220\"\n            }, null, 8, _hoisted_34),\n            _hoisted_35\n          ]),\n          _createElementVNode(\"div\", _hoisted_36, [\n            _hoisted_37,\n            _createElementVNode(\"select\", {\n              ref: \"clockSoundTarget\",\n              value: _ctx.appSetting.clockSoundTarget\n            }, _hoisted_41, 8, _hoisted_38)\n          ])\n        ]),\n        _hoisted_42,\n        _createElementVNode(\"div\", _hoisted_43, [\n          _hoisted_44,\n          _createElementVNode(\"div\", _hoisted_45, [\n            _hoisted_46,\n            _createElementVNode(\"select\", {\n              ref: \"returnCode\",\n              value: _ctx.appSetting.returnCode\n            }, _hoisted_51, 8, _hoisted_47)\n          ])\n        ]),\n        _hoisted_52,\n        _createElementVNode(\"div\", _hoisted_53, [\n          _hoisted_54,\n          _createElementVNode(\"div\", _hoisted_55, [\n            _hoisted_56,\n            _createElementVNode(\"input\", {\n              ref: \"coefficientInSigmoid\",\n              value: _ctx.appSetting.coefficientInSigmoid,\n              type: \"number\",\n              max: \"10000\",\n              min: \"1\"\n            }, null, 8, _hoisted_57),\n            _hoisted_58\n          ]),\n          _createElementVNode(\"div\", _hoisted_59, [\n            _hoisted_60,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold1\",\n              value: _ctx.appSetting.badMoveLevelThreshold1,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_61),\n            _hoisted_62\n          ]),\n          _createElementVNode(\"div\", _hoisted_63, [\n            _hoisted_64,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold2\",\n              value: _ctx.appSetting.badMoveLevelThreshold2,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_65),\n            _hoisted_66\n          ]),\n          _createElementVNode(\"div\", _hoisted_67, [\n            _hoisted_68,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold3\",\n              value: _ctx.appSetting.badMoveLevelThreshold3,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_69),\n            _hoisted_70\n          ]),\n          _createElementVNode(\"div\", _hoisted_71, [\n            _hoisted_72,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold4\",\n              value: _ctx.appSetting.badMoveLevelThreshold4,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_73),\n            _hoisted_74\n          ])\n        ]),\n        _hoisted_75,\n        _createElementVNode(\"div\", _hoisted_76, [\n          _hoisted_77,\n          _createElementVNode(\"div\", _hoisted_78, [\n            _hoisted_79,\n            _createElementVNode(\"input\", {\n              ref: \"enableAppLog\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.enableAppLog,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_80),\n            (_ctx.isNative)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_81, \" （再起動後に反映） \"))\n              : _createCommentVNode(\"\", true),\n            (!_ctx.isNative)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_82, \" （ブラウザ版では機能しません） \"))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _createElementVNode(\"div\", _hoisted_83, [\n            _hoisted_84,\n            _createElementVNode(\"input\", {\n              ref: \"enableUSILog\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.enableUSILog,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_85),\n            (_ctx.isNative)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_86, \" （再起動後に反映） \"))\n              : _createCommentVNode(\"\", true),\n            (!_ctx.isNative)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_87, \" （ブラウザ版では機能しません） \"))\n              : _createCommentVNode(\"\", true)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_88, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport {\n  PieceImageType,\n  BoardImageType,\n  BoardLabelType,\n} from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate, Thema } from \"@/settings/app\";\nimport { useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/api\";\n\nconst returnCodeToName: { [name: string]: string } = {\n  \"\\r\\n\": \"crlf\",\n  \"\\n\": \"lf\",\n  \"\\r\": \"cr\",\n};\n\nconst nameToReturnCode: { [name: string]: string } = {\n  crlf: \"\\r\\n\",\n  lf: \"\\n\",\n  cr: \"\\r\",\n};\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const thema: Ref = ref(null);\n    const pieceImage: Ref = ref(null);\n    const boardImage: Ref = ref(null);\n    const displayBoardLabels: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n    const returnCode: Ref = ref(null);\n    const coefficientInSigmoid: Ref = ref(null);\n    const badMoveLevelThreshold1: Ref = ref(null);\n    const badMoveLevelThreshold2: Ref = ref(null);\n    const badMoveLevelThreshold3: Ref = ref(null);\n    const badMoveLevelThreshold4: Ref = ref(null);\n    const enableAppLog: Ref = ref(null);\n    const enableUSILog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        thema: thema.value.value,\n        pieceImage: pieceImage.value.value,\n        boardImage: boardImage.value.value,\n        boardLabelType: displayBoardLabels.value.checked\n          ? BoardLabelType.STANDARD\n          : BoardLabelType.NONE,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n        returnCode: nameToReturnCode[returnCode.value.value],\n        coefficientInSigmoid: readInputAsNumber(coefficientInSigmoid.value),\n        badMoveLevelThreshold1: readInputAsNumber(badMoveLevelThreshold1.value),\n        badMoveLevelThreshold2: readInputAsNumber(badMoveLevelThreshold2.value),\n        badMoveLevelThreshold3: readInputAsNumber(badMoveLevelThreshold3.value),\n        badMoveLevelThreshold4: readInputAsNumber(badMoveLevelThreshold4.value),\n        enableAppLog: enableAppLog.value.checked,\n        enableUSILog: enableUSILog.value.checked,\n      };\n      store.retainBussyState();\n      try {\n        await store.updateAppSetting(update);\n        store.closeAppSettingDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeAppSettingDialog();\n    };\n\n    const appSetting = computed(() => {\n      return {\n        ...store.appSetting,\n        returnCode: returnCodeToName[store.appSetting.returnCode],\n      };\n    });\n\n    const themaOptions = [\n      {\n        name: \"標準（緑）\",\n        value: Thema.STANDARD,\n      },\n      {\n        name: \"桜\",\n        value: Thema.CHERRY_BLOSSOM,\n      },\n      {\n        name: \"ダーク\",\n        value: Thema.DARK,\n      },\n    ];\n\n    const pieceImageTypes = [\n      {\n        name: \"一文字駒\",\n        value: PieceImageType.HITOMOJI,\n      },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: PieceImageType.HITOMOJI_GOTHIC,\n      },\n      {\n        name: \"一文字駒（ダーク）\",\n        value: PieceImageType.HITOMOJI_DARK,\n      },\n      {\n        name: \"一文字駒（ゴシック体・ダーク）\",\n        value: PieceImageType.HITOMOJI_GOTHIC_DARK,\n      },\n    ];\n\n    const boardImageTypes = [\n      {\n        name: \"木目（明るい）\",\n        value: BoardImageType.LIGHT,\n      },\n      {\n        name: \"木目（暖かい）\",\n        value: BoardImageType.WARM,\n      },\n      {\n        name: \"塩化ビニル\",\n        value: BoardImageType.RESIN,\n      },\n      {\n        name: \"ダーク\",\n        value: BoardImageType.DARK,\n      },\n    ];\n\n    return {\n      BoardLabelType,\n      dialog,\n      thema,\n      pieceImage,\n      boardImage,\n      displayBoardLabels,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      returnCode,\n      coefficientInSigmoid,\n      badMoveLevelThreshold1,\n      badMoveLevelThreshold2,\n      badMoveLevelThreshold3,\n      badMoveLevelThreshold4,\n      enableAppLog,\n      enableUSILog,\n      appSetting,\n      themaOptions,\n      pieceImageTypes,\n      boardImageTypes,\n      isNative: isNative(),\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=4393f78a&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=4393f78a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4393f78a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4490b135\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜(または局面)を取り込みます。\", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"※KIF形式/CSA形式/SFENに対応しています。\", -1))\nconst _hoisted_6 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_10 = [\n  _hoisted_7,\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = { ref: \"textarea\" }\nconst _hoisted_12 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _hoisted_5,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _hoisted_10))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_11, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/api\";\nimport { useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.retainBussyState();\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.closeModalDialog();\n      if (data) {\n        store.pasteRecord(data);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=4490b135&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=4490b135&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4490b135\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-71bd87cb\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BUSSY\n        }, null, 8, [\"icon\"]),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"BussyMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BussyMessage.vue?vue&type=template&id=71bd87cb&scoped=true&ts=true\"\nimport script from \"./BussyMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./BussyMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./BussyMessage.vue?vue&type=style&index=0&id=71bd87cb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71bd87cb\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ae26b4e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"confirm\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.QUESTION\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onOk()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onClose()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { useStore } from \"@/store\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const message = computed(() => store.confirmation);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const onOk = () => {\n      store.confirmationOk();\n    };\n\n    const onClose = () => {\n      store.confirmationCancel();\n    };\n\n    return {\n      dialog,\n      message,\n      onOk,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=7ae26b4e&scoped=true&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ConfirmDialog.vue?vue&type=style&index=0&id=7ae26b4e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7ae26b4e\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2d54feb7\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"info\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.INFO\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.message);\n\n    const onClose = () => {\n      store.dequeueMessage();\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./InfoMessage.vue?vue&type=template&id=2d54feb7&scoped=true&ts=true\"\nimport script from \"./InfoMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./InfoMessage.vue?vue&type=style&index=0&id=2d54feb7&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2d54feb7\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a5cd743\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"error\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.ERROR\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: error.index,\n              class: \"item\"\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.errors.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.clearErrors();\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=1a5cd743&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=1a5cd743&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=1a5cd743&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a5cd743\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-155615cc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"root\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"棋譜解析\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"エンジン\", -1))\nconst _hoisted_5 = { class: \"dialog-form-item\" }\nconst _hoisted_6 = { class: \"dialog-form-area\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"開始条件\", -1))\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = [\"checked\"]\nconst _hoisted_10 = [\"disabled\", \"value\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目から\", -1))\nconst _hoisted_12 = { class: \"dialog-form-area\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"終了条件\", -1))\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = [\"checked\"]\nconst _hoisted_16 = [\"disabled\", \"value\"]\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目まで\", -1))\nconst _hoisted_18 = { class: \"dialog-form-area\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"局面ごとの終了条件\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒まで\", -1))\nconst _hoisted_23 = { class: \"dialog-form-area\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"出力設定\", -1))\nconst _hoisted_25 = { class: \"dialog-form-item\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-item-label\" }, \"指し手コメント:\", -1))\nconst _hoisted_27 = [\"value\"]\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"none\" }, \"出力しない\", -1))\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"insert\" }, \"前方に加筆する\", -1))\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"append\" }, \"末尾に加筆する\", -1))\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"overwrite\" }, \"上書きする\", -1))\nconst _hoisted_32 = [\n  _hoisted_28,\n  _hoisted_29,\n  _hoisted_30,\n  _hoisted_31\n]\nconst _hoisted_33 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createVNode(_component_PlayerSelector, {\n            players: _ctx.engines,\n            \"player-uri\": _ctx.engineURI,\n            \"engine-settings\": _ctx.engineSettings.json,\n            \"display-thread-state\": true,\n            \"display-multi-pv-state\": true,\n            onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n            onSelectPlayer: _ctx.onSelectPlayer\n          }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _hoisted_7,\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"input\", {\n            ref: \"enableStartNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableStartNumber,\n            onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_9),\n          _createElementVNode(\"input\", {\n            ref: \"startNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableStartNumber,\n            value: _ctx.defaultValues.startNumber\n          }, null, 8, _hoisted_10),\n          _hoisted_11\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _hoisted_13,\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"input\", {\n            ref: \"enableEndNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableEndNumber,\n            onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_15),\n          _createElementVNode(\"input\", {\n            ref: \"endNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableEndNumber,\n            value: _ctx.defaultValues.endNumber\n          }, null, 8, _hoisted_16),\n          _hoisted_17\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_18, [\n        _hoisted_19,\n        _createElementVNode(\"div\", _hoisted_20, [\n          _createElementVNode(\"input\", {\n            ref: \"maxSecondsPerMove\",\n            class: \"small\",\n            type: \"number\",\n            min: \"0\",\n            step: \"1\",\n            value: _ctx.defaultValues.maxSecondsPerMove\n          }, null, 8, _hoisted_21),\n          _hoisted_22\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_23, [\n        _hoisted_24,\n        _createElementVNode(\"div\", _hoisted_25, [\n          _hoisted_26,\n          _createElementVNode(\"select\", {\n            ref: \"commentBehavior\",\n            size: \"1\",\n            value: _ctx.defaultValues.commentBehavior\n          }, _hoisted_32, 8, _hoisted_27)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_33, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onStart()))\n        }, \"解析実行\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport api from \"@/ipc/api\";\nimport { AnalysisSetting, defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  components: {\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const enableStartNumber: Ref = ref(null);\n    const startNumber: Ref = ref(null);\n    const enableEndNumber: Ref = ref(null);\n    const endNumber: Ref = ref(null);\n    const maxSecondsPerMove: Ref = ref(null);\n    const commentBehavior: Ref = ref(null);\n    const analysisSetting = ref(defaultAnalysisSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const engineURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        analysisSetting.value = await api.loadAnalysisSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        engineURI.value = analysisSetting.value.usi?.uri || \"\";\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const updateToggle = () => {\n      startNumber.value.disabled = !enableStartNumber.value.checked;\n      endNumber.value.disabled = !enableEndNumber.value.checked;\n    };\n\n    const onStart = () => {\n      if (\n        !engineURI.value ||\n        !engineSettings.value.hasEngine(engineURI.value)\n      ) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSettings.value.getEngine(engineURI.value);\n      const analysisSetting: AnalysisSetting = {\n        usi: engine,\n        startCriteria: {\n          enableNumber: enableStartNumber.value.checked,\n          number: readInputAsNumber(startNumber.value),\n        },\n        endCriteria: {\n          enableNumber: enableEndNumber.value.checked,\n          number: readInputAsNumber(endNumber.value),\n        },\n        perMoveCriteria: {\n          maxSeconds: readInputAsNumber(maxSecondsPerMove.value),\n        },\n        commentBehavior: commentBehavior.value.value,\n      };\n      store.startAnalysis(analysisSetting);\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectPlayer = (uri: string) => {\n      engineURI.value = uri;\n    };\n\n    const engines = computed(() => engineSettings.value.engineList);\n\n    const defaultValues = computed(() => {\n      return {\n        enableStartNumber: analysisSetting.value.startCriteria.enableNumber,\n        startNumber: analysisSetting.value.startCriteria.number,\n        enableEndNumber: analysisSetting.value.endCriteria.enableNumber,\n        endNumber: analysisSetting.value.endCriteria.number,\n        maxSecondsPerMove: analysisSetting.value.perMoveCriteria.maxSeconds,\n        commentBehavior: analysisSetting.value.commentBehavior,\n      };\n    });\n\n    return {\n      dialog,\n      engineSettings,\n      engineURI,\n      enableStartNumber,\n      startNumber,\n      enableEndNumber,\n      endNumber,\n      maxSecondsPerMove,\n      commentBehavior,\n      engines,\n      defaultValues,\n      updateToggle,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectPlayer,\n    };\n  },\n});\n","import { render } from \"./AnalysisDialog.vue?vue&type=template&id=155615cc&scoped=true&ts=true\"\nimport script from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AnalysisDialog.vue?vue&type=style&index=0&id=155615cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-155615cc\"]])\n\nexport default __exports__","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport BussyMessage from \"@/components/dialog/BussyMessage.vue\";\nimport ConfirmDialog from \"@/components/dialog/ConfirmDialog.vue\";\nimport InfoMessage from \"@/components/dialog/InfoMessage.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\nimport AnalysisDialog from \"./components/dialog/AnalysisDialog.vue\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    BussyMessage,\n    ConfirmDialog,\n    InfoMessage,\n    ErrorMessage,\n    AnalysisDialog,\n  },\n  setup() {\n    const store = useStore();\n\n    const thema = computed(() => store.appSetting.thema);\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.appState === AppState.GAME_DIALOG,\n        research: store.appState === AppState.RESEARCH_DIALOG,\n        analysis: store.appState === AppState.ANALYSIS_DIALOG,\n        usiEngineSetting: store.appState === AppState.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.isAppSettingDialogVisible,\n        paste: store.appState === AppState.PASTE_DIALOG,\n        bussy: store.isBussy,\n        confirm: store.confirmation !== undefined,\n      };\n    });\n\n    const hasMessage = computed(() => store.hasMessage);\n\n    const hasErrors = computed(() => store.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.copyRecordKIF();\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.showPasteDialog();\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.openRecord(path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.changeMoveNumber(0);\n        },\n        onArrowRight(): void {\n          store.changeMoveNumber(Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      thema,\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=6e2058ba&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6e2058ba&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=6e2058ba&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6e2058ba\"]])\n\nexport default __exports__","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  COPY_RECORD_CSA = \"copyRecordCsa\",\n  COPY_RECORD_USI_BEFORE = \"copyRecordUsiBefore\",\n  COPY_RECORD_USI_ALL = \"copyRecordUsiAll\",\n  COPY_BOARD_SFEN = \"copyRecordSfen\",\n  PASTE_RECORD = \"pasteRecord\",\n  INSERT_INTERRUPT = \"insertInterrupt\",\n  INSERT_RESIGN = \"insertResign\",\n  INSERT_DRAW = \"insertDraw\",\n  INSERT_REPETITION_DRAW = \"insertRepetitionDraw\",\n  INSERT_MATE = \"insertMate\",\n  INSERT_TIMEOUT = \"insertTimeout\",\n  INSERT_FOUL_WIN = \"insertFoulWin\",\n  INSERT_FOUL_LOSE = \"insertFoulLose\",\n  INSERT_ENTERING_OF_KING = \"insertEnteringOfKing\",\n  INSERT_WIN_BY_DEFAULT = \"insertWinByDefault\",\n  INSERT_LOSS_BY_DEFAULT = \"insertLossByDefault\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  INIT_POSITION_TSUME_SHOGI_2KINGS = \"initPositionTsumeShogi2Kings\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_ANALYSIS = \"startAnalysis\",\n  STOP_ANALYSIS = \"stopAnalysis\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { watch } from \"vue\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { usiBestMove } from \"@/players/usi\";\nimport { humanPlayer } from \"@/players/human\";\nimport { bridge } from \"./api\";\nimport { MenuEvent } from \"./menu\";\nimport { USIInfoSender } from \"@/store/usi\";\nimport { AppState } from \"@/store/state\";\n\nexport function setup(): void {\n  const store = useStore();\n  bridge.onSendError((e: Error) => {\n    store.pushError(e);\n  });\n  bridge.onMenuEvent((event: MenuEvent) => {\n    if (store.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.newRecord();\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.openRecord();\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.saveRecord({ overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.saveRecord();\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.copyRecordKIF();\n        break;\n      case MenuEvent.COPY_RECORD_CSA:\n        store.copyRecordCSA();\n        break;\n      case MenuEvent.COPY_RECORD_USI_BEFORE:\n        store.copyRecordUSIBefore();\n        break;\n      case MenuEvent.COPY_RECORD_USI_ALL:\n        store.copyRecordUSIAll();\n        break;\n      case MenuEvent.COPY_BOARD_SFEN:\n        store.copyBoardSFEN();\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.showPasteDialog();\n        break;\n      case MenuEvent.INSERT_INTERRUPT:\n        store.insertSpecialMove(SpecialMove.INTERRUPT);\n        break;\n      case MenuEvent.INSERT_RESIGN:\n        store.insertSpecialMove(SpecialMove.RESIGN);\n        break;\n      case MenuEvent.INSERT_DRAW:\n        store.insertSpecialMove(SpecialMove.DRAW);\n        break;\n      case MenuEvent.INSERT_REPETITION_DRAW:\n        store.insertSpecialMove(SpecialMove.REPETITION_DRAW);\n        break;\n      case MenuEvent.INSERT_MATE:\n        store.insertSpecialMove(SpecialMove.MATE);\n        break;\n      case MenuEvent.INSERT_TIMEOUT:\n        store.insertSpecialMove(SpecialMove.TIMEOUT);\n        break;\n      case MenuEvent.INSERT_FOUL_WIN:\n        store.insertSpecialMove(SpecialMove.FOUL_WIN);\n        break;\n      case MenuEvent.INSERT_FOUL_LOSE:\n        store.insertSpecialMove(SpecialMove.FOUL_LOSE);\n        break;\n      case MenuEvent.INSERT_ENTERING_OF_KING:\n        store.insertSpecialMove(SpecialMove.ENTERING_OF_KING);\n        break;\n      case MenuEvent.INSERT_WIN_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.WIN_BY_DEFAULT);\n        break;\n      case MenuEvent.INSERT_LOSS_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.LOSS_BY_DEFAULT);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.removeRecordAfter();\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.startPositionEditing();\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.endPositionEditing();\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.changeTurn();\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.initializePosition(InitialPositionType.STANDARD);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI_2KINGS:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI_2KINGS);\n        break;\n      case MenuEvent.START_GAME:\n        store.showGameDialog();\n        break;\n      case MenuEvent.STOP_GAME:\n        store.stopGame();\n        break;\n      case MenuEvent.RESIGN:\n        humanPlayer.resign();\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.showResearchDialog();\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.stopResearch();\n        break;\n      case MenuEvent.START_ANALYSIS:\n        store.showAnalysisDialog();\n        break;\n      case MenuEvent.STOP_ANALYSIS:\n        store.stopAnalysis();\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.flipBoard();\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.showAppSettingDialog();\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.showUsiEngineManagementDialog();\n        break;\n    }\n  });\n  bridge.onUSIBestMove(\n    (sessionID: number, usi: string, sfen: string, ponder?: string) => {\n      usiBestMove(sessionID, usi, sfen, ponder);\n    }\n  );\n  bridge.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.updateUSIInfo(sessionID, usi, sender, name, JSON.parse(json));\n    }\n  );\n  bridge.onUSIPonderInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.updateUSIPonderInfo(sessionID, usi, sender, name, JSON.parse(json));\n    }\n  );\n  watch(\n    () => [store.appState, store.isBussy],\n    ([appState, bussy]) => {\n      bridge.updateMenuState(appState as AppState, bussy as boolean);\n    }\n  );\n  bridge.updateMenuState(store.appState, store.isBussy);\n}\n","import { createApp } from \"vue\";\nimport App from \"@/App.vue\";\nimport api from \"@/ipc/api\";\nimport { setup as setupIPC } from \"@/ipc/setup\";\nimport { useStore } from \"@/store\";\nimport { Chart, registerables } from \"chart.js\";\nimport { LogLevel } from \"@/ipc/log\";\n\napi.log(LogLevel.INFO, \"start renderer process\");\n\nChart.register(...registerables);\n\nsetupIPC();\n\nconst store = useStore();\nPromise.allSettled([\n  api\n    .loadAppSetting()\n    .then((setting) => {\n      store.updateAppSetting(setting);\n    })\n    .catch((e) => {\n      store.pushError(\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await api.getRecordPathFromProcArg();\n    if (path) {\n      store.openRecord(path);\n    }\n  })(),\n]).finally(() => {\n  api.log(LogLevel.INFO, \"mount app\");\n  createApp(App).mount(\"#app\");\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelectron_shogi\"] = self[\"webpackChunkelectron_shogi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(739); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_AnalysisDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_BussyMessage","_component_ConfirmDialog","_component_InfoMessage","_component_ErrorMessage","_openBlock","_createElementBlock","class","_normalizeClass","thema","_createVNode","dialogVisibilities","game","_createBlock","key","_createCommentVNode","research","analysis","usiEngineSetting","appSetting","paste","bussy","confirm","hasMessage","hasErrors","_hoisted_1","_hoisted_2","_component_BoardPane","_component_RecordPane","_component_TabPane","_createElementVNode","boardPaneMaxSize","onResize","onBoardPaneResize","style","_normalizeStyle","recordPaneStyle","size","bottomPaneSize","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_ButtonIcon","_component_BoardView","_component_FileMenu","_component_InitialPositionMenu","pieceImage","boardImage","boardLabelType","maxSize","position","lastMove","flip","boardFlipping","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","onGame","icon","Icon","GAME","stop","onStop","STOP","resign","onResign","RESIGN","onResearch","RESEARCH","endResearch","onEndResearch","END","onAnalysis","ANALYSIS","endAnalysis","onEndAnalysis","startEditPosition","onStartEditPosition","EDIT","endEditPosition","onEndEditPosition","CHECK","initPosition","onChangeTurn","SWAP","onInitPosition","onOpenAppSettings","SETTINGS","disabled","engineSettings","onOpenEngineSettings","ENGINE_SETTINGS","onFlip","FLIP","onFileAction","FILE","removeAfter","onRemoveAfter","DELETE","_","isFileMenuVisible","onClose","$event","isInitialPositionMenuVisible","layout","frame","clickFrame","board","src","imagePath","active","color","_toDisplayString","blackPlayerTimeSeverity","blackClock","blackPlayerTimeText","whitePlayerTimeSeverity","whiteClock","whitePlayerTimeText","_Fragment","_renderList","square","id","backgroundStyle","piece","labels","label","character","clickSquare","file","rank","onContextmenu","clickSquareR","blackHand","pointers","pointer","pieces","clickHand","Color","BLACK","type","whiteHand","WHITE","promotion","clickPromote","promoteImagePath","clickNotPromote","notPromoteImagePath","turn","control","left","_renderSlot","$slots","undefined","right","PieceType","reverseColor","colorToSFEN","isValidSFENColor","sfen","parseSFENColor","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","promotedPieceType","pieceType","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","p","l","n","s","g","b","r","k","sfenCharToColorMap","rotateMap","Map","set","Direction","Piece","this","withColor","get","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","MoveType","directions","movableDirectionMap","black","SHORT","LONG","white","movableDirections","Object","keys","resolveMoveType","direction","directionToDeltaMap","x","y","vectorToDirectionAndDistance","distance","ok","Math","abs","dx","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","arg0","arg1","index","trunc","all","push","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","from","to","promote","capturedPieceType","move","equals","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","length","InitialPositionType","sfenCharToNumber","Board","squares","Array","i","reset","STANDARD","square1","square2","tmp","removed","forEach","clear","EMPTY","TSUME_SHOGI","TSUME_SHOGI_2KINGS","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","at","newByXY","isValidSFEN","rows","split","c","find","target","option","step","neighbor","valid","filled","ignore","rdir","kingColor","findKing","hasPower","buildSFEN","Hand","count","handler","formatSFEN","hand","sfenBlack","w","sfenWhite","match","sections","section","Number","add","invalidRankMap","isInvalidRank","rule","isPromotableRank","pawnExists","Position","_board","_color","_blackHand","_whiteHand","_hand","isChecked","capturedPiece","m","createMove","withPromote","kingSquare","movable","listSquaresByColor","isMovable","captured","isPromotable","isPawnDropMate","opt","ignoreValidation","isValidMove","remove","promoted","unpromoted","reduce","change","isValidEditing","swap","rotate","getSFEN","nextMoveNumber","shift","resetBySFEN","hands","parseSFEN","d","copyFrom","countExistingPieces","result","countNotExistingPieces","existed","RecordMetadataKey","millisecondsToHMMSS","ms","secondsToHMMSS","floor","millisecondsToMSS","secondsToMSS","seconds","h","String","padStart","getStandardMetadataDisplayName","BLACK_NAME","WHITE_NAME","START_DATETIME","END_DATETIME","DATE","TOURNAMENT","STRATEGY","TITLE","TIME_LIMIT","TIME_SPENT","PLACE","POSTED_ON","NOTE","BLACK_SHORT_NAME","WHITE_SHORT_NAME","OPUS_NO","OPUS_NAME","AUTHOR","PUBLISHED_ON","PUBLISHED_AT","SOURCE","LENGTH","INTEGRITY","CATEGORY","AWARD","SpecialMove","RecordMetadata","standard","custom","value","delete","specialMoveToDisplayStringMap","start","interrupt","draw","repetitionDraw","mate","timeout","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","specialMoveToDisplayString","NodeImpl","number","branchIndex","activeBranch","isCheck","next","branch","comment","elapsedMs","totalElapsedMs","getDisplayText","elapsed","totalElapsed","updateTotalElapsedMs","stack","pop","START","Record","metadata","_initialPosition","clone","_position","initialPosition","_first","newRootEntry","_current","repetitionCounts","repetitionStart","incrementRepetition","moves","movesBefore","_movesBefore","unshift","len","decrementRepetition","undoMove","doMove","goBack","goForward","_forEach","node","isFirstBranch","checked","first","setElapsedMs","lastBranch","current","repetition","since","usi","data","prefixPositionStartpos","prefixPositionSfen","prefixStartpos","prefixSfen","prefixMoves","startsWith","newByUSIFromMoves","slice","newByUSIFromSFENPosition","Error","join","record","parsed","append","appendLine","base","newLines","endsWith","toString","JSON","stringify","LineType","metadataKeyMap","先手","後手","開始日時","終了日時","対局日","棋戦","戦型","表題","持ち時間","消費時間","場所","掲載","備考","先手省略名","後手省略名","作品番号","作品名","作者","発表誌","発表年月","出典","手数","完全性","分類","受賞","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","date","tournament","strategy","title","timeLimit","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","linePatterns","prefix","PROGRAM_COMMENT","removePrefix","isPosition","HANDICAP","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","COMMENT","parseLine","line","pattern","matched","begin","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","trim","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","INTERRUPT","投了","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","TIMEOUT","反則勝ち","FOUL_WIN","反則負け","FOUL_LOSE","入玉勝ち","ENTERING_OF_KING","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","timeResult","exec","minutes","parseInt","readMove","num","time","goto","toStr","pieceTypeStr","promStr","fromStr","importKakinoki","lines","preMoveComment","inMoveSection","e","standardKey","setStandardMetadata","setCustomMetadata","setColor","resetAllBranchSelection","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","options","returnCode","standardMetadataKeys","getStandardMetadata","customMetadataKeys","getCustomMetadata","formatPosition","formatHand","formatMove","exportKakinoki","hasBranch","replaceAll","SectionType","VERSION","sectionType","HEADER","NEUTRAL","POSITION","RANK","PIECES","FIRST_TURN","SPECIAL_MOVE","ELAPSED","results","args","csaNameToRecordMetadataKey","EVENT","SITE","START_TIME","END_TIME","OPENING","csaNameToPieceType","FU","KY","KE","GI","KI","KA","HI","OU","TO","NY","NK","NG","UM","RY","parsePosition","parseRank","parsePieces","counts","parseMove","fromFile","fromRank","toFile","toRank","basePiece","parseSpecialMove","importCSA","replace","error","moveOrError","specialMove","event","site","startTime","endTime","opening","RecordFormatType","pieceTypeToString","formatSquare","formatSpecialMove","exportCSA","detectRecordFormat","USI","SFEN","pattKIF","pattCSA","matchedKIF","matchedCSA","evalKIF","evalCSA","KIF","CSA","preloadedImages","preloadImage","path","img","document","createElement","PieceImageType","BoardImageType","BoardLabelType","RectSize","width","height","layoutTemplate","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMoveTo","lastMoveFrom","fontSize","playerName","clock","pieceImageMap","HITOMOJI","king2","HITOMOJI_DARK","HITOMOJI_GOTHIC","HITOMOJI_GOTHIC_DARK","boardImageMap","LIGHT","WARM","RESIN","DARK","handColorMap","handLaytoutRule","row","column","rankCharMap","LayoutBuilder","pieceImageType","boardImageType","pieceImages","handColor","values","upperSizeLimit","reservedMoveForPromotion","ratio","buildFrameLayout","buildBoardLayout","top","buildLabelLayout","boardLayout","layouts","NONE","shadow","commonStyle","buildPieceLayout","listNonEmptySquares","displayColor","opposite","buildSquareLayout","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","max","buildPromotionLayout","notPromoted","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","labelLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","defineComponent","name","props","required","default","Boolean","emits","setup","context","state","reactive","reservedMove","resetState","watch","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","stopPropagation","preventDefault","layoutBuilder","computed","builder","preload","margin","build","formatTime","timeMs","byoyomi","ceil","timeSeverity","rem","__exports__","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","uri","issueEngineURI","now","Date","rand","random","MAX_SAFE_INTEGER","USIPonder","USIMultiPV","Threads","NumberOfThreads","MultiPV","getUSIEngineOptionCurrentValue","duplicateEngineSetting","engine","parse","mergeUSIEngineSetting","local","CommentBehavior","Thema","Tab","ClockSoundTarget","LogLevel","STORAGE_KEY","USIEngineSettings","json","engines","sort","a","defaultName","defaultAnalysisSetting","startCriteria","enableNumber","endCriteria","perMoveCriteria","maxSeconds","commentBehavior","INSERT","defaultAppSetting","pieceVolume","clockVolume","clockPitch","clockSoundTarget","ONLY_USER","tab","RECORD_INFO","coefficientInSigmoid","badMoveLevelThreshold1","badMoveLevelThreshold2","badMoveLevelThreshold3","badMoveLevelThreshold4","showElapsedTimeInRecordView","showCommentInRecordView","enableAppLog","enableUSILog","validateAppSetting","setting","defaultGameSetting","timeSeconds","increment","enableEngineTimeout","humanIsFront","validateGameSetting","gameSetting","defaultResearchSetting","webAPI","getRecordPathFromProcArg","updateMenuState","showOpenRecordDialog","openRecord","showSaveRecordDialog","saveRecord","showSelectFileDialog","loadAppSetting","localStorage","getItem","APP_SETTING","saveAppSetting","setItem","loadResearchSetting","RESEARCH_SETTING","saveResearchSetting","loadAnalysisSetting","ANALYSIS_SETTING","saveAnalysisSetting","loadGameSetting","GAME_SETTING","saveGameSetting","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","sendUSISetOption","usiLaunch","usiGo","usiGoPonder","usiPonderHit","usiGoInfinite","usiStop","usiGameover","usiQuit","log","level","message","INFO","console","WARN","warn","ERROR","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","onUSIPonderInfo","getWindowObject","window","bridge","electronShogiAPI","api","settings","sessionID","blackTimeMs","whiteTimeMs","isNative","lastPieceBeatTime","beep","frequency","volume","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","currentTime","beepShort","beepUnlimited","playPieceBeat","audio","Audio","play","USIInfoSender","stringifyUSIInfoSender","sender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","formatPV","pv","createMoveBySFEN","GameResult","USIPlayerMonitor","iterates","multiPVSet","Set","moveSet","iterate","has","multiPV","update","ponderMove","depth","seldepth","selectiveDepth","nodes","multipv","scoreCP","score","scoreMate","lowerbound","lowerBound","upperbound","upperBound","currmove","currentMove","currentMoveText","hashfullPerMill","hashfull","nps","string","USIMonitor","updateQueue","_blackPlayer","_whitePlayer","_researcher","info","timeoutHandle","setTimeout","dequeue","_update","MATE_SCORE","RecordCustomData","obj","evaluation","command","updateScore","formatTimeLimitCSA","HumanPlayer","searchHandler","humanPlayer","USIPlayer","inPonder","usiPlayers","ponder","ponderSetting","onError","onWin","usiBestMove","player","onBestMove","GameState","defaultPlayerBuilder","playerSetting","launch","GameManager","playerBuilder","handlers","IDLE","blackState","whiteState","timerHandle","timerStart","lastTimeMs","_elapsedMs","_setting","lastEventID","blackPlayer","whitePlayer","closePlayers","ACTIVE","startTimer","getPlayer","ponderPlayer","eventID","issueEventID","startSearch","catch","startPonder","endGame","incrementTime","faulColor","perpetualCheck","stopTimer","playerState","getPlayerState","setInterval","lastByoyomi","getTime","lastTime","onBeepUnlimited","onBeepShort","isEngine","onTimeout","PENDING","BUSSY","endGameAsync","then","sendGameResults","onEndGame","gameResult","getGameResult","gameover","currentColor","playerColor","WIN","LOSE","onStopBeep","clearInterval","close","defaultRecordFileName","getDateString","toLocaleDateString","year","month","day","AppState","BussyStore","MessageStore","_queue","ErrorStore","getDateTimeString","toLocaleTimeString","hour","minute","second","hour12","getSituationText","scoreToPercentage","exp","getMoveAccuracyText","before","after","loss","AnalysisManager","setupEngine","closeEngine","researcher","onFinish","clearTimer","onResult","actualMove","lastScore","lastPV","finish","onNext","goAsync","clearTimeout","negaScore","scoreDelta","isBestMove","startResearch","pos","buildRecordComment","loadScoreFromRecordComment","appendAnalysisComment","org","behavior","sep","APPEND","OVERWRITE","Store","_bussy","_message","_error","_appSetting","_appState","NORMAL","_isAppSettingDialogVisible","_usi","_record","isBussy","retain","release","enqueue","errors","hasError","newAppSetting","_confirmation","confirmation","appState","TEMPORARY","lastAppState","onOk","onCancel","PASTE_DIALOG","GAME_DIALOG","RESEARCH_DIALOG","ANALYSIS_DIALOG","USI_ENGINE_SETTING_DIALOG","customData","updateUSIInfo","newByUSI","blackByoyomi","whiteByoyomi","startGameAsync","pushError","retainBussyState","initializeRecordForGame","initializeDisplaySettingForGame","startGame","releaseBussyState","startPosition","onUpdatePosition","clearRecordFilePath","flipBoard","enqueueMessage","isMovableByUser","unlimitedBeepHandler","researchSetting","startResearchAsync","analysisSetting","startAnalysisAsync","_recordFilePath","recordFilePath","showConfirmation","POSITION_EDITING","initialPositionType","edit","switchBranchByIndex","isLastMove","str","navigator","clipboard","writeText","usiAll","recordOrError","restoreCustomData","openRecordAsync","iconv","TextDecoder","decode","updateRecordFilePath","saveRecordAsync","overwrite","defaultPath","TextEncoder","encode","store","useStore","draggable","iconSourceMap","QUIZ","SWAP_H","OPEN","SAVE","SAVE_AS","PASTE","COPY","BRAIN","PV","CHART","PERCENT","ARROW_DROP","FIRST","BACK","NEXT","LAST","QUESTION","DESCRIPTION","PLAY","CLOSE","_withScopeId","_pushScopeId","_popScopeId","ref","_hoisted_20","states","newFile","onNewFile","open","onOpen","saveAs","onSave","save","onSaveAs","onCopyKIF","onCopyCSA","onCopyUSI","onCopySFEN","onPaste","showModalDialog","dialog","addEventListener","showModal","getFormItemByID","getElementById","components","ButtonIcon","onMounted","newRecord","copyRecordKIF","copyRecordCSA","copyRecordUSIAll","copyBoardSFEN","showPasteDialog","onStandard","onHandicapLance","onHandicapRightLance","onHandicapBishop","onHandicapRook","onHandicapRookLance","onHandicap2Pieces","onHandicap4Pieces","onHandicap6Pieces","onHandicap8Pieces","onTsumeShogi","onTsumeShogi2Kings","initializePosition","BoardView","FileMenu","InitialPositionMenu","editPosition","showGameDialog","stopGame","showResearchDialog","stopResearch","showAnalysisDialog","stopAnalysis","startPositionEditing","endPositionEditing","changeTurn","showAppSettingDialog","showUsiEngineManagementDialog","removeRecordAfter","for","_component_RecordView","operational","isRecordOperational","showComment","showElapsedTime","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","onToggleElapsedTime","onToggleComment","changeNumber","branches","changeBranch","moveList","branchList","beginPosSelected","elem","displayText","timeText","branchBegin","onUpdated","moveListElement","childNodes","HTMLElement","classList","contains","scrollIntoView","block","minWidth","RecordView","changeMoveNumber","checkbox","updateAppSetting","_component_RecordInfo","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","activeTab","headerHeight","changeSelect","SEARCH","PERCENTAGE_CHART","INVISIBLE","contentSize","EvaluationChartType","RAW","WIN_RATE","readonly","onInput","textarea","updateRecordComment","_component_EngineAnalyticsElement","historyMode","elementHeight","_hoisted_21","_createStaticVNode","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_component_PVPreviewDialog","toFixed","latestIteration","showPreview","preview","infos","closePreview","doFlip","updateSize","innerWidth","innerHeight","updateRecord","onUnmounted","removeEventListener","PVPreviewDialog","ite","EngineAnalyticsElement","usiBlackPlayerMonitor","usiWhitePlayerMonitor","usiResearcherMonitor","MAX_SCORE","MIN_SCORE","getColorPalette","main","ticks","grid","head","chart","canvasRef","maxScore","minScore","buildDataset","borderColor","dataPoints","min","showLine","verticalLine","palette","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","updateChart","datasets","scales","displayWidth","round","canvas","getContext","Chart","animation","duration","maintainAspectRatio","events","destroy","deep","resize","filePath","list","element","displayName","root","map","input","updateStandardRecordMetadata","minHeight","RecordComment","EngineAnalytics","EvaluationChart","RecordInfo","BoardPane","RecordPane","TabPane","windowSize","boardPaneSize","minTabPaneHeight","minTabHeight","informationHeaderHeight","minRecordWidth","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_component_PlayerSelector","players","blackPlayerURI","onUpdateEngineSetting","onUpdatePlayerSetting","onSelectPlayer","onSelectBlackPlayer","whitePlayerURI","onSelectWhitePlayer","onSwapColor","onStart","readInputAsNumber","_component_USIEngineOptionDialog","playerUri","onPlayerChange","displayPonderState","ponderState","displayThreadState","threadState","displayMultiPvState","multiPVState","isPlayerSettingEnabled","openPlayerSetting","engineSettingDialog","savePlayerSetting","closePlayerSetting","inputId","selectFile","vars","v","sendOption","okButtonText","cancel","latestEngineSetting","engineNameInput","latest","aIsUSI","bIsUSI","USIEngineOptionDialog","playerSelect","getEngine","threads","PlayerSelector","hours","closeModalDialog","defaultValueApplied","buildPlayerSetting","playerURI","updateEngine","engineList","engineURI","hasEngine","engineSetting","openOptions","duplicate","saveAndClose","optionDialog","optionOk","optionCancel","addEngine","removeEngine","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","themaOptions","themaOption","pieceImageTypes","boardImageTypes","returnCodeToName","nameToReturnCode","crlf","lf","cr","displayBoardLabels","closeAppSettingDialog","CHERRY_BLOSSOM","readText","pasteRecord","confirmationOk","confirmationCancel","dequeueMessage","clearErrors","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","defaultValues","enableStartNumber","updateToggle","startNumber","enableEndNumber","endNumber","maxSecondsPerMove","startAnalysis","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","BussyMessage","ConfirmDialog","InfoMessage","ErrorMessage","AnalysisDialog","isAppSettingDialogVisible","body","getElementsByTagName","dataTransfer","files","moveNumber","MenuEvent","NEW_RECORD","OPEN_RECORD","SAVE_RECORD","SAVE_RECORD_AS","COPY_RECORD","COPY_RECORD_CSA","COPY_RECORD_USI_BEFORE","copyRecordUSIBefore","COPY_RECORD_USI_ALL","COPY_BOARD_SFEN","PASTE_RECORD","INSERT_INTERRUPT","insertSpecialMove","INSERT_RESIGN","INSERT_DRAW","INSERT_REPETITION_DRAW","INSERT_MATE","INSERT_TIMEOUT","INSERT_FOUL_WIN","INSERT_FOUL_LOSE","INSERT_ENTERING_OF_KING","INSERT_WIN_BY_DEFAULT","INSERT_LOSS_BY_DEFAULT","REMOVE_RECORD_AFTER","START_POSITION_EDITING","END_POSITION_EDITING","CHANGE_TURN","INIT_POSITION_STANDARD","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","INIT_POSITION_TSUME_SHOGI_2KINGS","START_GAME","STOP_GAME","START_RESEARCH","STOP_RESEARCH","START_ANALYSIS","STOP_ANALYSIS","FLIP_BOARD","APP_SETTING_DIALOG","updateUSIPonderInfo","registerables","setupIPC","Promise","allSettled","finally","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}