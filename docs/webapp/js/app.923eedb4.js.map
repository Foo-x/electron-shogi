{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/store/index.ts","webpack:///./src/components/primitive/Board.vue?da52","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?5e58","webpack:///./src/shogi/square.ts","webpack:///./src/components/dialog/ErrorMessage.vue?7153","webpack:///./src/settings/app.ts","webpack:///./src/store/bussy.ts","webpack:///./src/store/game.ts","webpack:///./src/settings/usi.ts","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?6418","webpack:///./src/components/main/RecordPane.vue?94f8","webpack:///./src/components/dialog/Bussy.vue?6ec5","webpack:///./src/components/dialog/AppSettingDialog.vue?46d0","webpack:///./src/settings/research.ts","webpack:///./src/components/primitive/Record.vue?25f3","webpack:///./src/store/state.ts","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?b517","webpack:///./src/shogi/piece.ts","webpack:///./src/components/dialog/GameDialog.vue?552d","webpack:///./src/audio/index.ts","webpack:///./src/shogi/color.ts","webpack:///./src/layout/board.ts","webpack:///./src/layout/asset.ts","webpack:///./src/components/analytics/RecordComment.vue?5f0b","webpack:///./src/store/record.ts","webpack:///./src/components/dialog/ResearchDialog.vue?4087","webpack:///./src/components/dialog/Message.vue?6d85","webpack:///./src/shogi/board.ts","webpack:///./src/helpers/path.ts","webpack:///./src/components/main/BoardPane.vue?54e7","webpack:///./src/shogi/move.ts","webpack:///./src/shogi/hand.ts","webpack:///./src/shogi/position.ts","webpack:///./src/shogi/record.ts","webpack:///./src/shogi/kakinoki.ts","webpack:///./src/components/dialog/ErrorMessage.vue?4eab","webpack:///./src/components/main/InformationPane.vue?3b27","webpack:///./src/usi/info.ts","webpack:///./src/components/analytics/EngineAnalytics.vue?2208","webpack:///./src/menu/event.ts","webpack:///./src/ipc/web.ts","webpack:///./src/ipc/renderer.ts","webpack:///./src/components/dialog/PasteDialog.vue?7ef5","webpack:///./src/components/analytics/EvaluationChart.vue?70a4","webpack:///./src/settings/game.ts","webpack:///./src/shogi/direction.ts","webpack:///./src/App.vue?a884","webpack:///./src/components/main/StandardLayout.vue?0955","webpack:///./src/components/main/BoardPane.vue?cb5f","webpack:///./src/components/primitive/Board.vue?e52e","webpack:///./src/layout/types.ts","webpack:///./src/components/primitive/Board.vue","webpack:///./src/components/primitive/Board.vue?ac87","webpack:///./src/components/main/BoardPane.vue","webpack:///./src/components/main/BoardPane.vue?bcdb","webpack:///./src/components/main/RecordPane.vue?a3a4","webpack:///./src/components/primitive/Record.vue?8ec9","webpack:///./src/components/primitive/Record.vue","webpack:///./src/components/primitive/Record.vue?123c","webpack:///./src/components/main/RecordPane.vue","webpack:///./src/components/main/RecordPane.vue?fee7","webpack:///./src/components/main/InformationPane.vue?1575","webpack:///./src/components/analytics/RecordComment.vue?4263","webpack:///./src/components/analytics/RecordComment.vue","webpack:///./src/components/analytics/RecordComment.vue?cecc","webpack:///./src/components/analytics/EngineAnalytics.vue?b6b8","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?0b6b","webpack:///./src/components/analytics/EngineAnalyticsElement.vue","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?ded2","webpack:///./src/components/analytics/EngineAnalytics.vue","webpack:///./src/components/analytics/EngineAnalytics.vue?6a11","webpack:///./src/components/analytics/EvaluationChart.vue?9954","webpack:///./src/components/analytics/EvaluationChart.vue","webpack:///./src/components/analytics/EvaluationChart.vue?71a4","webpack:///./src/components/main/InformationPane.vue","webpack:///./src/components/main/InformationPane.vue?c7b3","webpack:///./src/components/main/StandardLayout.vue","webpack:///./src/components/main/StandardLayout.vue?27f5","webpack:///./src/components/dialog/GameDialog.vue?d424","webpack:///./src/helpers/dialog.ts","webpack:///./src/components/dialog/GameDialog.vue","webpack:///./src/components/dialog/GameDialog.vue?7ac4","webpack:///./src/components/dialog/ResearchDialog.vue?4c0f","webpack:///./src/components/dialog/ResearchDialog.vue","webpack:///./src/components/dialog/ResearchDialog.vue?f1e3","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?dc19","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?92cf","webpack:///./src/components/dialog/USIEngineOptionDialog.vue","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?0af9","webpack:///./src/components/dialog/USIEngineManagementDialog.vue","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?23cc","webpack:///./src/components/dialog/AppSettingDialog.vue?992c","webpack:///./src/helpers/form.ts","webpack:///./src/components/dialog/AppSettingDialog.vue","webpack:///./src/components/dialog/AppSettingDialog.vue?0623","webpack:///./src/components/dialog/PasteDialog.vue?b5bd","webpack:///./src/components/dialog/PasteDialog.vue","webpack:///./src/components/dialog/PasteDialog.vue?5a1c","webpack:///./src/components/dialog/Bussy.vue?5659","webpack:///./src/components/dialog/Bussy.vue","webpack:///./src/components/dialog/Bussy.vue?9406","webpack:///./src/components/dialog/Message.vue?bd8c","webpack:///./src/components/dialog/Message.vue","webpack:///./src/components/dialog/Message.vue?e694","webpack:///./src/components/dialog/ErrorMessage.vue?0b59","webpack:///./src/components/dialog/ErrorMessage.vue","webpack:///./src/components/dialog/ErrorMessage.vue?846c","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/main.ts","webpack:///./src/App.vue?fbf5","webpack:///./src/helpers/time.ts","webpack:///./src/components/main/StandardLayout.vue?7a1c","webpack:///./src/store/usi.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Mutation","Action","useStore","baseUseStore","store","createStore","state","record","Record","Mode","NORMAL","bussyState","BussyState","usiSessionID","researchSetting","defaultResearchSetting","gameSetting","defaultGameSetting","gameState","GameState","usiMonitor","USIMonitor","appSetting","defaultAppSetting","messages","errors","getters","isMovableByUser","RESEARCH","GAME","position","color","Color","BLACK","black","type","white","PlayerType","HUMAN","mutations","UPDATE_APP_SETTING","update","SHOW_PASTE_DIALOG","PASTE_DIALOG","CLOSE_PASTE_DIALOG","SHOW_GAME_DIALOG","GAME_DIALOG","SHOW_RESEARCH_DIALOG","RESEARCH_DIALOG","UPDATE_USI_POSITION","updateUSIPosition","usi","blackTimeMs","whiteTimeMs","NEW_RECORD","clear","Position","recordFilePath","undefined","CHANGE_TURN","POSITION_EDITING","clone","setTurn","reverseColor","INITIALIZE_POSITION","initialPositionType","reset","DO_MOVE","move","append","current","setElapsedMs","elapsedMs","playPieceBeat","pieceVolume","EDIT_POSITION","change","edit","UPDATE_RECORD_COMMENT","comment","RECEIVE_USI_INFO","payload","sessionID","sender","info","entryData","RecordEntryCustomData","customData","updateUSIInfo","stringify","SETUP_GAME","setup","startPosition","metadata","setStandardMetadata","RecordMetadataKey","BLACK_NAME","WHITE_NAME","CLEAR_GAME_TIMER","clearTimer","beep5sHandler","stop","FLIP_BOARD","boardFlipping","saveAppSetting","OPEN_APP_SETTING_DIALOG","APP_SETTING_DIALOG","OPEN_USI_ENGINE_MANAGEMENT_DIALOG","USI_ENGINE_SETTING_DIALOG","CLOSE_DIALOG","RETAIN_BUSSY_STATE","retain","RELEASE_BUSSY_STATE","release","PUSH_MESSAGE","message","SHIFT_MESSAGE","PUSH_ERROR","e","Error","CLEAR_ERRORS","actions","UPDATE_AND_SAVE_APP_SETTING","commit","UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND","OPEN_RECORD","path","showOpenRecordDialog","openRecord","match","str","iconv","decode","toString","recordOrError","importKakinoki","SAVE_RECORD","options","overwrite","defaultPath","defaultRecordFileName","showSaveRecordDialog","exportKakinoki","returnCode","encode","Buffer","from","saveRecord","COPY_RECORD","navigator","clipboard","writeText","PASTE_RECORD","CHANGE_MOVE_NUMBER","number","goto","CHANGE_BRANCH","index","branchIndex","switchBranchByIndex","REMOVE_RECORD_AFTER","removeAfter","START_POSITION_EDITING","END_POSITION_EDITING","START_RESEARCH","saveResearchSetting","startResearch","STOP_RESEARCH","endResearch","START_GAME","dispatch","saveGameSetting","startGame","RESET_GAME_TIMER","STOP_GAME","specialMove","specialMoveToDisplayString","endGame","SpecialMove","INTERRUPT","RESIGN_BY_USER","RESIGN","DO_MOVE_BY_USER","increment","DO_MOVE_BY_USI_ENGINE","sfen","FOUL_LOSE","ENTERING_OF_KING","createMoveBySFEN","isValidMove","startTimer","timeout","enableEngineTimeout","TIMEOUT","stopUSI","onBeepShort","BEEP_SHORT","onBeepUnlimited","BEEP_UNLIMITED","clockSoundTarget","ClockSoundTarget","ONLY_USER","beepUnlimited","frequency","clockPitch","volume","clockVolume","beepShort","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","file","rank","this","y","x","arg0","arg1","Direction","UP","DOWN","LEFT","RIGHT","LEFT_UP","RIGHT_UP","LEFT_DOWN","RIGHT_DOWN","LEFT_UP_KNIGHT","RIGHT_UP_KNIGHT","LEFT_DOWN_KNIGHT","RIGHT_DOWN_KNIGHT","dx","dy","square","Math","trunc","all","newByIndex","InformationTab","boardLayout","BoardLayoutType","HITOMOJI","informationTab","COMMENT","count","timeMs","byoyomi","timerHandle","timerStart","Date","lastTimeMs","_elapsedMs","timeLimit","timeSeconds","WHITE","handlers","playerState","getPlayerState","setInterval","lastByoyomi","now","getTime","max","ceil","lastTime","time","clearInterval","getUSIEngineOptionCurrentValue","option","default","mergeUSIEngineSetting","engine","local","uri","keys","forEach","USIEngineSettings","json","engines","src","JSON","parse","values","sort","a","b","PieceType","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","g","k","sfenCharToColorMap","rotateMap","Map","set","Piece","withColor","piece","beep","context","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","start","currentTime","lastPieceBeatTime","audio","Audio","play","colorToSFEN","isValidSFENColor","parseSFENColor","preloadedImages","preloadImage","console","log","img","document","createElement","templateCommon","frame","width","height","board","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMove","hand","turn","fontSize","playerName","clock","control","left","right","templates","hitomoji","images","king2","hitomojiGothic","handLaytoutRule","row","column","LayoutBuilder","layoutType","template","upperSizeLimit","pointer","reservedMoveForPromotion","flip","ratio","buildFrameLayout","style","buildBoardLayout","imagePath","top","buildPieceLayout","layouts","listNonEmptySquares","at","id","displayColor","pieceType","opposite","buildSquareLayout","backgroundStyle","equals","to","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","pieces","pointers","rule","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","buildPromotionLayout","promoted","notPromoted","unpromoted","promoteImagePath","notPromoteImagePath","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","blackHand","whiteHand","promotion","blackPlayerName","whitePlayerName","blackClock","whiteClock","MAX_SCORE","MIN_SCORE","obj","evaluation","score","USIInfoSender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","command","scoreCP","updateScore","min","scoreMate","InitialPositionType","sfenCharToNumber","Board","squares","Array","STANDARD","square1","square2","tmp","removed","EMPTY","TSUME_SHOGI","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","ret","empty","newByXY","isValidSFEN","rows","split","newBySFEN","find","kingColor","filled","ignore","kingSquare","findKing","directions","dir","step","neighbor","valid","rdir","reverseDirection","resolveMoveType","MoveType","LONG","SHORT","date","getStandardMetadata","DATE","trim","replaceAll","toLocaleDateString","year","month","day","fileDisplayTexts","rankDisplayTexts","Move","promote","capturedPieceType","prev","text","parseSFENMove","parseSFENSquare","substring","buildSFEN","Hand","handler","formatSFEN","sfenBlack","w","sfenWhite","sections","section","Number","add","invalidRankMap","1","2","9","8","isInvalidRank","isPromotableRank","pawnExists","_board","_color","_blackHand","_whiteHand","_hand","capturedPiece","createMove","withPromote","target","isMovable","captured","isPromotable","isCheck","remove","reduce","isValidEditing","swap","rotate","getSfen","nextMoveNumber","resetBySFEN","hands","parseSFEN","vectorToDirectionAndDistance","direction","distance","ok","directionToDeltaMap","copyFrom","RecordMetadata","customMetadata","specialMoveToDisplayStringMap","resign","interrupt","draw","repetitionDraw","mate","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","RecordEntryImpl","activeBranch","next","branch","totalElapsedMs","getDisplayText","displayMoveText","elapsed","millisecondsToMSS","totalElapsed","millisecondsToHMMSS","updateTotalElapsedMs","stack","pop","_metadata","_initialPosition","_position","initialPosition","_first","START","_current","moves","movesBefore","_movesBefore","unshift","len","undoMove","doMove","goBack","goForward","_forEach","entry","isFirstBranch","first","lastBranch","LineType","metadataKeyMap","先手","後手","開始日時","START_DATETIME","終了日時","END_DATETIME","対局日","棋戦","TOURNAMENT","戦型","STRATEGY","表題","TITLE","持ち時間","TIME_LIMIT","消費時間","TIME_SPENT","場所","PLACE","掲載","POSTED_ON","備考","NOTE","先手省略名","BLACK_SHORT_NAME","後手省略名","WHITE_SHORT_NAME","作品番号","OPUS_NO","作品名","OPUS_NAME","作者","AUTHOR","発表誌","PUBLISHED_ON","発表年月","PUBLISHED_AT","出典","SOURCE","手数","LENGTH","完全性","INTEGRITY","分類","CATEGORY","受賞","AWARD","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","tournament","strategy","title","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","linePatterns","prefix","HANDICAP","removePrefix","isPosition","BLACK_HAND","WHITE_HAND","BOARD","MOVE","parseLine","line","end","indexOf","pattern","matched","begin","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","投了","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","反則勝ち","FOUL_WIN","反則負け","入玉勝ち","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMove","exec","num","toStr","pieceTypeStr","promStr","fromStr","timeResult","minutes","seconds","parseInt","lines","inMoveSection","parsed","standardKey","setCustomMetadata","resetAllBranchSelection","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","standardMetadataKeys","customMetadataKeys","getCustomMetadata","formatPosition","formatHand","formatMove","hasBranch","stringifyUSIInfoSender","MenuEvent","STORAGE_KEY","webAPI","getRecordPathFromProcArg","updateMenuState","showSelectFileDialog","loadAppSetting","localStorage","getItem","APP_SETTING","setItem","loadResearchSetting","RESEARCH_SETTING","loadGameSetting","GAME_SETTING","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","sendUSISetOption","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","getWindowObject","isNative","electronShogiAPI","getAPI","setting","jsonWithIndent","api","event","isBussy","SAVE_RECORD_AS","INIT_POSITION_STANDARD","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","watch","bussy","validateGameSetting","reverseMap","up","down","left_up","right_up","left_down","right_down","left_up_knight","right_up_knight","left_down_knight","right_down_knight","movableDirectionMap","abs","render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_Bussy","_component_Message","_component_ErrorMessage","_openBlock","_createElementBlock","_Fragment","_createVNode","class","dialogVisibilities","game","_createBlock","_createCommentVNode","research","usiEngineSetting","paste","processing","hasMessage","hasErrors","_hoisted_1","_hoisted_2","ref","_component_BoardPane","_component_RecordPane","_component_InformationPane","_createElementVNode","maxSize","boardPaneMaxSize","size","bottomPaneSize","_withScopeId","_pushScopeId","_popScopeId","_hoisted_3","_createTextVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_component_Board","layout","allowMove","allowEdit","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","onGame","onStop","onResign","onResearch","onEndResearch","startEditPosition","onStartEditPosition","endEditPosition","onEndEditPosition","initPosition","onChangeTurn","onInitPositionStandard","onInitPositionTsumeShogi","onOpenAppSettings","disabled","appSettings","onOpenEngineSettings","engineSettings","onFlip","onPaste","onCopy","onRemoveAfter","_","_normalizeStyle","$event","clickFrame","_normalizeClass","active","_toDisplayString","blackPlayerTimeSeverity","blackPlayerTimeText","whitePlayerTimeSeverity","whitePlayerTimeText","_renderList","clickSquare","onContextmenu","clickSquareR","clickHand","clickPromote","clickNotPromote","_renderSlot","$slots","RectSize","defineComponent","props","String","required","Boolean","emits","reactive","reservedMove","resetState","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","stopPropagation","layoutBuilder","computed","builder","preload","build","formatTime","secondsToHMMSS","timeSeverity","rem","__exports__","components","blackByoyomi","whiteByoyomi","_component_Record","operational","isRecordOperational","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","changeNumber","changeBranch","branches","moveList","branchList","beginPosSelected","elem","displayText","branchBegin","minWidth","MAX_SAFE_INTEGER","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","enabled","activeTab","changeSelect","contentSize","readonly","textarea","onMounted","addEventListener","_component_EngineAnalyticsElement","infos","blackPlayer","elementHeight","whitePlayer","researcher","researcherName","_createStaticVNode","currentMoveText","nps","nodes","hashfull","toFixed","iterates","iterate","multiPV","depth","selectiveDepth","lowerBound","upperBound","USIPlayerMonitor","EngineAnalyticsElement","chart","canvasRef","buildDataset","borderColor","dataPoints","label","showLine","verticalLine","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","scales","displayWidth","round","canvas","getContext","Chart","datasets","animation","duration","maintainAspectRatio","events","onUnmounted","destroy","deep","resize","headerHeight","minHeight","RecordComment","EngineAnalytics","EvaluationChart","BoardPane","RecordPane","InformationPane","windowSize","topPaneHeight","topPane","updateSize","innerWidth","innerHeight","topPaneResizeObserver","ResizeObserver","entries","contentRect","observe","removeEventListener","minInformationPaneHeight","INVISIBLE","minInformationHeight","informationHeaderHeight","minRecordWidth","for","_hoisted_48","defaultValues","hours","checked","onStart","onCancel","showModalDialog","dialog","preventDefault","showModal","getFormItemByID","getElementById","blackPlayerSelect","whitePlayerSelect","engineSetting","buildPlayerSetting","getEngine","USI","error","floor","engineList","defaultValue","engineSelect","hasEngine","_component_USIEngineOptionDialog","openOptions","saveAndClose","cancel","optionDialog","latestEngineSetting","onOk","optionOk","optionCancel","defaultName","inputId","selectFile","vars","v","sendOption","rquired","engineNameInput","latest","aIsUSI","startsWith","bIsUSI","map","USIEngineOptionDialog","addEngine","removeEngine","updateEngine","boardLayouts","readInputAsNumber","input","then","HITOMOJI_GOTHIC","readText","onClose","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","Bussy","Message","ErrorMessage","body","getElementsByTagName","dataTransfer","files","moveNumber","register","registerables","setupIPC","Promise","allSettled","catch","finally","createApp","App","use","mount","ms","secondsToMSS","h","padStart","formatPV","pv","seldepth","multipv","lowerbound","upperbound","currmove","currentMove","hashfullPerMill","string","blackPosition","whitePosition","researchPosition"],"mappings":"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","file":"js/app.923eedb4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import {\n  endGame,\n  endResearch,\n  openRecord,\n  saveAppSetting,\n  saveGameSetting,\n  saveRecord,\n  saveResearchSetting,\n  showOpenRecordDialog,\n  showSaveRecordDialog,\n  startGame,\n  startResearch,\n  stopUSI,\n  updateUSIPosition,\n} from \"@/ipc/renderer\";\nimport {\n  Color,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n} from \"@/shogi\";\nimport { exportKakinoki, importKakinoki } from \"@/shogi\";\nimport { Mode, State } from \"@/store/state\";\nimport { InjectionKey } from \"vue\";\nimport { createStore, Store, useStore as baseUseStore } from \"vuex\";\nimport iconv from \"iconv-lite\";\nimport { defaultGameSetting, GameSetting, PlayerType } from \"@/settings/game\";\nimport {\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n} from \"@/settings/app\";\nimport { beepShort, beepUnlimited, playPieceBeat } from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { BussyState } from \"./bussy\";\nimport { RecordEntryCustomData } from \"./record\";\nimport { USIMonitor } from \"./usi\";\nimport { GameState } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\n\nexport const key: InjectionKey<Store<State>> = Symbol();\n\nexport function useStore(): Store<State> {\n  return baseUseStore(key);\n}\n\nexport enum Mutation {\n  UPDATE_APP_SETTING = \"updateAppSetting\",\n  SHOW_PASTE_DIALOG = \"showPasteDialog\",\n  CLOSE_PASTE_DIALOG = \"closePasteDialog\",\n  SHOW_GAME_DIALOG = \"showGameDialog\",\n  SHOW_RESEARCH_DIALOG = \"showResearchDialog\",\n  UPDATE_USI_POSITION = \"updateUSIPosition\",\n  NEW_RECORD = \"newRecord\",\n  DO_MOVE = \"move\",\n  EDIT_POSITION = \"editPosition\",\n  CHANGE_TURN = \"changeTurn\",\n  INITIALIZE_POSITION = \"initializePosition\",\n  UPDATE_RECORD_COMMENT = \"updateRecordComment\",\n  RECEIVE_USI_INFO = \"receiveUsiInfo\",\n  SETUP_GAME = \"setupGame\",\n  CLEAR_GAME_TIMER = \"clearGameTimer\",\n  FLIP_BOARD = \"flipBoard\",\n  OPEN_APP_SETTING_DIALOG = \"openAppSettingDialog\",\n  OPEN_USI_ENGINE_MANAGEMENT_DIALOG = \"openUSIEngineManagementDialog\",\n  CLOSE_DIALOG = \"closeDialog\",\n  RETAIN_BUSSY_STATE = \"retainBussyState\",\n  RELEASE_BUSSY_STATE = \"releaseBussyState\",\n  PUSH_MESSAGE = \"pushMessage\",\n  SHIFT_MESSAGE = \"shiftMessage\",\n  PUSH_ERROR = \"pushError\",\n  CLEAR_ERRORS = \"clearErrors\",\n}\n\nexport enum Action {\n  UPDATE_AND_SAVE_APP_SETTING = \"updateAndSaveAppSetting\",\n  UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND = \"updateAndSaveAppSettingOnBackground\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n  CHANGE_MOVE_NUMBER = \"changeMoveNumber\",\n  CHANGE_BRANCH = \"changeBranch\",\n  REMOVE_RECORD_AFTER = \"removeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN_BY_USER = \"resign\",\n  DO_MOVE_BY_USER = \"doMoveByUser\",\n  DO_MOVE_BY_USI_ENGINE = \"doMoveByUSIEngine\",\n  RESET_GAME_TIMER = \"resetGameTimer\",\n  BEEP_UNLIMITED = \"beepUnlimited\",\n  BEEP_SHORT = \"beepShort\",\n}\n\nexport const store = createStore<State>({\n  state: {\n    record: new Record(),\n    mode: Mode.NORMAL,\n    bussyState: new BussyState(),\n    usiSessionID: 0,\n    researchSetting: defaultResearchSetting(),\n    gameSetting: defaultGameSetting(),\n    gameState: new GameState(),\n    usiMonitor: new USIMonitor(),\n    appSetting: defaultAppSetting(),\n    messages: [],\n    errors: [],\n  },\n  getters: {\n    isMovableByUser(state): boolean {\n      switch (state.mode) {\n        case Mode.NORMAL:\n        case Mode.RESEARCH:\n          return true;\n        case Mode.GAME:\n          return (\n            (state.record.position.color === Color.BLACK\n              ? state.gameSetting.black.type\n              : state.gameSetting.white.type) === PlayerType.HUMAN\n          );\n      }\n      return false;\n    },\n  },\n  mutations: {\n    [Mutation.UPDATE_APP_SETTING](state, update: AppSettingUpdate) {\n      state.appSetting = {\n        ...state.appSetting,\n        ...update,\n      };\n    },\n    [Mutation.SHOW_PASTE_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.PASTE_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_PASTE_DIALOG](state) {\n      if (state.mode === Mode.PASTE_DIALOG) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.SHOW_GAME_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.GAME_DIALOG;\n      }\n    },\n    [Mutation.SHOW_RESEARCH_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.RESEARCH_DIALOG;\n      }\n    },\n    [Mutation.UPDATE_USI_POSITION](state) {\n      updateUSIPosition(\n        state.record.usi,\n        state.gameSetting,\n        state.gameState.blackTimeMs,\n        state.gameState.whiteTimeMs\n      );\n    },\n    [Mutation.NEW_RECORD](state) {\n      if (state.mode != Mode.NORMAL) {\n        return;\n      }\n      state.record.clear(new Position());\n      state.recordFilePath = undefined;\n    },\n    [Mutation.CHANGE_TURN](state) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = state.record.position.clone();\n      position.setTurn(reverseColor(position.color));\n      state.record.clear(position);\n    },\n    [Mutation.INITIALIZE_POSITION](\n      state,\n      initialPositionType: InitialPositionType\n    ) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = new Position();\n      position.reset(initialPositionType);\n      state.record.clear(position);\n    },\n    [Mutation.DO_MOVE](state, move: Move) {\n      state.record.append(move);\n      state.record.current.setElapsedMs(state.gameState.elapsedMs);\n      playPieceBeat(state.appSetting.pieceVolume);\n    },\n    [Mutation.EDIT_POSITION](state, change: PositionChange) {\n      if (store.state.mode === Mode.POSITION_EDITING) {\n        const position = state.record.position.clone();\n        position.edit(change);\n        state.record.clear(position);\n      }\n    },\n    [Mutation.UPDATE_RECORD_COMMENT](state, comment: string) {\n      state.record.current.comment = comment;\n    },\n    [Mutation.RECEIVE_USI_INFO](\n      state,\n      payload: {\n        sessionID: number;\n        usi: string;\n        sender: USIInfoSender;\n        info: InfoCommand;\n      }\n    ) {\n      if (\n        state.usiSessionID !== payload.sessionID ||\n        state.record.usi != payload.usi\n      ) {\n        return;\n      }\n      state.usiMonitor.update(\n        payload.sessionID,\n        state.record.position,\n        payload.sender,\n        payload.info\n      );\n      const entryData = new RecordEntryCustomData(\n        state.record.current.customData\n      );\n      entryData.updateUSIInfo(\n        state.record.position.color,\n        payload.sender,\n        payload.info\n      );\n      state.record.current.customData = entryData.stringify();\n    },\n    [Mutation.SETUP_GAME](state, gameSetting: GameSetting) {\n      state.gameSetting = gameSetting;\n      state.gameState.setup(gameSetting);\n      state.mode = Mode.GAME;\n      if (gameSetting.startPosition) {\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.BLACK_NAME,\n          gameSetting.black.name\n        );\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.WHITE_NAME,\n          gameSetting.white.name\n        );\n      }\n    },\n    [Mutation.CLEAR_GAME_TIMER](state) {\n      state.gameState.clearTimer();\n      if (state.beep5sHandler) {\n        state.beep5sHandler.stop();\n        state.beep5sHandler = undefined;\n      }\n    },\n    [Mutation.FLIP_BOARD](state) {\n      state.appSetting.boardFlipping = !state.appSetting.boardFlipping;\n      saveAppSetting(state.appSetting);\n    },\n    [Mutation.OPEN_APP_SETTING_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.APP_SETTING_DIALOG;\n      }\n    },\n    [Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.USI_ENGINE_SETTING_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_DIALOG](state) {\n      if (\n        state.mode === Mode.USI_ENGINE_SETTING_DIALOG ||\n        state.mode === Mode.APP_SETTING_DIALOG ||\n        state.mode === Mode.GAME_DIALOG ||\n        state.mode === Mode.RESEARCH_DIALOG\n      ) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.RETAIN_BUSSY_STATE](state) {\n      state.bussyState.retain();\n    },\n    [Mutation.RELEASE_BUSSY_STATE](state) {\n      state.bussyState.release();\n    },\n    [Mutation.PUSH_MESSAGE](state, message: string) {\n      state.messages.push(message);\n    },\n    [Mutation.SHIFT_MESSAGE](state) {\n      state.messages.shift();\n    },\n    [Mutation.PUSH_ERROR](state, e) {\n      if (e instanceof Error) {\n        state.errors.push(e);\n      } else {\n        state.errors.push(new Error(e));\n      }\n    },\n    [Mutation.CLEAR_ERRORS](state) {\n      state.errors = [];\n    },\n  },\n  actions: {\n    async [Action.UPDATE_AND_SAVE_APP_SETTING](\n      { commit, state },\n      update: AppSettingUpdate\n    ) {\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveAppSetting({\n          ...state.appSetting,\n          ...update,\n        });\n        commit(Mutation.UPDATE_APP_SETTING, update);\n        return true;\n      } catch {\n        store.commit(Mutation.PUSH_ERROR);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND](\n      { commit, state },\n      update: AppSettingUpdate\n    ) {\n      commit(Mutation.UPDATE_APP_SETTING, update);\n      await saveAppSetting(state.appSetting);\n    },\n    async [Action.OPEN_RECORD]({ commit, state }, path) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        if (!path) {\n          path = await showOpenRecordDialog();\n          if (!path) {\n            return false;\n          }\n        }\n        const data = await openRecord(path);\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = path.match(/\\.kif$/)\n            ? iconv.decode(data, \"Shift_JIS\")\n            : data.toString();\n          const recordOrError = importKakinoki(str);\n          if (recordOrError instanceof Record) {\n            state.recordFilePath = path;\n            state.record = recordOrError;\n          } else {\n            commit(Mutation.PUSH_ERROR, recordOrError);\n          }\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の読み込み中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.SAVE_RECORD](\n      { commit, state },\n      options: {\n        overwrite: boolean;\n      }\n    ) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        let path = state.recordFilePath;\n        if (!options?.overwrite || !path) {\n          const defaultPath = defaultRecordFileName(state.record);\n          path = await showSaveRecordDialog(defaultPath);\n          if (!path) {\n            return false;\n          }\n        }\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = exportKakinoki(state.record, {\n            returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n          });\n          const data = path.match(/\\.kif$/)\n            ? iconv.encode(str, \"Shift_JIS\")\n            : Buffer.from(str);\n          await saveRecord(path, data);\n          state.recordFilePath = path;\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の保存中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.COPY_RECORD]({ state }) {\n      const str = exportKakinoki(state.record, {\n        returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n      });\n      navigator.clipboard.writeText(str);\n    },\n    async [Action.PASTE_RECORD]({ state, commit }, data: string) {\n      if (state.mode !== Mode.NORMAL) {\n        return;\n      }\n      const recordOrError = importKakinoki(data);\n      if (recordOrError instanceof Record) {\n        state.recordFilePath = undefined;\n        state.record = recordOrError;\n      } else {\n        commit(Mutation.PUSH_ERROR, recordOrError);\n      }\n    },\n    [Action.CHANGE_MOVE_NUMBER]({ state, commit }, number: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.goto(number);\n      commit(Mutation.UPDATE_USI_POSITION);\n    },\n    [Action.CHANGE_BRANCH]({ state, commit }, index: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      if (state.record.current.branchIndex === index) {\n        return;\n      }\n      state.record.switchBranchByIndex(index);\n      commit(Mutation.UPDATE_USI_POSITION);\n    },\n    async [Action.REMOVE_RECORD_AFTER]({ state, commit }) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.removeAfter();\n      commit(Mutation.UPDATE_USI_POSITION);\n    },\n    [Action.START_POSITION_EDITING]({ state }) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.POSITION_EDITING;\n        state.record.clear(state.record.position);\n        state.recordFilePath = undefined;\n      }\n    },\n    [Action.END_POSITION_EDITING]({ state }) {\n      // FIXME: 局面整合性チェック\n      if (state.mode === Mode.POSITION_EDITING) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    async [Action.START_RESEARCH](\n      { commit, state },\n      researchSetting: ResearchSetting\n    ) {\n      if (state.mode !== Mode.RESEARCH_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveResearchSetting(researchSetting);\n        state.usiSessionID += 1;\n        await startResearch(researchSetting, state.usiSessionID);\n        state.researchSetting = researchSetting;\n        state.mode = Mode.RESEARCH;\n        commit(Mutation.UPDATE_USI_POSITION);\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_RESEARCH]({ commit, state }) {\n      if (state.mode !== Mode.RESEARCH) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endResearch();\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.START_GAME](\n      { commit, dispatch, state },\n      gameSetting: GameSetting\n    ) {\n      if (state.mode !== Mode.GAME_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveGameSetting(gameSetting);\n        if (gameSetting.startPosition) {\n          const position = new Position();\n          position.reset(gameSetting.startPosition);\n          state.record.clear(position);\n          state.recordFilePath = undefined;\n        }\n        state.usiSessionID += 1;\n        await startGame(gameSetting, state.usiSessionID);\n        commit(Mutation.SETUP_GAME, gameSetting);\n        await dispatch(Action.RESET_GAME_TIMER);\n        commit(Mutation.UPDATE_USI_POSITION);\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_GAME]({ commit, state }, specialMove?: SpecialMove) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (specialMove) {\n        commit(\n          Mutation.PUSH_MESSAGE,\n          `対局終了（${specialMoveToDisplayString(specialMove)})`\n        );\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endGame(state.record.usi, specialMove);\n        state.record.append(specialMove || SpecialMove.INTERRUPT);\n        state.record.current.setElapsedMs(state.gameState.elapsedMs);\n        commit(Mutation.CLEAR_GAME_TIMER);\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.RESIGN_BY_USER]({ state, getters, dispatch }) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (!getters.isMovableByUser) {\n        return;\n      }\n      return dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n    },\n    async [Action.DO_MOVE_BY_USER](\n      { commit, dispatch, state, getters },\n      move: Move\n    ) {\n      if (!getters.isMovableByUser) {\n        return false;\n      }\n      if (state.mode === Mode.GAME) {\n        state.gameState.increment(state.record.position.color);\n      }\n      commit(Mutation.DO_MOVE, move);\n      if (state.mode === Mode.GAME) {\n        dispatch(Action.RESET_GAME_TIMER);\n      }\n      commit(Mutation.UPDATE_USI_POSITION);\n      return true;\n    },\n    async [Action.DO_MOVE_BY_USI_ENGINE](\n      { commit, dispatch, state },\n      payload: {\n        sessionID: number;\n        usi: string;\n        color: Color;\n        sfen: string;\n      }\n    ) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (state.usiSessionID !== payload.sessionID) {\n        return false;\n      }\n      if (state.record.usi !== payload.usi) {\n        return false;\n      }\n      if (payload.color !== state.record.position.color) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"手番ではないエンジンから指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      if (payload.sfen === \"resign\") {\n        dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n        return true;\n      }\n      if (payload.sfen === \"win\") {\n        // TODO: 勝ち宣言が正当かどうかをチェックする。\n        dispatch(Action.STOP_GAME, SpecialMove.ENTERING_OF_KING);\n        return true;\n      }\n      const move = state.record.position.createMoveBySFEN(payload.sfen);\n      if (!move || !state.record.position.isValidMove(move)) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"エンジンから不明な指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      state.gameState.increment(state.record.position.color);\n      commit(Mutation.DO_MOVE, move);\n      dispatch(Action.RESET_GAME_TIMER);\n      commit(Mutation.UPDATE_USI_POSITION);\n      return true;\n    },\n    [Action.RESET_GAME_TIMER]({ commit, dispatch, getters, state }) {\n      commit(Mutation.CLEAR_GAME_TIMER);\n      const color = state.record.position.color;\n      state.gameState.startTimer(color, {\n        timeout: () => {\n          if (\n            getters.isMovableByUser ||\n            state.gameSetting.enableEngineTimeout\n          ) {\n            dispatch(Action.STOP_GAME, SpecialMove.TIMEOUT);\n          } else {\n            stopUSI(color);\n          }\n        },\n        onBeepShort: () => {\n          dispatch(Action.BEEP_SHORT);\n        },\n        onBeepUnlimited: () => {\n          dispatch(Action.BEEP_UNLIMITED);\n        },\n      });\n    },\n    [Action.BEEP_UNLIMITED]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      state.beep5sHandler = beepUnlimited({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n    [Action.BEEP_SHORT]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      beepShort({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n  },\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Board.vue?vue&type=style&index=0&id=9e33db16&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EngineAnalyticsElement.vue?vue&type=style&index=0&id=61f1257a&scoped=true&lang=css\"","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ErrorMessage.vue?vue&type=style&index=0&id=50fb1a28&scoped=true&lang=css\"","import { BoardLayoutType } from \"@/layout/board\";\n\nexport enum InformationTab {\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  CHART = \"chart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  boardLayout: BoardLayoutType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  informationTab: InformationTab;\n};\n\nexport type AppSettingUpdate = {\n  boardLayout?: BoardLayoutType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  informationTab?: InformationTab;\n};\n\nexport function defaultAppSetting(): AppSetting {\n  return {\n    boardLayout: BoardLayoutType.HITOMOJI,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    informationTab: InformationTab.COMMENT,\n  };\n}\n","export class BussyState {\n  private count: number;\n\n  constructor() {\n    this.count = 0;\n  }\n\n  get isBussy(): boolean {\n    return this.count !== 0;\n  }\n\n  retain(): void {\n    this.count += 1;\n  }\n\n  release(): void {\n    this.count -= 1;\n  }\n}\n","import { defaultGameSetting, GameSetting } from \"@/settings/game\";\nimport { Color } from \"@/shogi\";\n\nexport type PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\ntype TimerHandlers = {\n  timeout: () => void;\n  onBeepShort: () => void;\n  onBeepUnlimited: () => void;\n};\n\nexport class GameState {\n  private black: PlayerState;\n  private white: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private gameSetting: GameSetting;\n\n  constructor() {\n    this.black = { timeMs: 0, byoyomi: 0 };\n    this.white = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this.gameSetting = defaultGameSetting();\n  }\n\n  get blackTimeMs(): number {\n    return this.black.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.black.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.white.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.white.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  setup(gameSetting: GameSetting): void {\n    this.black.timeMs = gameSetting.timeLimit.timeSeconds * 1e3;\n    this.black.byoyomi = gameSetting.timeLimit.byoyomi;\n    this.white.timeMs = gameSetting.timeLimit.timeSeconds * 1e3;\n    this.white.byoyomi = gameSetting.timeLimit.byoyomi;\n    this.gameSetting = gameSetting;\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.black;\n      case Color.WHITE:\n        return this.white;\n    }\n  }\n\n  startTimer(color: Color, handlers: TimerHandlers): void {\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.gameSetting.timeLimit.byoyomi;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.gameSetting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        handlers.timeout();\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          handlers.onBeepShort();\n        }\n      } else if (!this.gameSetting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  increment(color: Color): void {\n    this.getPlayerState(color).timeMs +=\n      this.gameSetting.timeLimit.increment * 1e3;\n  }\n\n  clearTimer(): void {\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n    this._elapsedMs = 0;\n  }\n}\n","export type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption\n): string | number | undefined {\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    // FIXME\n    // USI で規定されている特殊な値 \"<empty>\" に対する正しい振る舞いがわからない。\n    // if (option.default === \"<empty>\") {}\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      return a.name > b.name ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return `es://usi-engine/${now}/${rand}`;\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./USIEngineOptionDialog.vue?vue&type=style&index=0&id=0ba3d664&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RecordPane.vue?vue&type=style&index=0&id=a8ae60cc&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Bussy.vue?vue&type=style&index=0&id=f6b9bdd4&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AppSettingDialog.vue?vue&type=style&index=0&id=d986b518&scoped=true&lang=css\"","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Record.vue?vue&type=style&index=0&id=5fb22b30&scoped=true&lang=css\"","import { AudioEventHandler } from \"@/audio\";\nimport { AppSetting } from \"@/settings/app\";\nimport { GameSetting } from \"@/settings/game\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Record } from \"@/shogi\";\nimport { BussyState } from \"./bussy\";\nimport { GameState } from \"./game\";\nimport { USIMonitor } from \"./usi\";\n\nexport enum Mode {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  APP_SETTING_DIALOG = \"appSettingDialog\",\n}\n\nexport type State = {\n  recordFilePath?: string;\n  record: Record;\n  mode: Mode;\n  bussyState: BussyState;\n  usiSessionID: number;\n  researchSetting: ResearchSetting;\n  gameSetting: GameSetting;\n  gameState: GameState;\n  beep5sHandler?: AudioEventHandler;\n  usiMonitor: USIMonitor;\n  appSetting: AppSetting;\n  messages: string[];\n  errors: Error[];\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./USIEngineManagementDialog.vue?vue&type=style&index=0&id=5c5214f8&scoped=true&lang=css\"","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GameDialog.vue?vue&type=style&index=0&id=fc28857c&scoped=true&lang=css\"","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { handPieceTypes, ImmutableHand, PieceType } from \"@/shogi\";\nimport {\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"./asset\";\nimport { RectSize } from \"./types\";\n\nexport enum BoardLayoutType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n}\n\ntype LayoutTemplate = {\n  images: {\n    board: string;\n    black: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n    white: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n  };\n  frame: {\n    width: number;\n    height: number;\n  };\n  board: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    squreWidth: number;\n    squreHeight: number;\n    leftSquarePadding: number;\n    topSquarePadding: number;\n    leftPiecePadding: number;\n    topPiecePadding: number;\n    highlight: {\n      selected: { [key: string]: string };\n      lastMove: { [key: string]: string };\n    };\n  };\n  piece: {\n    width: number;\n    height: number;\n  };\n  hand: {\n    color: string;\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    highlight: {\n      selected: { [key: string]: string };\n    };\n  };\n  turn: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  playerName: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  clock: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  control: {\n    left: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n    right: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n  };\n};\n\nconst templateCommon = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    // original image size: 878x960\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n      lastMove: { \"background-color\": \"#00ddff\", opacity: \"0.5\" },\n    },\n  },\n  piece: {\n    // original image size: 88x93\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    color: \"#8b4513\",\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst templates: { [key: string]: LayoutTemplate } = {\n  hitomoji: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji/black_pawn.png\",\n        lance: \"./piece/hitomoji/black_lance.png\",\n        knight: \"./piece/hitomoji/black_knight.png\",\n        silver: \"./piece/hitomoji/black_silver.png\",\n        gold: \"./piece/hitomoji/black_gold.png\",\n        bishop: \"./piece/hitomoji/black_bishop.png\",\n        rook: \"./piece/hitomoji/black_rook.png\",\n        king: \"./piece/hitomoji/black_king.png\",\n        king2: \"./piece/hitomoji/black_king2.png\",\n        promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n        horse: \"./piece/hitomoji/black_horse.png\",\n        dragon: \"./piece/hitomoji/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji/white_pawn.png\",\n        lance: \"./piece/hitomoji/white_lance.png\",\n        knight: \"./piece/hitomoji/white_knight.png\",\n        silver: \"./piece/hitomoji/white_silver.png\",\n        gold: \"./piece/hitomoji/white_gold.png\",\n        bishop: \"./piece/hitomoji/white_bishop.png\",\n        rook: \"./piece/hitomoji/white_rook.png\",\n        king: \"./piece/hitomoji/white_king.png\",\n        king2: \"./piece/hitomoji/white_king2.png\",\n        promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n        horse: \"./piece/hitomoji/white_horse.png\",\n        dragon: \"./piece/hitomoji/white_dragon.png\",\n      },\n    },\n  },\n  hitomojiGothic: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/black_lance.png\",\n        knight: \"./piece/hitomoji_gothic/black_knight.png\",\n        silver: \"./piece/hitomoji_gothic/black_silver.png\",\n        gold: \"./piece/hitomoji_gothic/black_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/black_rook.png\",\n        king: \"./piece/hitomoji_gothic/black_king.png\",\n        king2: \"./piece/hitomoji_gothic/black_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/black_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/white_lance.png\",\n        knight: \"./piece/hitomoji_gothic/white_knight.png\",\n        silver: \"./piece/hitomoji_gothic/white_silver.png\",\n        gold: \"./piece/hitomoji_gothic/white_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/white_rook.png\",\n        king: \"./piece/hitomoji_gothic/white_king.png\",\n        king2: \"./piece/hitomoji_gothic/white_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/white_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n      },\n    },\n  },\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: string;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nexport default class LayoutBuilder {\n  private template: LayoutTemplate;\n\n  constructor(layoutType: BoardLayoutType) {\n    this.template =\n      templates[layoutType] || templates[BoardLayoutType.HITOMOJI];\n  }\n\n  preload(): void {\n    preloadImage(this.template.images.board);\n    Object.values(this.template.images.black).forEach(preloadImage);\n    Object.values(this.template.images.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / this.template.frame.width;\n    if (this.template.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / this.template.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      return {\n        style: {\n          height: this.template.frame.height * ratio + \"px\",\n          width: this.template.frame.width * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.template.images.board;\n      const x = this.template.board.x * ratio;\n      const y = this.template.board.y * ratio;\n      const width = this.template.board.width * ratio;\n      const height = this.template.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.template.images[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (this.template.board.leftPiecePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topPiecePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.piece.width * ratio;\n        const height = this.template.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (this.template.board.leftSquarePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topSquarePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.board.squreWidth * ratio;\n        const height = this.template.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.lastMove,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = this.template.hand[displayColor].x * ratio;\n      const standY = this.template.hand[displayColor].y * ratio;\n      const standWidth = this.template.hand.width * ratio;\n      const standHeight = this.template.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": this.template.hand.color,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (this.template.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (this.template.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = this.template.piece.width * ratio;\n        const pieceHeight = this.template.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.template.images[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.template.images[color][promoted.type];\n      const notPromoteImagePath = this.template.images[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (this.template.board.leftSquarePadding +\n          this.template.board.squreWidth * (square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (this.template.board.topSquarePadding +\n          this.template.board.squreHeight * square.y) *\n          ratio;\n      const width = this.template.board.squreWidth * 2 * ratio;\n      const height = this.template.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left: this.template.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: this.template.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: this.template.turn.width * ratio - borderWidth + \"px\",\n          height: this.template.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": this.template.turn.fontSize * ratio + \"px\",\n          \"border-radius\": this.template.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.playerName[displayColor].x * ratio + \"px\",\n          top: this.template.playerName[displayColor].y * ratio + \"px\",\n          width: this.template.playerName.width * ratio + \"px\",\n          height: this.template.playerName.height * ratio + \"px\",\n          \"font-size\": this.template.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.clock[displayColor].x * ratio + \"px\",\n          top: this.template.clock[displayColor].y * ratio + \"px\",\n          width: this.template.clock.width * ratio + \"px\",\n          height: this.template.clock.height * ratio + \"px\",\n          \"font-size\": this.template.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: this.template.control.left.x * ratio + \"px\",\n            top: this.template.control.left.y * ratio + \"px\",\n            width: this.template.control.left.width * ratio + \"px\",\n            height: this.template.control.left.height * ratio + \"px\",\n            \"font-size\": this.template.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: this.template.control.right.x * ratio + \"px\",\n            top: this.template.control.right.y * ratio + \"px\",\n            width: this.template.control.right.width * ratio + \"px\",\n            height: this.template.control.right.height * ratio + \"px\",\n            \"font-size\": this.template.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  console.log(\"preload image:\", path);\n  const img = document.createElement(\"img\");\n  img.src = \"path\";\n  preloadedImages[path] = img;\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RecordComment.vue?vue&type=style&index=0&id=3c930ba2&scoped=true&lang=css\"","import { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MAX_SCORE = 2000;\n\nexport const MIN_SCORE = -MAX_SCORE;\n\nexport class RecordEntryCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  private updateScore(\n    color: Color,\n    sender: USIInfoSender,\n    score: number\n  ): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] = color ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.scoreCP) {\n      this.updateScore(\n        color,\n        sender,\n        Math.min(Math.max(command.scoreCP, MIN_SCORE), MAX_SCORE)\n      );\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MAX_SCORE : MIN_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ResearchDialog.vue?vue&type=style&index=0&id=23a86a08&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Message.vue?vue&type=style&index=0&id=10e901d0&scoped=true&lang=css\"","import { Color } from \".\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  isCheck(kingColor: Color, filled: Square, ignore: Square): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  isCheck(\n    kingColor: Color,\n    filled?: Square,\n    ignore?: Square,\n    kingSquare?: Square\n  ): boolean {\n    const king = kingSquare || this.findKing(kingColor);\n    if (!king) {\n      return false;\n    }\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = king.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (filled && square.equals(filled)) {\n          break;\n        }\n        if (ignore && square.equals(ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color === kingColor) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Record, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(record: Record): string {\n  const date = record.metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return (\n      date.trim().replaceAll(\" \", \"_\").replaceAll(\"/\", \"\").replaceAll(\":\", \"\") +\n      \".kif\"\n    );\n  }\n  return (\n    new Date()\n      .toLocaleDateString(undefined, {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n      })\n      .replaceAll(\"/\", \"\") + \".kif\"\n  );\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BoardPane.vue?vue&type=style&index=0&id=d188ad70&scoped=true&lang=css\"","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += ` (${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  directionToDeltaMap,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSfen(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isCheck(this.color, move.to, move.from)\n          : this._board.isCheck(this.color, undefined, move.from, move.to)\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isCheck(this.color, move.to)) {\n        return false;\n      }\n    }\n    // FIXME: 連続王手の千日手チェック\n    return true;\n  }\n\n  doMove(move: Move): boolean {\n    if (!this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSfen(1);\n  }\n\n  getSfen(nextMoveNumber: number): string {\n    let ret = `sfen ${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    this._board.resetBySFEN(sections[1]);\n    this._color = parseSFENColor(sections[2]);\n    const hands = Hand.parseSFEN(sections[3]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setTurn(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length < 5) {\n      return false;\n    }\n    if (sections[0] !== \"sfen\") {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[1])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[2])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[3])) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n","import Position, { ImmutablePosition } from \"./position\";\nimport Move from \"./move\";\nimport { Color } from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TITLE = \"title\", // 表題\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport class RecordMetadata {\n  private metadata: Map<RecordMetadataKey, string>;\n  private customMetadata: Map<string, string>;\n\n  constructor() {\n    this.metadata = new Map<RecordMetadataKey, string>();\n    this.customMetadata = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.metadata.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.metadata.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    this.metadata.set(key, value);\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.customMetadata.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.customMetadata.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    this.customMetadata.set(key, value);\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface RecordEntry {\n  readonly number: number;\n  readonly prev: RecordEntry | null;\n  readonly next: RecordEntry | null;\n  readonly branch: RecordEntry | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  comment: string;\n  customData: string | undefined;\n  readonly displayMoveText: string;\n  readonly displayText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass RecordEntryImpl implements RecordEntry {\n  public next: RecordEntryImpl | null;\n  public branch: RecordEntryImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: RecordEntryImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayMoveText(): string {\n    const prev = this.prev instanceof Move ? this.prev : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get displayText(): string {\n    let ret = this.displayMoveText;\n    if (this.number !== 0) {\n      const elapsed = millisecondsToMSS(this.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n      ret += ` (${elapsed} / ${totalElapsed})`;\n    }\n    return ret;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport default class Record {\n  private _metadata: RecordMetadata;\n\n  private _initialPosition: ImmutablePosition;\n\n  private _position: Position;\n\n  private _first: RecordEntryImpl;\n\n  private _current: RecordEntryImpl;\n\n  constructor(position?: ImmutablePosition) {\n    this._metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = new RecordEntryImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START // move\n    );\n    this._current = this._first;\n  }\n\n  get metadata(): RecordMetadata {\n    return this._metadata;\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): RecordEntry {\n    return this._first;\n  }\n\n  get current(): RecordEntry {\n    return this._current;\n  }\n\n  get moves(): Array<RecordEntry> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<RecordEntry> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<RecordEntryImpl> {\n    const moves = new Array<RecordEntryImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): RecordEntry | null {\n    return this._current.prev ? this._current.prev.next : null;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first.next = null;\n    this._current = this._first;\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as RecordEntryImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((entry) => {\n      entry.activeBranch = entry.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move);\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove): boolean {\n    if (move instanceof Move) {\n      if (!this.position.isValidMove(move)) {\n        return false;\n      }\n      this._position.doMove(move);\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new RecordEntryImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move // move\n      );\n      this._current = this._current.next;\n      return true;\n    }\n    let p: RecordEntryImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new RecordEntryImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move // move\n    );\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    this.goBack();\n    this._current.next = null;\n  }\n\n  get usi(): string {\n    let ret = \"position \" + this.initialPosition.sfen + \" moves\";\n    this._movesBefore.forEach((entry) => {\n      if (entry.move instanceof Move) {\n        ret += \" \" + entry.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get sfen(): string {\n    return \"position \" + this.position.getSfen(this._current.number + 1);\n  }\n\n  forEach(handler: (entry: RecordEntry) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (entry: RecordEntryImpl) => void): void {\n    let p: RecordEntryImpl | null = this._first;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport { SpecialMove } from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  let end = line.indexOf(\"#\");\n  if (end === -1) {\n    end = line.length;\n  }\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin, end),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length, end),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line.substring(0, end),\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗)( |$)/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section) {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    record.goto(num - 1);\n    record.append(move);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  if (!record.append(move)) {\n    return new Error(\"無効な指し手: \" + data);\n  }\n\n  const timeResult = timeRegExp.exec(time);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let inMoveSection = false;\n  for (const line of lines) {\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          record.metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          record.metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        record.current.comment +=\n          (record.current.comment.length !== 0 ? \"\\n\" : \"\") + parsed.data;\n        break;\n      case LineType.UNKNOWN:\n        console.log(\"skip\", line);\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: RecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: Record,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((entry) => {\n    if (entry.move) {\n      if (!entry.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + entry.number + \"手\" + returnCode;\n      }\n      if (entry.move instanceof Move) {\n        ret += entry.number + \" \" + formatMove(entry.move);\n      } else {\n        ret += specialMoveToString[entry.move];\n      }\n      const elapsed = millisecondsToMSS(entry.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(entry.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (entry.isFirstBranch && entry.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (entry.comment.length !== 0) {\n      ret +=\n        \"*\" + entry.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ErrorMessage.vue?vue&type=style&index=1&id=50fb1a28&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InformationPane.vue?vue&type=style&index=0&id=64d22c90&scoped=true&lang=css\"","export enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"先手\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"後手\";\n    case USIInfoSender.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EngineAnalytics.vue?vue&type=style&index=0&id=8a1e7ee0&scoped=true&lang=css\"","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { API } from \"./renderer\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: API = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Buffer> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async endResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startGame(): Promise<void> {\n    // Do Nothing\n  },\n  async endGame(): Promise<void> {\n    // Do Nothing\n  },\n  async updateUSIPosition(): Promise<void> {\n    // Do Nothing\n  },\n  async stopUSI(): Promise<void> {\n    // Do Nothing\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n};\n","import { Color } from \"@/shogi\";\nimport { Action, Mutation } from \"@/store\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { watch } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport { Mode, State } from \"@/store/state\";\nimport { AppSetting } from \"@/settings/app\";\nimport { Store } from \"vuex\";\nimport { MenuEvent } from \"@/menu/event\";\nimport { SpecialMove } from \"@/shogi/record\";\nimport { USIInfoSender } from \"@/usi/info\";\nimport { InitialPositionType } from \"@/shogi/board\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(mode: Mode, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Buffer>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Buffer): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  startResearch(json: string, sessionID: number): Promise<void>;\n  endResearch(): Promise<void>;\n  startGame(json: string, sessionID: number): Promise<void>;\n  endGame(usi: string, specialMove?: SpecialMove): Promise<void>;\n  updateUSIPosition(\n    usi: string,\n    gameSetting: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stopUSI(color: Color): Promise<void>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      color: Color,\n      sfen: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      json: string\n    ) => void\n  ): void;\n}\n\nfunction getWindowObject(): any {\n  return window;\n}\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n\nfunction getAPI(): API {\n  return getWindowObject().electronShogiAPI || webAPI;\n}\n\nexport async function getRecordPathFromProcArg(): Promise<string> {\n  return await getAPI().getRecordPathFromProcArg();\n}\n\nexport async function showOpenRecordDialog(): Promise<string> {\n  return await getAPI().showOpenRecordDialog();\n}\n\nexport async function openRecord(path: string): Promise<Buffer> {\n  return await getAPI().openRecord(path);\n}\n\nexport async function showSaveRecordDialog(\n  defaultPath: string\n): Promise<string> {\n  return await getAPI().showSaveRecordDialog(defaultPath);\n}\n\nexport async function saveRecord(path: string, data: Buffer): Promise<void> {\n  await getAPI().saveRecord(path, data);\n}\n\nexport async function showSelectFileDialog(): Promise<string> {\n  return await getAPI().showSelectFileDialog();\n}\n\nexport async function loadAppSetting(): Promise<AppSetting> {\n  return JSON.parse(await getAPI().loadAppSetting());\n}\n\nexport async function saveAppSetting(setting: AppSetting): Promise<void> {\n  await getAPI().saveAppSetting(JSON.stringify(setting));\n}\n\nexport async function loadResearchSetting(): Promise<ResearchSetting> {\n  return JSON.parse(await getAPI().loadResearchSetting());\n}\n\nexport async function saveResearchSetting(\n  setting: ResearchSetting\n): Promise<void> {\n  await getAPI().saveResearchSetting(JSON.stringify(setting));\n}\n\nexport async function loadGameSetting(): Promise<GameSetting> {\n  return JSON.parse(await getAPI().loadGameSetting());\n}\n\nexport async function saveGameSetting(setting: GameSetting): Promise<void> {\n  await getAPI().saveGameSetting(JSON.stringify(setting));\n}\n\nexport async function loadUSIEngineSetting(): Promise<USIEngineSettings> {\n  return new USIEngineSettings(await getAPI().loadUSIEngineSetting());\n}\n\nexport async function saveUSIEngineSetting(\n  setting: USIEngineSettings\n): Promise<void> {\n  await getAPI().saveUSIEngineSetting(setting.jsonWithIndent);\n}\n\nexport async function showSelectUSIEngineDialog(): Promise<string> {\n  return await getAPI().showSelectUSIEngineDialog();\n}\n\nexport async function getUSIEngineInfo(\n  path: string\n): Promise<USIEngineSetting> {\n  return JSON.parse(await getAPI().getUSIEngineInfo(path));\n}\n\nexport async function startResearch(\n  researchSetting: ResearchSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startResearch(JSON.stringify(researchSetting), sessionID);\n}\n\nexport async function endResearch(): Promise<void> {\n  await getAPI().endResearch();\n}\n\nexport async function startGame(\n  gameSetting: GameSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startGame(JSON.stringify(gameSetting), sessionID);\n}\n\nexport async function endGame(\n  usi: string,\n  specialMove?: SpecialMove\n): Promise<void> {\n  await getAPI().endGame(usi, specialMove);\n}\n\nexport async function updateUSIPosition(\n  usi: string,\n  gameSetting: GameSetting,\n  blackTimeMs: number,\n  whiteTimeMs: number\n): Promise<void> {\n  await getAPI().updateUSIPosition(\n    usi,\n    JSON.stringify(gameSetting),\n    blackTimeMs,\n    whiteTimeMs\n  );\n}\n\nexport async function stopUSI(color: Color): Promise<void> {\n  await getAPI().stopUSI(color);\n}\n\nexport async function sendUSISetOption(\n  path: string,\n  name: string\n): Promise<void> {\n  await getAPI().sendUSISetOption(path, name);\n}\n\nexport function setup(store: Store<State>): void {\n  const state = store.state;\n  const api = getAPI();\n  api.onSendError((e: Error) => {\n    store.commit(Mutation.PUSH_ERROR, e);\n  });\n  api.onMenuEvent((event: MenuEvent) => {\n    if (state.bussyState.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.commit(Mutation.NEW_RECORD);\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.dispatch(Action.OPEN_RECORD);\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.dispatch(Action.SAVE_RECORD, { overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.dispatch(Action.SAVE_RECORD);\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.dispatch(Action.COPY_RECORD);\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.dispatch(Action.REMOVE_RECORD_AFTER);\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.dispatch(Action.START_POSITION_EDITING);\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.dispatch(Action.END_POSITION_EDITING);\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.commit(Mutation.CHANGE_TURN);\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.STANDARD\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_RIGHT_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_BISHOP\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_2PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_4PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_6PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_8PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.TSUME_SHOGI\n        );\n        break;\n      case MenuEvent.START_GAME:\n        store.commit(Mutation.SHOW_GAME_DIALOG);\n        break;\n      case MenuEvent.STOP_GAME:\n        store.dispatch(Action.STOP_GAME);\n        break;\n      case MenuEvent.RESIGN:\n        store.dispatch(Action.RESIGN_BY_USER);\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.dispatch(Action.STOP_RESEARCH);\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.commit(Mutation.FLIP_BOARD);\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n        break;\n    }\n  });\n  api.onUSIBestMove(\n    (sessionID: number, usi: string, color: Color, sfen: string) => {\n      store.dispatch(Action.DO_MOVE_BY_USI_ENGINE, {\n        sessionID,\n        usi,\n        color,\n        sfen,\n      });\n    }\n  );\n  api.onUSIInfo(\n    (sessionID: number, usi: string, sender: USIInfoSender, json: string) => {\n      store.commit(Mutation.RECEIVE_USI_INFO, {\n        sessionID,\n        usi,\n        sender,\n        info: JSON.parse(json),\n      });\n    }\n  );\n  watch(\n    () => [state.mode, state.bussyState.isBussy],\n    ([mode, bussy]) => {\n      api.updateMenuState(mode as Mode, bussy as boolean);\n    }\n  );\n  api.updateMenuState(state.mode, state.bussyState.isBussy);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PasteDialog.vue?vue&type=style&index=0&id=7a20f62c&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EvaluationChart.vue?vue&type=style&index=0&id=02234852&scoped=true&lang=css\"","import { InitialPositionType } from \"@/shogi/board\";\nimport { USIEngineSetting } from \"./usi\";\n\nexport enum PlayerType {\n  HUMAN = \"human\",\n  USI = \"usi\",\n}\n\nexport type PlayerSetting = {\n  name: string;\n  type: PlayerType;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      type: PlayerType.HUMAN,\n    },\n    white: {\n      name: \"人\",\n      type: PlayerType.HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとはフィッシャールールと併用できません。\");\n  }\n  return;\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_Bussy = _resolveComponent(\"Bussy\")!\n  const _component_Message = _resolveComponent(\"Message\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.processing)\n      ? (_openBlock(), _createBlock(_component_Bussy, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_Message, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 7 }))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c479adee\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = {\n  class: \"top-pane\",\n  ref: \"topPane\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_InformationPane = _resolveComponent(\"InformationPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          maxSize: _ctx.boardPaneMaxSize\n        }, null, 8, [\"maxSize\"]),\n        _createVNode(_component_RecordPane, { class: \"top-right-pane\" })\n      ], 512),\n      _createVNode(_component_InformationPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d188ad70\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/sports_esports_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n]\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/block_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 中断 \")\nconst _hoisted_7 = [\n  _hoisted_5,\n  _hoisted_6\n]\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/flag_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_10 = [\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/science_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_13 = [\n  _hoisted_11,\n  _hoisted_12\n]\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/do_disturb_on_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_16 = [\n  _hoisted_14,\n  _hoisted_15\n]\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/app_registration_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_19 = [\n  _hoisted_17,\n  _hoisted_18\n]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/check_circle_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_21 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_22 = [\n  _hoisted_20,\n  _hoisted_21\n]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/swap_vert_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_24 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_25 = [\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = { class: \"control bottom\" }\nconst _hoisted_27 = [\"disabled\"]\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/settings_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_29 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_30 = [\n  _hoisted_28,\n  _hoisted_29\n]\nconst _hoisted_31 = [\"disabled\"]\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/settings_input_component_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_33 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_34 = [\n  _hoisted_32,\n  _hoisted_33\n]\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/flip_camera_android_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_36 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_37 = [\n  _hoisted_35,\n  _hoisted_36\n]\nconst _hoisted_38 = [\"disabled\"]\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/content_paste_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_40 = /*#__PURE__*/_createTextVNode(\" 棋譜貼り付け \")\nconst _hoisted_41 = [\n  _hoisted_39,\n  _hoisted_40\n]\nconst _hoisted_42 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/content_copy_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_43 = /*#__PURE__*/_createTextVNode(\" 棋譜コピー \")\nconst _hoisted_44 = [\n  _hoisted_42,\n  _hoisted_43\n]\nconst _hoisted_45 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/backspace_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_46 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\nconst _hoisted_47 = [\n  _hoisted_45,\n  _hoisted_46\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Board = _resolveComponent(\"Board\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_Board, {\n      layoutType: _ctx.layout,\n      maxSize: _ctx.maxSize,\n      position: _ctx.position,\n      lastMove: _ctx.lastMove,\n      flip: _ctx.flip,\n      allowMove: _ctx.allowMove,\n      allowEdit: _ctx.allowEdit,\n      blackPlayerName: _ctx.blackPlayerName,\n      whitePlayerName: _ctx.whitePlayerName,\n      blackPlayerTimeMs: _ctx.blackPlayerTimeMs,\n      blackPlayerByoyomi: _ctx.blackPlayerByoyomi,\n      whitePlayerTimeMs: _ctx.whitePlayerTimeMs,\n      whitePlayerByoyomi: _ctx.whitePlayerByoyomi,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, _hoisted_4))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, _hoisted_7))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, _hoisted_10))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, _hoisted_13))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, _hoisted_16))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, _hoisted_19))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, _hoisted_22))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, _hoisted_25))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionStandard && _ctx.onInitPositionStandard(...args)))\n              }, \" 平手 \"))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionTsumeShogi && _ctx.onInitPositionTsumeShogi(...args)))\n              }, \" 詰将棋 \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_26, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args))),\n            disabled: !_ctx.controlStates.appSettings\n          }, _hoisted_30, 8, _hoisted_27),\n          _createElementVNode(\"button\", {\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args))),\n            disabled: !_ctx.controlStates.engineSettings\n          }, _hoisted_34, 8, _hoisted_31),\n          _createElementVNode(\"button\", {\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, _hoisted_37),\n          _createElementVNode(\"button\", {\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args))),\n            disabled: !_ctx.controlStates.paste\n          }, _hoisted_41, 8, _hoisted_38),\n          _createElementVNode(\"button\", {\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onCopy && _ctx.onCopy(...args)))\n          }, _hoisted_44),\n          _createElementVNode(\"button\", {\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, _hoisted_47)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"layoutType\", \"maxSize\", \"position\", \"lastMove\", \"flip\", \"allowMove\", \"allowEdit\", \"blackPlayerName\", \"whitePlayerName\", \"blackPlayerTimeMs\", \"blackPlayerByoyomi\", \"whitePlayerTimeMs\", \"whitePlayerByoyomi\", \"onMove\", \"onEdit\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9e33db16\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"▲\" + _toDisplayString(_ctx.blackPlayerName || \"先手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"△\" + _toDisplayString(_ctx.whitePlayerName || \"後手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"square\",\n          key: square.id,\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"piece\",\n          key: piece.id,\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"square\",\n          key: square.id,\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"piece\",\n            key: piece.id,\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'black', pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"piece\",\n            key: piece.id,\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'white', pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","\nimport { PieceType } from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, { BoardLayoutType } from \"@/layout/board\";\nimport { Square, Piece, Color, Move, ImmutablePosition } from \"@/shogi\";\nimport { RectSize } from \"@/layout/types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"Board\",\n  props: {\n    layoutType: {\n      type: String as PropType<BoardLayoutType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Move,\n      required: false,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n  },\n  emits: [\"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(props.layoutType);\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() =>\n      layoutBuilder.value.build(\n        props.maxSize.reduce(new RectSize(20, 20)),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      )\n    );\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n    };\n  },\n});\n","import { render } from \"./Board.vue?vue&type=template&id=9e33db16&scoped=true&ts=true\"\nimport script from \"./Board.vue?vue&type=script&lang=ts\"\nexport * from \"./Board.vue?vue&type=script&lang=ts\"\n\nimport \"./Board.vue?vue&type=style&index=0&id=9e33db16&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9e33db16\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport Board from \"@/components/primitive/Board.vue\";\nimport {\n  InitialPositionType,\n  Move,\n  PositionChange,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { RectSize } from \"@/layout/types\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/state\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  components: {\n    Board,\n  },\n  setup() {\n    const store = useStore();\n\n    const onMove = (move: Move) => {\n      store.dispatch(Action.DO_MOVE_BY_USER, move);\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.commit(Mutation.EDIT_POSITION, change);\n    };\n\n    const onGame = () => {\n      store.commit(Mutation.SHOW_GAME_DIALOG);\n    };\n\n    const onStop = () => {\n      store.dispatch(Action.STOP_GAME);\n    };\n\n    const onResign = () => {\n      store.dispatch(Action.RESIGN_BY_USER);\n    };\n\n    const onResearch = () => {\n      store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n    };\n\n    const onEndResearch = () => {\n      store.dispatch(Action.STOP_RESEARCH);\n    };\n\n    const onStartEditPosition = () => {\n      store.dispatch(Action.START_POSITION_EDITING);\n    };\n\n    const onEndEditPosition = () => {\n      store.dispatch(Action.END_POSITION_EDITING);\n    };\n\n    const onInitPositionStandard = () => {\n      store.commit(Mutation.INITIALIZE_POSITION, InitialPositionType.STANDARD);\n    };\n\n    const onInitPositionTsumeShogi = () => {\n      store.commit(\n        Mutation.INITIALIZE_POSITION,\n        InitialPositionType.TSUME_SHOGI\n      );\n    };\n\n    const onChangeTurn = () => {\n      store.commit(Mutation.CHANGE_TURN);\n    };\n\n    const onOpenAppSettings = () => {\n      store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n    };\n\n    const onOpenEngineSettings = () => {\n      store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n    };\n\n    const onFlip = () => {\n      store.commit(Mutation.FLIP_BOARD);\n    };\n\n    const onPaste = () => {\n      store.commit(Mutation.SHOW_PASTE_DIALOG);\n    };\n\n    const onCopy = () => {\n      store.dispatch(Action.COPY_RECORD);\n    };\n\n    const onRemoveAfter = () => {\n      store.dispatch(Action.REMOVE_RECORD_AFTER);\n    };\n\n    const allowEdit = computed(\n      () => store.state.mode === Mode.POSITION_EDITING\n    );\n\n    const allowMove = computed(() => store.getters.isMovableByUser);\n\n    const position = computed(() => store.state.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.state.record.current.move;\n      return move instanceof Move ? move : null;\n    });\n\n    const layout = computed(() => store.state.appSetting.boardLayout);\n\n    const flip = computed(() => store.state.appSetting.boardFlipping);\n\n    const blackPlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME\n        ? store.state.gameState.blackTimeMs\n        : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME\n        ? store.state.gameState.blackByoyomi\n        : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME\n        ? store.state.gameState.whiteTimeMs\n        : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME\n        ? store.state.gameState.whiteByoyomi\n        : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.state.mode === Mode.NORMAL,\n        stop: store.state.mode === Mode.GAME,\n        resign: store.state.mode === Mode.GAME,\n        research: store.state.mode === Mode.NORMAL,\n        endResearch: store.state.mode === Mode.RESEARCH,\n        startEditPosition: store.state.mode === Mode.NORMAL,\n        endEditPosition: store.state.mode === Mode.POSITION_EDITING,\n        initPosition: store.state.mode === Mode.POSITION_EDITING,\n        paste: store.state.mode === Mode.NORMAL,\n        appSettings: store.state.mode === Mode.NORMAL,\n        engineSettings: store.state.mode === Mode.NORMAL,\n      };\n    });\n\n    return {\n      layout,\n      position,\n      lastMove,\n      flip,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPositionStandard,\n      onInitPositionTsumeShogi,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onPaste,\n      onCopy,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=d188ad70&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=d188ad70&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d188ad70\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Record = _resolveComponent(\"Record\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_Record, {\n      class: \"record\",\n      record: _ctx.record,\n      operational: _ctx.isRecordOperational,\n      onGoBegin: _ctx.goBegin,\n      onGoBack: _ctx.goBack,\n      onGoForward: _ctx.goForward,\n      onGoEnd: _ctx.goEnd,\n      onSelectMove: _ctx.selectMove,\n      onSelectBranch: _ctx.selectBranch\n    }, null, 8, [\"record\", \"operational\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5fb22b30\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/first_page_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/chevron_left_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_8 = [\n  _hoisted_7\n]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/chevron_right_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_11 = [\n  _hoisted_10\n]\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/last_page_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_14 = [\n  _hoisted_13\n]\nconst _hoisted_15 = [\"disabled\"]\nconst _hoisted_16 = [\"selected\", \"value\"]\nconst _hoisted_17 = [\"disabled\"]\nconst _hoisted_18 = [\"selected\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin())),\n          disabled: !_ctx.operational\n        }, _hoisted_5, 8, _hoisted_3),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack())),\n          disabled: !_ctx.operational\n        }, _hoisted_8, 8, _hoisted_6),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward())),\n          disabled: !_ctx.operational\n        }, _hoisted_11, 8, _hoisted_9),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd())),\n          disabled: !_ctx.operational\n        }, _hoisted_14, 8, _hoisted_12)\n      ]),\n      _createElementVNode(\"select\", {\n        class: \"move-list\",\n        size: \"2\",\n        ref: \"moveList\",\n        onChange: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeNumber())),\n        disabled: !_ctx.operational\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: move.number,\n            selected: move.selected,\n            value: move.number\n          }, _toDisplayString(move.number !== 0 ? move.number + \" \" : \"\") + \" \" + _toDisplayString(move.text) + \" \" + _toDisplayString(move.hasBranch ? \" 分岐\" : \"\"), 9, _hoisted_16))\n        }), 128))\n      ], 40, _hoisted_15),\n      _createElementVNode(\"select\", {\n        class: \"branch-list\",\n        size: \"2\",\n        ref: \"branchList\",\n        onChange: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeBranch())),\n        disabled: !_ctx.operational\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: branch.index,\n            selected: branch.selected,\n            value: branch.index\n          }, _toDisplayString(branch.text), 9, _hoisted_18))\n        }), 128))\n      ], 40, _hoisted_17)\n    ])\n  ]))\n}","\nimport { Record, RecordEntry } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"Record\",\n  props: {\n    record: {\n      type: Record,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      context.emit(\"goBegin\");\n    };\n\n    const goBack = () => {\n      context.emit(\"goBack\");\n    };\n\n    const goForward = () => {\n      context.emit(\"goForward\");\n    };\n\n    const goEnd = () => {\n      context.emit(\"goEnd\");\n    };\n\n    const changeNumber = () => {\n      context.emit(\"selectMove\", Number(moveList.value.value));\n    };\n\n    const changeBranch = () => {\n      context.emit(\"selectBranch\", Number(branchList.value.value));\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        text: string;\n        number: number;\n        hasBranch: boolean;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          hasBranch: elem.hasBranch,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin?.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        selected: boolean;\n      }[] = [];\n      let p: RecordEntry | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayMoveText,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n    };\n  },\n});\n","import { render } from \"./Record.vue?vue&type=template&id=5fb22b30&scoped=true&ts=true\"\nimport script from \"./Record.vue?vue&type=script&lang=ts\"\nexport * from \"./Record.vue?vue&type=script&lang=ts\"\n\nimport \"./Record.vue?vue&type=style&index=0&id=5fb22b30&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5fb22b30\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport Record from \"@/components/primitive/Record.vue\";\nimport { Action, useStore } from \"@/store\";\nimport { Mode } from \"@/store/state\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    Record,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.dispatch(Action.CHANGE_MOVE_NUMBER, number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.state.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.state.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.dispatch(Action.CHANGE_BRANCH, index);\n    };\n\n    const isRecordOperational = computed(() => {\n      return (\n        store.state.mode === Mode.NORMAL || store.state.mode === Mode.RESEARCH\n      );\n    });\n\n    const record = computed(() => store.state.record);\n\n    return {\n      isRecordOperational,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=a8ae60cc&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=a8ae60cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a8ae60cc\"]])\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-64d22c90\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/edit_note_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 棋譜コメント \")\nconst _hoisted_5 = [\n  _hoisted_3,\n  _hoisted_4\n]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/psychology_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_8 = [\n  _hoisted_6,\n  _hoisted_7\n]\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/show_chart_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 形勢グラフ \")\nconst _hoisted_11 = [\n  _hoisted_9,\n  _hoisted_10\n]\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/arrow_drop_down_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_14 = [\n  _hoisted_12,\n  _hoisted_13\n]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"tab-border\" }, null, -1))\nconst _hoisted_16 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"minimize-padding\", { enabled: _ctx.activeTab === 'invisible' }])\n      }, null, 2),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'comment' }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect('comment')))\n        }, _hoisted_5, 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'search' }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect('search')))\n        }, _hoisted_8, 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'chart' }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect('chart')))\n        }, _hoisted_11, 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'invisible' }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect('invisible')))\n        }, _hoisted_14, 2)\n      ]),\n      _hoisted_15,\n      _createElementVNode(\"div\", _hoisted_16, [\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'comment' }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'search' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'chart' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3c930ba2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/state\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.state.record.current.comment);\n    const readonly = computed(() => store.state.mode != Mode.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.commit(Mutation.UPDATE_RECORD_COMMENT, comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=3c930ba2&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=3c930ba2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c930ba2\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-8a1e7ee0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.infos.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            name: _ctx.blackPlayerName,\n            info: _ctx.infos.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            name: _ctx.whitePlayerName,\n            info: _ctx.infos.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            name: _ctx.researcherName,\n            info: _ctx.infos.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-61f1257a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-61f1257a><div class=\\\"list-column time\\\" data-v-61f1257a>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-61f1257a>順位</div><div class=\\\"list-column depth\\\" data-v-61f1257a>深さ</div><div class=\\\"list-column score\\\" data-v-61f1257a>評価値</div></div>\", 1)\nconst _hoisted_19 = { class: \"list-column time\" }\nconst _hoisted_20 = { class: \"list-column multipv-index\" }\nconst _hoisted_21 = { class: \"list-column depth\" }\nconst _hoisted_22 = { class: \"list-column score\" }\nconst _hoisted_23 = { class: \"list-column score-flag\" }\nconst _hoisted_24 = { class: \"list-column text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_18,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 36}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.info.iterates, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"list-item\",\n            key: index\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_21, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.text), 1)\n          ]))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}","\nimport { USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=61f1257a&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=61f1257a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61f1257a\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/analytics/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/layout/types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const infos = computed(() => store.state.usiMonitor);\n    const elementHeight = computed(() => {\n      const infos = store.state.usiMonitor;\n      const n =\n        (infos.blackPlayer ? 1 : 0) +\n        (infos.whitePlayer ? 1 : 0) +\n        (infos.researcher ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    const blackPlayerName = computed(() => store.state.gameSetting.black.name);\n    const whitePlayerName = computed(() => store.state.gameSetting.white.name);\n    const researcherName = computed(\n      () => store.state.researchSetting.usi?.name\n    );\n    return {\n      infos,\n      blackPlayerName,\n      whitePlayerName,\n      researcherName,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=8a1e7ee0&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=8a1e7ee0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8a1e7ee0\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-02234852\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/layout/types\";\nimport { Action, useStore } from \"@/store\";\nimport { MAX_SCORE, MIN_SCORE, RecordEntryCustomData } from \"@/store/record\";\nimport { defineComponent, onMounted, onUnmounted, ref, Ref, watch } from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/usi/info\";\nimport { Record } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: Record\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((entry) => {\n        const data = new RecordEntryCustomData(entry.customData);\n        const value = data.evaluation && data.evaluation[sender];\n        if (value) {\n          dataPoints.push({\n            x: entry.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: Record) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: \"red\",\n        data: [\n          { x: record.current.number, y: MAX_SCORE },\n          { x: record.current.number, y: MIN_SCORE },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (record: Record) => {\n      return [\n        verticalLine(record),\n        buildDataset(\"royalblue\", USIInfoSender.BLACK_PLAYER, record),\n        buildDataset(\"darkorange\", USIInfoSender.WHITE_PLAYER, record),\n        buildDataset(\"darkgreen\", USIInfoSender.RESEARCHER, record),\n      ];\n    };\n\n    const buildScalesOption = (record: Record) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n        },\n        y: {\n          min: MIN_SCORE,\n          max: MAX_SCORE,\n        },\n      };\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.dispatch(Action.CHANGE_MOVE_NUMBER, number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: buildDatasets(store.state.record),\n        },\n        options: {\n          color: \"black\",\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.state.record],\n      ([record]) => {\n        chart.data.datasets = buildDatasets(record);\n        chart.options.scales = buildScalesOption(record);\n        chart.update();\n      },\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=02234852&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=02234852&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02234852\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/analytics/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/analytics/EngineAnalytics.vue\";\nimport EvaluationChart from \"@/components/analytics/EvaluationChart.vue\";\nimport { Action, useStore } from \"@/store\";\nimport { RectSize } from \"@/layout/types\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"InformationPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: string) => {\n      store.dispatch(Action.UPDATE_AND_SAVE_APP_SETTING_ON_BACKGROUND, {\n        informationTab: id,\n      });\n    };\n    const activeTab = computed(() => store.state.appSetting.informationTab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      changeSelect,\n    };\n  },\n});\n","import { render } from \"./InformationPane.vue?vue&type=template&id=64d22c90&scoped=true&ts=true\"\nimport script from \"./InformationPane.vue?vue&type=script&lang=ts\"\nexport * from \"./InformationPane.vue?vue&type=script&lang=ts\"\n\nimport \"./InformationPane.vue?vue&type=style&index=0&id=64d22c90&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-64d22c90\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  Ref,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport InformationPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minInformationHeight,\n} from \"./InformationPane.vue\";\nimport { RectSize } from \"@/layout/types\";\nimport { useStore } from \"@/store\";\nimport { InformationTab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    InformationPane,\n  },\n  setup() {\n    const store = useStore();\n    const windowSize = reactive(new RectSize(0, 0));\n    const topPaneHeight = ref(0);\n    const topPane: Ref = ref(null);\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    const topPaneResizeObserver = new ResizeObserver((entries) => {\n      topPaneHeight.value = entries[0].contentRect.height;\n    });\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.observe(topPane.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.disconnect();\n    });\n\n    const boardPaneMaxSize = computed(() => {\n      const minInformationPaneHeight =\n        store.state.appSetting.informationTab !== InformationTab.INVISIBLE\n          ? minInformationHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minInformationPaneHeight\n      );\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - topPaneHeight.value\n      );\n    });\n\n    return {\n      topPane,\n      boardPaneMaxSize,\n      bottomPaneSize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=c479adee&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=c479adee&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c479adee\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fc28857c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area players\" }\nconst _hoisted_4 = { class: \"player\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"es://human\" }, \"人\", -1))\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"player\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"es://human\" }, \"人\", -1))\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_15 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_20 = [\"value\"]\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_22 = { class: \"dialog-form-item\" }\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_24 = [\"value\"]\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_26 = { class: \"dialog-form-item\" }\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_30 = { class: \"dialog-form-area flags\" }\nconst _hoisted_31 = { class: \"dialog-form-item\" }\nconst _hoisted_32 = [\"value\"]\nconst _hoisted_33 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-fc28857c>現在の局面</option><option value=\\\"standard\\\" data-v-fc28857c>平手</option><option value=\\\"handicapLance\\\" data-v-fc28857c>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-fc28857c>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-fc28857c>角落ち</option><option value=\\\"handicapRook\\\" data-v-fc28857c>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-fc28857c>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-fc28857c>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-fc28857c>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-fc28857c>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-fc28857c>8枚落ち</option>\", 11)\nconst _hoisted_44 = [\n  _hoisted_33\n]\nconst _hoisted_45 = { class: \"dialog-form-item\" }\nconst _hoisted_46 = [\"checked\"]\nconst _hoisted_47 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_48 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            class: \"player-select\",\n            size: \"1\",\n            ref: \"blackPlayerSelect\",\n            value: _ctx.defaultValues.black.type\n          }, [\n            _hoisted_7,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: engine.uri,\n                value: engine.uri\n              }, _toDisplayString(engine.name), 9, _hoisted_8))\n            }), 128))\n          ], 8, _hoisted_6)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"select\", {\n            class: \"player-select\",\n            size: \"1\",\n            ref: \"whitePlayerSelect\",\n            value: _ctx.defaultValues.white.type\n          }, [\n            _hoisted_12,\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: engine.uri,\n                value: engine.uri\n              }, _toDisplayString(engine.name), 9, _hoisted_13))\n            }), 128))\n          ], 8, _hoisted_11)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createElementVNode(\"div\", _hoisted_16, [\n            _hoisted_17,\n            _createElementVNode(\"input\", {\n              class: \"time-input\",\n              ref: \"hours\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.hours\n            }, null, 8, _hoisted_18),\n            _hoisted_19,\n            _createElementVNode(\"input\", {\n              class: \"time-input\",\n              ref: \"minutes\",\n              type: \"number\",\n              min: \"0\",\n              max: \"59\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.minutes\n            }, null, 8, _hoisted_20),\n            _hoisted_21\n          ]),\n          _createElementVNode(\"div\", _hoisted_22, [\n            _hoisted_23,\n            _createElementVNode(\"input\", {\n              class: \"time-input single\",\n              ref: \"byoyomi\",\n              type: \"number\",\n              min: \"0\",\n              max: \"60\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.byoyomi\n            }, null, 8, _hoisted_24),\n            _hoisted_25\n          ]),\n          _createElementVNode(\"div\", _hoisted_26, [\n            _hoisted_27,\n            _createElementVNode(\"input\", {\n              class: \"time-input single\",\n              ref: \"increment\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.increment\n            }, null, 8, _hoisted_28),\n            _hoisted_29\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_30, [\n          _createElementVNode(\"div\", _hoisted_31, [\n            _createElementVNode(\"select\", {\n              ref: \"startPosition\",\n              value: _ctx.defaultValues.startPosition\n            }, _hoisted_44, 8, _hoisted_32)\n          ]),\n          _createElementVNode(\"div\", _hoisted_45, [\n            _createElementVNode(\"input\", {\n              ref: \"enableEngineTimeout\",\n              type: \"checkbox\",\n              id: \"disable-engine-timeout\",\n              checked: _ctx.defaultValues.enableEngineTimeout\n            }, null, 8, _hoisted_46),\n            _hoisted_47\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_48, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport { loadGameSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  PlayerType,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const blackPlayerSelect: Ref = ref(null);\n    const whitePlayerSelect: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        gameSetting.value = await loadGameSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const buildPlayerSetting = (uri: string): PlayerSetting => {\n      if (uri === \"es://human\") {\n        return {\n          name: \"人\",\n          type: PlayerType.HUMAN,\n        };\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      return {\n        name: engine.name,\n        type: PlayerType.USI,\n        usi: engine,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerSelect.value.value),\n        white: buildPlayerSetting(whitePlayerSelect.value.value),\n        timeLimit: {\n          timeSeconds: (hours.value.value * 60 + minutes.value.value) * 60,\n          byoyomi: Number(byoyomi.value.value),\n          increment: Number(increment.value.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.commit(Mutation.PUSH_ERROR, error);\n      } else {\n        store.dispatch(Action.START_GAME, gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const defaultValues = computed(() => {\n      return {\n        black: {\n          type:\n            gameSetting.value.black.type === PlayerType.HUMAN\n              ? \"es://human\"\n              : gameSetting.value.black.usi?.uri,\n        },\n        white: {\n          type:\n            gameSetting.value.white.type === PlayerType.HUMAN\n              ? \"es://human\"\n              : gameSetting.value.white.usi?.uri,\n        },\n        timeLimit: {\n          hours: Math.floor(gameSetting.value.timeLimit.timeSeconds / 3600),\n          minutes:\n            Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60,\n          byoyomi: gameSetting.value.timeLimit.byoyomi,\n          increment: gameSetting.value.timeLimit.increment,\n        },\n        startPosition:\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\",\n        enableEngineTimeout: gameSetting.value.enableEngineTimeout,\n      };\n    });\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    return {\n      dialog,\n      blackPlayerSelect,\n      whitePlayerSelect,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      defaultValues,\n      engines,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=fc28857c&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=fc28857c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fc28857c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-23a86a08\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"エンジン\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item-unit\" }\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"select\", {\n              class: \"engine-select\",\n              size: \"1\",\n              ref: \"engineSelect\",\n              value: _ctx.defaultValue\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: engine.uri,\n                  value: engine.uri\n                }, _toDisplayString(engine.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { loadResearchSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await loadResearchSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.commit(Mutation.PUSH_ERROR, \"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const researchSetting: ResearchSetting = {\n        usi: engine,\n      };\n      store.dispatch(Action.START_RESEARCH, researchSetting);\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValue = computed(() => {\n      if (researchSetting.value.usi) {\n        return researchSetting.value.usi.uri;\n      }\n      return \"\";\n    });\n\n    return {\n      dialog,\n      engineSelect,\n      engines,\n      defaultValue,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=23a86a08&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=23a86a08&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23a86a08\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c5214f8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"engine\",\n              key: engine.uri,\n              value: engine.uri\n            }, [\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \" 設定 \", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \" 削除 \", 8, _hoisted_8)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          latestEngineSetting: _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latestEngineSetting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0ba3d664\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"es://engine_name\",\n  ref: \"engineNameInput\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"option\",\n            key: option.name\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport {\n  getUSIEngineInfo,\n  sendUSISetOption,\n  showSelectFileDialog,\n} from \"@/ipc/renderer\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      rquired: true,\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const store = useStore();\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        const path = await showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? Number(elem.value)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=0ba3d664&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=0ba3d664&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ba3d664\"]])\n\nexport default __exports__","\nimport {\n  getUSIEngineInfo,\n  loadUSIEngineSetting,\n  saveUSIEngineSetting,\n  showSelectUSIEngineDialog,\n} from \"@/ipc/renderer\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n    const store = useStore();\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        const path = await showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await getUSIEngineInfo(path));\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        await saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.commit(Mutation.CLOSE_DIALOG);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=5c5214f8&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=5c5214f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c5214f8\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d986b518\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"デザイン\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_12 = { class: \"dialog-form-item\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_22 = [\"value\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_25 = [\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            value: _ctx.appSetting.boardLayout,\n            ref: \"boardLayout\"\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardLayouts, (layout) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: layout,\n                value: layout.value\n              }, _toDisplayString(layout.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.pieceVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\",\n            ref: \"pieceVolume\"\n          }, null, 8, _hoisted_10),\n          _hoisted_11\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.clockVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\",\n            ref: \"clockVolume\"\n          }, null, 8, _hoisted_14),\n          _hoisted_15\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.clockPitch,\n            type: \"number\",\n            max: \"880\",\n            min: \"220\",\n            ref: \"clockPitch\"\n          }, null, 8, _hoisted_18),\n          _hoisted_19\n        ]),\n        _createElementVNode(\"div\", _hoisted_20, [\n          _hoisted_21,\n          _createElementVNode(\"select\", {\n            value: _ctx.appSetting.clockSoundTarget,\n            ref: \"clockSoundTarget\"\n          }, _hoisted_25, 8, _hoisted_22)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_26, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","export function readInputAsNumber(input: HTMLInputElement): number {\n  const value = Number(input.value);\n  const max = Number(input.max);\n  const min = Number(input.min);\n  return Math.min(Math.max(value, min), max);\n}\n","\nimport { BoardLayoutType } from \"@/layout/board\";\nimport { AppSettingUpdate } from \"@/settings/app\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const boardLayout: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = () => {\n      const update: AppSettingUpdate = {\n        boardLayout: boardLayout.value.value,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n      };\n      store.dispatch(Action.UPDATE_AND_SAVE_APP_SETTING, update).then(() => {\n        store.commit(Mutation.CLOSE_DIALOG);\n      });\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const appSetting = computed(() => store.state.appSetting);\n\n    const boardLayouts = [\n      { name: \"一文字駒\", value: BoardLayoutType.HITOMOJI },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: BoardLayoutType.HITOMOJI_GOTHIC,\n      },\n    ];\n\n    return {\n      dialog,\n      boardLayout,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      appSetting,\n      boardLayouts,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=d986b518&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=d986b518&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d986b518\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7a20f62c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜を取り込みます。\", -1))\nconst _hoisted_5 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_9 = [\n  _hoisted_6,\n  _hoisted_7,\n  _hoisted_8\n]\nconst _hoisted_10 = { ref: \"textarea\" }\nconst _hoisted_11 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _hoisted_9))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_10, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n      if (data) {\n        store.dispatch(Action.PASTE_RECORD, data);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=7a20f62c&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=7a20f62c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a20f62c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f6b9bdd4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"bussy\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"content\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", {\n    class: \"icon\",\n    src: \"icon/hourglass_empty_white_24dp.svg\"\n  }),\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\")\n], -1))\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, _hoisted_3, 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"Bussy\",\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n    };\n  },\n});\n","import { render } from \"./Bussy.vue?vue&type=template&id=f6b9bdd4&scoped=true&ts=true\"\nimport script from \"./Bussy.vue?vue&type=script&lang=ts\"\nexport * from \"./Bussy.vue?vue&type=script&lang=ts\"\n\nimport \"./Bussy.vue?vue&type=style&index=0&id=f6b9bdd4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f6b9bdd4\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-10e901d0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"messagebox\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/info_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_4 = { class: \"message\" }\nconst _hoisted_5 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.state.messages[0]);\n\n    const onClose = () => {\n      store.commit(Mutation.SHIFT_MESSAGE);\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./Message.vue?vue&type=template&id=10e901d0&scoped=true&ts=true\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=10e901d0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-10e901d0\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-50fb1a28\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"error\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"icon\",\n  src: \"icon/error_outline_white_24dp.svg\"\n}, null, -1))\nconst _hoisted_4 = { class: \"items\" }\nconst _hoisted_5 = { class: \"notice\" }\nconst _hoisted_6 = { class: \"index\" }\nconst _hoisted_7 = { class: \"message\" }\nconst _hoisted_8 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"item\",\n              key: error.index\n            }, [\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_7, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.state.errors.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.commit(Mutation.CLEAR_ERRORS);\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=50fb1a28&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=50fb1a28&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=50fb1a28&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50fb1a28\"]])\n\nexport default __exports__","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport Bussy from \"@/components/dialog/Bussy.vue\";\nimport Message from \"@/components/dialog/Message.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/state\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    Bussy,\n    Message,\n    ErrorMessage,\n  },\n  setup() {\n    const store = useStore();\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.state.mode === Mode.GAME_DIALOG,\n        research: store.state.mode === Mode.RESEARCH_DIALOG,\n        usiEngineSetting: store.state.mode === Mode.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.state.mode === Mode.APP_SETTING_DIALOG,\n        paste: store.state.mode === Mode.PASTE_DIALOG,\n        processing: store.state.bussyState.isBussy,\n      };\n    });\n\n    const hasMessage = computed(() => store.state.messages.length !== 0);\n\n    const hasErrors = computed(() => store.state.errors.length !== 0);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.dispatch(Action.COPY_RECORD);\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.dispatch(Action.OPEN_RECORD, path);\n        }\n        event.preventDefault();\n      });\n      document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n        const moveNumber = store.state.record.current.number;\n        switch (event.key) {\n          default:\n            return;\n          case \"ArrowUp\":\n            store.dispatch(Action.CHANGE_MOVE_NUMBER, moveNumber - 1);\n            break;\n          case \"ArrowDown\":\n            store.dispatch(Action.CHANGE_MOVE_NUMBER, moveNumber + 1);\n            break;\n          case \"ArrowLeft\":\n            store.dispatch(Action.CHANGE_MOVE_NUMBER, 0);\n            break;\n          case \"ArrowRight\":\n            store.dispatch(Action.CHANGE_MOVE_NUMBER, Number.MAX_SAFE_INTEGER);\n            break;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=a984bfb2&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=a984bfb2&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport {\n  getRecordPathFromProcArg,\n  loadAppSetting,\n  setup as setupIPC,\n} from \"./ipc/renderer\";\nimport { store, key, Mutation, Action } from \"./store\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\nsetupIPC(store);\n\nPromise.allSettled([\n  loadAppSetting()\n    .then((setting) => {\n      store.commit(Mutation.UPDATE_APP_SETTING, setting);\n    })\n    .catch((e) => {\n      store.commit(\n        Mutation.PUSH_ERROR,\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await getRecordPathFromProcArg();\n    if (path) {\n      await store.dispatch(Action.OPEN_RECORD, path);\n    }\n  })(),\n]).finally(() => {\n  createApp(App).use(store, key).mount(\"#app\");\n});\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=a984bfb2&lang=css\"","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./StandardLayout.vue?vue&type=style&index=0&id=c479adee&scoped=true&lang=css\"","import { ImmutablePosition, Move } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\n\nexport type USIIteration = {\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move);\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n\n  constructor() {\n    this.iterates = [];\n  }\n\n  update(position: ImmutablePosition, update: USIInfoCommand): void {\n    const iterate: USIIteration = {};\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = formatPV(position, update.pv);\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      this.iterates.unshift(iterate);\n    }\n  }\n}\n\nexport class USIMonitor {\n  sessionID?: number;\n  blackPlayer?: USIPlayerMonitor;\n  blackPosition?: string;\n  whitePlayer?: USIPlayerMonitor;\n  whitePosition?: string;\n  researcher?: USIPlayerMonitor;\n  researchPosition?: string;\n\n  update(\n    sessionID: number,\n    position: ImmutablePosition,\n    sender: USIInfoSender,\n    update: USIInfoCommand\n  ): void {\n    if (this.sessionID != sessionID) {\n      this.blackPlayer = undefined;\n      this.whitePlayer = undefined;\n      this.researcher = undefined;\n      this.sessionID = sessionID;\n    }\n\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        if (!this.blackPlayer || this.blackPosition !== position.sfen) {\n          this.blackPlayer = new USIPlayerMonitor();\n          this.blackPosition = position.sfen;\n        }\n        this.blackPlayer.update(position, update);\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        if (!this.whitePlayer || this.whitePosition !== position.sfen) {\n          this.whitePlayer = new USIPlayerMonitor();\n          this.whitePosition = position.sfen;\n        }\n        this.whitePlayer.update(position, update);\n        break;\n      case USIInfoSender.RESEARCHER:\n        if (!this.researcher || this.researchPosition !== position.sfen) {\n          this.researcher = new USIPlayerMonitor();\n          this.researchPosition = position.sfen;\n        }\n        this.researcher.update(position, update);\n        break;\n    }\n  }\n}\n"],"sourceRoot":""}