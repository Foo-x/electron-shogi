(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={index:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return T})),n.d(t,"d",(function(){return A}));var r,i,a=n("1da1"),o=n("ade3"),c=n("5530"),s=(n("96cf"),n("a4d3"),n("e01a"),n("d3b7"),n("ac1f"),n("466d"),n("25f0"),n("b0c0"),n("a2af")),u=n("8811"),l=n("7a23"),d=n("5502"),p=n("acf9"),b=n.n(p),f=n("1922"),h=n("4d9c"),O=n("6c70"),m=n("2247"),g=n("835e"),v=n("30b2"),_=n("6c82"),E=n("19c1"),j=n("ed5a"),S=n("4f5c"),I=n("5395"),w=n("4894"),R=n("7178");n.d(t,"b",(function(){return v["a"]})),n.d(t,"a",(function(){return _["a"]}));var y=Symbol();function T(){return Object(d["b"])(y)}var A=Object(d["a"])({state:{appSetting:Object(f["c"])(),record:new u["g"],mode:S["a"].NORMAL,usiSessionID:0,game:new m["a"]},modules:{usi:j["b"],message:I["a"],error:w["a"],bussy:E["a"]},getters:{isMovableByUser:function(e){switch(e.mode){case S["a"].NORMAL:case S["a"].RESEARCH:return!0;case S["a"].GAME:return(e.record.position.color===u["a"].BLACK?e.game.setting.black.uri:e.game.setting.white.uri)===R["a"]}return!1}},mutations:(r={},Object(o["a"])(r,v["a"].UPDATE_APP_SETTING,(function(e,t){e.appSetting=Object(c["a"])(Object(c["a"])({},e.appSetting),t)})),Object(o["a"])(r,v["a"].FLIP_BOARD,(function(e){e.appSetting.boardFlipping=!e.appSetting.boardFlipping,Object(s["k"])(e.appSetting)})),Object(o["a"])(r,v["a"].SHOW_PASTE_DIALOG,(function(e){e.mode===S["a"].NORMAL&&(e.mode=S["a"].PASTE_DIALOG)})),Object(o["a"])(r,v["a"].CLOSE_PASTE_DIALOG,(function(e){e.mode===S["a"].PASTE_DIALOG&&(e.mode=S["a"].NORMAL)})),Object(o["a"])(r,v["a"].SHOW_GAME_DIALOG,(function(e){e.mode===S["a"].NORMAL&&(e.mode=S["a"].GAME_DIALOG)})),Object(o["a"])(r,v["a"].SHOW_RESEARCH_DIALOG,(function(e){e.mode===S["a"].NORMAL&&(e.mode=S["a"].RESEARCH_DIALOG)})),Object(o["a"])(r,v["a"].OPEN_APP_SETTING_DIALOG,(function(e){e.mode===S["a"].NORMAL&&(e.mode=S["a"].APP_SETTING_DIALOG)})),Object(o["a"])(r,v["a"].OPEN_USI_ENGINE_MANAGEMENT_DIALOG,(function(e){e.mode===S["a"].NORMAL&&(e.mode=S["a"].USI_ENGINE_SETTING_DIALOG)})),Object(o["a"])(r,v["a"].CLOSE_DIALOG,(function(e){e.mode!==S["a"].USI_ENGINE_SETTING_DIALOG&&e.mode!==S["a"].APP_SETTING_DIALOG&&e.mode!==S["a"].GAME_DIALOG&&e.mode!==S["a"].RESEARCH_DIALOG||(e.mode=S["a"].NORMAL)})),Object(o["a"])(r,v["a"].NEW_RECORD,(function(e){e.mode==S["a"].NORMAL&&(e.record.clear(new u["f"]),e.recordFilePath=void 0)})),Object(o["a"])(r,v["a"].UPDATE_RECORD_COMMENT,(function(e,t){e.record.current.comment=t})),Object(o["a"])(r,v["a"].CHANGE_TURN,(function(e){if(e.mode==S["a"].POSITION_EDITING){var t=e.record.position.clone();t.setColor(Object(u["n"])(t.color)),e.record.clear(t)}})),Object(o["a"])(r,v["a"].INITIALIZE_POSITION,(function(e,t){if(e.mode==S["a"].POSITION_EDITING){var n=new u["f"];n.reset(t),e.record.clear(n)}})),Object(o["a"])(r,v["a"].EDIT_POSITION,(function(e,t){if(e.mode===S["a"].POSITION_EDITING){var n=e.record.position.clone();n.edit(t),e.record.clear(n)}})),Object(o["a"])(r,v["a"].CHANGE_MOVE_NUMBER,(function(e,t){e.mode!==S["a"].NORMAL&&e.mode!==S["a"].RESEARCH||e.record.goto(t)})),Object(o["a"])(r,v["a"].CHANGE_BRANCH,(function(e,t){e.mode!==S["a"].NORMAL&&e.mode!==S["a"].RESEARCH||e.record.current.branchIndex!==t&&e.record.switchBranchByIndex(t)})),Object(o["a"])(r,v["a"].REMOVE_RECORD_AFTER,(function(e){e.mode!==S["a"].NORMAL&&e.mode!==S["a"].RESEARCH||e.record.removeAfter()})),Object(o["a"])(r,v["a"].DO_MOVE,(function(e,t){e.record.append(t,{ignoreValidation:!0}),e.record.current.setElapsedMs(e.game.elapsedMs),Object(h["c"])(e.appSetting.pieceVolume)})),Object(o["a"])(r,v["a"].CLEAR_GAME_TIMER,(function(e){e.game.clearTimer(),e.beep5sHandler&&(e.beep5sHandler.stop(),e.beep5sHandler=void 0)})),r),actions:(i={},Object(o["a"])(i,_["a"].UPDATE_APP_SETTING,(function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,n.next=3,Object(s["k"])(Object(c["a"])(Object(c["a"])({},i.appSetting),t));case 3:r(v["a"].UPDATE_APP_SETTING,t);case 4:case"end":return n.stop()}}),n)})))()})),Object(o["a"])(i,_["a"].OPEN_RECORD,(function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===S["a"].NORMAL){n.next=3;break}return n.abrupt("return",!1);case 3:if(r(v["a"].RETAIN_BUSSY_STATE),n.prev=4,t){n.next=11;break}return n.next=8,Object(s["r"])();case 8:if(t=n.sent,t){n.next=11;break}return n.abrupt("return",!1);case 11:return n.next=13,Object(s["j"])(t);case 13:if(a=n.sent,!t.match(/\.kif$/)&&!t.match(/\.kifu$/)){n.next=21;break}return o=t.match(/\.kif$/)?b.a.decode(a,"Shift_JIS"):a.toString(),c=Object(u["m"])(o),c instanceof u["g"]?(i.recordFilePath=t,i.record=c):r(v["a"].PUSH_ERROR,c),n.abrupt("return",!0);case 21:return r(v["a"].PUSH_ERROR,"不明なファイル形式: "+t),n.abrupt("return",!1);case 23:n.next=29;break;case 25:return n.prev=25,n.t0=n["catch"](4),r(v["a"].PUSH_ERROR,"棋譜の読み込み中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 29:return n.prev=29,r(v["a"].RELEASE_BUSSY_STATE),n.finish(29);case 32:case"end":return n.stop()}}),n,null,[[4,25,29,32]])})))()})),Object(o["a"])(i,_["a"].SAVE_RECORD,(function(t,n){return Object(a["a"])(regeneratorRuntime.mark((function r(){var i,a,o,c,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.commit,a=t.state,a.mode===S["a"].NORMAL){r.next=3;break}return r.abrupt("return",!1);case 3:if(i(v["a"].RETAIN_BUSSY_STATE),r.prev=4,o=a.recordFilePath,null!==n&&void 0!==n&&n.overwrite&&o){r.next=13;break}return c=Object(g["a"])(a.record),r.next=10,Object(s["s"])(c);case 10:if(o=r.sent,o){r.next=13;break}return r.abrupt("return",!1);case 13:if(!o.match(/\.kif$/)&&!o.match(/\.kifu$/)){r.next=22;break}return l=Object(u["k"])(a.record,{returnCode:"\r\n"}),d=o.match(/\.kif$/)?b.a.encode(l,"Shift_JIS"):e.from(l),r.next=18,Object(s["m"])(o,d);case 18:return a.recordFilePath=o,r.abrupt("return",!0);case 22:return i(v["a"].PUSH_ERROR,"不明なファイル形式: "+o),r.abrupt("return",!1);case 24:r.next=30;break;case 26:return r.prev=26,r.t0=r["catch"](4),i(v["a"].PUSH_ERROR,"棋譜の保存中にエラーが出ました: "+r.t0),r.abrupt("return",!1);case 30:return r.prev=30,i(v["a"].RELEASE_BUSSY_STATE),r.finish(30);case 33:case"end":return r.stop()}}),r,null,[[4,26,30,33]])})))()})),Object(o["a"])(i,_["a"].COPY_RECORD,(function(e){var t=e.state,n=Object(u["k"])(t.record,{returnCode:"\r\n"});navigator.clipboard.writeText(n)})),Object(o["a"])(i,_["a"].PASTE_RECORD,(function(e,t){var n=e.state,r=e.commit;if(n.mode===S["a"].NORMAL){var i=Object(u["m"])(t);i instanceof u["g"]?(n.recordFilePath=void 0,n.record=i):r(v["a"].PUSH_ERROR,i)}})),Object(o["a"])(i,_["a"].START_POSITION_EDITING,(function(e){var t=e.state;t.mode===S["a"].NORMAL&&(t.mode=S["a"].POSITION_EDITING,t.record.clear(t.record.position),t.recordFilePath=void 0)})),Object(o["a"])(i,_["a"].END_POSITION_EDITING,(function(e){var t=e.state;t.mode===S["a"].POSITION_EDITING&&(t.mode=S["a"].NORMAL)})),Object(o["a"])(i,_["a"].UPDATE_USI_INFO,(function(e,t){var n=e.state,r=e.commit;if(n.usiSessionID===t.sessionID&&n.record.usi==t.usi){r(v["a"].UPDATE_USI_INFO,{sessionID:t.sessionID,position:n.record.position,sender:t.sender,name:t.name,info:t.info});var i=new O["c"](n.record.current.customData);i.updateUSIInfo(n.record.position.color,t.sender,t.info),n.record.current.customData=i.stringify()}})),Object(o["a"])(i,_["a"].START_RESEARCH,(function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===S["a"].RESEARCH_DIALOG){n.next=3;break}return n.abrupt("return",!1);case 3:return r(v["a"].RETAIN_BUSSY_STATE),n.prev=4,n.next=7,Object(s["n"])(t);case 7:return i.usiSessionID+=1,n.next=10,Object(s["w"])(t,i.usiSessionID);case 10:return i.mode=S["a"].RESEARCH,n.abrupt("return",!0);case 14:return n.prev=14,n.t0=n["catch"](4),r(v["a"].PUSH_ERROR,"検討の初期化中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 18:return n.prev=18,r(v["a"].RELEASE_BUSSY_STATE),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[4,14,18,21]])})))()})),Object(o["a"])(i,_["a"].STOP_RESEARCH,(function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.state,r.mode===S["a"].RESEARCH){t.next=3;break}return t.abrupt("return",!1);case 3:return n(v["a"].RETAIN_BUSSY_STATE),t.prev=4,t.next=7,Object(s["b"])();case 7:return r.mode=S["a"].NORMAL,t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t["catch"](4),n(v["a"].PUSH_ERROR,"検討の終了中にエラーが出ました: "+t.t0),t.abrupt("return",!1);case 15:return t.prev=15,n(v["a"].RELEASE_BUSSY_STATE),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,11,15,18]])})))()})),Object(o["a"])(i,_["a"].START_GAME,(function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===S["a"].GAME_DIALOG){n.next=3;break}return n.abrupt("return",!1);case 3:return r(v["a"].RETAIN_BUSSY_STATE),n.prev=4,n.next=7,Object(s["l"])(t);case 7:return t.startPosition&&(a=new u["f"],a.reset(t.startPosition),i.record.clear(a),i.recordFilePath=void 0),i.usiSessionID+=1,n.next=11,Object(s["v"])(t,i.usiSessionID);case 11:return i.game.setup(t),i.mode=S["a"].GAME,i.record.metadata.setStandardMetadata(u["h"].BLACK_NAME,t.black.name),i.record.metadata.setStandardMetadata(u["h"].WHITE_NAME,t.white.name),t.humanIsFront&&(o=i.appSetting.boardFlipping,t.black.uri===R["a"]&&t.white.uri!==R["a"]?o=!1:t.black.uri!==R["a"]&&t.white.uri===R["a"]&&(o=!0),o!==i.appSetting.boardFlipping&&r(v["a"].FLIP_BOARD)),n.abrupt("return",!0);case 19:return n.prev=19,n.t0=n["catch"](4),r(v["a"].PUSH_ERROR,"対局の初期化中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 23:return n.prev=23,r(v["a"].RELEASE_BUSSY_STATE),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[4,19,23,26]])})))()})),Object(o["a"])(i,_["a"].STOP_GAME,(function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,i=e.state,i.mode===S["a"].GAME){n.next=3;break}return n.abrupt("return",!1);case 3:return t&&r(v["a"].PUSH_MESSAGE,"対局終了（".concat(Object(u["o"])(t),")")),r(v["a"].RETAIN_BUSSY_STATE),n.prev=5,n.next=8,Object(s["a"])(i.record.usi,t);case 8:return i.record.append(t||u["i"].INTERRUPT),i.record.current.setElapsedMs(i.game.elapsedMs),i.mode=S["a"].NORMAL,n.abrupt("return",!0);case 14:return n.prev=14,n.t0=n["catch"](5),r(v["a"].PUSH_ERROR,"対局の終了中にエラーが出ました: "+n.t0),n.abrupt("return",!1);case 18:return n.prev=18,r(v["a"].RELEASE_BUSSY_STATE),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[5,14,18,21]])})))()})),Object(o["a"])(i,_["a"].RESIGN_BY_USER,(function(e){var t=e.state,n=e.getters,r=e.dispatch;return t.mode===S["a"].GAME&&(n.isMovableByUser?r(_["a"].STOP_GAME,u["i"].RESIGN):void 0)})),Object(o["a"])(i,_["a"].DO_MOVE_BY_USER,(function(e,t){var n=e.commit,r=e.state,i=e.getters;return!!i.isMovableByUser&&(r.mode===S["a"].GAME&&r.game.increment(r.record.position.color),n(v["a"].DO_MOVE,t),!0)})),Object(o["a"])(i,_["a"].DO_MOVE_BY_USI_ENGINE,(function(e,t){var n=e.commit,r=e.dispatch,i=e.state;if(i.mode!==S["a"].GAME)return!1;if(i.usiSessionID!==t.sessionID)return!1;if(i.record.usi!==t.usi)return!1;if(t.color!==i.record.position.color)return n(v["a"].PUSH_ERROR,"手番ではないエンジンから指し手を受信しました:"+t.sfen),r(_["a"].STOP_GAME,u["i"].FOUL_LOSE),!1;if("resign"===t.sfen)return r(_["a"].STOP_GAME,u["i"].RESIGN),!0;if("win"===t.sfen)return r(_["a"].STOP_GAME,u["i"].ENTERING_OF_KING),!0;var a=i.record.position.createMoveBySFEN(t.sfen);return a&&i.record.position.isValidMove(a)?(i.game.increment(i.record.position.color),n(v["a"].DO_MOVE,a),!0):(n(v["a"].PUSH_ERROR,"エンジンから不明な指し手を受信しました:"+t.sfen),r(_["a"].STOP_GAME,u["i"].FOUL_LOSE),!1)})),Object(o["a"])(i,_["a"].RESET_GAME_TIMER,(function(e){var t=e.dispatch,n=e.getters,r=e.state,i=r.record.position.color;r.game.startTimer(i,{timeout:function(){n.isMovableByUser||r.game.setting.enableEngineTimeout?t(_["a"].STOP_GAME,u["i"].TIMEOUT):Object(s["x"])(i)},onBeepShort:function(){t(_["a"].BEEP_SHORT)},onBeepUnlimited:function(){t(_["a"].BEEP_UNLIMITED)}})})),Object(o["a"])(i,_["a"].BEEP_UNLIMITED,(function(e){var t=e.state,n=e.getters;(t.appSetting.clockSoundTarget!==f["a"].ONLY_USER||n.isMovableByUser)&&(t.beep5sHandler||(t.beep5sHandler=Object(h["b"])({frequency:t.appSetting.clockPitch,volume:t.appSetting.clockVolume})))})),Object(o["a"])(i,_["a"].BEEP_SHORT,(function(e){var t=e.state,n=e.getters;(t.appSetting.clockSoundTarget!==f["a"].ONLY_USER||n.isMovableByUser)&&(t.beep5sHandler||Object(h["a"])({frequency:t.appSetting.clockPitch,volume:t.appSetting.clockVolume}))})),i)});Object(l["z"])([function(){return A.state.mode},function(){return A.state.record.position}],(function(){A.commit(v["a"].CLEAR_GAME_TIMER),A.state.mode===S["a"].GAME&&A.dispatch(_["a"].RESET_GAME_TIMER),A.state.mode!==S["a"].GAME&&A.state.mode!==S["a"].RESEARCH||Object(s["y"])(A.state.record.usi,A.state.game.setting,A.state.game.blackTimeMs,A.state.game.whiteTimeMs)}),{deep:!0})}).call(this,n("1c35").Buffer)},"06ca":function(e,t,n){},"06e0":function(e,t,n){"use strict";n("b575")},"0c59":function(e,t,n){"use strict";n("ef3d")},"0ccc":function(e,t,n){},1:function(e,t){},"14ab":function(e,t,n){},1922:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o}));var r,i,a=n("21a3");function o(){return{boardLayout:a["a"].HITOMOJI,pieceVolume:30,clockVolume:30,clockPitch:500,clockSoundTarget:i.ONLY_USER,boardFlipping:!1,informationTab:r.COMMENT}}(function(e){e["COMMENT"]="comment",e["SEARCH"]="search",e["CHART"]="chart",e["INVISIBLE"]="invisible"})(r||(r={})),function(e){e["ALL"]="all",e["ONLY_USER"]="onlyUser"}(i||(i={}))},"19c1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n("ade3"),a=n("30b2"),o={state:{count:0},getters:{isBussy:function(e){return 0!==e.count}},mutations:(r={},Object(i["a"])(r,a["a"].RETAIN_BUSSY_STATE,(function(e){e.count+=1})),Object(i["a"])(r,a["a"].RELEASE_BUSSY_STATE,(function(e){e.count-=1})),r)}},"21a3":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return p}));var r,i=n("d4ec"),a=n("bee2"),o=n("5530"),c=(n("d3b7"),n("159b"),n("07ac"),n("33d1"),n("ea98"),n("8811")),s=n("dac8");(function(e){e["HITOMOJI"]="hitomoji",e["HITOMOJI_GOTHIC"]="hitomojiGothic"})(r||(r={}));var u={frame:{width:1471,height:959},board:{x:296.5,y:0,width:878,height:960,squreWidth:94.8,squreHeight:104,leftSquarePadding:12,topSquarePadding:12.2,leftPiecePadding:17.5,topPiecePadding:18.5,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"},lastMove:{"background-color":"#00ddff",opacity:"0.5"}}},piece:{width:88,height:93},hand:{color:"#8b4513",black:{x:1184,y:600},white:{x:0,y:0},width:288,height:360,highlight:{selected:{"background-color":"#ff4800",opacity:"0.7"}}},turn:{black:{x:1184,y:425},white:{x:0,y:492},width:288,height:45,fontSize:32},playerName:{black:{x:1184,y:480},white:{x:0,y:370},width:288,height:45,fontSize:25},clock:{black:{x:1184,y:535},white:{x:0,y:425},width:288,height:55,fontSize:40},control:{left:{x:0,y:547,width:288,height:412,fontSize:26},right:{x:1184,y:0,width:288,height:412,fontSize:26}}},l={hitomoji:Object(o["a"])(Object(o["a"])({},u),{},{images:{board:"./board/default.png",black:{pawn:"./piece/hitomoji/black_pawn.png",lance:"./piece/hitomoji/black_lance.png",knight:"./piece/hitomoji/black_knight.png",silver:"./piece/hitomoji/black_silver.png",gold:"./piece/hitomoji/black_gold.png",bishop:"./piece/hitomoji/black_bishop.png",rook:"./piece/hitomoji/black_rook.png",king:"./piece/hitomoji/black_king.png",king2:"./piece/hitomoji/black_king2.png",promPawn:"./piece/hitomoji/black_prom_pawn.png",promLance:"./piece/hitomoji/black_prom_lance.png",promKnight:"./piece/hitomoji/black_prom_knight.png",promSilver:"./piece/hitomoji/black_prom_silver.png",horse:"./piece/hitomoji/black_horse.png",dragon:"./piece/hitomoji/black_dragon.png"},white:{pawn:"./piece/hitomoji/white_pawn.png",lance:"./piece/hitomoji/white_lance.png",knight:"./piece/hitomoji/white_knight.png",silver:"./piece/hitomoji/white_silver.png",gold:"./piece/hitomoji/white_gold.png",bishop:"./piece/hitomoji/white_bishop.png",rook:"./piece/hitomoji/white_rook.png",king:"./piece/hitomoji/white_king.png",king2:"./piece/hitomoji/white_king2.png",promPawn:"./piece/hitomoji/white_prom_pawn.png",promLance:"./piece/hitomoji/white_prom_lance.png",promKnight:"./piece/hitomoji/white_prom_knight.png",promSilver:"./piece/hitomoji/white_prom_silver.png",horse:"./piece/hitomoji/white_horse.png",dragon:"./piece/hitomoji/white_dragon.png"}}}),hitomojiGothic:Object(o["a"])(Object(o["a"])({},u),{},{images:{board:"./board/default.png",black:{pawn:"./piece/hitomoji_gothic/black_pawn.png",lance:"./piece/hitomoji_gothic/black_lance.png",knight:"./piece/hitomoji_gothic/black_knight.png",silver:"./piece/hitomoji_gothic/black_silver.png",gold:"./piece/hitomoji_gothic/black_gold.png",bishop:"./piece/hitomoji_gothic/black_bishop.png",rook:"./piece/hitomoji_gothic/black_rook.png",king:"./piece/hitomoji_gothic/black_king.png",king2:"./piece/hitomoji_gothic/black_king2.png",promPawn:"./piece/hitomoji_gothic/black_prom_pawn.png",promLance:"./piece/hitomoji_gothic/black_prom_lance.png",promKnight:"./piece/hitomoji_gothic/black_prom_knight.png",promSilver:"./piece/hitomoji_gothic/black_prom_silver.png",horse:"./piece/hitomoji_gothic/black_horse.png",dragon:"./piece/hitomoji_gothic/black_dragon.png"},white:{pawn:"./piece/hitomoji_gothic/white_pawn.png",lance:"./piece/hitomoji_gothic/white_lance.png",knight:"./piece/hitomoji_gothic/white_knight.png",silver:"./piece/hitomoji_gothic/white_silver.png",gold:"./piece/hitomoji_gothic/white_gold.png",bishop:"./piece/hitomoji_gothic/white_bishop.png",rook:"./piece/hitomoji_gothic/white_rook.png",king:"./piece/hitomoji_gothic/white_king.png",king2:"./piece/hitomoji_gothic/white_king2.png",promPawn:"./piece/hitomoji_gothic/white_prom_pawn.png",promLance:"./piece/hitomoji_gothic/white_prom_lance.png",promKnight:"./piece/hitomoji_gothic/white_prom_knight.png",promSilver:"./piece/hitomoji_gothic/white_prom_silver.png",horse:"./piece/hitomoji_gothic/white_horse.png",dragon:"./piece/hitomoji_gothic/white_dragon.png"}}})},d={black:{pawn:{row:3,column:0,width:2},lance:{row:2,column:0,width:1},knight:{row:2,column:1,width:1},silver:{row:1,column:0,width:1},gold:{row:1,column:1,width:1},bishop:{row:0,column:0,width:1},rook:{row:0,column:1,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}},white:{pawn:{row:0,column:0,width:2},lance:{row:1,column:1,width:1},knight:{row:1,column:0,width:1},silver:{row:2,column:1,width:1},gold:{row:2,column:0,width:1},bishop:{row:3,column:1,width:1},rook:{row:3,column:0,width:1},king:{row:0,column:0,width:0},promPawn:{row:0,column:0,width:0},promLance:{row:0,column:0,width:0},promKnight:{row:0,column:0,width:0},promSilver:{row:0,column:0,width:0},horse:{row:0,column:0,width:0},dragon:{row:0,column:0,width:0}}},p=function(){function e(t){Object(i["a"])(this,e),this.template=l[t]||l[r.HITOMOJI]}return Object(a["a"])(e,[{key:"preload",value:function(){Object(s["a"])(this.template.images.board),Object.values(this.template.images.black).forEach(s["a"]),Object.values(this.template.images.white).forEach(s["a"])}},{key:"build",value:function(e,t,n,r,i,a){var s=this,u=e.width/this.template.frame.width;this.template.frame.height*u>e.height&&(u=e.height/this.template.frame.height);var l=function(){return{style:{height:s.template.frame.height*u+"px",width:s.template.frame.width*u+"px"}}},p=function(){var e=s.template.images.board,t=s.template.board.x*u,n=s.template.board.y*u,r=s.template.board.width*u,i=s.template.board.height*u,a={left:t+"px",top:n+"px",height:i+"px",width:r+"px"};return{imagePath:e,x:t,y:n,style:a}},b=function(e){var n=[];return t.board.listNonEmptySquares().forEach((function(r){var i=t.board.at(r),o=i.id+r.index,l=a?Object(c["n"])(i.color):i.color,d=i.type==c["e"].KING&&i.color==c["a"].BLACK?"king2":i.type,p=s.template.images[l][d],b=e.x+(s.template.board.leftPiecePadding+s.template.board.squreWidth*(a?r.opposite:r).x)*u,f=e.y+(s.template.board.topPiecePadding+s.template.board.squreHeight*(a?r.opposite:r).y)*u,h=s.template.piece.width*u,O=s.template.piece.height*u;n.push({id:o,imagePath:p,style:{left:b+"px",top:f+"px",width:h+"px",height:O+"px"}})})),n},f=function(e){var t=[];return c["j"].all.forEach((function(i){var l=i.index,d=i.file,p=i.rank,b=e.x+(s.template.board.leftSquarePadding+s.template.board.squreWidth*(a?i.opposite:i).x)*u,f=e.y+(s.template.board.topSquarePadding+s.template.board.squreHeight*(a?i.opposite:i).y)*u,h=s.template.board.squreWidth*u,O=s.template.board.squreHeight*u,m={left:b+"px",top:f+"px",width:h+"px",height:O+"px"},g=m;n&&i.equals(n.to)&&(g=Object(o["a"])(Object(o["a"])({},g),s.template.board.highlight.lastMove)),r instanceof c["j"]&&r.equals(i)&&(g=Object(o["a"])(Object(o["a"])({},g),s.template.board.highlight.selected)),t.push({id:l,file:d,rank:p,style:m,backgroundStyle:g})})),t},h=function(e,t){var n=a?Object(c["n"])(e):e,i=s.template.hand[n].x*u,l=s.template.hand[n].y*u,p=s.template.hand.width*u,b=s.template.hand.height*u,f={"background-color":s.template.hand.color,left:i+"px",top:l+"px",width:p+"px",height:b+"px"},h=[],O=[];return c["l"].forEach((function(i){for(var a=t.count(i),l=d[n][i],p=s.template.hand.width/2*l.width*u,b=s.template.hand.height/4*u,f=p*l.column,m=b*l.row,g=s.template.piece.width*u,v=s.template.piece.height*u,_=Math.max(p-g*a,0)/(2*a),E=(p-g-2*_)/Math.max(a-1,1),j=a-1;j>=0;j-=1){var S=i+j,I=s.template.images[n][i],w=f+_+E*j,R=m;h.push({id:S,imagePath:I,style:{left:w+"px",top:R+"px",width:g+"px",height:v+"px"}})}var y=i,T={left:f+"px",top:m+"px",width:p+"px",height:b+"px"},A=T;r&&r instanceof c["d"]&&r.color===e&&r.type===i&&(A=Object(o["a"])(Object(o["a"])({},A),s.template.hand.highlight.selected)),O.push({id:y,type:i,style:T,backgroundStyle:A})})),{style:f,pieces:h,pointers:O}},O=function(e,t){if(!t)return null;var n=a?Object(c["n"])(t.color):t.color,r=a?t.to.opposite:t.to,i=new c["d"](n,t.pieceType),o=i.promoted(),l=i.unpromoted(),d=s.template.images[n][o.type],p=s.template.images[n][l.type],b=e.x+(s.template.board.leftSquarePadding+s.template.board.squreWidth*(r.x-.5))*u,f=e.y+(s.template.board.topSquarePadding+s.template.board.squreHeight*r.y)*u,h=2*s.template.board.squreWidth*u,O=s.template.board.squreHeight*u,m={left:b+"px",top:f+"px",width:h+"px",height:O+"px","font-size":O/4+"px"};return{promoteImagePath:d,notPromoteImagePath:p,style:m}},m=function(){var e=t.color,n=a?Object(c["n"])(e):e,r=2;return{style:{left:s.template.turn[n].x*u-r+"px",top:s.template.turn[n].y*u-r+"px",width:s.template.turn.width*u-r+"px",height:s.template.turn.height*u-r+"px","font-size":s.template.turn.fontSize*u+"px","border-radius":s.template.turn.height*u*.4+"px","border-width":r+"px","border-style":"solid"}}},g=function(e){var t=a?Object(c["n"])(e):e;return{style:{left:s.template.playerName[t].x*u+"px",top:s.template.playerName[t].y*u+"px",width:s.template.playerName.width*u+"px",height:s.template.playerName.height*u+"px","font-size":s.template.playerName.fontSize*u+"px"}}},v=function(e){var t=a?Object(c["n"])(e):e;return{style:{left:s.template.clock[t].x*u+"px",top:s.template.clock[t].y*u+"px",width:s.template.clock.width*u+"px",height:s.template.clock.height*u+"px","font-size":s.template.clock.fontSize*u+"px"}}},_=function(){return{left:{style:{left:s.template.control.left.x*u+"px",top:s.template.control.left.y*u+"px",width:s.template.control.left.width*u+"px",height:s.template.control.left.height*u+"px","font-size":s.template.control.left.fontSize*u+"px"}},right:{style:{left:s.template.control.right.x*u+"px",top:s.template.control.right.y*u+"px",width:s.template.control.right.width*u+"px",height:s.template.control.right.height*u+"px","font-size":s.template.control.right.fontSize*u+"px"}}}},E=l(),j=p(),S=b(j),I=f(j),w=h(c["a"].BLACK,t.hand(c["a"].BLACK)),R=h(c["a"].WHITE,t.hand(c["a"].WHITE)),y=O(j,i),T=m(),A=g(c["a"].BLACK),N=g(c["a"].WHITE),k=v(c["a"].BLACK),P=v(c["a"].WHITE),H=_();return{frame:E,board:j,piece:S,square:I,blackHand:w,whiteHand:R,promotion:y,turn:T,blackPlayerName:A,whitePlayerName:N,blackClock:k,whiteClock:P,control:H}}}]),e}()},2247:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("d4ec"),i=n("bee2"),a=n("b5d8"),o=n("8811"),c=function(){function e(){Object(r["a"])(this,e),this.black={timeMs:0,byoyomi:0},this.white={timeMs:0,byoyomi:0},this.timerHandle=0,this.timerStart=new Date,this.lastTimeMs=0,this._elapsedMs=0,this._setting=Object(a["a"])()}return Object(i["a"])(e,[{key:"blackTimeMs",get:function(){return this.black.timeMs}},{key:"blackByoyomi",get:function(){return this.black.byoyomi}},{key:"whiteTimeMs",get:function(){return this.white.timeMs}},{key:"whiteByoyomi",get:function(){return this.white.byoyomi}},{key:"elapsedMs",get:function(){return this._elapsedMs}},{key:"setting",get:function(){return this._setting}},{key:"setup",value:function(e){this.black.timeMs=1e3*e.timeLimit.timeSeconds,this.black.byoyomi=e.timeLimit.byoyomi,this.white.timeMs=1e3*e.timeLimit.timeSeconds,this.white.byoyomi=e.timeLimit.byoyomi,this._setting=e}},{key:"getPlayerState",value:function(e){switch(e){case o["a"].BLACK:return this.black;case o["a"].WHITE:return this.white}}},{key:"startTimer",value:function(e,t){var n=this,r=this.getPlayerState(e);this.timerStart=new Date,this.lastTimeMs=r.timeMs,r.byoyomi=this.setting.timeLimit.byoyomi,this.timerHandle=window.setInterval((function(){var e=r.timeMs,i=r.byoyomi,a=new Date;n._elapsedMs=a.getTime()-n.timerStart.getTime();var o=n.lastTimeMs-n._elapsedMs;if(o>=0?r.timeMs=o:(r.timeMs=0,r.byoyomi=Math.max(Math.ceil(n.setting.timeLimit.byoyomi+o/1e3),0)),0!==r.timeMs||0!==r.byoyomi){var c=Math.ceil(e/1e3),s=Math.ceil(r.timeMs/1e3),u=r.byoyomi;0===s&&(e>0||u!==i)?u<=5?t.onBeepUnlimited():(u<=10||u%10===0)&&t.onBeepShort():n.setting.timeLimit.byoyomi||s===c||(s<=5?t.onBeepUnlimited():(s<=10||20===s||30===s||60===s)&&t.onBeepShort())}else t.timeout()}),100)}},{key:"increment",value:function(e){this.getPlayerState(e).timeMs+=1e3*this.setting.timeLimit.increment}},{key:"clearTimer",value:function(){this.timerHandle&&(window.clearInterval(this.timerHandle),this.timerHandle=0),this._elapsedMs=0}}]),e}()},"224f":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n("d4ec"),i=n("bee2");n("b0c0"),n("d3b7"),n("159b"),n("b64b"),n("4e82"),n("07ac"),n("e9c4");function a(e){return void 0!==e.value?e.value:void 0!==e.default?"string"===e.type&&"<empty>"===e.default?"":e.default:void 0}function o(e,t){e.uri=t.uri,e.name=t.name,Object.keys(t.options).forEach((function(n){e.options[n]&&(e.options[n].value=t.options[n].value)}))}var c=function(){function e(t){if(Object(r["a"])(this,e),this.engines={},t){var n=JSON.parse(t);n.engines instanceof Object&&(this.engines=n.engines)}}return Object(i["a"])(e,[{key:"hasEngine",value:function(e){return!!this.engines[e]}},{key:"addEngine",value:function(e){this.engines[e.uri]=e}},{key:"updateEngine",value:function(e){return!!this.engines[e.uri]&&(this.engines[e.uri]=e,!0)}},{key:"removeEngine",value:function(e){return!!this.engines[e]&&(delete this.engines[e],!0)}},{key:"getEngine",value:function(e){return this.engines[e]}},{key:"engineList",get:function(){return Object.values(this.engines).sort((function(e,t){return e.name>t.name?1:-1}))}},{key:"json",get:function(){return JSON.stringify(this)}},{key:"jsonWithIndent",get:function(){return JSON.stringify(this,void 0,2)}}]),e}()},2750:function(e,t,n){},"276d":function(e,t,n){"use strict";n("c144")},"30b2":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["UPDATE_APP_SETTING"]="updateAppSetting",e["FLIP_BOARD"]="flipBoard",e["SHOW_PASTE_DIALOG"]="showPasteDialog",e["CLOSE_PASTE_DIALOG"]="closePasteDialog",e["SHOW_GAME_DIALOG"]="showGameDialog",e["SHOW_RESEARCH_DIALOG"]="showResearchDialog",e["OPEN_APP_SETTING_DIALOG"]="openAppSettingDialog",e["OPEN_USI_ENGINE_MANAGEMENT_DIALOG"]="openUSIEngineManagementDialog",e["CLOSE_DIALOG"]="closeDialog",e["NEW_RECORD"]="newRecord",e["UPDATE_RECORD_COMMENT"]="updateRecordComment",e["CHANGE_TURN"]="changeTurn",e["INITIALIZE_POSITION"]="initializePosition",e["EDIT_POSITION"]="editPosition",e["CHANGE_MOVE_NUMBER"]="changeMoveNumber",e["CHANGE_BRANCH"]="changeBranch",e["REMOVE_RECORD_AFTER"]="removeRecordAfter",e["DO_MOVE"]="move",e["CLEAR_GAME_TIMER"]="clearGameTimer",e["UPDATE_USI_INFO"]="updateUSIInfo",e["PUSH_MESSAGE"]="pushMessage",e["SHIFT_MESSAGE"]="shiftMessage",e["PUSH_ERROR"]="pushError",e["CLEAR_ERRORS"]="clearErrors",e["RETAIN_BUSSY_STATE"]="retainBussyState",e["RELEASE_BUSSY_STATE"]="releaseBussyState"}(r||(r={}))},3566:function(e,t,n){},"39fb":function(e,t,n){"use strict";function r(){return{}}n.d(t,"a",(function(){return r}))},"3abc":function(e,t,n){"use strict";n("2750")},"3dd4":function(e,t,n){},"403b":function(e,t,n){"use strict";n("665a")},"452a":function(e,t,n){"use strict";n("8a14")},4565:function(e,t,n){"use strict";n("606d")},4687:function(e,t,n){"use strict";n("eda1")},4894:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n("ade3"),a=(n("d9e2"),n("30b2")),o={state:{queue:[]},getters:{hasError:function(e){return 0!==e.queue.length}},mutations:(r={},Object(i["a"])(r,a["a"].PUSH_ERROR,(function(e,t){t instanceof Error?e.queue.push(t):e.queue.push(new Error(t))})),Object(i["a"])(r,a["a"].CLEAR_ERRORS,(function(e){e.queue=[]})),r)}},"4b46":function(e,t,n){"use strict";n("14ab")},"4b59":function(e,t,n){},"4b8f":function(e,t,n){"use strict";n("4b59")},"4d9c":function(e,t,n){"use strict";function r(e){var t=(null===e||void 0===e?void 0:e.type)||"sine",n=(null===e||void 0===e?void 0:e.frequency)||440,r=(null===e||void 0===e?void 0:e.volume)||2,i=new AudioContext,a=i.createOscillator(),o=i.createGain();return a.connect(o),o.connect(i.destination),a.type=t,a.frequency.value=n,o.gain.value=.005*r,a.onended=function(){o.disconnect(i.destination),a.disconnect(o)},a.start(i.currentTime),null!==e&&void 0!==e&&e.time&&a.stop(i.currentTime+e.time),{stop:function(){null!==e&&void 0!==e&&e.time||a.stop()}}}function i(e){r({type:"sine",frequency:e.frequency,time:.1,volume:e.volume})}function a(e){return r({type:"sine",frequency:e.frequency,volume:e.volume})}var o;function c(e){var t=Date.now();if(!(o&&t<o+200)){var n=new Audio("sound/piece.mp3");n.volume=.01*e,n.play(),o=t}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}))},"4f5c":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["NORMAL"]="normal",e["PASTE_DIALOG"]="pasteDialog",e["POSITION_EDITING"]="positionEditing",e["GAME"]="game",e["GAME_DIALOG"]="gameDialog",e["RESEARCH"]="research",e["RESEARCH_DIALOG"]="researchDialog",e["USI_ENGINE_SETTING_DIALOG"]="usiEngineSettingDialog",e["APP_SETTING_DIALOG"]="appSettingDialog"}(r||(r={}))},5395:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n("ade3"),a=n("30b2"),o={state:{queue:[]},getters:{hasMessage:function(e){return 0!==e.queue.length},message:function(e){return e.queue[0]}},mutations:(r={},Object(i["a"])(r,a["a"].PUSH_MESSAGE,(function(e,t){e.queue.push(t)})),Object(i["a"])(r,a["a"].SHIFT_MESSAGE,(function(e){e.queue.shift()})),r)}},5541:function(e,t,n){"use strict";n("8e7e")},"606d":function(e,t,n){},"642f":function(e,t,n){"use strict";n("06ca")},"665a":function(e,t,n){},"6ac6":function(e,t,n){"use strict";n("c350")},"6c70":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n("d4ec"),i=n("bee2"),a=(n("e9c4"),n("8811")),o=n("95b4"),c=2e3,s=-c,u=function(){function e(t){if(Object(r["a"])(this,e),t){var n=JSON.parse(t);this.evaluation=n.evaluation}}return Object(i["a"])(e,[{key:"updateScore",value:function(e,t,n){switch(this.evaluation||(this.evaluation={}),t){case o["a"].BLACK_PLAYER:this.evaluation[o["a"].BLACK_PLAYER]=n;break;case o["a"].WHITE_PLAYER:this.evaluation[o["a"].WHITE_PLAYER]=-n;break;case o["a"].RESEARCHER:this.evaluation[o["a"].RESEARCHER]=e===a["a"].BLACK?n:-n;break}}},{key:"updateUSIInfo",value:function(e,t,n){n.scoreCP?this.updateScore(e,t,Math.min(Math.max(n.scoreCP,s),c)):n.scoreMate&&this.updateScore(e,t,n.scoreMate>=0?c:s)}},{key:"stringify",value:function(){return JSON.stringify(this)}}]),e}()},"6c82":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["UPDATE_APP_SETTING"]="updateAppSetting",e["OPEN_RECORD"]="openRecord",e["SAVE_RECORD"]="saveRecord",e["COPY_RECORD"]="copyRecord",e["PASTE_RECORD"]="pasteRecord",e["START_POSITION_EDITING"]="startPositionEditing",e["END_POSITION_EDITING"]="endPositionEditing",e["UPDATE_USI_INFO"]="updateUsiInfo",e["START_RESEARCH"]="startResearch",e["STOP_RESEARCH"]="stopResearch",e["START_GAME"]="startGame",e["STOP_GAME"]="stopGame",e["RESIGN_BY_USER"]="resign",e["DO_MOVE_BY_USER"]="doMoveByUser",e["DO_MOVE_BY_USI_ENGINE"]="doMoveByUSIEngine",e["RESET_GAME_TIMER"]="resetGameTimer",e["BEEP_UNLIMITED"]="beepUnlimited",e["BEEP_SHORT"]="beepShort"}(r||(r={}))},"714d":function(e,t,n){"use strict";n("0ccc")},7178:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n("2ca0"),n("d3b7"),n("25f0"),n("aff5"),n("a9e3"),n("99af");var r="es://human",i="es://usi-engine/";function a(e){return e.startsWith(i)}},"7bd2":function(e,t,n){},"835e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("5319"),n("5b81"),n("498a");var r=n("8811");function i(e){var t=e.metadata.getStandardMetadata(r["h"].DATE);return t?t.trim().replaceAll(" ","_").replaceAll("/","").replaceAll(":","")+".kif":(new Date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/","")+".kif"}},8811:function(e,t,n){"use strict";n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return i})),n.d(t,"l",(function(){return b})),n.d(t,"a",(function(){return r})),n.d(t,"n",(function(){return c})),n.d(t,"j",(function(){return M})),n.d(t,"c",(function(){return q})),n.d(t,"b",(function(){return K})),n.d(t,"f",(function(){return Q})),n.d(t,"g",(function(){return oe})),n.d(t,"i",(function(){return te})),n.d(t,"h",(function(){return X})),n.d(t,"o",(function(){return ie})),n.d(t,"k",(function(){return De})),n.d(t,"m",(function(){return ye}));var r,i,a=n("d4ec"),o=n("bee2");n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");function c(e){return e===r.BLACK?r.WHITE:r.BLACK}function s(e){return e===r.BLACK?"b":"w"}function u(e){return"b"===e||"w"===e}function l(e){return"b"===e?r.BLACK:r.WHITE}(function(e){e["BLACK"]="black",e["WHITE"]="white"})(r||(r={})),function(e){e["PAWN"]="pawn",e["LANCE"]="lance",e["KNIGHT"]="knight",e["SILVER"]="silver",e["GOLD"]="gold",e["BISHOP"]="bishop",e["ROOK"]="rook",e["KING"]="king",e["PROM_PAWN"]="promPawn",e["PROM_LANCE"]="promLance",e["PROM_KNIGHT"]="promKnight",e["PROM_SILVER"]="promSilver",e["HORSE"]="horse",e["DRAGON"]="dragon"}(i||(i={}));var d={pawn:"歩",lance:"香",knight:"桂",silver:"銀",gold:"金",bishop:"角",rook:"飛",king:"玉",promPawn:"と",promLance:"成香",promKnight:"成桂",promSilver:"成銀",horse:"馬",dragon:"竜"};function p(e){var t=d[e];return t||""}i.PAWN,i.LANCE,i.KNIGHT,i.SILVER,i.GOLD,i.BISHOP,i.ROOK,i.KING,i.PROM_PAWN,i.PROM_LANCE,i.PROM_KNIGHT,i.PROM_SILVER,i.HORSE,i.DRAGON;var b=[i.PAWN,i.LANCE,i.KNIGHT,i.SILVER,i.GOLD,i.BISHOP,i.ROOK],f={pawn:!0,lance:!0,knight:!0,silver:!0,gold:!1,bishop:!0,rook:!0,king:!1,promPawn:!1,promLance:!1,promKnight:!1,promSilver:!1,horse:!1,dragon:!1},h={pawn:i.PROM_PAWN,lance:i.PROM_LANCE,knight:i.PROM_KNIGHT,silver:i.PROM_SILVER,bishop:i.HORSE,rook:i.DRAGON},O={promPawn:i.PAWN,promLance:i.LANCE,promKnight:i.KNIGHT,promSilver:i.SILVER,horse:i.BISHOP,dragon:i.ROOK},m={pawn:"P",lance:"L",knight:"N",silver:"S",gold:"G",bishop:"B",rook:"R",king:"K",promPawn:"+P",promLance:"+L",promKnight:"+N",promSilver:"+S",horse:"+B",dragon:"+R"};function g(e){return m[e]}var v={pawn:"p",lance:"l",knight:"n",silver:"s",gold:"g",bishop:"b",rook:"r",king:"k",promPawn:"+p",promLance:"+l",promKnight:"+n",promSilver:"+s",horse:"+b",dragon:"+r"},_={P:i.PAWN,L:i.LANCE,N:i.KNIGHT,S:i.SILVER,G:i.GOLD,B:i.BISHOP,R:i.ROOK,K:i.KING,"+P":i.PROM_PAWN,"+L":i.PROM_LANCE,"+N":i.PROM_KNIGHT,"+S":i.PROM_SILVER,"+B":i.HORSE,"+R":i.DRAGON,p:i.PAWN,l:i.LANCE,n:i.KNIGHT,s:i.SILVER,g:i.GOLD,b:i.BISHOP,r:i.ROOK,k:i.KING,"+p":i.PROM_PAWN,"+l":i.PROM_LANCE,"+n":i.PROM_KNIGHT,"+s":i.PROM_SILVER,"+b":i.HORSE,"+r":i.DRAGON},E={P:r.BLACK,L:r.BLACK,N:r.BLACK,S:r.BLACK,G:r.BLACK,B:r.BLACK,R:r.BLACK,K:r.BLACK,"+P":r.BLACK,"+L":r.BLACK,"+N":r.BLACK,"+S":r.BLACK,"+B":r.BLACK,"+R":r.BLACK,p:r.WHITE,l:r.WHITE,n:r.WHITE,s:r.WHITE,g:r.WHITE,b:r.WHITE,r:r.WHITE,k:r.WHITE,"+p":r.WHITE,"+l":r.WHITE,"+n":r.WHITE,"+s":r.WHITE,"+b":r.WHITE,"+r":r.WHITE},j=new Map;j.set(i.PAWN,{type:i.PROM_PAWN,reverseColor:!1}),j.set(i.LANCE,{type:i.PROM_LANCE,reverseColor:!1}),j.set(i.KNIGHT,{type:i.PROM_KNIGHT,reverseColor:!1}),j.set(i.SILVER,{type:i.PROM_SILVER,reverseColor:!1}),j.set(i.GOLD,{type:i.GOLD,reverseColor:!0}),j.set(i.BISHOP,{type:i.HORSE,reverseColor:!1}),j.set(i.ROOK,{type:i.DRAGON,reverseColor:!1}),j.set(i.KING,{type:i.KING,reverseColor:!0}),j.set(i.PROM_PAWN,{type:i.PAWN,reverseColor:!0}),j.set(i.PROM_LANCE,{type:i.LANCE,reverseColor:!0}),j.set(i.PROM_KNIGHT,{type:i.KNIGHT,reverseColor:!0}),j.set(i.PROM_SILVER,{type:i.SILVER,reverseColor:!0}),j.set(i.HORSE,{type:i.BISHOP,reverseColor:!0}),j.set(i.DRAGON,{type:i.ROOK,reverseColor:!0});var S,I=function(){function e(t,n){Object(a["a"])(this,e),this.type=n,this.color=t}return Object(o["a"])(e,[{key:"black",value:function(){return this.withColor(r.BLACK)}},{key:"white",value:function(){return this.withColor(r.WHITE)}},{key:"withColor",value:function(t){return new e(t,this.type)}},{key:"equals",value:function(e){return this.type===e.type&&this.color===e.color}},{key:"promoted",value:function(){var t=h[this.type];return new e(this.color,t||this.type)}},{key:"unpromoted",value:function(){var t=O[this.type];return new e(this.color,t||this.type)}},{key:"isPromotable",value:function(){return!!f[this.type]}},{key:"rotate",value:function(){var t=j.get(this.type),n=new e(this.color,t?t.type:this.type);return t&&t.reverseColor&&(n.color=c(this.color)),n}},{key:"id",get:function(){return this.color+"_"+this.type}},{key:"sfen",get:function(){switch(this.color){default:case r.BLACK:return m[this.type];case r.WHITE:return v[this.type]}}}],[{key:"isValidSFEN",value:function(e){return!!_[e]}},{key:"newBySFEN",value:function(t){var n=_[t];if(!n)return null;var r=E[t];return r?new e(r,n):null}}]),e}();n("b65f"),n("b64b");(function(e){e["UP"]="up",e["DOWN"]="down",e["LEFT"]="left",e["RIGHT"]="right",e["LEFT_UP"]="left_up",e["RIGHT_UP"]="right_up",e["LEFT_DOWN"]="left_down",e["RIGHT_DOWN"]="right_down",e["LEFT_UP_KNIGHT"]="left_up_knight",e["RIGHT_UP_KNIGHT"]="right_up_knight",e["LEFT_DOWN_KNIGHT"]="left_down_knight",e["RIGHT_DOWN_KNIGHT"]="right_down_knight"})(S||(S={}));var w={up:S.DOWN,down:S.UP,left:S.RIGHT,right:S.LEFT,left_up:S.RIGHT_DOWN,right_up:S.LEFT_DOWN,left_down:S.RIGHT_UP,right_down:S.LEFT_UP,left_up_knight:S.RIGHT_DOWN_KNIGHT,right_up_knight:S.LEFT_DOWN_KNIGHT,left_down_knight:S.RIGHT_UP_KNIGHT,right_down_knight:S.LEFT_UP_KNIGHT};function R(e){return w[e]}var y,T=[S.UP,S.DOWN,S.LEFT,S.RIGHT,S.LEFT_UP,S.RIGHT_UP,S.LEFT_DOWN,S.RIGHT_DOWN,S.LEFT_UP_KNIGHT,S.RIGHT_UP_KNIGHT,S.LEFT_DOWN_KNIGHT,S.RIGHT_DOWN_KNIGHT];(function(e){e["SHORT"]="short",e["LONG"]="long"})(y||(y={}));var A={black:{pawn:{up:y.SHORT},lance:{up:y.LONG},knight:{left_up_knight:y.SHORT,right_up_knight:y.SHORT},silver:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left_down:y.SHORT,right_down:y.SHORT},gold:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},bishop:{left_up:y.LONG,right_up:y.LONG,left_down:y.LONG,right_down:y.LONG},rook:{up:y.LONG,left:y.LONG,right:y.LONG,down:y.LONG},king:{left_down:y.SHORT,right_down:y.SHORT,left_up:y.SHORT,right_up:y.SHORT,down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},promPawn:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},promLance:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},promKnight:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},promSilver:{left_up:y.SHORT,up:y.SHORT,right_up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},horse:{left_up:y.LONG,right_up:y.LONG,left_down:y.LONG,right_down:y.LONG,up:y.SHORT,left:y.SHORT,right:y.SHORT,down:y.SHORT},dragon:{up:y.LONG,left:y.LONG,right:y.LONG,down:y.LONG,left_up:y.SHORT,right_up:y.SHORT,left_down:y.SHORT,right_down:y.SHORT}},white:{pawn:{down:y.SHORT},lance:{down:y.LONG},knight:{left_down_knight:y.SHORT,right_down_knight:y.SHORT},silver:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left_up:y.SHORT,right_up:y.SHORT},gold:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},bishop:{left_down:y.LONG,right_down:y.LONG,left_up:y.LONG,right_up:y.LONG},rook:{down:y.LONG,left:y.LONG,right:y.LONG,up:y.LONG},king:{left_down:y.SHORT,right_down:y.SHORT,left_up:y.SHORT,right_up:y.SHORT,down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},promPawn:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},promLance:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},promKnight:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},promSilver:{left_down:y.SHORT,down:y.SHORT,right_down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},horse:{left_down:y.LONG,right_down:y.LONG,left_up:y.LONG,right_up:y.LONG,down:y.SHORT,left:y.SHORT,right:y.SHORT,up:y.SHORT},dragon:{down:y.LONG,left:y.LONG,right:y.LONG,up:y.LONG,left_down:y.SHORT,right_down:y.SHORT,left_up:y.SHORT,right_up:y.SHORT}}};function N(e){return Object.keys(A[e.color][e.type])}function k(e,t){return A[e.color][e.type][t]}var P={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},left_up:{x:-1,y:-1},right_up:{x:1,y:-1},left_down:{x:-1,y:1},right_down:{x:1,y:1},left_up_knight:{x:-1,y:-2},right_up_knight:{x:1,y:-2},left_down_knight:{x:-1,y:2},right_down_knight:{x:1,y:2}};function H(e,t){if(1===e&&-2===t)return{direction:S.RIGHT_UP_KNIGHT,distance:1,ok:!0};if(-1===e&&-2===t)return{direction:S.LEFT_UP_KNIGHT,distance:1,ok:!0};if(1===e&&2===t)return{direction:S.RIGHT_DOWN_KNIGHT,distance:1,ok:!0};if(-1===e&&2===t)return{direction:S.LEFT_DOWN_KNIGHT,distance:1,ok:!0};if(0!==e&&0!==t&&Math.abs(e)!==Math.abs(t))return{direction:"",distance:0,ok:!1};var n=e,r=t,i=0;return 0!==n&&(i=Math.abs(n),n/=i),0!==r&&(i=Math.abs(r),r/=i),-1===n&&-1===r?{direction:S.LEFT_UP,distance:i,ok:!0}:0===n&&-1===r?{direction:S.UP,distance:i,ok:!0}:1===n&&-1===r?{direction:S.RIGHT_UP,distance:i,ok:!0}:-1===n&&0===r?{direction:S.LEFT,distance:i,ok:!0}:1===n&&0===r?{direction:S.RIGHT,distance:i,ok:!0}:-1===n&&1===r?{direction:S.LEFT_DOWN,distance:i,ok:!0}:0===n&&1===r?{direction:S.DOWN,distance:i,ok:!0}:1===n&&1===r?{direction:S.RIGHT_DOWN,distance:i,ok:!0}:{direction:"",distance:0,ok:!1}}function L(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}function C(e){switch(e){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;case"i":return 9;default:return null}}var x=["a","b","c","d","e","f","g","h","i"],M=function(){function e(t,n){Object(a["a"])(this,e),this.file=t,this.rank=n}return Object(o["a"])(e,[{key:"x",get:function(){return 9-this.file}},{key:"y",get:function(){return this.rank-1}},{key:"index",get:function(){return 9*this.y+this.x}},{key:"opposite",get:function(){return new e(10-this.file,10-this.rank)}},{key:"neighbor",value:function(t,n){switch(t){case S.UP:return new e(this.file,this.rank-1);case S.DOWN:return new e(this.file,this.rank+1);case S.LEFT:return new e(this.file+1,this.rank);case S.RIGHT:return new e(this.file-1,this.rank);case S.LEFT_UP:return new e(this.file+1,this.rank-1);case S.RIGHT_UP:return new e(this.file-1,this.rank-1);case S.LEFT_DOWN:return new e(this.file+1,this.rank+1);case S.RIGHT_DOWN:return new e(this.file-1,this.rank+1);case S.LEFT_UP_KNIGHT:return new e(this.file+1,this.rank-2);case S.RIGHT_UP_KNIGHT:return new e(this.file-1,this.rank-2);case S.LEFT_DOWN_KNIGHT:return new e(this.file+1,this.rank+2);case S.RIGHT_DOWN_KNIGHT:return new e(this.file-1,this.rank+2)}var r=t,i=n;return new e(this.file-r,this.rank+i)}},{key:"valid",get:function(){return this.file>=1&&this.file<=9&&this.rank>=1&&this.rank<=9}},{key:"equals",value:function(e){return!!e&&this.file===e.file&&this.rank===e.rank}},{key:"sfen",get:function(){return this.file+x[this.rank-1]}}],[{key:"newByXY",value:function(t,n){return new e(9-t,n+1)}},{key:"newByIndex",value:function(t){return new e(9-t%9,Math.trunc(t/9)+1)}},{key:"parseSFENSquare",value:function(t){var n=L(t[0]),r=C(t[1]);return n&&r?new e(n,r):null}}]),e}();M.all=[];for(var D=0;D<81;D+=1)M.all.push(M.newByIndex(D));n("99af");var G=["１","２","３","４","５","６","７","８","９"],B=["一","二","三","四","五","六","七","八","九"],q=function(){function e(t,n,r,i,o,c){Object(a["a"])(this,e),this.from=t,this.to=n,this.promote=r,this.color=i,this.pieceType=o,this.capturedPieceType=c}return Object(o["a"])(e,[{key:"equals",value:function(e){return!!e&&((this.from instanceof M&&e.from instanceof M&&this.from.equals(e.from)||!(this.from instanceof M)&&!(e.from instanceof M)&&this.from===e.from)&&this.to.equals(e.to)&&this.promote===e.promote&&this.color===e.color&&this.pieceType===e.pieceType&&this.capturedPieceType===e.capturedPieceType)}},{key:"withPromote",value:function(){return new e(this.from,this.to,!0,this.color,this.pieceType,this.capturedPieceType)}},{key:"getDisplayText",value:function(e){var t="";if(t+=this.color===r.BLACK?"▲":"△",e&&e.to.equals(this.to)?t+="同":(t+=G[this.to.file-1],t+=B[this.to.rank-1]),t+=p(this.pieceType),this.promote&&(t+="成"),this.from instanceof M){var n=this.from;t+=" (".concat(n.file).concat(n.rank,")")}else t+="打";return t}},{key:"sfen",get:function(){var e="";return this.from instanceof M?e+=this.from.sfen:e+=g(this.from)+"*",e+=this.to.sfen,this.promote&&(e+="+"),e}}]),e}();function U(e){var t;if("*"===e[1]){var n=I.newBySFEN(e[0]);if(!n)return null;t=n.type}else{var r=M.parseSFENSquare(e);if(!r)return null;t=r}var i=M.parseSFENSquare(e.substring(2));if(!i)return null;var a=e.length>=5&&"+"===e[4];return{from:t,to:i,promote:a}}var K;n("159b"),n("33d1"),n("ea98"),n("ac1f"),n("1276"),n("7db0");function W(e){switch(e){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;default:return null}}(function(e){e["STANDARD"]="standard",e["EMPTY"]="empty",e["HANDICAP_LANCE"]="handicapLance",e["HANDICAP_RIGHT_LANCE"]="handicapRightLance",e["HANDICAP_BISHOP"]="handicapBishop",e["HANDICAP_ROOK"]="handicapRook",e["HANDICAP_ROOK_LANCE"]="handicapRookLance",e["HANDICAP_2PIECES"]="handicap2Pieces",e["HANDICAP_4PIECES"]="handicap4Pieces",e["HANDICAP_6PIECES"]="handicap6Pieces",e["HANDICAP_8PIECES"]="handicap8Pieces",e["TSUME_SHOGI"]="tsumeShogi"})(K||(K={}));var F=function(){function e(){Object(a["a"])(this,e),this.squares=new Array;for(var t=0;t<81;t+=1)this.squares.push(null);this.reset(K.STANDARD)}return Object(o["a"])(e,[{key:"at",value:function(e){return this.squares[e.index]}},{key:"set",value:function(e,t){this.squares[e.index]=t}},{key:"swap",value:function(e,t){var n=this.squares[e.index];this.squares[e.index]=this.squares[t.index],this.squares[t.index]=n}},{key:"remove",value:function(e){var t=this.squares[e.index];return this.squares[e.index]=null,t}},{key:"listNonEmptySquares",value:function(){var e=this,t=new Array;return M.all.forEach((function(n){e.squares[n.index]&&t.push(n)})),t}},{key:"listSquaresByColor",value:function(e){var t=this,n=new Array;return M.all.forEach((function(r){var i=t.squares[r.index];i&&i.color===e&&n.push(r)})),n}},{key:"clear",value:function(){var e=this;M.all.forEach((function(t){e.squares[t.index]=null}))}},{key:"reset",value:function(e){if(this.clear(),e!==K.EMPTY&&(this.squares[new M(5,1).index]=new I(r.WHITE,i.KING),e!==K.TSUME_SHOGI))switch(this.squares[new M(5,9).index]=new I(r.BLACK,i.KING),this.squares[new M(2,8).index]=new I(r.BLACK,i.ROOK),this.squares[new M(8,2).index]=new I(r.WHITE,i.ROOK),this.squares[new M(8,8).index]=new I(r.BLACK,i.BISHOP),this.squares[new M(2,2).index]=new I(r.WHITE,i.BISHOP),this.squares[new M(4,9).index]=new I(r.BLACK,i.GOLD),this.squares[new M(6,9).index]=new I(r.BLACK,i.GOLD),this.squares[new M(6,1).index]=new I(r.WHITE,i.GOLD),this.squares[new M(4,1).index]=new I(r.WHITE,i.GOLD),this.squares[new M(3,9).index]=new I(r.BLACK,i.SILVER),this.squares[new M(7,9).index]=new I(r.BLACK,i.SILVER),this.squares[new M(7,1).index]=new I(r.WHITE,i.SILVER),this.squares[new M(3,1).index]=new I(r.WHITE,i.SILVER),this.squares[new M(2,9).index]=new I(r.BLACK,i.KNIGHT),this.squares[new M(8,9).index]=new I(r.BLACK,i.KNIGHT),this.squares[new M(8,1).index]=new I(r.WHITE,i.KNIGHT),this.squares[new M(2,1).index]=new I(r.WHITE,i.KNIGHT),this.squares[new M(1,9).index]=new I(r.BLACK,i.LANCE),this.squares[new M(9,9).index]=new I(r.BLACK,i.LANCE),this.squares[new M(9,1).index]=new I(r.WHITE,i.LANCE),this.squares[new M(1,1).index]=new I(r.WHITE,i.LANCE),this.squares[new M(1,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(2,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(3,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(4,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(5,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(6,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(7,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(8,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(9,7).index]=new I(r.BLACK,i.PAWN),this.squares[new M(1,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(2,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(3,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(4,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(5,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(6,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(7,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(8,3).index]=new I(r.WHITE,i.PAWN),this.squares[new M(9,3).index]=new I(r.WHITE,i.PAWN),e){default:case K.STANDARD:return;case K.HANDICAP_LANCE:return void(this.squares[new M(1,1).index]=null);case K.HANDICAP_RIGHT_LANCE:return void(this.squares[new M(9,1).index]=null);case K.HANDICAP_BISHOP:return void(this.squares[new M(2,2).index]=null);case K.HANDICAP_ROOK:return void(this.squares[new M(8,2).index]=null);case K.HANDICAP_ROOK_LANCE:return this.squares[new M(8,2).index]=null,void(this.squares[new M(1,1).index]=null);case K.HANDICAP_2PIECES:return this.squares[new M(8,2).index]=null,void(this.squares[new M(2,2).index]=null);case K.HANDICAP_4PIECES:return this.squares[new M(8,2).index]=null,this.squares[new M(2,2).index]=null,this.squares[new M(1,1).index]=null,void(this.squares[new M(9,1).index]=null);case K.HANDICAP_6PIECES:return this.squares[new M(8,2).index]=null,this.squares[new M(2,2).index]=null,this.squares[new M(1,1).index]=null,this.squares[new M(2,1).index]=null,this.squares[new M(8,1).index]=null,void(this.squares[new M(9,1).index]=null);case K.HANDICAP_8PIECES:return this.squares[new M(8,2).index]=null,this.squares[new M(2,2).index]=null,this.squares[new M(1,1).index]=null,this.squares[new M(2,1).index]=null,this.squares[new M(3,1).index]=null,this.squares[new M(7,1).index]=null,this.squares[new M(8,1).index]=null,void(this.squares[new M(9,1).index]=null)}}},{key:"sfen",get:function(){for(var e="",t=0,n=0;n<9;n+=1){for(var r=0;r<9;r+=1){var i=this.at(M.newByXY(r,n));i?(t&&(e+=t,t=0),e+=i.sfen):t+=1}t&&(e+=t,t=0),8!==n&&(e+="/")}return e}},{key:"resetBySFEN",value:function(t){if(!e.isValidSFEN(t))return!1;this.clear();for(var n=t.split("/"),r=0;r<9;r+=1)for(var i=0,a=0;a<n[r].length;a+=1){var o=n[r][a];"+"===o&&(a+=1,o+=n[r][a]);var c=W(o);c?i+=c:(this.set(M.newByXY(i,r),I.newBySFEN(o)),i+=1)}return!0}},{key:"findKing",value:function(e){var t=this,n=new I(e,i.KING);return M.all.find((function(e){var r=t.at(e);if(r&&n.equals(r))return!0}))}},{key:"hasPower",value:function(e,t,n){var r=this;return!!T.find((function(i){for(var a=0,o=e.neighbor(i);o.valid;o=o.neighbor(i)){if(a+=1,n&&n.filled&&o.equals(n.filled))break;if(!(n&&n.ignore&&o.equals(n.ignore))){var c=r.at(o);if(c){if(c.color!==t)return!1;var s=R(i),u=k(c,s);return u===y.LONG||u===y.SHORT&&1===a}}}return!1}))}},{key:"isCheck",value:function(e,t){var n=this.findKing(e);return!!n&&this.hasPower(n,c(e),{filled:t&&t.filled,ignore:t&&t.ignore})}},{key:"copyFrom",value:function(e){var t=this;M.all.forEach((function(n){t.squares[n.index]=e.at(n)}))}}],[{key:"isValidSFEN",value:function(e){var t=e.split("/");if(9!==t.length)return!1;for(var n=0;n<9;n+=1){for(var r=0,i=0;i<t[n].length;i+=1){var a=t[n][i];"+"===a&&(i+=1,a+=t[n][i]);var o=W(a);if(o)r+=o;else{if(!I.isValidSFEN(a))return!1;r+=1}}if(9!==r)return!1}return!0}}]),e}();n("466d"),n("a9e3");function V(e,t){return 0===e?"":(1!==e?e:"")+t.sfen}var Y=function(){function e(){Object(a["a"])(this,e),this.pieces=new Map,this.pieces.set(i.PAWN,0),this.pieces.set(i.LANCE,0),this.pieces.set(i.KNIGHT,0),this.pieces.set(i.SILVER,0),this.pieces.set(i.GOLD,0),this.pieces.set(i.BISHOP,0),this.pieces.set(i.ROOK,0)}return Object(o["a"])(e,[{key:"count",value:function(e){return this.pieces.get(e)}},{key:"set",value:function(e,t){this.pieces.set(e,t)}},{key:"add",value:function(e,t){var n=this.pieces.get(e);return n+=t,this.pieces.set(e,n),n}},{key:"reduce",value:function(e,t){var n=this.pieces.get(e);return n-=t,this.pieces.set(e,n),n}},{key:"forEach",value:function(e){e(i.PAWN,this.pieces.get(i.PAWN)),e(i.LANCE,this.pieces.get(i.LANCE)),e(i.KNIGHT,this.pieces.get(i.KNIGHT)),e(i.SILVER,this.pieces.get(i.SILVER)),e(i.GOLD,this.pieces.get(i.GOLD)),e(i.BISHOP,this.pieces.get(i.BISHOP)),e(i.ROOK,this.pieces.get(i.ROOK))}},{key:"sfenBlack",get:function(){return this.formatSFEN(r.BLACK)}},{key:"sfenWhite",get:function(){return this.formatSFEN(r.WHITE)}},{key:"formatSFEN",value:function(e){var t="";return t+=V(this.count(i.ROOK),new I(e,i.ROOK)),t+=V(this.count(i.BISHOP),new I(e,i.BISHOP)),t+=V(this.count(i.GOLD),new I(e,i.GOLD)),t+=V(this.count(i.SILVER),new I(e,i.SILVER)),t+=V(this.count(i.KNIGHT),new I(e,i.KNIGHT)),t+=V(this.count(i.LANCE),new I(e,i.LANCE)),t+=V(this.count(i.PAWN),new I(e,i.PAWN)),""===t?"-":t}},{key:"copyFrom",value:function(e){var t=this;e.pieces.forEach((function(e,n){t.pieces.set(n,e)}))}}],[{key:"formatSFEN",value:function(e,t){var n=e.sfenBlack,r=t.sfenWhite;return"-"===n&&"-"===r?"-":"-"===r?n:"-"===n?r:n+r}},{key:"isValidSFEN",value:function(e){return"-"===e||!!e.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)}},{key:"parseSFEN",value:function(t){if("-"===t)return{black:new e,white:new e};if(!t.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/))return null;for(var n=t.match(/([0-9]*[PLNSGBRplnsgbr])/g),i=new e,a=new e,o=0;o<n.length;o+=1){var c=n[o],s=1;c.length>=2&&(s=Number(c.substring(0,c.length-1)));var u=I.newBySFEN(c[c.length-1]);u.color===r.BLACK?i.add(u.type,s):a.add(u.type,s)}return{black:i,white:a}}}]),e}(),z={black:{pawn:{1:!0},lance:{1:!0},knight:{1:!0,2:!0}},white:{pawn:{9:!0},lance:{9:!0},knight:{9:!0,8:!0}}};function J(e,t,n){var r=z[e][t];return!!r&&r[n]}function Z(e,t){return e===r.BLACK?t<=3:t>=7}function $(e,t,n){for(var r=1;r<=9;r+=1){var a=t.at(new M(n,r));if(a&&a.type===i.PAWN&&a.color===e)return!0}return!1}var X,Q=function(){function e(){Object(a["a"])(this,e),this._board=new F,this._color=r.BLACK,this._blackHand=new Y,this._whiteHand=new Y}return Object(o["a"])(e,[{key:"board",get:function(){return this._board}},{key:"color",get:function(){return this._color}},{key:"blackHand",get:function(){return this._blackHand}},{key:"whiteHand",get:function(){return this._whiteHand}},{key:"reset",value:function(e){switch(this._board.reset(e),this._blackHand=new Y,this._whiteHand=new Y,e){case K.STANDARD:case K.EMPTY:case K.TSUME_SHOGI:this._color=r.BLACK;break;case K.HANDICAP_LANCE:case K.HANDICAP_RIGHT_LANCE:case K.HANDICAP_BISHOP:case K.HANDICAP_ROOK:case K.HANDICAP_ROOK_LANCE:case K.HANDICAP_2PIECES:case K.HANDICAP_4PIECES:case K.HANDICAP_6PIECES:case K.HANDICAP_8PIECES:this._color=r.WHITE;break}e===K.TSUME_SHOGI&&(this._whiteHand.set(i.PAWN,18),this._whiteHand.set(i.LANCE,4),this._whiteHand.set(i.KNIGHT,4),this._whiteHand.set(i.SILVER,4),this._whiteHand.set(i.GOLD,4),this._whiteHand.set(i.BISHOP,2),this._whiteHand.set(i.ROOK,2))}},{key:"hand",value:function(e){return this._hand(e)}},{key:"_hand",value:function(e){return e===r.BLACK?this._blackHand:this._whiteHand}},{key:"createMove",value:function(e,t){var n;if(e instanceof M){var r=this._board.at(e);if(!r)return null;n=r.type}else n=e;var i=this._board.at(t);return new q(e,t,!1,this.color,n,i?i.type:null)}},{key:"createMoveBySFEN",value:function(e){var t=U(e);if(!t)return null;var n=this.createMove(t.from,t.to);return n?(t.promote&&(n=n.withPromote()),n):null}},{key:"isPawnDropMate",value:function(e){var t=this;if(e.from instanceof M)return!1;if(e.pieceType!==i.PAWN)return!1;var n=e.to.neighbor(e.color===r.BLACK?S.UP:S.DOWN),a=this.board.at(n);if(!a||a.type!==i.KING||a.color===e.color)return!1;var o=N(a).find((function(r){var i=n.neighbor(r);if(!i.valid)return!1;var o=t.board.at(i);return(!o||o.color!=a.color)&&!t.board.hasPower(i,e.color)}));return!o&&!this.board.listSquaresByColor(a.color).find((function(r){return!r.equals(n)&&t.isMovable(r,e.to)&&!t.board.isCheck(a.color,{filled:e.to,ignore:r})}))}},{key:"isValidMove",value:function(e){if(e.from instanceof M){var t=this._board.at(e.from);if(!t||t.color!==this.color)return!1;if(!this.isMovable(e.from,e.to))return!1;var n=this._board.at(e.to);if(n&&n.color===this.color)return!1;if(e.promote){if(!t.isPromotable())return!1;if(!Z(this.color,e.from.rank)&&!Z(this.color,e.to.rank))return!1}else if(J(this.color,t.type,e.to.rank))return!1;if(e.pieceType!==i.KING?this._board.isCheck(this.color,{filled:e.to,ignore:e.from}):this._board.hasPower(e.to,c(this.color),{ignore:e.from}))return!1}else{if(e.promote)return!1;if(e.color!==this.color)return!1;if(0===this.hand(this.color).count(e.from))return!1;if(this._board.at(e.to))return!1;if(J(this.color,e.from,e.to.rank))return!1;if(e.from===i.PAWN&&$(this.color,this._board,e.to.file))return!1;if(this._board.isCheck(this.color,{filled:e.to}))return!1;if(this.isPawnDropMate(e))return!1}return!0}},{key:"doMove",value:function(e,t){if((!t||!t.ignoreValidation)&&!this.isValidMove(e))return!1;if(e.from instanceof M){var n=this._board.at(e.from),r=this._board.at(e.to);this._board.remove(e.from),this._board.set(e.to,e.promote?n.promoted():n),r&&r.type!==i.KING&&this._hand(this.color).add(r.unpromoted().type,1)}else this._hand(this.color).reduce(e.from,1),this._board.set(e.to,new I(this.color,e.from));return this._color=c(this.color),!0}},{key:"undoMove",value:function(e){if(this._color=c(this.color),e.from instanceof M)if(this._board.set(e.from,new I(this.color,e.pieceType)),e.capturedPieceType){var t=new I(c(this.color),e.capturedPieceType);this._board.set(e.to,t),t.type!==i.KING&&this._hand(this.color).reduce(t.unpromoted().type,1)}else this._board.remove(e.to);else this._hand(this.color).add(e.from,1),this._board.remove(e.to)}},{key:"isValidEditing",value:function(e,t){if(e instanceof M){var n=this._board.at(e);if(!n)return!1;if(t instanceof M){if(e.equals(t))return!1}else if(n.type===i.KING)return!1}else{if(!e.color)return!1;if(0===this.hand(e.color).count(e.type))return!1;if(t instanceof M){if(this._board.at(t))return!1}else if(e.color===t)return!1}return!0}},{key:"edit",value:function(e){if(e.move){if(!this.isValidEditing(e.move.from,e.move.to))return!1;if(e.move.from instanceof M)if(e.move.to instanceof M)this._board.swap(e.move.from,e.move.to);else{var t=this._board.remove(e.move.from);this._hand(e.move.to).add(t.unpromoted().type,1)}else this._hand(e.move.from.color).reduce(e.move.from.type,1),e.move.to instanceof M?this._board.set(e.move.to,e.move.from):this._hand(e.move.to).add(e.move.from.type,1)}if(e.rotate){var n=this._board.at(e.rotate);n&&this._board.set(e.rotate,n.rotate())}return!0}},{key:"sfen",get:function(){return this.getSfen(1)}},{key:"getSfen",value:function(e){var t="sfen ".concat(this._board.sfen," ").concat(s(this.color)," ");return t+=Y.formatSFEN(this._blackHand,this._whiteHand),t+=" "+e,t}},{key:"resetBySFEN",value:function(t){if(!e.isValidSFEN(t))return!1;var n=t.split(" ");this._board.resetBySFEN(n[1]),this._color=l(n[2]);var r=Y.parseSFEN(n[3]);return this._blackHand=r.black,this._whiteHand=r.white,!0}},{key:"setColor",value:function(e){this._color=e}},{key:"isMovable",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=H(n,r),a=i.direction,o=i.distance,c=i.ok;if(!c)return!1;var s=this._board.at(e);if(!s)return!1;switch(k(s,a)){default:return!1;case y.SHORT:return 1===o;case y.LONG:for(var u=P[a],l=e.neighbor(u.x,u.y);l.valid;l=l.neighbor(u.x,u.y)){if(l.equals(t))return!0;if(this._board.at(l))return!1}return!1}}},{key:"copyFrom",value:function(e){this._board.copyFrom(e._board),this._color=e.color,this._blackHand.copyFrom(e._blackHand),this._whiteHand.copyFrom(e._whiteHand)}},{key:"clone",value:function(){var t=new e;return t.copyFrom(this),t}}],[{key:"isValidSFEN",value:function(e){var t=e.split(" ");return!(t.length<5)&&("sfen"===t[0]&&(!!F.isValidSFEN(t[1])&&(!!u(t[2])&&!!Y.isValidSFEN(t[3]))))}},{key:"newBySFEN",value:function(t){var n=new e;return n.resetBySFEN(t)?n:null}}]),e}(),ee=(n("498a"),n("d2ca"));(function(e){e["BLACK_NAME"]="blackName",e["WHITE_NAME"]="whiteName",e["START_DATETIME"]="startDatetime",e["END_DATETIME"]="endDatetime",e["DATE"]="date",e["TOURNAMENT"]="tournament",e["STRATEGY"]="strategy",e["TITLE"]="title",e["TIME_LIMIT"]="timeLimit",e["TIME_SPENT"]="timeSpent",e["PLACE"]="place",e["POSTED_ON"]="postedOn",e["NOTE"]="note",e["BLACK_SHORT_NAME"]="blackShortName",e["WHITE_SHORT_NAME"]="whiteShortName",e["OPUS_NO"]="opusNo",e["OPUS_NAME"]="opusName",e["AUTHOR"]="author",e["PUBLISHED_ON"]="publishedOn",e["PUBLISHED_AT"]="publishedAt",e["SOURCE"]="source",e["LENGTH"]="length",e["INTEGRITY"]="integrity",e["CATEGORY"]="category",e["AWARD"]="award"})(X||(X={}));var te,ne=function(){function e(){Object(a["a"])(this,e),this.metadata=new Map,this.customMetadata=new Map}return Object(o["a"])(e,[{key:"standardMetadataKeys",get:function(){return this.metadata.keys()}},{key:"getStandardMetadata",value:function(e){return this.metadata.get(e)}},{key:"setStandardMetadata",value:function(e,t){this.metadata.set(e,t)}},{key:"customMetadataKeys",get:function(){return this.customMetadata.keys()}},{key:"getCustomMetadata",value:function(e){return this.customMetadata.get(e)}},{key:"setCustomMetadata",value:function(e,t){this.customMetadata.set(e,t)}}]),e}();(function(e){e["START"]="start",e["INTERRUPT"]="interrupt",e["RESIGN"]="resign",e["DRAW"]="draw",e["REPETITION_DRAW"]="repetitionDraw",e["MATE"]="mate",e["TIMEOUT"]="timeout",e["FOUL_WIN"]="foulWin",e["FOUL_LOSE"]="foulLose",e["ENTERING_OF_KING"]="enteringOfKing",e["WIN_BY_DEFAULT"]="winByDefault",e["LOSS_BY_DEFAULT"]="lossByDefault"})(te||(te={}));var re={start:"開始局面",resign:"投了",interrupt:"中断",draw:"持将棋",repetitionDraw:"千日手",mate:"詰み",timeout:"切れ負け",foulWin:"反則勝ち",foulLose:"反則負け",enteringOfKing:"入玉",winByDefault:"不戦勝",lossByDefault:"不戦敗"};function ie(e){return re[e]}var ae=function(){function e(t,n,r,i,o){Object(a["a"])(this,e),this.number=t,this.prev=n,this.branchIndex=r,this.activeBranch=i,this.move=o,this.next=null,this.branch=null,this.comment="",this.elapsedMs=0,this.totalElapsedMs=0}return Object(o["a"])(e,[{key:"displayMoveText",get:function(){var e=this.prev&&this.prev.move instanceof q?this.prev.move:null;return this.move instanceof q?this.move.getDisplayText(e):ie(this.move)}},{key:"displayText",get:function(){var e=this.displayMoveText;if(0!==this.number){var t=Object(ee["b"])(this.elapsedMs),n=Object(ee["a"])(this.totalElapsedMs);e+=" (".concat(t," / ").concat(n,")")}return e}},{key:"hasBranch",get:function(){return!!this.prev&&!!this.prev.next&&!!this.prev.next.branch}},{key:"isFirstBranch",get:function(){return!this.prev||this.prev.next===this}},{key:"updateTotalElapsedMs",value:function(){this.totalElapsedMs=this.elapsedMs,this.prev&&this.prev.prev&&(this.totalElapsedMs+=this.prev.prev.totalElapsedMs)}},{key:"setElapsedMs",value:function(e){this.elapsedMs=e,this.updateTotalElapsedMs();var t=this.next,n=[];while(t)t.updateTotalElapsedMs(),t.branch&&n.push(t.branch),t=t.next?t.next:n.pop()||null}}]),e}(),oe=function(){function e(t){Object(a["a"])(this,e),this._metadata=new ne,this._initialPosition=t?t.clone():new Q,this._position=this.initialPosition.clone(),this._first=new ae(0,null,0,!0,te.START),this._current=this._first}return Object(o["a"])(e,[{key:"metadata",get:function(){return this._metadata}},{key:"initialPosition",get:function(){return this._initialPosition}},{key:"position",get:function(){return this._position}},{key:"first",get:function(){return this._first}},{key:"current",get:function(){return this._current}},{key:"moves",get:function(){for(var e=this.movesBefore,t=this._current.next;t;t=t.next){while(!t.activeBranch)t=t.branch;e.push(t)}return e}},{key:"movesBefore",get:function(){return this._movesBefore}},{key:"_movesBefore",get:function(){var e=new Array;e.unshift(this._current);for(var t=this._current.prev;t;t=t.prev)e.unshift(t);return e}},{key:"length",get:function(){for(var e=this._current.number,t=this._current.next;t;t=t.next){while(!t.activeBranch)t=t.branch;e=t.number}return e}},{key:"branchBegin",get:function(){return this._current.prev?this._current.prev.next:null}},{key:"clear",value:function(e){e&&(this._initialPosition=e.clone()),this._position=this.initialPosition.clone(),this._first.next=null,this._current=this._first}},{key:"goBack",value:function(){return!!this._current.prev&&(this._current.move instanceof q&&this._position.undoMove(this._current.move),this._current=this._current.prev,!0)}},{key:"goForward",value:function(){if(this._current.next){this._current=this._current.next;while(!this._current.activeBranch)this._current=this._current.branch;return this._current.move instanceof q&&this._position.doMove(this._current.move,{ignoreValidation:!0}),!0}return!1}},{key:"goto",value:function(e){while(e<this._current.number)if(!this.goBack())break;while(e>this._current.number)if(!this.goForward())break}},{key:"resetAllBranchSelection",value:function(){this._forEach((function(e){e.activeBranch=e.isFirstBranch}))}},{key:"switchBranchByIndex",value:function(e){if(!this._current.prev)return!1;for(var t=!1,n=this._current.prev.next;n;n=n.branch)n.branchIndex===e?(n.activeBranch=!0,this._current.move instanceof q&&this._position.undoMove(this._current.move),this._current=n,this._current.move instanceof q&&this._position.doMove(this._current.move,{ignoreValidation:!0}),t=!0):n.activeBranch=!1;return t}},{key:"append",value:function(e,t){if(e instanceof q&&!this._position.doMove(e,t))return!1;if(this._current===this.first||this._current.move instanceof q||this.goBack(),!this._current.next)return this._current.next=new ae(this._current.number+1,this._current,0,!0,e),this._current=this._current.next,!0;var n;for(n=this._current.next;n;n=n.branch)n.activeBranch=!1;var r=this._current.next;for(n=this._current.next;n;n=n.branch){if(n.move instanceof q&&e instanceof q&&e.equals(n.move)||e===n.move)return this._current=n,this._current.activeBranch=!0,!0;r=n}return this._current=new ae(this._current.number+1,this._current,r.branchIndex+1,!0,e),r.branch=this._current,!0}},{key:"removeAfter",value:function(){var e=this._current;if(this.goBack()){if(this._current.next===e)this._current.next=e.branch;else for(var t=this._current.next;t;t=t.branch)if(t.branch===e){t.branch=e.branch;break}for(var n=0,r=this._current.next;r;r=r.branch)r.branchIndex=n,n+=1;this._current.next&&(this._current.next.activeBranch=!0)}else this._current.next=null}},{key:"usi",get:function(){var e="position "+this.initialPosition.sfen+" moves";return this._movesBefore.forEach((function(t){t.move instanceof q&&(e+=" "+t.move.sfen)})),e}},{key:"sfen",get:function(){return"position "+this.position.getSfen(this._current.number+1)}},{key:"forEach",value:function(e){this._forEach(e)}},{key:"_forEach",value:function(e){var t=this._first,n=[];while(t)e(t),t.branch&&n.push(t.branch),t=t.next?t.next:n.pop()||null}}]),e}();var ce,se=n("b85c"),ue=(n("d9e2"),n("25eb"),n("5319"),n("5b81"),{"先手":X.BLACK_NAME,"後手":X.WHITE_NAME,"開始日時":X.START_DATETIME,"終了日時":X.END_DATETIME,"対局日":X.DATE,"棋戦":X.TOURNAMENT,"戦型":X.STRATEGY,"表題":X.TITLE,"持ち時間":X.TIME_LIMIT,"消費時間":X.TIME_SPENT,"場所":X.PLACE,"掲載":X.POSTED_ON,"備考":X.NOTE,"先手省略名":X.BLACK_SHORT_NAME,"後手省略名":X.WHITE_SHORT_NAME,"作品番号":X.OPUS_NO,"作品名":X.OPUS_NAME,"作者":X.AUTHOR,"発表誌":X.PUBLISHED_ON,"発表年月":X.PUBLISHED_AT,"出典":X.SOURCE,"手数":X.LENGTH,"完全性":X.INTEGRITY,"分類":X.CATEGORY,"受賞":X.AWARD}),le={blackName:"先手",whiteName:"後手",startDatetime:"開始日時",endDatetime:"終了日時",date:"対局日",tournament:"棋戦",strategy:"戦型",title:"表題",timeLimit:"持ち時間",timeSpent:"消費時間",place:"場所",postedOn:"掲載",note:"備考",blackShortName:"先手省略名",whiteShortName:"後手省略名",opusNo:"作品番号",opusName:"作品名",author:"作者",publishedOn:"発表誌",publishedAt:"発表年月",source:"出典",length:"手数",integrity:"完全性",category:"分類",award:"受賞"};(function(e){e[e["METADATA"]=0]="METADATA",e[e["HANDICAP"]=1]="HANDICAP",e[e["BLACK_HAND"]=2]="BLACK_HAND",e[e["WHITE_HAND"]=3]="WHITE_HAND",e[e["BOARD"]=4]="BOARD",e[e["BLACK_TURN"]=5]="BLACK_TURN",e[e["WHITE_TURN"]=6]="WHITE_TURN",e[e["MOVE"]=7]="MOVE",e[e["COMMENT"]=8]="COMMENT",e[e["UNKNOWN"]=9]="UNKNOWN"})(ce||(ce={}));var de=[{prefix:/^手合割：/,type:ce.HANDICAP,removePrefix:!0,isPosition:!0},{prefix:/^先手の持駒：/,type:ce.BLACK_HAND,removePrefix:!0,isPosition:!0},{prefix:/^後手の持駒：/,type:ce.WHITE_HAND,removePrefix:!0,isPosition:!0},{prefix:/^\|/,type:ce.BOARD,removePrefix:!1,isPosition:!0},{prefix:/^先手番/,type:ce.BLACK_TURN,removePrefix:!1,isPosition:!0},{prefix:/^後手番/,type:ce.WHITE_TURN,removePrefix:!1,isPosition:!0},{prefix:/^ *[0-9]+ +/,type:ce.MOVE,removePrefix:!1,isPosition:!1},{prefix:/^\*/,type:ce.COMMENT,removePrefix:!0,isPosition:!1}];function pe(e){var t=e.indexOf("#");-1===t&&(t=e.length);for(var n=0;n<de.length;n++){var r=de[n],i=e.match(r.prefix);if(i){var a=r.removePrefix?i[0].length:0;return{type:r.type,data:e.substring(a,t),isPosition:r.isPosition,metadataKey:""}}}var o=e.match(/^[^ ]+：/);if(o){var c=o[0];return{type:ce.METADATA,data:e.substring(c.length,t),isPosition:!1,metadataKey:c.substring(0,c.length-1)}}return{type:ce.UNKNOWN,data:e.substring(0,t),isPosition:!1,metadataKey:""}}function be(e,t){switch(t.trim()){case"平手":return void e.reset(K.STANDARD);case"香落ち":return void e.reset(K.HANDICAP_LANCE);case"右香落ち":return void e.reset(K.HANDICAP_RIGHT_LANCE);case"角落ち":return void e.reset(K.HANDICAP_BISHOP);case"飛車落ち":return void e.reset(K.HANDICAP_ROOK);case"飛香落ち":return void e.reset(K.HANDICAP_ROOK_LANCE);case"二枚落ち":return void e.reset(K.HANDICAP_2PIECES);case"四枚落ち":return void e.reset(K.HANDICAP_4PIECES);case"六枚落ち":return void e.reset(K.HANDICAP_6PIECES);case"八枚落ち":return void e.reset(K.HANDICAP_8PIECES);case"その他":return void e.reset(K.EMPTY)}return new Error("不正なデータ:"+t)}var fe={"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9},he={"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},Oe={"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"十一":11,"十二":12,"十三":13,"十四":14,"十五":15,"十六":16,"十七":17,"十八":18},me={1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},ge={"王":i.KING,"玉":i.KING,"飛":i.ROOK,"龍":i.DRAGON,"竜":i.DRAGON,"角":i.BISHOP,"馬":i.HORSE,"金":i.GOLD,"銀":i.SILVER,"成銀":i.PROM_SILVER,"全":i.PROM_SILVER,"桂":i.KNIGHT,"成桂":i.PROM_KNIGHT,"圭":i.PROM_KNIGHT,"香":i.LANCE,"成香":i.PROM_LANCE,"杏":i.PROM_LANCE,"歩":i.PAWN,"と":i.PROM_PAWN},ve={"中断":te.INTERRUPT,"投了":te.RESIGN,"持将棋":te.DRAW,"千日手":te.REPETITION_DRAW,"詰み":te.MATE,"切れ負け":te.TIMEOUT,"反則勝ち":te.FOUL_WIN,"反則負け":te.FOUL_LOSE,"入玉勝ち":te.ENTERING_OF_KING,"不戦勝":te.WIN_BY_DEFAULT,"不戦敗":te.LOSS_BY_DEFAULT},_e=/^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\u3000)(玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\([1-9][1-9]\)) *(.*)$/,Ee=/\( *([0-9]+):([0-9]+)\/[0-9: ]*\)/,je=/^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;function Se(e,t){if(t.length<21)return new Error("不正な盤面:"+t);var n=t[20],i=he[n];if(!i)return new Error("不正な盤面:"+t);for(var a=0;a<9;a+=1){var o=9-a,c=new M(o,i),s=2*a+1,u=t[s+1],l=ge[u];if(l){var d="v"!==t[s]?r.BLACK:r.WHITE;e.set(c,new I(d,l))}else e.remove(c)}}function Ie(e,t){var n,r=t.split(/[ 　]/),i=Object(se["a"])(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&"なし"!==a){var o=a[0],c=a.substring(1),s=ge[o],u=Oe[c]||1;if(!s)return new Error("不正な持ち駒: "+a);e.add(s,u)}}}catch(l){i.e(l)}finally{i.f()}}function we(e,t){var n=Ee.exec(t);if(n){var r=n[1],i=n[2],a=60*Number.parseInt(r)+Number.parseInt(i);e.current.setElapsedMs(1e3*a)}}function Re(e,t){var n=je.exec(t);if(n){var r=Number(n[1]),i=ve[n[2]],a=n[3];return e.goto(r-1),e.append(i,{ignoreValidation:!0}),void we(e,a)}if(n=_e.exec(t),!n)return new Error("不正な指し手形式:"+t);var o,c,s=Number(n[1]),u=n[2],l=n[3],d=n[4],p=n[5],b=n[6];if(0===s)return new Error("不正な手数:"+t);if(e.goto(s-1),"同　"===u){if(!(e.current.move instanceof q))return new Error("不明な移動先: "+t);o=e.current.move.to}else{var f=fe[u[0]],h=he[u[1]];o=new M(f,h)}if("打"===p)c=ge[l];else{var O=me[p[1]],m=me[p[2]];c=new M(O,m)}var g=e.position.createMove(c,o);if(!g)return new Error("不正な指し手: "+t);"成"===d&&(g=g.withPromote()),e.append(g,{ignoreValidation:!0}),we(e,b)}function ye(e){var t,n=new oe,i=e.split(/\r?\n/),a=new Q,o=!1,c=Object(se["a"])(i);try{for(c.s();!(t=c.n()).done;){var s=t.value;if(""!==s){var u=pe(s);if(o&&u.isPosition)return new Error("不正なデータ: "+s);var l=void 0;switch(u.type){case ce.METADATA:var d=ue[u.metadataKey];d?n.metadata.setStandardMetadata(d,u.data):n.metadata.setCustomMetadata(u.metadataKey,u.data);break;case ce.HANDICAP:l=be(a,u.data);break;case ce.BLACK_HAND:l=Ie(a.blackHand,u.data);break;case ce.WHITE_HAND:l=Ie(a.whiteHand,u.data);break;case ce.BOARD:l=Se(a.board,u.data);break;case ce.BLACK_TURN:a.setColor(r.BLACK);break;case ce.WHITE_TURN:a.setColor(r.WHITE);break;case ce.MOVE:o||(n.clear(a),o=!0),l=Re(n,u.data);break;case ce.COMMENT:n.current.comment+=(0!==n.current.comment.length?"\n":"")+u.data;break;case ce.UNKNOWN:console.log("skip",s);break}if(l)return l}}}catch(p){c.e(p)}finally{c.f()}return o||n.clear(a),n.goto(0),n.resetAllBranchSelection(),n}var Te=["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八"],Ae=["１","２","３","４","５","６","７","８","９"],Ne=Te,ke={king:"玉",rook:"飛",dragon:"龍",bishop:"角",horse:"馬",gold:"金",silver:"銀",promSilver:"成銀",knight:"桂",promKnight:"成桂",lance:"香",promLance:"成香",pawn:"歩",promPawn:"と"},Pe={king:"玉",rook:"飛",dragon:"龍",bishop:"角",horse:"馬",gold:"金",silver:"銀",promSilver:"全",knight:"桂",promKnight:"圭",lance:"香",promLance:"杏",pawn:"歩",promPawn:"と"},He={start:"",resign:"投了",interrupt:"中断",draw:"持将棋",repetitionDraw:"千日手",mate:"詰み",timeout:"切れ負け",foulWin:"反則勝ち",foulLose:"反則負け",enteringOfKing:"入玉勝ち",winByDefault:"不戦勝",lossByDefault:"不戦敗"};function Le(e,t){var n,r="",i=t.returnCode?t.returnCode:"\n",a=Object(se["a"])(e.standardMetadataKeys);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+=le[o]+"："+e.getStandardMetadata(o)+i}}catch(l){a.e(l)}finally{a.f()}var c,s=Object(se["a"])(e.customMetadataKeys);try{for(s.s();!(c=s.n()).done;){var u=c.value;r+=u+"："+e.getCustomMetadata(u)+i}}catch(l){s.e(l)}finally{s.f()}return r}function Ce(e,t){var n="",i=t.returnCode?t.returnCode:"\n";n+="後手の持駒："+Me(e.whiteHand)+i,n+="  ９ ８ ７ ６ ５ ４ ３ ２ １"+i,n+="+---------------------------+"+i;for(var a=0;a<9;a++){n+="|";for(var o=0;o<9;o++){var c=M.newByXY(o,a),s=e.board.at(c);s?s.color===r.BLACK?n+=" "+Pe[s.type]:n+="v"+Pe[s.type]:n+=" ・"}n+="|"+Ne[a]+i}return n+="+---------------------------+"+i,n+="先手の持駒："+Me(e.blackHand)+i,e.color===r.BLACK?n+="先手番"+i:n+="後手番"+i,n}function xe(e){var t="";return t+=Ae[e.to.file-1],t+=Ne[e.to.rank-1],t+=ke[e.pieceType],e.promote&&(t+="成"),e.from instanceof M?t+="("+e.from.file+e.from.rank+")":t+="打",t}function Me(e){var t="";return e.forEach((function(e,n){n>=1&&(t+=Pe[e],n>=2&&(t+=Te[n-1]),t+="　")})),t}function De(e,t){var n="",r=t.returnCode?t.returnCode:"\n";return n+="# KIF形式棋譜ファイル Generated by Electron Shogi"+r,n+=Le(e.metadata,t),n+=Ce(e.initialPosition,t),n+="手数----指手---------消費時間--"+r,e.forEach((function(e){if(e.move){e.isFirstBranch||(n+=r,n+="変化："+e.number+"手"+r),e.move instanceof q?n+=e.number+" "+xe(e.move):n+=He[e.move];var t=Object(ee["b"])(e.elapsedMs),i=Object(ee["a"])(e.totalElapsedMs);n+=" (".concat(t,"/").concat(i,")"),e.isFirstBranch&&e.hasBranch&&(n+="+"),n+=r}0!==e.comment.length&&(n+="*"+e.comment.replaceAll("\n",r+"*")+r)})),n}},"8a14":function(e,t,n){},"8e7e":function(e,t,n){},9375:function(e,t,n){"use strict";n("ed7d")},"95b4":function(e,t,n){"use strict";var r;function i(e){switch(e){case r.BLACK_PLAYER:return"先手";case r.WHITE_PLAYER:return"後手";case r.RESEARCHER:return"検討"}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e["BLACK_PLAYER"]="blackPlayer",e["WHITE_PLAYER"]="whitePlayer",e["RESEARCHER"]="researcher"}(r||(r={}))},"9f5b":function(e,t,n){"use strict";n("3566")},"9fa5":function(e,t,n){"use strict";n("3dd4")},a2af:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"r",(function(){return E})),n.d(t,"j",(function(){return S})),n.d(t,"s",(function(){return w})),n.d(t,"m",(function(){return y})),n.d(t,"t",(function(){return A})),n.d(t,"f",(function(){return k})),n.d(t,"k",(function(){return H})),n.d(t,"h",(function(){return C})),n.d(t,"n",(function(){return M})),n.d(t,"g",(function(){return G})),n.d(t,"l",(function(){return q})),n.d(t,"i",(function(){return K})),n.d(t,"o",(function(){return F})),n.d(t,"u",(function(){return Y})),n.d(t,"d",(function(){return J})),n.d(t,"w",(function(){return $})),n.d(t,"b",(function(){return Q})),n.d(t,"v",(function(){return te})),n.d(t,"a",(function(){return re})),n.d(t,"y",(function(){return ae})),n.d(t,"x",(function(){return ce})),n.d(t,"p",(function(){return ue})),n.d(t,"q",(function(){return de}));var r,i=n("3835"),a=n("1da1"),o=(n("e9c4"),n("96cf"),n("0613")),c=n("224f"),s=n("7a23");(function(e){e["NEW_RECORD"]="newRecord",e["OPEN_RECORD"]="openRecord",e["SAVE_RECORD"]="saveRecord",e["SAVE_RECORD_AS"]="saveRecordAs",e["COPY_RECORD"]="copyRecord",e["PASTE_RECORD"]="pasteRecord",e["REMOVE_RECORD_AFTER"]="remvoeRecordAfter",e["START_POSITION_EDITING"]="startPositionEditing",e["END_POSITION_EDITING"]="endPositionEditing",e["CHANGE_TURN"]="changeTurn",e["INIT_POSITION_STANDARD"]="initPositionStandard",e["INIT_POSITION_HANDICAP_LANCE"]="initPositionHandicapLance",e["INIT_POSITION_HANDICAP_RIGHT_LANCE"]="initPositionHandicapRightLance",e["INIT_POSITION_HANDICAP_BISHOP"]="initPositionHandicapBishop",e["INIT_POSITION_HANDICAP_ROOK"]="initPositionHandicapRook",e["INIT_POSITION_HANDICAP_ROOK_LANCE"]="initPositionHandicapRookLance",e["INIT_POSITION_HANDICAP_2PIECES"]="initPositionHandicap2Pieces",e["INIT_POSITION_HANDICAP_4PIECES"]="initPositionHandicap4Pieces",e["INIT_POSITION_HANDICAP_6PIECES"]="initPositionHandicap6Pieces",e["INIT_POSITION_HANDICAP_8PIECES"]="initPositionHandicap8Pieces",e["INIT_POSITION_TSUME_SHOGI"]="initPositionTsumeShogi",e["START_RESEARCH"]="startResearch",e["STOP_RESEARCH"]="stopResearch",e["START_GAME"]="startGame",e["STOP_GAME"]="stopGame",e["RESIGN"]="resign",e["FLIP_BOARD"]="flipBoard",e["APP_SETTING_DIALOG"]="appSetting",e["USI_ENGINE_SETTING_DIALOG"]="usiEngineSetting"})(r||(r={}));var u,l=n("8811"),d=n("5530"),p=n("1922"),b=n("b5d8"),f=n("39fb");(function(e){e["APP_SETTING"]="appSetting",e["RESEARCH_SETTING"]="researchSetting",e["GAME_SETTING"]="gameSetting"})(u||(u={}));var h={getRecordPathFromProcArg:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)})))()},updateMenuState:function(){},showOpenRecordDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},openRecord:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},showSaveRecordDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},saveRecord:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},showSelectFileDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},loadAppSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.APP_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(p["c"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(p["c"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveAppSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.APP_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadResearchSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.RESEARCH_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(f["a"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(f["a"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveResearchSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.RESEARCH_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadGameSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(u.GAME_SETTING),t){e.next=3;break}return e.abrupt("return",JSON.stringify(Object(b["a"])()));case 3:return e.abrupt("return",JSON.stringify(Object(d["a"])(Object(d["a"])({},Object(b["a"])()),JSON.parse(t))));case 4:case"end":return e.stop()}}),e)})))()},saveGameSetting:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(u.GAME_SETTING,e);case 1:case"end":return t.stop()}}),t)})))()},loadUSIEngineSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(new c["a"]).json);case 1:case"end":return e.stop()}}),e)})))()},saveUSIEngineSetting:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},showSelectUSIEngineDialog:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},getUSIEngineInfo:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},startResearch:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},endResearch:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw"Web版では利用できない機能です。";case 1:case"end":return e.stop()}}),e)})))()},startGame:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},endGame:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},updateUSIPosition:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},stopUSI:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},sendUSISetOption:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onSendError:function(){},onMenuEvent:function(){},onUSIBestMove:function(){},onUSIInfo:function(){}};function O(){return window}function m(){return!!O().electronShogiAPI}function g(){return O().electronShogiAPI||h}function v(){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().getRecordPathFromProcArg();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function E(){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showOpenRecordDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function S(e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().openRecord(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function w(e){return R.apply(this,arguments)}function R(){return R=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSaveRecordDialog(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function y(e,t){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveRecord(t,n);case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function A(){return N.apply(this,arguments)}function N(){return N=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSelectFileDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function k(){return P.apply(this,arguments)}function P(){return P=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadAppSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function H(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveAppSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function C(){return x.apply(this,arguments)}function x(){return x=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadResearchSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function M(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveResearchSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function G(){return B.apply(this,arguments)}function B(){return B=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().loadGameSetting();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function q(e){return U.apply(this,arguments)}function U(){return U=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveGameSetting(JSON.stringify(t));case 2:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return W=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=c["a"],e.next=3,g().loadUSIEngineSetting();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function F(e){return V.apply(this,arguments)}function V(){return V=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().saveUSIEngineSetting(t.jsonWithIndent);case 2:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function Y(){return z.apply(this,arguments)}function z(){return z=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().showSelectUSIEngineDialog();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function J(e){return Z.apply(this,arguments)}function Z(){return Z=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,g().getUSIEngineInfo(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function $(e,t){return X.apply(this,arguments)}function X(){return X=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().startResearch(JSON.stringify(t),n);case 2:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Q(){return ee.apply(this,arguments)}function ee(){return ee=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().endResearch();case 2:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return ne=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().startGame(JSON.stringify(t),n);case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().endGame(t,n);case 2:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ae(e,t,n,r){return oe.apply(this,arguments)}function oe(){return oe=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().updateUSIPosition(t,JSON.stringify(n),r,i);case 2:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return se=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().stopUSI(t);case 2:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return le=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g().sendUSISetOption(t,n);case 2:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function de(e){var t=g();t.onSendError((function(t){e.commit(o["b"].PUSH_ERROR,t)})),t.onMenuEvent((function(t){if(!e.getters.isBussy)switch(t){case r.NEW_RECORD:e.commit(o["b"].NEW_RECORD);break;case r.OPEN_RECORD:e.dispatch(o["a"].OPEN_RECORD);break;case r.SAVE_RECORD:e.dispatch(o["a"].SAVE_RECORD,{overwrite:!0});break;case r.SAVE_RECORD_AS:e.dispatch(o["a"].SAVE_RECORD);break;case r.COPY_RECORD:e.dispatch(o["a"].COPY_RECORD);break;case r.PASTE_RECORD:e.commit(o["b"].SHOW_PASTE_DIALOG);break;case r.REMOVE_RECORD_AFTER:e.commit(o["b"].REMOVE_RECORD_AFTER);break;case r.START_POSITION_EDITING:e.dispatch(o["a"].START_POSITION_EDITING);break;case r.END_POSITION_EDITING:e.dispatch(o["a"].END_POSITION_EDITING);break;case r.CHANGE_TURN:e.commit(o["b"].CHANGE_TURN);break;case r.INIT_POSITION_STANDARD:e.commit(o["b"].INITIALIZE_POSITION,l["b"].STANDARD);break;case r.INIT_POSITION_HANDICAP_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_LANCE);break;case r.INIT_POSITION_HANDICAP_RIGHT_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_RIGHT_LANCE);break;case r.INIT_POSITION_HANDICAP_BISHOP:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_BISHOP);break;case r.INIT_POSITION_HANDICAP_ROOK:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_ROOK);break;case r.INIT_POSITION_HANDICAP_ROOK_LANCE:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_ROOK_LANCE);break;case r.INIT_POSITION_HANDICAP_2PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_2PIECES);break;case r.INIT_POSITION_HANDICAP_4PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_4PIECES);break;case r.INIT_POSITION_HANDICAP_6PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_6PIECES);break;case r.INIT_POSITION_HANDICAP_8PIECES:e.commit(o["b"].INITIALIZE_POSITION,l["b"].HANDICAP_8PIECES);break;case r.INIT_POSITION_TSUME_SHOGI:e.commit(o["b"].INITIALIZE_POSITION,l["b"].TSUME_SHOGI);break;case r.START_GAME:e.commit(o["b"].SHOW_GAME_DIALOG);break;case r.STOP_GAME:e.dispatch(o["a"].STOP_GAME);break;case r.RESIGN:e.dispatch(o["a"].RESIGN_BY_USER);break;case r.START_RESEARCH:e.commit(o["b"].SHOW_RESEARCH_DIALOG);break;case r.STOP_RESEARCH:e.dispatch(o["a"].STOP_RESEARCH);break;case r.FLIP_BOARD:e.commit(o["b"].FLIP_BOARD);break;case r.APP_SETTING_DIALOG:e.commit(o["b"].OPEN_APP_SETTING_DIALOG);break;case r.USI_ENGINE_SETTING_DIALOG:e.commit(o["b"].OPEN_USI_ENGINE_MANAGEMENT_DIALOG);break}})),t.onUSIBestMove((function(t,n,r,i){e.dispatch(o["a"].DO_MOVE_BY_USI_ENGINE,{sessionID:t,usi:n,color:r,sfen:i})})),t.onUSIInfo((function(t,n,r,i,a){e.dispatch(o["a"].UPDATE_USI_INFO,{sessionID:t,usi:n,sender:r,name:i,info:JSON.parse(a)})})),Object(s["z"])((function(){return[e.state.mode,e.getters.isBussy]}),(function(e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];t.updateMenuState(r,a)})),t.updateMenuState(e.state.mode,e.getters.isBussy)}},aaad:function(e,t,n){"use strict";n("7bd2")},add1:function(e,t,n){"use strict";n("d58e")},b575:function(e,t,n){},b5d8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));n("d9e2");var r=n("7178");function i(){return{black:{name:"人",uri:r["a"]},white:{name:"人",uri:r["a"]},timeLimit:{timeSeconds:0,byoyomi:30,increment:0},enableEngineTimeout:!1,humanIsFront:!0}}function a(e){return 0===e.timeLimit.timeSeconds&&0===e.timeLimit.byoyomi?new Error("持ち時間と秒読みが両方とも0です。"):0!==e.timeLimit.byoyomi&&0!==e.timeLimit.increment?new Error("秒読みとフィッシャールールは併用できません。"):void 0}},c144:function(e,t,n){},c350:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("1da1"),i=n("2909"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("d3b7"),n("820e"),n("3ca3"),n("ddb0"),n("d9e2"),n("7a23"));function o(e,t,n,r,i,o){var c=Object(a["x"])("StandardLayout"),s=Object(a["x"])("GameDialog"),u=Object(a["x"])("ResearchDialog"),l=Object(a["x"])("USIEngineManagementDialog"),d=Object(a["x"])("AppSettingDialog"),p=Object(a["x"])("PasteDialog"),b=Object(a["x"])("Bussy"),f=Object(a["x"])("Message"),h=Object(a["x"])("ErrorMessage");return Object(a["q"])(),Object(a["f"])(a["a"],null,[Object(a["j"])(c,{class:"main"}),e.dialogVisibilities.game?(Object(a["q"])(),Object(a["d"])(s,{key:0})):Object(a["e"])("",!0),e.dialogVisibilities.research?(Object(a["q"])(),Object(a["d"])(u,{key:1})):Object(a["e"])("",!0),e.dialogVisibilities.usiEngineSetting?(Object(a["q"])(),Object(a["d"])(l,{key:2})):Object(a["e"])("",!0),e.dialogVisibilities.appSetting?(Object(a["q"])(),Object(a["d"])(d,{key:3})):Object(a["e"])("",!0),e.dialogVisibilities.paste?(Object(a["q"])(),Object(a["d"])(p,{key:4})):Object(a["e"])("",!0),e.dialogVisibilities.processing?(Object(a["q"])(),Object(a["d"])(b,{key:5})):Object(a["e"])("",!0),e.hasMessage?(Object(a["q"])(),Object(a["d"])(f,{key:6})):Object(a["e"])("",!0),e.hasErrors?(Object(a["q"])(),Object(a["d"])(h,{key:7})):Object(a["e"])("",!0)],64)}n("aff5"),n("a9e3");var c={class:"main"},s={class:"top-pane",ref:"topPane"};function u(e,t,n,r,i,o){var u=Object(a["x"])("BoardPane"),l=Object(a["x"])("RecordPane"),d=Object(a["x"])("InformationPane");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",c,[Object(a["g"])("div",s,[Object(a["j"])(u,{class:"top-left-pane",maxSize:e.boardPaneMaxSize},null,8,["maxSize"]),Object(a["j"])(l,{class:"top-right-pane"})],512),Object(a["j"])(d,{class:"bottom-pane",size:e.bottomPaneSize},null,8,["size"])])])}var l={class:"control top"},d=Object(a["i"])(" 対局 "),p=Object(a["i"])(" 中断 "),b=Object(a["i"])(" 投了 "),f=Object(a["i"])(" 検討 "),h=Object(a["i"])(" 検討終了 "),O=Object(a["i"])(" 局面編集 "),m=Object(a["i"])(" 局面編集終了 "),g=Object(a["i"])(" 手番変更 "),v={class:"control bottom"},_=["disabled"],E=Object(a["i"])(" アプリ設定 "),j=["disabled"],S=Object(a["i"])(" エンジン設定 "),I=Object(a["i"])(" 盤面反転 "),w=["disabled"],R=Object(a["i"])(" 棋譜貼り付け "),y=Object(a["i"])(" 棋譜コピー "),T=Object(a["i"])(" 指し手削除 ");function A(e,t,n,r,i,o){var c=Object(a["x"])("Icon"),s=Object(a["x"])("Board");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["j"])(s,{layoutType:e.layout,maxSize:e.maxSize,position:e.position,lastMove:e.lastMove,flip:e.flip,allowMove:e.allowMove,allowEdit:e.allowEdit,blackPlayerName:e.blackPlayerName,whitePlayerName:e.whitePlayerName,blackPlayerTimeMs:e.blackPlayerTimeMs,blackPlayerByoyomi:e.blackPlayerByoyomi,whitePlayerTimeMs:e.whitePlayerTimeMs,whitePlayerByoyomi:e.whitePlayerByoyomi,onMove:e.onMove,onEdit:e.onEdit},{"right-control":Object(a["A"])((function(){return[Object(a["g"])("div",l,[e.controlStates.game?(Object(a["q"])(),Object(a["f"])("button",{key:0,onClick:t[0]||(t[0]=function(){return e.onGame&&e.onGame.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"game"}),d])):Object(a["e"])("",!0),e.controlStates.stop?(Object(a["q"])(),Object(a["f"])("button",{key:1,onClick:t[1]||(t[1]=function(){return e.onStop&&e.onStop.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"stop"}),p])):Object(a["e"])("",!0),e.controlStates.resign?(Object(a["q"])(),Object(a["f"])("button",{key:2,onClick:t[2]||(t[2]=function(){return e.onResign&&e.onResign.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"resign"}),b])):Object(a["e"])("",!0),e.controlStates.research?(Object(a["q"])(),Object(a["f"])("button",{key:3,onClick:t[3]||(t[3]=function(){return e.onResearch&&e.onResearch.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"research"}),f])):Object(a["e"])("",!0),e.controlStates.endResearch?(Object(a["q"])(),Object(a["f"])("button",{key:4,onClick:t[4]||(t[4]=function(){return e.onEndResearch&&e.onEndResearch.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"end"}),h])):Object(a["e"])("",!0),e.controlStates.startEditPosition?(Object(a["q"])(),Object(a["f"])("button",{key:5,onClick:t[5]||(t[5]=function(){return e.onStartEditPosition&&e.onStartEditPosition.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"edit"}),O])):Object(a["e"])("",!0),e.controlStates.endEditPosition?(Object(a["q"])(),Object(a["f"])("button",{key:6,onClick:t[6]||(t[6]=function(){return e.onEndEditPosition&&e.onEndEditPosition.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"check"}),m])):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:7,onClick:t[7]||(t[7]=function(){return e.onChangeTurn&&e.onChangeTurn.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"swap"}),g])):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:8,onClick:t[8]||(t[8]=function(){return e.onInitPositionStandard&&e.onInitPositionStandard.apply(e,arguments)})}," 平手 ")):Object(a["e"])("",!0),e.controlStates.initPosition?(Object(a["q"])(),Object(a["f"])("button",{key:9,onClick:t[9]||(t[9]=function(){return e.onInitPositionTsumeShogi&&e.onInitPositionTsumeShogi.apply(e,arguments)})}," 詰将棋 ")):Object(a["e"])("",!0)])]})),"left-control":Object(a["A"])((function(){return[Object(a["g"])("div",v,[Object(a["g"])("button",{onClick:t[10]||(t[10]=function(){return e.onOpenAppSettings&&e.onOpenAppSettings.apply(e,arguments)}),disabled:!e.controlStates.appSettings},[Object(a["j"])(c,{class:"icon",icon:"settings"}),E],8,_),Object(a["g"])("button",{onClick:t[11]||(t[11]=function(){return e.onOpenEngineSettings&&e.onOpenEngineSettings.apply(e,arguments)}),disabled:!e.controlStates.engineSettings},[Object(a["j"])(c,{class:"icon",icon:"engineSettings"}),S],8,j),Object(a["g"])("button",{onClick:t[12]||(t[12]=function(){return e.onFlip&&e.onFlip.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"flip"}),I]),Object(a["g"])("button",{onClick:t[13]||(t[13]=function(){return e.onPaste&&e.onPaste.apply(e,arguments)}),disabled:!e.controlStates.paste},[Object(a["j"])(c,{class:"icon",icon:"paste"}),R],8,w),Object(a["g"])("button",{onClick:t[14]||(t[14]=function(){return e.onCopy&&e.onCopy.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"copy"}),y]),Object(a["g"])("button",{onClick:t[15]||(t[15]=function(){return e.onRemoveAfter&&e.onRemoveAfter.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"delete"}),T])])]})),_:1},8,["layoutType","maxSize","position","lastMove","flip","allowMove","allowEdit","blackPlayerName","whitePlayerName","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit"])])}var N=["src"],k={class:"player-name-text"},P={class:"clock-text"},H={class:"player-name-text"},L={class:"clock-text"},C=["src"],x=["onClick","onContextmenu"],M=["src"],D=["onClick"],G=["src"],B=["onClick"],q=["src"],U=["src"];function K(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",{class:"frame",style:Object(a["n"])(e.layout.frame.style),onClick:t[2]||(t[2]=function(t){return e.clickFrame()})},[Object(a["g"])("div",{class:"board",style:Object(a["n"])(e.layout.board.style)},[Object(a["g"])("img",{class:"board-image",src:e.layout.board.imagePath},null,8,N)],4),Object(a["g"])("div",{class:Object(a["m"])(["player-name",{active:"black"==e.position.color}]),style:Object(a["n"])(e.layout.blackPlayerName.style)},[Object(a["g"])("span",k,"▲"+Object(a["y"])(e.blackPlayerName||"先手"),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["clock",e.blackPlayerTimeSeverity]),style:Object(a["n"])(e.layout.blackClock.style)},[Object(a["g"])("span",P,Object(a["y"])(e.blackPlayerTimeText),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["player-name",{active:"white"==e.position.color}]),style:Object(a["n"])(e.layout.whitePlayerName.style)},[Object(a["g"])("span",H,"△"+Object(a["y"])(e.whitePlayerName||"後手"),1)],6),Object(a["g"])("div",{class:Object(a["m"])(["clock",e.whitePlayerTimeSeverity]),style:Object(a["n"])(e.layout.whiteClock.style)},[Object(a["g"])("span",L,Object(a["y"])(e.whitePlayerTimeText),1)],6),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.square,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"square",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.piece,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,C)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.square,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"square",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickSquare(n,t.file,t.rank)},onContextmenu:function(n){return e.clickSquareR(n,t.file,t.rank)}},null,44,x)})),128)),Object(a["g"])("div",{class:"hand",style:Object(a["n"])(e.layout.blackHand.style)},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pointers,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pieces,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,M)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.blackHand.pointers,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickHand(n,"black",t.type)}},null,12,D)})),128))],4),Object(a["g"])("div",{class:"hand",style:Object(a["n"])(e.layout.whiteHand.style)},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pointers,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:e.id,style:Object(a["n"])(e.backgroundStyle)},null,4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pieces,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"piece",key:e.id,style:Object(a["n"])(e.style)},[Object(a["g"])("img",{class:"piece-image",src:e.imagePath},null,8,G)],4)})),128)),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.layout.whiteHand.pointers,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"hand-pointer",key:t.id,style:Object(a["n"])(t.style),onClick:function(n){return e.clickHand(n,"white",t.type)}},null,12,B)})),128))],4),e.layout.promotion?(Object(a["q"])(),Object(a["f"])("div",{key:0,class:"promotion-selector",style:Object(a["n"])(e.layout.promotion.style)},[Object(a["g"])("div",{class:"select-button promote",onClick:t[0]||(t[0]=function(t){return e.clickPromote(t)})},[Object(a["g"])("img",{class:"piece-image",src:e.layout.promotion.promoteImagePath},null,8,q)]),Object(a["g"])("div",{class:"select-button not-promote",onClick:t[1]||(t[1]=function(t){return e.clickNotPromote(t)})},[Object(a["g"])("img",{class:"piece-image",src:e.layout.promotion.notPromoteImagePath},null,8,U)])],4)):Object(a["e"])("",!0),Object(a["g"])("div",{class:"turn",style:Object(a["n"])(e.layout.turn.style)},"手番",4),Object(a["g"])("div",{style:Object(a["n"])(e.layout.control.left.style)},[Object(a["w"])(e.$slots,"left-control",{},void 0,!0)],4),Object(a["g"])("div",{style:Object(a["n"])(e.layout.control.right.style)},[Object(a["w"])(e.$slots,"right-control",{},void 0,!0)],4)],4)])}n("33d1"),n("ea98");var W=n("21a3"),F=n("8811"),V=n("d4ec"),Y=n("bee2"),z=function(){function e(t,n){Object(V["a"])(this,e),this.width=t,this.height=n}return Object(Y["a"])(e,[{key:"add",value:function(t){return new e(this.width+t.width,this.height+t.height)}},{key:"reduce",value:function(t){return new e(this.width-t.width,this.height-t.height)}}]),e}(),J=n("d2ca"),Z=Object(a["k"])({name:"Board",props:{layoutType:{type:String,required:!0},maxSize:{type:z,required:!0},position:{type:Object,required:!0},lastMove:{type:F["c"],required:!1},flip:{type:Boolean,required:!1},allowEdit:{type:Boolean,required:!1},allowMove:{type:Boolean,required:!1},blackPlayerName:{type:String,required:!1},whitePlayerName:{type:String,required:!1},blackPlayerTimeMs:{type:Number,required:!1},blackPlayerByoyomi:{type:Number,required:!1},whitePlayerTimeMs:{type:Number,required:!1},whitePlayerByoyomi:{type:Number,required:!1}},emits:["move","edit"],setup:function(e,t){var n=Object(a["t"])({pointer:null,reservedMove:null}),r=function(){n.pointer=null,n.reservedMove=null};Object(a["z"])([function(){return e.position},function(){return e.allowEdit},function(){return e.allowMove}],(function(){r()}));var i=function(){r()},o=function(i,a,o){var c=n.pointer;if(r(),!(i instanceof F["j"]&&c instanceof F["j"]&&i.equals(c))&&!(i instanceof F["d"]&&c instanceof F["d"]&&i.equals(c))){if(c){var s=c,u=i instanceof F["j"]?i:i.color;if(e.allowEdit&&e.position.isValidEditing(s,u))return void t.emit("edit",{move:{from:c,to:u}});if(e.allowMove&&i instanceof F["j"]){var l=c instanceof F["j"]?c:c.type,d=i,p=e.position.createMove(l,d);if(!p)return;var b=e.position.isValidMove(p),f=e.position.isValidMove(p.withPromote());if(b&&f)return void(n.reservedMove=p);if(b)return void t.emit("move",p);if(f)return void t.emit("move",p.withPromote())}}!e.allowMove&&!e.allowEdit||a||(e.allowEdit||o===e.position.color)&&(n.pointer=i)}},c=function(t,n,r){t.stopPropagation(),t.preventDefault();var i=new F["j"](n,r),a=e.position.board.at(i),c=!a;o(i,c,null===a||void 0===a?void 0:a.color)},s=function(t,n,r){t.stopPropagation(),t.preventDefault();var i=0===e.position.hand(n).count(r);o(new F["d"](n,r),i,n)},u=function(n,i,a){n.stopPropagation(),n.preventDefault(),r();var o=new F["j"](i,a);e.allowEdit&&e.position.board.at(o)&&t.emit("edit",{rotate:o})},l=function(i){i.stopPropagation(),i.preventDefault();var a=n.reservedMove;r(),a&&e.position.isValidMove(a.withPromote())&&t.emit("move",a.withPromote())},d=function(i){i.stopPropagation(),i.preventDefault();var a=n.reservedMove;r(),a&&e.position.isValidMove(a)&&t.emit("move",a)},p=Object(a["b"])((function(){var t=new W["b"](e.layoutType);return t.preload(),t})),b=Object(a["b"])((function(){return p.value.build(e.maxSize.reduce(new z(20,20)),e.position,e.lastMove,n.pointer,n.reservedMove,e.flip)})),f=function(e,t){return e?Object(J["c"])(Math.ceil(e/1e3)):void 0!==t?""+t:"0:00:00"},h=function(e,t){if(!e&&!t)return"normal";var n=(e||0)/1e3+(t||0);return n<=5?"danger":n<=10?"warning":"normal"},O=Object(a["b"])((function(){return f(e.blackPlayerTimeMs,e.blackPlayerByoyomi)})),m=Object(a["b"])((function(){return h(e.blackPlayerTimeMs,e.blackPlayerByoyomi)})),g=Object(a["b"])((function(){return f(e.whitePlayerTimeMs,e.whitePlayerByoyomi)})),v=Object(a["b"])((function(){return h(e.whitePlayerTimeMs,e.whitePlayerByoyomi)}));return{clickFrame:i,clickSquare:c,clickHand:s,clickSquareR:u,clickPromote:l,clickNotPromote:d,layout:b,blackPlayerTimeText:O,blackPlayerTimeSeverity:m,whitePlayerTimeText:g,whitePlayerTimeSeverity:v}}}),$=(n("452a"),n("6b0d")),X=n.n($);const Q=X()(Z,[["render",K],["__scopeId","data-v-6ddcd49e"]]);var ee=Q,te=n("0613"),ne=["src"];function re(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("img",{class:"icon",src:e.source},null,8,ne)}var ie,ae,oe=n("ade3"),ce=(n("159b"),n("07ac"),n("dac8"));(function(e){e["BUSSY"]="bussy",e["ERROR"]="error",e["INFO"]="info",e["GAME"]="game",e["STOP"]="stop",e["RESIGN"]="resign",e["RESEARCH"]="research",e["END"]="end",e["EDIT"]="edit",e["CHECK"]="check",e["SWAP"]="swap",e["SWAP_H"]="swap_h",e["SETTINGS"]="settings",e["ENGINE_SETTINGS"]="engineSettings",e["FLIP"]="flip",e["PASTE"]="paste",e["COPY"]="copy",e["DELETE"]="delete",e["COMMENT"]="comment",e["BRAIN"]="brain",e["CHART"]="chart",e["ARROW_DROP"]="arrowDrop",e["FIRST"]="first",e["BACK"]="back",e["NEXT"]="next",e["LAST"]="last"})(ae||(ae={}));var se=(ie={},Object(oe["a"])(ie,ae.BUSSY,"icon/hourglass_empty_white_24dp.svg"),Object(oe["a"])(ie,ae.ERROR,"icon/error_outline_white_24dp.svg"),Object(oe["a"])(ie,ae.INFO,"icon/info_white_24dp.svg"),Object(oe["a"])(ie,ae.GAME,"icon/sports_esports_white_24dp.svg"),Object(oe["a"])(ie,ae.STOP,"icon/block_white_24dp.svg"),Object(oe["a"])(ie,ae.RESIGN,"icon/flag_white_24dp.svg"),Object(oe["a"])(ie,ae.RESEARCH,"icon/science_white_24dp.svg"),Object(oe["a"])(ie,ae.END,"icon/do_disturb_on_white_24dp.svg"),Object(oe["a"])(ie,ae.EDIT,"icon/app_registration_white_24dp.svg"),Object(oe["a"])(ie,ae.CHECK,"icon/check_circle_white_24dp.svg"),Object(oe["a"])(ie,ae.SWAP,"icon/swap_vert_white_24dp.svg"),Object(oe["a"])(ie,ae.SWAP_H,"icon/swap_horiz_white_24dp.svg"),Object(oe["a"])(ie,ae.SETTINGS,"icon/settings_white_24dp.svg"),Object(oe["a"])(ie,ae.ENGINE_SETTINGS,"icon/settings_input_component_white_24dp.svg"),Object(oe["a"])(ie,ae.FLIP,"icon/flip_camera_android_white_24dp.svg"),Object(oe["a"])(ie,ae.PASTE,"icon/content_paste_white_24dp.svg"),Object(oe["a"])(ie,ae.COPY,"icon/content_copy_white_24dp.svg"),Object(oe["a"])(ie,ae.DELETE,"icon/backspace_white_24dp.svg"),Object(oe["a"])(ie,ae.COMMENT,"icon/edit_note_white_24dp.svg"),Object(oe["a"])(ie,ae.BRAIN,"icon/psychology_white_24dp.svg"),Object(oe["a"])(ie,ae.CHART,"icon/show_chart_white_24dp.svg"),Object(oe["a"])(ie,ae.ARROW_DROP,"icon/arrow_drop_down_white_24dp.svg"),Object(oe["a"])(ie,ae.FIRST,"icon/first_page_white_24dp.svg"),Object(oe["a"])(ie,ae.BACK,"icon/chevron_left_white_24dp.svg"),Object(oe["a"])(ie,ae.NEXT,"icon/chevron_right_white_24dp.svg"),Object(oe["a"])(ie,ae.LAST,"icon/last_page_white_24dp.svg"),ie);Object.values(se).forEach((function(e){Object(ce["a"])(e)}));var ue=Object(a["k"])({name:"Icon",props:{icon:{type:String,required:!0}},setup:function(e){return{source:se[e.icon]}}});const le=X()(ue,[["render",re]]);var de=le,pe=n("4f5c"),be=Object(a["k"])({name:"BoardPane",props:{maxSize:{type:z,required:!0}},components:{Board:ee,Icon:de},setup:function(){var e=Object(te["e"])(),t=function(t){e.dispatch(te["a"].DO_MOVE_BY_USER,t)},n=function(t){e.commit(te["b"].EDIT_POSITION,t)},r=function(){e.commit(te["b"].SHOW_GAME_DIALOG)},i=function(){e.dispatch(te["a"].STOP_GAME)},o=function(){e.dispatch(te["a"].RESIGN_BY_USER)},c=function(){e.commit(te["b"].SHOW_RESEARCH_DIALOG)},s=function(){e.dispatch(te["a"].STOP_RESEARCH)},u=function(){e.dispatch(te["a"].START_POSITION_EDITING)},l=function(){e.dispatch(te["a"].END_POSITION_EDITING)},d=function(){e.commit(te["b"].INITIALIZE_POSITION,F["b"].STANDARD)},p=function(){e.commit(te["b"].INITIALIZE_POSITION,F["b"].TSUME_SHOGI)},b=function(){e.commit(te["b"].CHANGE_TURN)},f=function(){e.commit(te["b"].OPEN_APP_SETTING_DIALOG)},h=function(){e.commit(te["b"].OPEN_USI_ENGINE_MANAGEMENT_DIALOG)},O=function(){e.commit(te["b"].FLIP_BOARD)},m=function(){e.commit(te["b"].SHOW_PASTE_DIALOG)},g=function(){e.dispatch(te["a"].COPY_RECORD)},v=function(){e.commit(te["b"].REMOVE_RECORD_AFTER)},_=Object(a["b"])((function(){return e.state.mode===pe["a"].POSITION_EDITING})),E=Object(a["b"])((function(){return e.getters.isMovableByUser})),j=Object(a["b"])((function(){return e.state.record.position})),S=Object(a["b"])((function(){var t=e.state.record.current.move;return t instanceof F["c"]?t:null})),I=Object(a["b"])((function(){return e.state.appSetting.boardLayout})),w=Object(a["b"])((function(){return e.state.appSetting.boardFlipping})),R=Object(a["b"])((function(){return e.state.record.metadata.getStandardMetadata(F["h"].BLACK_NAME)})),y=Object(a["b"])((function(){return e.state.record.metadata.getStandardMetadata(F["h"].WHITE_NAME)})),T=Object(a["b"])((function(){return e.state.mode===pe["a"].GAME?e.state.game.blackTimeMs:void 0})),A=Object(a["b"])((function(){return e.state.mode===pe["a"].GAME?e.state.game.blackByoyomi:void 0})),N=Object(a["b"])((function(){return e.state.mode===pe["a"].GAME?e.state.game.whiteTimeMs:void 0})),k=Object(a["b"])((function(){return e.state.mode===pe["a"].GAME?e.state.game.whiteByoyomi:void 0})),P=Object(a["b"])((function(){return{game:e.state.mode===pe["a"].NORMAL,stop:e.state.mode===pe["a"].GAME,resign:e.state.mode===pe["a"].GAME&&e.getters.isMovableByUser,research:e.state.mode===pe["a"].NORMAL,endResearch:e.state.mode===pe["a"].RESEARCH,startEditPosition:e.state.mode===pe["a"].NORMAL,endEditPosition:e.state.mode===pe["a"].POSITION_EDITING,initPosition:e.state.mode===pe["a"].POSITION_EDITING,paste:e.state.mode===pe["a"].NORMAL,appSettings:e.state.mode===pe["a"].NORMAL,engineSettings:e.state.mode===pe["a"].NORMAL}}));return{layout:I,position:j,lastMove:S,flip:w,blackPlayerName:R,whitePlayerName:y,blackPlayerTimeMs:T,blackPlayerByoyomi:A,whitePlayerTimeMs:N,whitePlayerByoyomi:k,controlStates:P,onMove:t,onEdit:n,onGame:r,onStop:i,onResign:o,onResearch:c,onEndResearch:s,onStartEditPosition:u,onEndEditPosition:l,onInitPositionStandard:d,onInitPositionTsumeShogi:p,onChangeTurn:b,onOpenAppSettings:f,onOpenEngineSettings:h,onFlip:O,onPaste:m,onCopy:g,onRemoveAfter:v,allowEdit:_,allowMove:E}}});n("aaad");const fe=X()(be,[["render",A],["__scopeId","data-v-51f2316b"]]);var he=fe;function Oe(e,t,n,r,i,o){var c=Object(a["x"])("Record");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["j"])(c,{class:"record",record:e.record,operational:e.isRecordOperational,onGoBegin:e.goBegin,onGoBack:e.goBack,onGoForward:e.goForward,onGoEnd:e.goEnd,onSelectMove:e.selectMove,onSelectBranch:e.selectBranch},null,8,["record","operational","onGoBegin","onGoBack","onGoForward","onGoEnd","onSelectMove","onSelectBranch"])])}var me={class:"frame"},ge={class:"controller"},ve=["disabled"],_e=["disabled"],Ee=["disabled"],je=["disabled"],Se=["disabled"],Ie=["selected","value"],we=["disabled"],Re=["selected","value"];function ye(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",me,[Object(a["g"])("div",ge,[Object(a["g"])("button",{class:"control-button",onClick:t[0]||(t[0]=function(t){return e.goBegin()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"first"})],8,ve),Object(a["g"])("button",{class:"control-button",onClick:t[1]||(t[1]=function(t){return e.goBack()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"back"})],8,_e),Object(a["g"])("button",{class:"control-button",onClick:t[2]||(t[2]=function(t){return e.goForward()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"next"})],8,Ee),Object(a["g"])("button",{class:"control-button",onClick:t[3]||(t[3]=function(t){return e.goEnd()}),disabled:!e.operational},[Object(a["j"])(c,{class:"icon",icon:"last"})],8,je)]),Object(a["g"])("select",{class:"move-list",size:"2",ref:"moveList",onChange:t[4]||(t[4]=function(t){return e.changeNumber()}),disabled:!e.operational},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.moves,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.number,selected:e.selected,value:e.number},Object(a["y"])(0!==e.number?e.number+" ":"")+" "+Object(a["y"])(e.text)+" "+Object(a["y"])(e.hasBranch?" 分岐":""),9,Ie)})),128))],40,Se),Object(a["g"])("select",{class:"branch-list",size:"2",ref:"branchList",onChange:t[5]||(t[5]=function(t){return e.changeBranch()}),disabled:!e.operational},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.branches,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.index,selected:e.selected,value:e.index},Object(a["y"])(e.text),9,Re)})),128))],40,we)])])}var Te=Object(a["k"])({name:"Record",components:{Icon:de},props:{record:{type:F["g"],required:!0},operational:{type:Boolean,required:!1}},emits:["goBegin","goBack","goForward","goEnd","selectMove","selectBranch"],setup:function(e,t){var n=Object(a["u"])(null),r=Object(a["u"])(null),i=function(){t.emit("goBegin")},o=function(){t.emit("goBack")},c=function(){t.emit("goForward")},s=function(){t.emit("goEnd")},u=function(){t.emit("selectMove",Number(n.value.value))},l=function(){t.emit("selectBranch",Number(r.value.value))},d=Object(a["b"])((function(){return 0===e.record.current.number})),p=Object(a["b"])((function(){var t=[];return e.record.moves.forEach((function(n){t.push({number:n.number,text:n.displayText,hasBranch:n.hasBranch,selected:n===e.record.current})})),t})),b=Object(a["b"])((function(){var t;if(null===(t=e.record.branchBegin)||void 0===t||!t.branch)return null;var n,r=[];for(n=e.record.branchBegin;n&&n.move;n=n.branch)r.push({index:r.length,text:n.displayMoveText,selected:n.activeBranch});return r}));return{beginPosSelected:d,moves:p,branches:b,moveList:n,branchList:r,goBegin:i,goBack:o,goForward:c,goEnd:s,changeNumber:u,changeBranch:l}}});n("9375");const Ae=X()(Te,[["render",ye],["__scopeId","data-v-f15d1ab0"]]);var Ne=Ae,ke=200,Pe=Object(a["k"])({name:"RecordPane",components:{Record:Ne},setup:function(){var e=Object(te["e"])(),t=function(t){e.commit(te["b"].CHANGE_MOVE_NUMBER,t)},n=function(){t(0)},r=function(){t(e.state.record.current.number-1)},i=function(){t(e.state.record.current.number+1)},o=function(){t(Number.MAX_SAFE_INTEGER)},c=function(e){t(e)},s=function(t){e.commit(te["b"].CHANGE_BRANCH,t)},u=Object(a["b"])((function(){return e.state.mode===pe["a"].NORMAL||e.state.mode===pe["a"].RESEARCH})),l=Object(a["b"])((function(){return e.state.record}));return{isRecordOperational:u,record:l,goBegin:n,goBack:r,goForward:i,goEnd:o,selectMove:c,selectBranch:s}}});n("3abc");const He=X()(Pe,[["render",Oe],["__scopeId","data-v-36298fd3"]]);var Le=He,Ce=function(e){return Object(a["s"])("data-v-1a4d352f"),e=e(),Object(a["r"])(),e},xe={class:"root"},Me={class:"tabs"},De=Object(a["i"])(" 棋譜コメント "),Ge=Object(a["i"])(" 思考 "),Be=Object(a["i"])(" 形勢グラフ "),qe=Object(a["i"])(" 最小化 "),Ue=Ce((function(){return Object(a["g"])("div",{class:"tab-border"},null,-1)})),Ke={class:"tab-contents"};function We(e,t,n,r,i,o){var c=Object(a["x"])("Icon"),s=Object(a["x"])("RecordComment"),u=Object(a["x"])("EngineAnalytics"),l=Object(a["x"])("EvaluationChart");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",xe,[Object(a["g"])("div",{class:Object(a["m"])(["minimize-padding",{enabled:"invisible"===e.activeTab}])},null,2),Object(a["g"])("div",Me,[Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"comment"===e.activeTab}]),onClick:t[0]||(t[0]=function(t){return e.changeSelect("comment")})},[Object(a["j"])(c,{class:"icon",icon:"comment"}),De],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"search"===e.activeTab}]),onClick:t[1]||(t[1]=function(t){return e.changeSelect("search")})},[Object(a["j"])(c,{class:"icon",icon:"brain"}),Ge],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"chart"===e.activeTab}]),onClick:t[2]||(t[2]=function(t){return e.changeSelect("chart")})},[Object(a["j"])(c,{class:"icon",icon:"chart"}),Be],2),Object(a["g"])("span",{class:Object(a["m"])(["tab",{selected:"invisible"===e.activeTab}]),onClick:t[3]||(t[3]=function(t){return e.changeSelect("invisible")})},[Object(a["j"])(c,{class:"icon",icon:"arrowDrop"}),qe],2)]),Ue,Object(a["g"])("div",Ke,[Object(a["j"])(s,{class:Object(a["m"])(["tab-content",{selected:"comment"===e.activeTab}])},null,8,["class"]),Object(a["j"])(u,{class:Object(a["m"])(["tab-content",{selected:"search"===e.activeTab}]),size:e.contentSize},null,8,["class","size"]),Object(a["j"])(l,{class:Object(a["m"])(["tab-content",{selected:"chart"===e.activeTab}]),size:e.contentSize},null,8,["class","size"])])])])}var Fe={class:"root"},Ve=["value","readonly"];function Ye(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",Fe,[Object(a["g"])("textarea",{ref:"textarea",class:"text",value:e.comment,readonly:!!e.readonly,onChange:t[0]||(t[0]=function(){return e.change&&e.change.apply(e,arguments)})},null,40,Ve)])])}var ze=Object(a["k"])({name:"RecordComment",setup:function(){var e=Object(te["e"])(),t=Object(a["b"])((function(){return e.state.record.current.comment})),n=Object(a["b"])((function(){return e.state.mode!=pe["a"].NORMAL})),r=Object(a["u"])(null),i=function(t){var n=t.target.value;e.commit(te["b"].UPDATE_RECORD_COMMENT,n)};return Object(a["o"])((function(){r.value.addEventListener("copy",(function(e){e.stopPropagation()})),r.value.addEventListener("paste",(function(e){e.stopPropagation()}))})),{textarea:r,comment:t,readonly:n,change:i}}});n("642f");const Je=X()(ze,[["render",Ye],["__scopeId","data-v-4f9715e5"]]);var Ze=Je,$e=(n("b0c0"),{class:"root"});function Xe(e,t,n,r,i,o){var c=Object(a["x"])("EngineAnalyticsElement");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",$e,[e.infos.blackPlayer?(Object(a["q"])(),Object(a["d"])(c,{key:0,name:e.infos.blackPlayer.name,info:e.infos.blackPlayer,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0),e.infos.whitePlayer?(Object(a["q"])(),Object(a["d"])(c,{key:1,name:e.infos.whitePlayer.name,info:e.infos.whitePlayer,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0),e.infos.researcher?(Object(a["q"])(),Object(a["d"])(c,{key:2,name:e.infos.researcher.name,info:e.infos.researcher,height:e.elementHeight},null,8,["name","info","height"])):Object(a["e"])("",!0)])])}n("b680");var Qe=function(e){return Object(a["s"])("data-v-61f1257a"),e=e(),Object(a["r"])(),e},et={class:"root"},tt={class:"headers"},nt={class:"header"},rt=Qe((function(){return Object(a["g"])("span",{class:"label"},"エンジン名: ",-1)})),it={class:"value"},at={class:"header"},ot=Qe((function(){return Object(a["g"])("span",{class:"label"},"最善手: ",-1)})),ct={class:"value"},st={class:"header"},ut=Qe((function(){return Object(a["g"])("span",{class:"label"},"秒間探索ノード(NPS): ",-1)})),lt={class:"value"},dt={class:"header"},pt=Qe((function(){return Object(a["g"])("span",{class:"label"},"探索ノード数: ",-1)})),bt={class:"value"},ft={class:"header"},ht=Qe((function(){return Object(a["g"])("span",{class:"label"},"ハッシュ使用率: ",-1)})),Ot={class:"value"},mt=Object(a["h"])('<div class="list-header" data-v-61f1257a><div class="list-column time" data-v-61f1257a>経過時間</div><div class="list-column multipv-index" data-v-61f1257a>順位</div><div class="list-column depth" data-v-61f1257a>深さ</div><div class="list-column score" data-v-61f1257a>評価値</div></div>',1),gt={class:"list-column time"},vt={class:"list-column multipv-index"},_t={class:"list-column depth"},Et={class:"list-column score"},jt={class:"list-column score-flag"},St={class:"list-column text"};function It(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",et,[Object(a["g"])("div",tt,[Object(a["g"])("div",nt,[rt,Object(a["g"])("span",it,Object(a["y"])(e.name),1)]),Object(a["g"])("div",at,[ot,Object(a["g"])("span",ct,Object(a["y"])(e.info.currentMoveText||"---"),1)]),Object(a["g"])("div",st,[ut,Object(a["g"])("span",lt,Object(a["y"])(e.info.nps||"---"),1)]),Object(a["g"])("div",dt,[pt,Object(a["g"])("span",bt,Object(a["y"])(e.info.nodes||"---"),1)]),Object(a["g"])("div",ft,[ht,Object(a["g"])("span",Ot,Object(a["y"])(e.info.hashfull?(100*e.info.hashfull).toFixed(1):"---")+" % ",1)])]),mt,Object(a["g"])("div",{class:"list",style:Object(a["n"])("height:".concat(e.height-36,"px"))},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.info.iterates,(function(e,t){return Object(a["q"])(),Object(a["f"])("div",{class:"list-item",key:t},[Object(a["g"])("div",gt,Object(a["y"])(e.timeMs?(e.timeMs/1e3).toFixed(1)+"s":""),1),Object(a["g"])("div",vt,Object(a["y"])(e.multiPV||""),1),Object(a["g"])("div",_t,Object(a["y"])(e.depth)+Object(a["y"])(e.selectiveDepth&&e.depth?"/":"")+Object(a["y"])(e.selectiveDepth),1),Object(a["g"])("div",Et,Object(a["y"])(e.score)+" "+Object(a["y"])(e.scoreMate?e.scoreMate:""),1),Object(a["g"])("div",jt,Object(a["y"])(e.lowerBound?"++":"")+" "+Object(a["y"])(e.upperBound?"--":"")+" "+Object(a["y"])(e.scoreMate?"詰":""),1),Object(a["g"])("div",St,Object(a["y"])(e.text),1)])})),128))],4)])])}var wt=n("ed5a"),Rt=Object(a["k"])({name:"EngineAnalyticsElement",props:{name:{type:String,required:!0},info:{type:wt["a"],required:!0},height:{type:Number,required:!0}}});n("0c59");const yt=X()(Rt,[["render",It],["__scopeId","data-v-61f1257a"]]);var Tt=yt,At=Object(a["k"])({name:"EngineAnalytics",components:{EngineAnalyticsElement:Tt},props:{size:{type:z,required:!0}},setup:function(e){var t=Object(te["e"])(),n=Object(a["b"])((function(){return t.state.usi})),r=Object(a["b"])((function(){var n=(t.state.usi.blackPlayer?1:0)+(t.state.usi.whitePlayer?1:0)+(t.state.usi.researcher?1:0);return 0!==n?e.size.height/n:0}));return{infos:n,elementHeight:r}}});n("5541");const Nt=X()(At,[["render",Xe],["__scopeId","data-v-dbaf3902"]]);var kt=Nt,Pt={class:"root"},Ht=["width","height"];function Lt(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("div",Pt,[Object(a["g"])("canvas",{ref:"canvas",width:e.size.width.toFixed(0),height:e.size.height.toFixed(0)},null,8,Ht)])])}var Ct=n("3835"),xt=n("6c70"),Mt=n("9b4a"),Dt=n("95b4"),Gt=Object(a["k"])({name:"EvaluationChart",props:{size:{type:z,required:!0}},setup:function(e){var t,n=Object(a["u"])(null),r=Object(te["e"])(),i=function(e,t,n){var r=[];return n.moves.forEach((function(e){var n=new xt["c"](e.customData),i=n.evaluation&&n.evaluation[t];i&&r.push({x:e.number,y:i})})),{label:Object(Dt["b"])(t),borderColor:e,data:r,showLine:!0}},o=function(e){return{label:"現在の局面",borderColor:"red",data:[{x:e.current.number,y:xt["a"]},{x:e.current.number,y:xt["b"]}],showLine:!0,pointBorderWidth:0,pointRadius:0}},c=function(e){return[o(e),i("royalblue",Dt["a"].BLACK_PLAYER,e),i("darkorange",Dt["a"].WHITE_PLAYER,e),i("darkgreen",Dt["a"].RESEARCHER,e)]},s=function(e){return{x:{min:0,max:e.length+10},y:{min:xt["b"],max:xt["a"]}}},u=function(e,t,n){if(null!==e.x){var i=n.scales.x.max-n.scales.x.min,a=n.scales.x.right-n.scales.x.left,o=(e.x-n.scales.x.left)/a*i+n.scales.x.min,c=Math.round(o);r.commit(te["b"].CHANGE_MOVE_NUMBER,c)}};return Object(a["o"])((function(){var e=n.value,i=e.getContext("2d");t=new Mt["a"](i,{type:"scatter",data:{datasets:c(r.state.record)},options:{color:"black",animation:{duration:0},maintainAspectRatio:!1,events:["click"],onClick:u}}),t.draw()})),Object(a["p"])((function(){t.destroy()})),Object(a["z"])((function(){return[r.state.record]}),(function(e){var n=Object(Ct["a"])(e,1),r=n[0];t.data.datasets=c(r),t.options.scales=s(r),t.update()}),{deep:!0}),Object(a["z"])((function(){return[e.size]}),(function(e){var n=Object(Ct["a"])(e,1),r=n[0];t.resize(r.width,r.height)}),{deep:!0}),{canvas:n}}});n("9f5b");const Bt=X()(Gt,[["render",Lt],["__scopeId","data-v-4e9d2ad3"]]);var qt=Bt,Ut=30,Kt=240+Ut,Wt=Object(a["k"])({name:"InformationPane",components:{RecordComment:Ze,EngineAnalytics:kt,EvaluationChart:qt,Icon:de},props:{size:{type:z,required:!0}},setup:function(e){var t=Object(te["e"])(),n=function(e){t.dispatch(te["a"].UPDATE_APP_SETTING,{informationTab:e})},r=Object(a["b"])((function(){return t.state.appSetting.informationTab})),i=Object(a["b"])((function(){return e.size.reduce(new z(0,Ut))}));return{activeTab:r,contentSize:i,changeSelect:n}}});n("4687");const Ft=X()(Wt,[["render",We],["__scopeId","data-v-1a4d352f"]]);var Vt=Ft,Yt=n("1922"),zt=Object(a["k"])({name:"StandardLayout",components:{BoardPane:he,RecordPane:Le,InformationPane:Vt},setup:function(){var e=Object(te["e"])(),t=Object(a["t"])(new z(0,0)),n=Object(a["u"])(0),r=Object(a["u"])(null),i=function(){t.width=window.innerWidth,t.height=window.innerHeight},o=new ResizeObserver((function(e){n.value=e[0].contentRect.height}));Object(a["o"])((function(){i(),window.addEventListener("resize",i),o.observe(r.value)})),Object(a["p"])((function(){window.removeEventListener("resize",i),o.disconnect()}));var c=Object(a["b"])((function(){var n=e.state.appSetting.informationTab!==Yt["b"].INVISIBLE?Kt:Ut;return new z(t.width-ke,t.height-n)})),s=Object(a["b"])((function(){return new z(t.width,t.height-n.value)}));return{topPane:r,boardPaneMaxSize:c,bottomPaneSize:s}}});n("d02d");const Jt=X()(zt,[["render",u],["__scopeId","data-v-df1473a6"]]);var Zt=Jt,$t=function(e){return Object(a["s"])("data-v-3a08c41c"),e=e(),Object(a["r"])(),e},Xt={ref:"dialog"},Qt=$t((function(){return Object(a["g"])("div",{class:"dialog-title"},"対局",-1)})),en={class:"dialog-form-area"},tn={class:"players"},nn={class:"player"},rn=$t((function(){return Object(a["g"])("div",{class:"top-label"},"先手（下手）",-1)})),an=["value"],on=["value"],cn={class:"player"},sn=$t((function(){return Object(a["g"])("div",{class:"top-label"},"後手（上手）",-1)})),un=["value"],ln=["value"],dn={class:"players-control"},pn=Object(a["i"])(" 先後入れ替え "),bn={class:"dialog-form-areas-h"},fn={class:"dialog-form-area time-limit"},hn={class:"dialog-form-item"},On=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"持ち時間",-1)})),mn=["value"],gn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"時間",-1)})),vn=["value"],_n=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"分",-1)})),En={class:"dialog-form-item"},jn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"秒読み",-1)})),Sn=["value"],In=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"秒",-1)})),wn={class:"dialog-form-item"},Rn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"増加",-1)})),yn=["value"],Tn=$t((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"秒",-1)})),An={class:"dialog-form-area flags"},Nn={class:"dialog-form-item"},kn=["value"],Pn=Object(a["h"])('<option value="current" data-v-3a08c41c>現在の局面</option><option value="standard" data-v-3a08c41c>平手</option><option value="handicapLance" data-v-3a08c41c>香落ち</option><option value="handicapRightLance" data-v-3a08c41c>右香落ち</option><option value="handicapBishop" data-v-3a08c41c>角落ち</option><option value="handicapRook" data-v-3a08c41c>飛車落ち</option><option value="handicapRookLance" data-v-3a08c41c>飛車香落ち</option><option value="handicap2Pieces" data-v-3a08c41c>2枚落ち</option><option value="handicap4Pieces" data-v-3a08c41c>4枚落ち</option><option value="handicap6Pieces" data-v-3a08c41c>6枚落ち</option><option value="handicap8Pieces" data-v-3a08c41c>8枚落ち</option>',11),Hn=[Pn],Ln={class:"dialog-form-item"},Cn=["checked"],xn=$t((function(){return Object(a["g"])("label",{for:"disable-engine-timeout"},"エンジンの時間切れあり",-1)})),Mn={class:"dialog-form-item"},Dn=["checked"],Gn=$t((function(){return Object(a["g"])("label",{for:"human-is-front"},"人を手前に表示する",-1)})),Bn={class:"dialog-main-buttons"};function qn(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Xt,[Qt,Object(a["g"])("div",en,[Object(a["g"])("div",tn,[Object(a["g"])("div",nn,[rn,Object(a["g"])("select",{class:"player-select",size:"1",ref:"blackPlayerSelect",value:e.defaultValues.black.type},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.players,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,on)})),128))],8,an)]),Object(a["g"])("div",cn,[sn,Object(a["g"])("select",{class:"player-select",size:"1",ref:"whitePlayerSelect",value:e.defaultValues.white.type},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.players,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,ln)})),128))],8,un)])]),Object(a["g"])("div",dn,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(){return e.onSwapColor&&e.onSwapColor.apply(e,arguments)})},[Object(a["j"])(c,{class:"icon",icon:"swap_h"}),pn])])]),Object(a["g"])("div",bn,[Object(a["g"])("div",fn,[Object(a["g"])("div",hn,[On,Object(a["g"])("input",{class:"time-input",ref:"hours",type:"number",min:"0",max:"99",step:"1",value:e.defaultValues.timeLimit.hours},null,8,mn),gn,Object(a["g"])("input",{class:"time-input",ref:"minutes",type:"number",min:"0",max:"59",step:"1",value:e.defaultValues.timeLimit.minutes},null,8,vn),_n]),Object(a["g"])("div",En,[jn,Object(a["g"])("input",{class:"time-input single",ref:"byoyomi",type:"number",min:"0",max:"60",step:"1",value:e.defaultValues.timeLimit.byoyomi},null,8,Sn),In]),Object(a["g"])("div",wn,[Rn,Object(a["g"])("input",{class:"time-input single",ref:"increment",type:"number",min:"0",max:"99",step:"1",value:e.defaultValues.timeLimit.increment},null,8,yn),Tn])]),Object(a["g"])("div",An,[Object(a["g"])("div",Nn,[Object(a["g"])("select",{ref:"startPosition",value:e.defaultValues.startPosition},Hn,8,kn)]),Object(a["g"])("div",Ln,[Object(a["g"])("input",{ref:"enableEngineTimeout",type:"checkbox",id:"disable-engine-timeout",checked:e.defaultValues.enableEngineTimeout},null,8,Cn),xn]),Object(a["g"])("div",Mn,[Object(a["g"])("input",{ref:"humanIsFront",type:"checkbox",id:"human-is-front",checked:e.defaultValues.humanIsFront},null,8,Dn),Gn])])]),Object(a["g"])("div",Bn,[Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.onStart()})},"対局開始"),Object(a["g"])("button",{class:"dialog-button",onClick:t[2]||(t[2]=function(t){return e.onCancel()})},"キャンセル")])],512)])}n("99af");var Un=n("224f"),Kn=n("a2af"),Wn=n("b5d8");function Fn(e){e.addEventListener("cancel",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("copy",(function(e){e.stopPropagation()})),e.addEventListener("paste",(function(e){e.stopPropagation()})),e.showModal()}function Vn(e){return document.getElementById(e)}var Yn=n("7178"),zn=Object(a["k"])({name:"GameDialog",components:{Icon:de},setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),o=Object(a["u"])(null),c=Object(a["u"])(null),s=Object(a["u"])(null),u=Object(a["u"])(null),l=Object(a["u"])(null),d=Object(a["u"])(null),p=Object(a["u"])(null),b=Object(a["u"])(null),f=Object(a["u"])(Object(Wn["a"])()),h=Object(a["u"])(new Un["a"]);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Fn(t.value),n.prev=1,n.next=4,Object(Kn["g"])();case 4:return f.value=n.sent,n.next=7,Object(Kn["i"])();case 7:h.value=n.sent,e.commit(te["b"].RELEASE_BUSSY_STATE),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),e.commit(te["b"].PUSH_ERROR,n.t0),e.commit(te["b"].CLOSE_DIALOG);case 15:case"end":return n.stop()}}),n,null,[[1,11]])}))));var O=function(e){if(Yn["b"](e)){var t=h.value.getEngine(e);return{name:t.name,uri:e,usi:t}}return{name:"人",uri:Yn["a"]}},m=function(){var t={black:O(n.value.value),white:O(o.value.value),timeLimit:{timeSeconds:60*(60*c.value.value+s.value.value),byoyomi:Number(u.value.value),increment:Number(l.value.value)},startPosition:"current"!==d.value.value?d.value.value:void 0,enableEngineTimeout:p.value.checked,humanIsFront:b.value.checked},r=Object(Wn["b"])(t);r?e.commit(te["b"].PUSH_ERROR,r):e.dispatch(te["a"].START_GAME,t)},g=function(){e.commit(te["b"].CLOSE_DIALOG)},v=function(){var e=[o.value.value,n.value.value];n.value.value=e[0],o.value.value=e[1]},_=Object(a["b"])((function(){return{black:{type:f.value.black.uri},white:{type:f.value.white.uri},timeLimit:{hours:Math.floor(f.value.timeLimit.timeSeconds/3600),minutes:Math.floor(f.value.timeLimit.timeSeconds/60)%60,byoyomi:f.value.timeLimit.byoyomi,increment:f.value.timeLimit.increment},startPosition:void 0!==f.value.startPosition?f.value.startPosition:"current",enableEngineTimeout:f.value.enableEngineTimeout,humanIsFront:f.value.humanIsFront}})),E=Object(a["b"])((function(){return[{name:"人",uri:Yn["a"]}].concat(Object(i["a"])(h.value.engineList))}));return{dialog:t,blackPlayerSelect:n,whitePlayerSelect:o,hours:c,minutes:s,byoyomi:u,increment:l,startPosition:d,enableEngineTimeout:p,humanIsFront:b,defaultValues:_,players:E,onStart:m,onCancel:g,onSwapColor:v}}});n("4b46");const Jn=X()(zn,[["render",qn],["__scopeId","data-v-3a08c41c"]]);var Zn=Jn,$n=function(e){return Object(a["s"])("data-v-23a86a08"),e=e(),Object(a["r"])(),e},Xn={ref:"dialog"},Qn=$n((function(){return Object(a["g"])("div",{class:"dialog-title"},"検討",-1)})),er={class:"dialog-form-area"},tr={class:"dialog-form-item"},nr=$n((function(){return Object(a["g"])("div",{class:"dialog-form-item-label"},"エンジン",-1)})),rr={class:"dialog-form-item-unit"},ir=["value"],ar=["value"],or={class:"dialog-main-buttons"};function cr(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Xn,[Qn,Object(a["g"])("div",er,[Object(a["g"])("div",tr,[nr,Object(a["g"])("div",rr,[Object(a["g"])("select",{class:"engine-select",size:"1",ref:"engineSelect",value:e.defaultValue},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e.uri,value:e.uri},Object(a["y"])(e.name),9,ar)})),128))],8,ir)])])]),Object(a["g"])("div",or,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(t){return e.onStart()})},"検討開始"),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.onCancel()})},"キャンセル")])],512)])}var sr=n("39fb"),ur=Object(a["k"])({name:"ResearchDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),i=Object(a["u"])(Object(sr["a"])()),o=Object(a["u"])(new Un["a"]);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Fn(t.value),n.prev=1,n.next=4,Object(Kn["h"])();case 4:return i.value=n.sent,n.next=7,Object(Kn["i"])();case 7:o.value=n.sent,e.commit(te["b"].RELEASE_BUSSY_STATE),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),e.commit(te["b"].PUSH_ERROR,n.t0),e.commit(te["b"].CLOSE_DIALOG);case 15:case"end":return n.stop()}}),n,null,[[1,11]])}))));var c=function(){var t=n.value.value;if(o.value.hasEngine(t)){var r=o.value.getEngine(t),i={usi:r};e.dispatch(te["a"].START_RESEARCH,i)}else e.commit(te["b"].PUSH_ERROR,"エンジンを選択してください。")},s=function(){e.commit(te["b"].CLOSE_DIALOG)},u=Object(a["b"])((function(){return o.value.engineList})),l=Object(a["b"])((function(){return i.value.usi?i.value.usi.uri:""}));return{dialog:t,engineSelect:n,engines:u,defaultValue:l,onStart:c,onCancel:s}}});n("714d");const lr=X()(ur,[["render",cr],["__scopeId","data-v-23a86a08"]]);var dr=lr,pr=function(e){return Object(a["s"])("data-v-5c5214f8"),e=e(),Object(a["r"])(),e},br={ref:"dialog"},fr=pr((function(){return Object(a["g"])("div",{class:"dialog-title"},"エンジン管理",-1)})),hr={class:"dialog-form-area engine-list"},Or={key:0,class:"engine"},mr=["value"],gr={class:"engine-name"},vr=["onClick"],_r=["onClick"],Er={class:"dialog-main-buttons"};function jr(e,t,n,r,i,o){var c=Object(a["x"])("USIEngineOptionDialog");return Object(a["q"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",null,[Object(a["g"])("dialog",br,[fr,Object(a["g"])("div",hr,[0===e.engines.length?(Object(a["q"])(),Object(a["f"])("div",Or," エンジンが登録されていません。 ")):Object(a["e"])("",!0),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.engines,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"engine",key:t.uri,value:t.uri},[Object(a["g"])("span",gr,Object(a["y"])(t.name),1),Object(a["g"])("button",{class:"dialog-button",onClick:function(n){return e.openOptions(t.uri)}}," 設定 ",8,vr),Object(a["g"])("button",{class:"dialog-button",onClick:function(n){return e.remove(t.uri)}}," 削除 ",8,_r)],8,mr)})),128))]),Object(a["g"])("button",{class:"dialog-wide-button",onClick:t[0]||(t[0]=function(t){return e.add()})},"追加"),Object(a["g"])("div",Er,[Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.saveAndClose()})}," 保存して閉じる "),Object(a["g"])("button",{class:"dialog-button",onClick:t[2]||(t[2]=function(t){return e.cancel()})},"キャンセル")])],512)]),e.optionDialog?(Object(a["q"])(),Object(a["d"])(c,{key:0,latestEngineSetting:e.optionDialog,onOk:e.optionOk,onCancel:e.optionCancel},null,8,["latestEngineSetting","onOk","onCancel"])):Object(a["e"])("",!0)],64)}var Sr=function(e){return Object(a["s"])("data-v-338bd142"),e=e(),Object(a["r"])(),e},Ir={ref:"dialog"},wr=Sr((function(){return Object(a["g"])("div",{class:"dialog-title"},"エンジン設定",-1)})),Rr={class:"dialog-form-area option-list"},yr={class:"option"},Tr=Sr((function(){return Object(a["g"])("div",{class:"option-name"},"エンジン名",-1)})),Ar={class:"option-unchangeable"},Nr={class:"option"},kr=Sr((function(){return Object(a["g"])("div",{class:"option-name"},"作者",-1)})),Pr={class:"option-unchangeable"},Hr={class:"option"},Lr=Sr((function(){return Object(a["g"])("div",{class:"option-name"},"場所",-1)})),Cr={class:"option-unchangeable"},xr={class:"option"},Mr=Sr((function(){return Object(a["g"])("div",{class:"option-name"},"表示名",-1)})),Dr={class:"option-value-text",type:"text",name:"ElectronShogiEngineName",ref:"engineNameInput"},Gr={class:"option-name"},Br=["id","min","max","name"],qr=["id","name"],Ur=["id","name"],Kr=["onClick"],Wr=["id"],Fr=Sr((function(){return Object(a["g"])("option",{value:""},"既定値",-1)})),Vr=Sr((function(){return Object(a["g"])("option",{value:"true"},"ON",-1)})),Yr=Sr((function(){return Object(a["g"])("option",{value:"false"},"OFF",-1)})),zr=[Fr,Vr,Yr],Jr=["id"],Zr=Sr((function(){return Object(a["g"])("option",{value:""},"既定値",-1)})),$r=["value"],Xr=["onClick"],Qr={class:"dialog-main-buttons"};function ei(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Ir,[wr,Object(a["g"])("div",Rr,[Object(a["g"])("div",yr,[Tr,Object(a["g"])("div",Ar,Object(a["y"])(e.engine.defaultName),1)]),Object(a["g"])("div",Nr,[kr,Object(a["g"])("div",Pr,Object(a["y"])(e.engine.author),1)]),Object(a["g"])("div",Hr,[Lr,Object(a["g"])("div",Cr,Object(a["y"])(e.engine.path),1)]),Object(a["g"])("div",xr,[Mr,Object(a["g"])("input",Dr,null,512)]),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.options,(function(t){return Object(a["q"])(),Object(a["f"])("div",{class:"option",key:t.name},[Object(a["g"])("div",Gr,Object(a["y"])(t.name),1),"spin"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:0,id:t.inputId,class:"option-value-number",type:"number",min:t.min,max:t.max,step:"1",name:t.name},null,8,Br)):Object(a["e"])("",!0),"string"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:1,id:t.inputId,class:"option-value-text",type:"text",name:t.name},null,8,qr)):Object(a["e"])("",!0),"filename"===t.type?(Object(a["q"])(),Object(a["f"])("input",{key:2,id:t.inputId,class:"option-value-filename",type:"text",name:t.name},null,8,Ur)):Object(a["e"])("",!0),"filename"===t.type?(Object(a["q"])(),Object(a["f"])("button",{key:3,class:"dialog-button",onClick:function(n){return e.selectFile(t.inputId)}}," 選択 ",8,Kr)):Object(a["e"])("",!0),"check"===t.type?(Object(a["q"])(),Object(a["f"])("select",{key:4,id:t.inputId,class:"option-value-check"},zr,8,Wr)):Object(a["e"])("",!0),"combo"===t.type?(Object(a["q"])(),Object(a["f"])("select",{key:5,id:t.inputId,class:"option-value-combo"},[Zr,(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(t.vars,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e,value:e},Object(a["y"])(e),9,$r)})),128))],8,Jr)):Object(a["e"])("",!0),"button"===t.type?(Object(a["q"])(),Object(a["f"])("button",{key:6,class:"dialog-button",onClick:function(n){return e.sendOption(t.name)}}," 実行 ",8,Xr)):Object(a["e"])("",!0)])})),128))]),Object(a["g"])("button",{class:"dialog-wide-button",onClick:t[0]||(t[0]=function(t){return e.reset()})}," エンジンの既定値に戻す "),Object(a["g"])("div",Qr,[Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.ok()})},"OK"),Object(a["g"])("button",{class:"dialog-button",onClick:t[2]||(t[2]=function(t){return e.cancel()})},"キャンセル")])],512)])}var ti=n("b85c"),ni=n("5530"),ri=(n("d81d"),n("4e82"),n("2ca0"),Object(a["k"])({name:"USIEngineOptionDialog",props:{latestEngineSetting:{type:Object,rquired:!0}},emits:["ok","cancel"],setup:function(e,t){var n=Object(a["u"])(null),i=Object(a["u"])(null),o=Object(te["e"])(),c=e.latestEngineSetting,s=Object(a["u"])(c),u=Object(a["b"])((function(){return Object.values(s.value.options).sort((function(e,t){var n=e.name.startsWith("USI_"),r=t.name.startsWith("USI_");return n!==r?n?-1:1:e.name<t.name?-1:1})).map((function(e,t){return Object(ni["a"])(Object(ni["a"])({},e),{},{inputId:"usiEngineOptionDialogOption"+t,value:Object(Un["b"])(e)})}))}));o.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Fn(n.value),e.prev=1,e.next=4,Object(Kn["d"])(c.path);case 4:s.value=e.sent,Object(Un["c"])(s.value,c),i.value.value=s.value.name,t=Object(ti["a"])(u.value);try{for(t.s();!(r=t.n()).done;)a=r.value,l=Vn(a.inputId),l&&void 0!==a.value&&(l.value=a.value+"")}catch(d){t.e(d)}finally{t.f()}e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 14:return e.prev=14,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))));var l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.commit(te["b"].RETAIN_BUSSY_STATE),e.prev=1,e.next=4,Object(Kn["t"])();case 4:n=e.sent,r=Vn(t),n&&r&&(r.value=n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 12:return e.prev=12,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.commit(te["b"].RETAIN_BUSSY_STATE),e.prev=1,e.next=4,Object(Kn["p"])(s.value.path,t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),o.commit(te["b"].PUSH_ERROR,e.t0);case 9:return e.prev=9,o.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){i.value.value=s.value.defaultName;var e,t=Object(ti["a"])(u.value);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=Vn(n.inputId);r&&(void 0!==s.value.options[n.name].default?r.value=s.value.options[n.name].default+"":r.value="")}}catch(a){t.e(a)}finally{t.f()}},b=function(){s.value.name=i.value.value;var e,n=Object(ti["a"])(u.value);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=Vn(r.inputId);a&&(s.value.options[r.name].value=a.value?"spin"===r.type?Number(a.value):a.value:void 0)}}catch(o){n.e(o)}finally{n.f()}t.emit("ok",s.value)},f=function(){t.emit("cancel")};return{engine:s,dialog:n,engineNameInput:i,options:u,selectFile:l,sendOption:d,reset:p,ok:b,cancel:f}}}));n("276d");const ii=X()(ri,[["render",ei],["__scopeId","data-v-338bd142"]]);var ai=ii,oi=Object(a["k"])({name:"USIEngineManagementDialog",components:{USIEngineOptionDialog:ai},setup:function(){var e=Object(a["u"])(null),t=Object(a["u"])(null),n=Object(a["u"])(new Un["a"]),i=Object(te["e"])();i.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Fn(e.value),t.prev=1,t.next=4,Object(Kn["i"])();case 4:n.value=t.sent,i.commit(te["b"].RELEASE_BUSSY_STATE),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),i.commit(te["b"].PUSH_ERROR,t.t0),i.commit(te["b"].CLOSE_DIALOG);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))));var o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i.commit(te["b"].RETAIN_BUSSY_STATE),e.next=4,Object(Kn["u"])();case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return");case 7:return e.t0=n.value,e.next=10,Object(Kn["d"])(t);case 10:e.t1=e.sent,e.t0.addEngine.call(e.t0,e.t1),e.next=17;break;case 14:e.prev=14,e.t2=e["catch"](0),i.commit(te["b"].PUSH_ERROR,e.t2);case 17:return e.prev=17,i.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){n.value.removeEngine(e)},s=function(e){t.value=n.value.getEngine(e)},u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i.commit(te["b"].RETAIN_BUSSY_STATE),e.next=4,Object(Kn["o"])(n.value);case 4:i.commit(te["b"].CLOSE_DIALOG),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),i.commit(te["b"].PUSH_ERROR,e.t0);case 10:return e.prev=10,i.commit(te["b"].RELEASE_BUSSY_STATE),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),l=function(){i.commit(te["b"].CLOSE_DIALOG)},d=function(e){n.value.updateEngine(e),t.value=null},p=function(){t.value=null},b=Object(a["b"])((function(){return n.value.engineList}));return{optionDialog:t,dialog:e,engines:b,add:o,remove:c,openOptions:s,saveAndClose:u,cancel:l,optionOk:d,optionCancel:p}}});n("403b");const ci=X()(oi,[["render",jr],["__scopeId","data-v-5c5214f8"]]);var si=ci,ui=function(e){return Object(a["s"])("data-v-162d170a"),e=e(),Object(a["r"])(),e},li={ref:"dialog"},di=ui((function(){return Object(a["g"])("div",{class:"dialog-title"},"アプリ設定",-1)})),pi={class:"dialog-form-area settings"},bi={class:"dialog-form-item"},fi=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"デザイン",-1)})),hi=["value"],Oi=["value"],mi={class:"dialog-form-item"},gi=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"駒音の大きさ",-1)})),vi=["value"],_i=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"%",-1)})),Ei={class:"dialog-form-item"},ji=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の大きさ",-1)})),Si=["value"],Ii=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"%",-1)})),wi={class:"dialog-form-item"},Ri=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の高さ",-1)})),yi=["value"],Ti=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-unit"},"Hz (220 ~ 880)",-1)})),Ai={class:"dialog-form-item"},Ni=ui((function(){return Object(a["g"])("div",{class:"dialog-form-item-label-wide"},"時計音の対象",-1)})),ki=["value"],Pi=ui((function(){return Object(a["g"])("option",{value:"all"},"全ての手番",-1)})),Hi=ui((function(){return Object(a["g"])("option",{value:"onlyUser"},"人の手番のみ",-1)})),Li=[Pi,Hi],Ci={class:"dialog-main-buttons"};function xi(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",li,[di,Object(a["g"])("div",pi,[Object(a["g"])("div",bi,[fi,Object(a["g"])("select",{value:e.appSetting.boardLayout,ref:"boardLayout"},[(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.boardLayouts,(function(e){return Object(a["q"])(),Object(a["f"])("option",{key:e,value:e.value},Object(a["y"])(e.name),9,Oi)})),128))],8,hi)]),Object(a["g"])("div",mi,[gi,Object(a["g"])("input",{value:e.appSetting.pieceVolume,type:"number",max:"100",min:"0",ref:"pieceVolume"},null,8,vi),_i]),Object(a["g"])("div",Ei,[ji,Object(a["g"])("input",{value:e.appSetting.clockVolume,type:"number",max:"100",min:"0",ref:"clockVolume"},null,8,Si),Ii]),Object(a["g"])("div",wi,[Ri,Object(a["g"])("input",{value:e.appSetting.clockPitch,type:"number",max:"880",min:"220",ref:"clockPitch"},null,8,yi),Ti]),Object(a["g"])("div",Ai,[Ni,Object(a["g"])("select",{value:e.appSetting.clockSoundTarget,ref:"clockSoundTarget"},Li,8,ki)])]),Object(a["g"])("div",Ci,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(t){return e.saveAndClose()})}," 保存して閉じる "),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(t){return e.cancel()})},"キャンセル")])],512)])}function Mi(e){var t=Number(e.value),n=Number(e.max),r=Number(e.min);return Math.min(Math.max(t,r),n)}var Di=Object(a["k"])({name:"AppSettingDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null),i=Object(a["u"])(null),o=Object(a["u"])(null),c=Object(a["u"])(null),s=Object(a["u"])(null);Object(a["o"])((function(){Fn(t.value)}));var u=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={boardLayout:n.value.value,pieceVolume:Mi(i.value),clockVolume:Mi(o.value),clockPitch:Mi(c.value),clockSoundTarget:s.value.value},e.commit(te["b"].RETAIN_BUSSY_STATE),t.prev=2,t.next=5,e.dispatch(te["a"].UPDATE_APP_SETTING,r);case 5:e.commit(te["b"].CLOSE_DIALOG),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),e.commit(te["b"].PUSH_ERROR,t.t0);case 11:return t.prev=11,e.commit(te["b"].RELEASE_BUSSY_STATE),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),l=function(){e.commit(te["b"].CLOSE_DIALOG)},d=Object(a["b"])((function(){return e.state.appSetting})),p=[{name:"一文字駒",value:W["a"].HITOMOJI},{name:"一文字駒（ゴシック体）",value:W["a"].HITOMOJI_GOTHIC}];return{dialog:t,boardLayout:n,pieceVolume:i,clockVolume:o,clockPitch:c,clockSoundTarget:s,appSetting:d,boardLayouts:p,saveAndClose:u,cancel:l}}});n("9fa5");const Gi=X()(Di,[["render",xi],["__scopeId","data-v-162d170a"]]);var Bi=Gi,qi=function(e){return Object(a["s"])("data-v-7a20f62c"),e=e(),Object(a["r"])(),e},Ui={ref:"dialog"},Ki={ref:"content"},Wi={class:"dialog-form-area"},Fi=qi((function(){return Object(a["g"])("div",{class:"message"},"以下の棋譜を取り込みます。",-1)})),Vi={key:0,class:"message"},Yi=Object(a["i"])(" ※テキストエリアに棋譜を貼り付けてください。"),zi=qi((function(){return Object(a["g"])("br",null,null,-1)})),Ji=Object(a["i"])(" ※インストールアプリ版では自動的に貼り付けられます。 "),Zi=[Yi,zi,Ji],$i={ref:"textarea"},Xi={class:"dialog-main-buttons"};function Qi(e,t,n,r,i,o){return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",Ui,[Object(a["g"])("div",Ki,[Object(a["g"])("div",Wi,[Fi,e.isNative?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["f"])("div",Vi,Zi)),Object(a["g"])("textarea",$i,null,512)])],512),Object(a["g"])("div",Xi,[Object(a["g"])("button",{class:"dialog-button",onClick:t[0]||(t[0]=function(){return e.onOk&&e.onOk.apply(e,arguments)})},"取り込む"),Object(a["g"])("button",{class:"dialog-button",onClick:t[1]||(t[1]=function(){return e.onCancel&&e.onCancel.apply(e,arguments)})},"キャンセル")])],512)])}var ea=Object(a["k"])({name:"PasteDialog",setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null),n=Object(a["u"])(null);e.commit(te["b"].RETAIN_BUSSY_STATE),Object(a["o"])(Object(r["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,Fn(t.value),!Object(Kn["e"])()){r.next=6;break}return r.next=5,navigator.clipboard.readText();case 5:n.value.value=r.sent;case 6:return r.prev=6,e.commit(te["b"].RELEASE_BUSSY_STATE),r.finish(6);case 9:case"end":return r.stop()}}),r,null,[[0,,6,9]])}))));var i=function(){var t=n.value.value;e.commit(te["b"].CLOSE_PASTE_DIALOG),t&&e.dispatch(te["a"].PASTE_RECORD,t)},o=function(){e.commit(te["b"].CLOSE_PASTE_DIALOG)};return{dialog:t,textarea:n,onOk:i,onCancel:o,isNative:Object(Kn["e"])()}}});n("add1");const ta=X()(ea,[["render",Qi],["__scopeId","data-v-7a20f62c"]]);var na=ta,ra=function(e){return Object(a["s"])("data-v-9afd096a"),e=e(),Object(a["r"])(),e},ia={class:"bussy",ref:"dialog"},aa={class:"content"},oa=ra((function(){return Object(a["g"])("div",{class:"message"},"処理中です。お待ち下さい。",-1)}));function ca(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",ia,[Object(a["g"])("div",aa,[Object(a["j"])(c,{class:"icon",icon:"bussy"}),oa])],512)])}var sa=Object(a["k"])({name:"Bussy",components:{Icon:de},setup:function(){var e=Object(a["u"])(null);return Object(a["o"])((function(){Fn(e.value)})),{dialog:e}}});n("06e0");const ua=X()(sa,[["render",ca],["__scopeId","data-v-9afd096a"]]);var la=ua,da={class:"messagebox",ref:"dialog"},pa={class:"content"},ba={class:"message"},fa={class:"dialog-main-buttons"};function ha(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",da,[Object(a["g"])("div",pa,[Object(a["j"])(c,{class:"icon",icon:"info"}),Object(a["g"])("div",ba,Object(a["y"])(e.message),1)]),Object(a["g"])("div",fa,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.onClose()})},"閉じる")])],512)])}var Oa=Object(a["k"])({name:"ErrorMessage",components:{Icon:de},setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null);Object(a["o"])((function(){Fn(t.value)}));var n=Object(a["b"])((function(){return e.getters.message})),r=function(){e.commit(te["b"].SHIFT_MESSAGE)};return{dialog:t,message:n,onClose:r}}});n("4565");const ma=X()(Oa,[["render",ha],["__scopeId","data-v-0b6b1b72"]]);var ga=ma,va={class:"error",ref:"dialog"},_a={class:"content"},Ea={class:"items"},ja={class:"notice"},Sa={class:"index"},Ia={class:"message"},wa={class:"dialog-main-buttons"};function Ra(e,t,n,r,i,o){var c=Object(a["x"])("Icon");return Object(a["q"])(),Object(a["f"])("div",null,[Object(a["g"])("dialog",va,[Object(a["g"])("div",_a,[Object(a["j"])(c,{class:"icon",icon:"error"}),Object(a["g"])("div",Ea,[Object(a["g"])("div",ja,Object(a["y"])(e.errors.length)+" 件のエラーが発生しました。 ",1),(Object(a["q"])(!0),Object(a["f"])(a["a"],null,Object(a["v"])(e.errors,(function(e){return Object(a["q"])(),Object(a["f"])("div",{class:"item",key:e.index},[Object(a["g"])("p",Sa,Object(a["y"])(e.index+1)+" 件目",1),Object(a["g"])("p",Ia,Object(a["y"])(e.message),1)])})),128))])]),Object(a["g"])("div",wa,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.onClose()})},"閉じる")])],512)])}var ya=Object(a["k"])({name:"ErrorMessage",components:{Icon:de},setup:function(){var e=Object(te["e"])(),t=Object(a["u"])(null);Object(a["o"])((function(){Fn(t.value)}));var n=Object(a["b"])((function(){return e.state.error.queue.map((function(e,t){return{message:e.message,index:t}}))})),r=function(){e.commit(te["b"].CLEAR_ERRORS)};return{dialog:t,errors:n,onClose:r}}});n("4b8f"),n("6ac6");const Ta=X()(ya,[["render",Ra],["__scopeId","data-v-43fa633e"]]);var Aa=Ta;function Na(){var e=document.activeElement;return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement}function ka(e,t){if(!Na())switch(e){case"ArrowUp":return t.onArrowUp;case"ArrowDown":return t.onArrowDown;case"ArrowLeft":return t.onArrowLeft;case"ArrowRight":return t.onArrowRight}}function Pa(e){document.addEventListener("keydown",(function(t){var n=ka(t.key,e);n&&(t.preventDefault(),n())}))}var Ha=Object(a["k"])({name:"App",components:{StandardLayout:Zt,GameDialog:Zn,ResearchDialog:dr,USIEngineManagementDialog:si,AppSettingDialog:Bi,PasteDialog:na,Bussy:la,Message:ga,ErrorMessage:Aa},setup:function(){var e=Object(te["e"])(),t=Object(a["b"])((function(){return{game:e.state.mode===pe["a"].GAME_DIALOG,research:e.state.mode===pe["a"].RESEARCH_DIALOG,usiEngineSetting:e.state.mode===pe["a"].USI_ENGINE_SETTING_DIALOG,appSetting:e.state.mode===pe["a"].APP_SETTING_DIALOG,paste:e.state.mode===pe["a"].PASTE_DIALOG,processing:e.getters.isBussy}})),n=Object(a["b"])((function(){return e.getters.hasMessage})),r=Object(a["b"])((function(){return e.getters.hasError}));return Object(a["o"])((function(){var t=document.getElementsByTagName("body")[0];t.addEventListener("copy",(function(t){e.dispatch(te["a"].COPY_RECORD),t.preventDefault()})),t.addEventListener("paste",(function(t){e.commit(te["b"].SHOW_PASTE_DIALOG),t.preventDefault()})),t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("drop",(function(t){if(t.dataTransfer&&t.dataTransfer.files[0]){var n=t.dataTransfer.files[0].path;e.dispatch(te["a"].OPEN_RECORD,n)}t.preventDefault()})),Pa({onArrowUp:function(){var t=e.state.record.current.number;e.commit(te["b"].CHANGE_MOVE_NUMBER,t-1)},onArrowDown:function(){var t=e.state.record.current.number;e.commit(te["b"].CHANGE_MOVE_NUMBER,t+1)},onArrowLeft:function(){e.commit(te["b"].CHANGE_MOVE_NUMBER,0)},onArrowRight:function(){e.commit(te["b"].CHANGE_MOVE_NUMBER,Number.MAX_SAFE_INTEGER)}})})),{dialogVisibilities:t,hasMessage:n,hasErrors:r}}});n("d767");const La=X()(Ha,[["render",o]]);var Ca=La;Mt["a"].register.apply(Mt["a"],Object(i["a"])(Mt["b"])),Object(Kn["q"])(te["d"]),Promise.allSettled([Object(Kn["f"])().then((function(e){te["d"].commit(te["b"].UPDATE_APP_SETTING,e)})).catch((function(e){te["d"].commit(te["b"].PUSH_ERROR,new Error("アプリ設定の読み込み中にエラーが発生しました :"+e))})),Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Kn["c"])();case 2:if(t=e.sent,!t){e.next=6;break}return e.next=6,te["d"].dispatch(te["a"].OPEN_RECORD,t);case 6:case"end":return e.stop()}}),e)})))()]).finally((function(){Object(a["c"])(Ca).use(te["d"],te["c"]).mount("#app")}))},d02d:function(e,t,n){"use strict";n("fcd3")},d2ca:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));n("4d90");function r(e){return a(Math.floor(e/1e3))}function i(e){return o(Math.floor(e/1e3))}function a(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=e%60;return t+":"+String(n).padStart(2,"0")+":"+String(r).padStart(2,"0")}function o(e){var t=Math.floor(e/60),n=e%60;return String(t).padStart(2," ")+":"+String(n).padStart(2,"0")}},d58e:function(e,t,n){},d767:function(e,t,n){"use strict";n("f150")},dac8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={};function i(e){if(!r[e]){var t=document.createElement("img");t.src=e,r[e]=t}}},ed5a:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("ade3"),i=n("d4ec"),a=n("bee2"),o=n("b85c"),c=(n("b0c0"),n("b64b"),n("95b4")),s=n("30b2");function u(e,t){var n,r,i=e.clone(),a="",c=Object(o["a"])(t);try{for(c.s();!(r=c.n()).done;){var s=r.value,u=i.createMoveBySFEN(s);if(!u)break;i.doMove(u,{ignoreValidation:!0}),a+=u.getDisplayText(n),n=u}}catch(l){c.e(l)}finally{c.f()}return a}var l=function(){function e(t){Object(i["a"])(this,e),this.name=t,this.iterates=[]}return Object(a["a"])(e,[{key:"update",value:function(e,t){var n={};if(void 0!==t.depth&&(n.depth=t.depth),void 0!==t.seldepth&&(n.selectiveDepth=t.seldepth),void 0!==t.timeMs&&(n.timeMs=t.timeMs),void 0!==t.nodes&&(this.nodes=t.nodes),t.pv&&(n.pv=t.pv,n.text=u(e,t.pv)),void 0!==t.multipv&&(n.multiPV=t.multipv),void 0!==t.scoreCP&&(n.score=t.scoreCP),void 0!==t.scoreMate&&(n.scoreMate=t.scoreMate),void 0!==t.lowerbound&&(n.lowerBound=t.lowerbound),void 0!==t.upperbound&&(n.upperBound=t.upperbound),void 0!==t.currmove){this.currentMove=t.currmove;var r=e.createMoveBySFEN(t.currmove);r&&(this.currentMoveText=r.getDisplayText())}void 0!==t.hashfullPerMill&&(this.hashfull=t.hashfullPerMill/1e3),void 0!==t.nps&&(this.nps=t.nps),t.string&&(n.text=t.string),0!==Object.keys(n).length&&this.iterates.unshift(n)}}]),e}(),d={mutations:Object(r["a"])({},s["a"].UPDATE_USI_INFO,(function(e,t){switch(e.sessionID!=t.sessionID&&(e.blackPlayer=void 0,e.whitePlayer=void 0,e.researcher=void 0,e.sessionID=t.sessionID),t.sender){case c["a"].BLACK_PLAYER:e.blackPlayer&&e.blackPosition===t.position.sfen||(e.blackPlayer=new l(t.name),e.blackPosition=t.position.sfen),e.blackPlayer.update(t.position,t.info);break;case c["a"].WHITE_PLAYER:e.whitePlayer&&e.whitePosition===t.position.sfen||(e.whitePlayer=new l(t.name),e.whitePosition=t.position.sfen),e.whitePlayer.update(t.position,t.info);break;case c["a"].RESEARCHER:e.researcher&&e.researchPosition===t.position.sfen||(e.researcher=new l(t.name),e.researchPosition=t.position.sfen),e.researcher.update(t.position,t.info);break}}))}},ed7d:function(e,t,n){},eda1:function(e,t,n){},ef3d:function(e,t,n){},f150:function(e,t,n){},fcd3:function(e,t,n){}});
//# sourceMappingURL=index.a3bd35b1.js.map