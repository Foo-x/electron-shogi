{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/store/index.ts","webpack:///./src/components/dialog/Bussy.vue?389e","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?5e58","webpack:///./src/settings/app.ts","webpack:///./src/store/bussy.ts","webpack:///./src/components/primitive/BoardLayout.ts","webpack:///./src/store/game.ts","webpack:///./src/settings/usi.ts","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?e57f","webpack:///./src/store/mutation.ts","webpack:///./src/settings/research.ts","webpack:///./src/components/main/RecordPane.vue?9d67","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?b517","webpack:///./src/components/primitive/Board.vue?a5be","webpack:///./src/components/dialog/Message.vue?73ee","webpack:///./src/components/main/InformationPane.vue?8c69","webpack:///./src/store/error.ts","webpack:///./src/components/dialog/GameDialog.vue?54a3","webpack:///./src/components/dialog/ErrorMessage.vue?8336","webpack:///./src/audio/index.ts","webpack:///./src/store/mode.ts","webpack:///./src/store/message.ts","webpack:///./src/components/analytics/EngineAnalytics.vue?0a7e","webpack:///./src/components/analytics/RecordComment.vue?184f","webpack:///./src/components/dialog/ErrorMessage.vue?81ab","webpack:///./src/store/record.ts","webpack:///./src/store/action.ts","webpack:///./src/components/dialog/ResearchDialog.vue?4087","webpack:///./src/uri.ts","webpack:///./src/helpers/path.ts","webpack:///./src/shogi/color.ts","webpack:///./src/shogi/piece.ts","webpack:///./src/shogi/direction.ts","webpack:///./src/shogi/square.ts","webpack:///./src/shogi/move.ts","webpack:///./src/shogi/board.ts","webpack:///./src/shogi/hand.ts","webpack:///./src/shogi/position.ts","webpack:///./src/shogi/record.ts","webpack:///./src/shogi/kakinoki.ts","webpack:///./src/components/primitive/Record.vue?0fbe","webpack:///./src/usi/info.ts","webpack:///./src/components/analytics/EvaluationChart.vue?923d","webpack:///./src/components/dialog/AppSettingDialog.vue?5c98","webpack:///./src/menu/event.ts","webpack:///./src/ipc/web.ts","webpack:///./src/ipc/renderer.ts","webpack:///./src/components/main/BoardPane.vue?446b","webpack:///./src/components/dialog/PasteDialog.vue?7ef5","webpack:///./src/settings/game.ts","webpack:///./src/App.vue?282b","webpack:///./src/components/main/StandardLayout.vue?272b","webpack:///./src/components/main/BoardPane.vue?a7d4","webpack:///./src/components/primitive/Board.vue?c370","webpack:///./src/components/primitive/Types.ts","webpack:///./src/components/primitive/Board.vue","webpack:///./src/components/primitive/Board.vue?ac87","webpack:///./src/components/primitive/Icon.vue?e973","webpack:///./src/assets/icons.ts","webpack:///./src/components/primitive/Icon.vue","webpack:///./src/components/primitive/Icon.vue?b956","webpack:///./src/components/main/BoardPane.vue","webpack:///./src/components/main/BoardPane.vue?bcdb","webpack:///./src/components/main/RecordPane.vue?197a","webpack:///./src/components/primitive/Record.vue?92f1","webpack:///./src/components/primitive/Record.vue","webpack:///./src/components/primitive/Record.vue?123c","webpack:///./src/components/main/RecordPane.vue","webpack:///./src/components/main/RecordPane.vue?fee7","webpack:///./src/components/main/InformationPane.vue?5934","webpack:///./src/components/analytics/RecordComment.vue?0bd6","webpack:///./src/components/analytics/RecordComment.vue","webpack:///./src/components/analytics/RecordComment.vue?cecc","webpack:///./src/components/analytics/EngineAnalytics.vue?cca4","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?0b6b","webpack:///./src/components/analytics/EngineAnalyticsElement.vue","webpack:///./src/components/analytics/EngineAnalyticsElement.vue?ded2","webpack:///./src/components/analytics/EngineAnalytics.vue","webpack:///./src/components/analytics/EngineAnalytics.vue?6a11","webpack:///./src/components/analytics/EvaluationChart.vue?bc49","webpack:///./src/components/analytics/EvaluationChart.vue","webpack:///./src/components/analytics/EvaluationChart.vue?71a4","webpack:///./src/components/main/InformationPane.vue","webpack:///./src/components/main/InformationPane.vue?c7b3","webpack:///./src/components/main/StandardLayout.vue","webpack:///./src/components/main/StandardLayout.vue?27f5","webpack:///./src/components/dialog/GameDialog.vue?afb1","webpack:///./src/helpers/dialog.ts","webpack:///./src/components/dialog/GameDialog.vue","webpack:///./src/components/dialog/GameDialog.vue?7ac4","webpack:///./src/components/dialog/ResearchDialog.vue?4c0f","webpack:///./src/components/dialog/ResearchDialog.vue","webpack:///./src/components/dialog/ResearchDialog.vue?f1e3","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?dc19","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?c894","webpack:///./src/components/dialog/USIEngineOptionDialog.vue","webpack:///./src/components/dialog/USIEngineOptionDialog.vue?0af9","webpack:///./src/components/dialog/USIEngineManagementDialog.vue","webpack:///./src/components/dialog/USIEngineManagementDialog.vue?23cc","webpack:///./src/components/dialog/AppSettingDialog.vue?607d","webpack:///./src/helpers/form.ts","webpack:///./src/components/dialog/AppSettingDialog.vue","webpack:///./src/components/dialog/AppSettingDialog.vue?0623","webpack:///./src/components/dialog/PasteDialog.vue?b5bd","webpack:///./src/components/dialog/PasteDialog.vue","webpack:///./src/components/dialog/PasteDialog.vue?5a1c","webpack:///./src/components/dialog/Bussy.vue?cb5e","webpack:///./src/components/dialog/Bussy.vue","webpack:///./src/components/dialog/Bussy.vue?9406","webpack:///./src/components/dialog/Message.vue?eedf","webpack:///./src/components/dialog/Message.vue","webpack:///./src/components/dialog/Message.vue?e694","webpack:///./src/components/dialog/ErrorMessage.vue?7a99","webpack:///./src/components/dialog/ErrorMessage.vue","webpack:///./src/components/dialog/ErrorMessage.vue?846c","webpack:///./src/helpers/key.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/main.ts","webpack:///./src/components/main/StandardLayout.vue?794a","webpack:///./src/helpers/time.ts","webpack:///./src/App.vue?9b76","webpack:///./src/assets/preload.ts","webpack:///./src/store/usi.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","useStore","baseUseStore","store","createStore","state","appSetting","defaultAppSetting","record","Record","Mode","NORMAL","usiSessionID","game","GameState","usi","usiState","message","messageState","error","errorState","bussy","bussyState","getters","isMovableByUser","RESEARCH","GAME","position","color","Color","BLACK","setting","black","uri","white","mutations","Mutation","UPDATE_APP_SETTING","update","FLIP_BOARD","boardFlipping","saveAppSetting","SHOW_PASTE_DIALOG","PASTE_DIALOG","CLOSE_PASTE_DIALOG","SHOW_GAME_DIALOG","GAME_DIALOG","SHOW_RESEARCH_DIALOG","RESEARCH_DIALOG","OPEN_APP_SETTING_DIALOG","APP_SETTING_DIALOG","OPEN_USI_ENGINE_MANAGEMENT_DIALOG","USI_ENGINE_SETTING_DIALOG","CLOSE_DIALOG","NEW_RECORD","clear","Position","recordFilePath","undefined","UPDATE_RECORD_COMMENT","comment","current","CHANGE_TURN","POSITION_EDITING","clone","setColor","reverseColor","INITIALIZE_POSITION","initialPositionType","reset","EDIT_POSITION","change","edit","CHANGE_MOVE_NUMBER","number","goto","CHANGE_BRANCH","index","branchIndex","switchBranchByIndex","REMOVE_RECORD_AFTER","removeAfter","DO_MOVE","move","append","ignoreValidation","setElapsedMs","elapsedMs","playPieceBeat","pieceVolume","CLEAR_GAME_TIMER","clearTimer","beep5sHandler","stop","actions","Action","commit","OPEN_RECORD","path","RETAIN_BUSSY_STATE","showOpenRecordDialog","openRecord","match","str","iconv","decode","toString","recordOrError","importKakinoki","PUSH_ERROR","RELEASE_BUSSY_STATE","SAVE_RECORD","options","overwrite","defaultPath","defaultRecordFileName","showSaveRecordDialog","exportKakinoki","returnCode","encode","Buffer","from","saveRecord","COPY_RECORD","navigator","clipboard","writeText","PASTE_RECORD","START_POSITION_EDITING","END_POSITION_EDITING","UPDATE_USI_INFO","payload","sessionID","sender","info","entryData","RecordEntryCustomData","customData","updateUSIInfo","stringify","START_RESEARCH","researchSetting","saveResearchSetting","startResearch","STOP_RESEARCH","endResearch","START_GAME","saveGameSetting","startPosition","startGame","setup","metadata","setStandardMetadata","RecordMetadataKey","BLACK_NAME","WHITE_NAME","humanIsFront","flip","STOP_GAME","specialMove","PUSH_MESSAGE","specialMoveToDisplayString","endGame","SpecialMove","INTERRUPT","RESIGN_BY_USER","dispatch","RESIGN","DO_MOVE_BY_USER","increment","DO_MOVE_BY_USI_ENGINE","sfen","FOUL_LOSE","ENTERING_OF_KING","createMoveBySFEN","isValidMove","RESET_GAME_TIMER","startTimer","timeout","enableEngineTimeout","TIMEOUT","stopUSI","onBeepShort","BEEP_SHORT","onBeepUnlimited","BEEP_UNLIMITED","clockSoundTarget","ClockSoundTarget","ONLY_USER","beepUnlimited","frequency","clockPitch","volume","clockVolume","beepShort","watch","updateUSIPosition","blackTimeMs","whiteTimeMs","deep","InformationTab","boardLayout","BoardLayoutType","HITOMOJI","informationTab","COMMENT","count","isBussy","templateCommon","frame","width","height","board","x","y","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMove","piece","hand","turn","fontSize","playerName","clock","control","left","right","templates","hitomoji","images","pawn","lance","knight","silver","gold","bishop","rook","king","king2","promPawn","promLance","promKnight","promSilver","horse","dragon","hitomojiGothic","handLaytoutRule","row","column","LayoutBuilder","layoutType","this","template","preloadImage","values","forEach","upperSizeLimit","pointer","reservedMoveForPromotion","ratio","buildFrameLayout","style","buildBoardLayout","imagePath","top","buildPieceLayout","layouts","listNonEmptySquares","square","at","id","displayColor","pieceType","type","PieceType","KING","opposite","buildSquareLayout","Square","all","file","rank","backgroundStyle","equals","to","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","pieces","pointers","handPieceTypes","rule","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","Math","max","dx","Piece","buildPromotionLayout","promoted","notPromoted","unpromoted","promoteImagePath","notPromoteImagePath","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","WHITE","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","blackHand","whiteHand","promotion","blackPlayerName","whitePlayerName","blackClock","whiteClock","timeMs","byoyomi","timerHandle","timerStart","Date","lastTimeMs","_elapsedMs","_setting","defaultGameSetting","timeLimit","timeSeconds","handlers","playerState","getPlayerState","setInterval","lastByoyomi","now","getTime","ceil","lastTime","time","clearInterval","getUSIEngineOptionCurrentValue","option","default","mergeUSIEngineSetting","engine","local","keys","USIEngineSettings","json","engines","src","JSON","parse","sort","a","b","defaultResearchSetting","queue","hasError","e","Error","CLEAR_ERRORS","beep","context","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","start","currentTime","lastPieceBeatTime","audio","Audio","play","hasMessage","SHIFT_MESSAGE","MAX_SCORE","MIN_SCORE","obj","evaluation","score","USIInfoSender","BLACK_PLAYER","WHITE_PLAYER","RESEARCHER","command","scoreCP","updateScore","min","scoreMate","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","startsWith","date","getStandardMetadata","DATE","trim","replaceAll","toLocaleDateString","year","month","day","colorToSFEN","isValidSFENColor","parseSFENColor","standardPieceNameMap","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","promotable","promoteMap","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","g","k","sfenCharToColorMap","rotateMap","Map","set","Direction","withColor","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","MoveType","directions","movableDirectionMap","SHORT","LONG","movableDirections","resolveMoveType","direction","directionToDeltaMap","vectorToDirectionAndDistance","distance","ok","abs","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","arg0","arg1","trunc","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","promote","capturedPieceType","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","InitialPositionType","sfenCharToNumber","Board","squares","Array","STANDARD","square1","square2","tmp","removed","EMPTY","TSUME_SHOGI","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","newByXY","isValidSFEN","rows","split","find","target","step","neighbor","valid","filled","ignore","rdir","kingColor","findKing","hasPower","buildSFEN","Hand","handler","formatSFEN","sfenBlack","w","sfenWhite","sections","section","Number","add","invalidRankMap","1","2","9","8","isInvalidRank","isPromotableRank","pawnExists","_board","_color","_blackHand","_whiteHand","_hand","capturedPiece","createMove","withPromote","kingSquare","movable","listSquaresByColor","isMovable","isCheck","captured","isPromotable","isPawnDropMate","opt","remove","reduce","isValidEditing","swap","rotate","getSfen","nextMoveNumber","resetBySFEN","hands","parseSFEN","copyFrom","RecordMetadata","customMetadata","specialMoveToDisplayStringMap","resign","interrupt","draw","repetitionDraw","mate","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","RecordEntryImpl","activeBranch","next","branch","totalElapsedMs","getDisplayText","displayMoveText","elapsed","millisecondsToMSS","totalElapsed","millisecondsToHMMSS","updateTotalElapsedMs","stack","pop","_metadata","_initialPosition","_position","initialPosition","_first","START","_current","moves","movesBefore","_movesBefore","unshift","len","undoMove","doMove","goBack","goForward","_forEach","entry","isFirstBranch","first","lastBranch","LineType","metadataKeyMap","先手","後手","開始日時","START_DATETIME","終了日時","END_DATETIME","対局日","棋戦","TOURNAMENT","戦型","STRATEGY","表題","TITLE","持ち時間","TIME_LIMIT","消費時間","TIME_SPENT","場所","PLACE","掲載","POSTED_ON","備考","NOTE","先手省略名","BLACK_SHORT_NAME","後手省略名","WHITE_SHORT_NAME","作品番号","OPUS_NO","作品名","OPUS_NAME","作者","AUTHOR","発表誌","PUBLISHED_ON","発表年月","PUBLISHED_AT","出典","SOURCE","手数","LENGTH","完全性","INTEGRITY","分類","CATEGORY","受賞","AWARD","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","tournament","strategy","title","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","linePatterns","prefix","HANDICAP","removePrefix","isPosition","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","parseLine","line","end","indexOf","pattern","matched","begin","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","投了","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","反則勝ち","FOUL_WIN","反則負け","入玉勝ち","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","timeResult","exec","minutes","seconds","parseInt","readMove","num","toStr","pieceTypeStr","promStr","fromStr","lines","inMoveSection","parsed","standardKey","setCustomMetadata","console","log","resetAllBranchSelection","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","standardMetadataKeys","customMetadataKeys","getCustomMetadata","formatPosition","formatHand","formatMove","hasBranch","stringifyUSIInfoSender","MenuEvent","STORAGE_KEY","webAPI","getRecordPathFromProcArg","updateMenuState","showSelectFileDialog","loadAppSetting","localStorage","getItem","APP_SETTING","setItem","loadResearchSetting","RESEARCH_SETTING","loadGameSetting","GAME_SETTING","loadUSIEngineSetting","saveUSIEngineSetting","showSelectUSIEngineDialog","getUSIEngineInfo","sendUSISetOption","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","getWindowObject","isNative","electronShogiAPI","getAPI","jsonWithIndent","gameSetting","api","event","SAVE_RECORD_AS","INIT_POSITION_STANDARD","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","validateGameSetting","render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_ResearchDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_Bussy","_component_Message","_component_ErrorMessage","_openBlock","_createElementBlock","_Fragment","_createVNode","class","dialogVisibilities","_createBlock","_createCommentVNode","research","usiEngineSetting","paste","processing","hasErrors","_hoisted_1","_hoisted_2","ref","_component_BoardPane","_component_RecordPane","_component_InformationPane","_createElementVNode","maxSize","boardPaneMaxSize","size","bottomPaneSize","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_Icon","_component_Board","layout","allowMove","allowEdit","blackPlayerTimeMs","blackPlayerByoyomi","whitePlayerTimeMs","whitePlayerByoyomi","onMove","onEdit","_withCtx","controlStates","onClick","onGame","icon","onStop","onResign","onResearch","onEndResearch","startEditPosition","onStartEditPosition","endEditPosition","onEndEditPosition","initPosition","onChangeTurn","onInitPositionStandard","onInitPositionTsumeShogi","onOpenAppSettings","disabled","appSettings","onOpenEngineSettings","engineSettings","onFlip","onPaste","onCopy","onRemoveAfter","_","_normalizeStyle","$event","clickFrame","_normalizeClass","active","_toDisplayString","blackPlayerTimeSeverity","blackPlayerTimeText","whitePlayerTimeSeverity","whitePlayerTimeText","_renderList","clickSquare","onContextmenu","clickSquareR","clickHand","clickPromote","clickNotPromote","_renderSlot","$slots","RectSize","defineComponent","props","String","required","Boolean","emits","reactive","reservedMove","resetState","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","stopPropagation","preventDefault","layoutBuilder","computed","builder","preload","build","formatTime","secondsToHMMSS","timeSeverity","rem","__exports__","Icon","iconSourceMap","BUSSY","ERROR","INFO","STOP","END","EDIT","CHECK","SWAP","SWAP_H","SETTINGS","ENGINE_SETTINGS","FLIP","PASTE","COPY","DELETE","BRAIN","CHART","ARROW_DROP","FIRST","BACK","NEXT","LAST","components","blackByoyomi","whiteByoyomi","_component_Record","operational","isRecordOperational","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","changeNumber","changeBranch","branches","moveList","branchList","beginPosSelected","elem","displayText","branchBegin","minWidth","MAX_SAFE_INTEGER","_withScopeId","_pushScopeId","_popScopeId","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","enabled","activeTab","changeSelect","contentSize","readonly","textarea","onMounted","addEventListener","_component_EngineAnalyticsElement","infos","blackPlayer","elementHeight","whitePlayer","researcher","_createStaticVNode","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","currentMoveText","nps","nodes","hashfull","toFixed","iterates","iterate","multiPV","depth","selectiveDepth","lowerBound","upperBound","USIPlayerMonitor","EngineAnalyticsElement","chart","canvasRef","buildDataset","borderColor","dataPoints","label","showLine","verticalLine","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","scales","displayWidth","round","canvas","getContext","Chart","datasets","animation","duration","maintainAspectRatio","events","onUnmounted","destroy","resize","headerHeight","minHeight","RecordComment","EngineAnalytics","EvaluationChart","BoardPane","RecordPane","InformationPane","windowSize","topPaneHeight","topPane","updateSize","innerWidth","innerHeight","topPaneResizeObserver","ResizeObserver","entries","contentRect","observe","removeEventListener","minInformationPaneHeight","INVISIBLE","minInformationHeight","informationHeaderHeight","minRecordWidth","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","for","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","defaultValues","players","player","onSwapColor","hours","checked","onStart","onCancel","showModalDialog","dialog","showModal","getFormItemByID","document","getElementById","blackPlayerSelect","whitePlayerSelect","engineSetting","buildPlayerSetting","playerURI","getEngine","floor","engineList","defaultValue","engineSelect","hasEngine","_component_USIEngineOptionDialog","openOptions","saveAndClose","cancel","optionDialog","latestEngineSetting","onOk","optionOk","optionCancel","defaultName","inputId","selectFile","vars","v","sendOption","rquired","engineNameInput","latest","aIsUSI","bIsUSI","map","USIEngineOptionDialog","addEngine","removeEngine","updateEngine","boardLayouts","readInputAsNumber","input","HITOMOJI_GOTHIC","readText","onClose","errors","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","StandardLayout","GameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","Bussy","Message","ErrorMessage","body","getElementsByTagName","dataTransfer","files","moveNumber","register","registerables","setupIPC","Promise","allSettled","then","catch","finally","createApp","App","use","mount","ms","secondsToMSS","h","padStart","preloadedImages","img","createElement","formatPV","pv","seldepth","multipv","lowerbound","upperbound","currmove","currentMove","hashfullPerMill","string","blackPosition","whitePosition","researchPosition"],"mappings":"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","file":"js/index.a3bd35b1.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import {\n  endGame,\n  endResearch,\n  openRecord,\n  saveAppSetting,\n  saveGameSetting,\n  saveRecord,\n  saveResearchSetting,\n  showOpenRecordDialog,\n  showSaveRecordDialog,\n  startGame,\n  startResearch,\n  stopUSI,\n  updateUSIPosition,\n} from \"@/ipc/renderer\";\nimport {\n  Color,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n  specialMoveToDisplayString,\n} from \"@/shogi\";\nimport { exportKakinoki, importKakinoki } from \"@/shogi\";\nimport { InjectionKey, watch } from \"vue\";\nimport {\n  CommitOptions,\n  createStore,\n  DispatchOptions,\n  useStore as baseUseStore,\n} from \"vuex\";\nimport iconv from \"iconv-lite\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { InfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { RecordEntryCustomData } from \"./record\";\nimport { GameState } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mutation } from \"./mutation\";\nimport { Action } from \"./action\";\nimport { BussyState, bussyState } from \"./bussy\";\nimport { USIState, usiState } from \"./usi\";\nimport { Mode } from \"./mode\";\nimport { messageState, MessageState } from \"./message\";\nimport { errorState, ErrorState } from \"./error\";\nimport * as uri from \"@/uri\";\n\nexport { Mutation } from \"./mutation\";\nexport { Action } from \"./action\";\n\nexport type State = {\n  appSetting: AppSetting;\n  recordFilePath?: string;\n  record: Record;\n  mode: Mode;\n  usiSessionID: number;\n  game: GameState;\n  beep5sHandler?: AudioEventHandler;\n};\n\ninterface Store {\n  readonly state: State & {\n    readonly usi: USIState;\n    readonly message: MessageState;\n    readonly error: ErrorState;\n    readonly bussy: BussyState;\n  };\n  readonly getters: {\n    readonly isMovableByUser: boolean;\n    readonly hasMessage: boolean;\n    readonly message: string;\n    readonly hasError: boolean;\n    readonly isBussy: boolean;\n  };\n  dispatch(\n    type: Action,\n    payload?: any,\n    options?: DispatchOptions\n  ): Promise<any>;\n  commit(type: Mutation, payload?: any, options?: CommitOptions): void;\n}\n\nexport const key: InjectionKey<Store> = Symbol();\n\nexport function useStore(): Store {\n  return baseUseStore(key);\n}\n\nexport const store = createStore<State>({\n  state: {\n    appSetting: defaultAppSetting(),\n    record: new Record(),\n    mode: Mode.NORMAL,\n    usiSessionID: 0,\n    game: new GameState(),\n  },\n  modules: {\n    usi: usiState,\n    message: messageState,\n    error: errorState,\n    bussy: bussyState,\n  },\n  getters: {\n    isMovableByUser(state): boolean {\n      switch (state.mode) {\n        case Mode.NORMAL:\n        case Mode.RESEARCH:\n          return true;\n        case Mode.GAME:\n          return (\n            (state.record.position.color === Color.BLACK\n              ? state.game.setting.black.uri\n              : state.game.setting.white.uri) === uri.ES_HUMAN\n          );\n      }\n      return false;\n    },\n  },\n  mutations: {\n    [Mutation.UPDATE_APP_SETTING](state, update: AppSettingUpdate) {\n      state.appSetting = {\n        ...state.appSetting,\n        ...update,\n      };\n    },\n    [Mutation.FLIP_BOARD](state) {\n      state.appSetting.boardFlipping = !state.appSetting.boardFlipping;\n      saveAppSetting(state.appSetting);\n    },\n    [Mutation.SHOW_PASTE_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.PASTE_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_PASTE_DIALOG](state) {\n      if (state.mode === Mode.PASTE_DIALOG) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.SHOW_GAME_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.GAME_DIALOG;\n      }\n    },\n    [Mutation.SHOW_RESEARCH_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.RESEARCH_DIALOG;\n      }\n    },\n    [Mutation.OPEN_APP_SETTING_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.APP_SETTING_DIALOG;\n      }\n    },\n    [Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG](state) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.USI_ENGINE_SETTING_DIALOG;\n      }\n    },\n    [Mutation.CLOSE_DIALOG](state) {\n      if (\n        state.mode === Mode.USI_ENGINE_SETTING_DIALOG ||\n        state.mode === Mode.APP_SETTING_DIALOG ||\n        state.mode === Mode.GAME_DIALOG ||\n        state.mode === Mode.RESEARCH_DIALOG\n      ) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Mutation.NEW_RECORD](state) {\n      if (state.mode != Mode.NORMAL) {\n        return;\n      }\n      state.record.clear(new Position());\n      state.recordFilePath = undefined;\n    },\n    [Mutation.UPDATE_RECORD_COMMENT](state, comment: string) {\n      state.record.current.comment = comment;\n    },\n    [Mutation.CHANGE_TURN](state) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = state.record.position.clone();\n      position.setColor(reverseColor(position.color));\n      state.record.clear(position);\n    },\n    [Mutation.INITIALIZE_POSITION](\n      state,\n      initialPositionType: InitialPositionType\n    ) {\n      if (state.mode != Mode.POSITION_EDITING) {\n        return;\n      }\n      const position = new Position();\n      position.reset(initialPositionType);\n      state.record.clear(position);\n    },\n    [Mutation.EDIT_POSITION](state, change: PositionChange) {\n      if (state.mode === Mode.POSITION_EDITING) {\n        const position = state.record.position.clone();\n        position.edit(change);\n        state.record.clear(position);\n      }\n    },\n    [Mutation.CHANGE_MOVE_NUMBER](state, number: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.goto(number);\n    },\n    [Mutation.CHANGE_BRANCH](state, index: number) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      if (state.record.current.branchIndex === index) {\n        return;\n      }\n      state.record.switchBranchByIndex(index);\n    },\n    [Mutation.REMOVE_RECORD_AFTER](state) {\n      if (state.mode !== Mode.NORMAL && state.mode !== Mode.RESEARCH) {\n        return;\n      }\n      state.record.removeAfter();\n    },\n    [Mutation.DO_MOVE](state, move: Move) {\n      state.record.append(move, {\n        ignoreValidation: true,\n      });\n      state.record.current.setElapsedMs(state.game.elapsedMs);\n      playPieceBeat(state.appSetting.pieceVolume);\n    },\n    [Mutation.CLEAR_GAME_TIMER](state) {\n      state.game.clearTimer();\n      if (state.beep5sHandler) {\n        state.beep5sHandler.stop();\n        state.beep5sHandler = undefined;\n      }\n    },\n  },\n  actions: {\n    async [Action.UPDATE_APP_SETTING](\n      { commit, state },\n      update: AppSettingUpdate\n    ) {\n      await saveAppSetting({\n        ...state.appSetting,\n        ...update,\n      });\n      commit(Mutation.UPDATE_APP_SETTING, update);\n    },\n    async [Action.OPEN_RECORD]({ commit, state }, path) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        if (!path) {\n          path = await showOpenRecordDialog();\n          if (!path) {\n            return false;\n          }\n        }\n        const data = await openRecord(path);\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = path.match(/\\.kif$/)\n            ? iconv.decode(data, \"Shift_JIS\")\n            : data.toString();\n          const recordOrError = importKakinoki(str);\n          if (recordOrError instanceof Record) {\n            state.recordFilePath = path;\n            state.record = recordOrError;\n          } else {\n            commit(Mutation.PUSH_ERROR, recordOrError);\n          }\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の読み込み中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.SAVE_RECORD](\n      { commit, state },\n      options: {\n        overwrite: boolean;\n      }\n    ) {\n      if (state.mode !== Mode.NORMAL) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        let path = state.recordFilePath;\n        if (!options?.overwrite || !path) {\n          const defaultPath = defaultRecordFileName(state.record);\n          path = await showSaveRecordDialog(defaultPath);\n          if (!path) {\n            return false;\n          }\n        }\n        if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n          const str = exportKakinoki(state.record, {\n            returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n          });\n          const data = path.match(/\\.kif$/)\n            ? iconv.encode(str, \"Shift_JIS\")\n            : Buffer.from(str);\n          await saveRecord(path, data);\n          state.recordFilePath = path;\n          return true;\n        } else {\n          commit(Mutation.PUSH_ERROR, \"不明なファイル形式: \" + path);\n          return false;\n        }\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"棋譜の保存中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.COPY_RECORD]({ state }) {\n      const str = exportKakinoki(state.record, {\n        returnCode: \"\\r\\n\", // FIXME: OS の標準改行コードを検出する。\n      });\n      navigator.clipboard.writeText(str);\n    },\n    [Action.PASTE_RECORD]({ state, commit }, data: string) {\n      if (state.mode !== Mode.NORMAL) {\n        return;\n      }\n      const recordOrError = importKakinoki(data);\n      if (recordOrError instanceof Record) {\n        state.recordFilePath = undefined;\n        state.record = recordOrError;\n      } else {\n        commit(Mutation.PUSH_ERROR, recordOrError);\n      }\n    },\n    [Action.START_POSITION_EDITING]({ state }) {\n      if (state.mode === Mode.NORMAL) {\n        state.mode = Mode.POSITION_EDITING;\n        state.record.clear(state.record.position);\n        state.recordFilePath = undefined;\n      }\n    },\n    [Action.END_POSITION_EDITING]({ state }) {\n      // FIXME: 局面整合性チェック\n      if (state.mode === Mode.POSITION_EDITING) {\n        state.mode = Mode.NORMAL;\n      }\n    },\n    [Action.UPDATE_USI_INFO](\n      { state, commit },\n      payload: {\n        sessionID: number;\n        usi: string;\n        sender: USIInfoSender;\n        name: string;\n        info: InfoCommand;\n      }\n    ) {\n      if (\n        state.usiSessionID !== payload.sessionID ||\n        state.record.usi != payload.usi\n      ) {\n        return;\n      }\n      commit(Mutation.UPDATE_USI_INFO, {\n        sessionID: payload.sessionID,\n        position: state.record.position,\n        sender: payload.sender,\n        name: payload.name,\n        info: payload.info,\n      });\n      const entryData = new RecordEntryCustomData(\n        state.record.current.customData\n      );\n      entryData.updateUSIInfo(\n        state.record.position.color,\n        payload.sender,\n        payload.info\n      );\n      state.record.current.customData = entryData.stringify();\n    },\n    async [Action.START_RESEARCH](\n      { commit, state },\n      researchSetting: ResearchSetting\n    ) {\n      if (state.mode !== Mode.RESEARCH_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveResearchSetting(researchSetting);\n        state.usiSessionID += 1;\n        await startResearch(researchSetting, state.usiSessionID);\n        state.mode = Mode.RESEARCH;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_RESEARCH]({ commit, state }) {\n      if (state.mode !== Mode.RESEARCH) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endResearch();\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"検討の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.START_GAME]({ commit, state }, setting: GameSetting) {\n      if (state.mode !== Mode.GAME_DIALOG) {\n        return false;\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await saveGameSetting(setting);\n        if (setting.startPosition) {\n          const position = new Position();\n          position.reset(setting.startPosition);\n          state.record.clear(position);\n          state.recordFilePath = undefined;\n        }\n        state.usiSessionID += 1;\n        await startGame(setting, state.usiSessionID);\n        state.game.setup(setting);\n        state.mode = Mode.GAME;\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.BLACK_NAME,\n          setting.black.name\n        );\n        state.record.metadata.setStandardMetadata(\n          RecordMetadataKey.WHITE_NAME,\n          setting.white.name\n        );\n        if (setting.humanIsFront) {\n          let flip = state.appSetting.boardFlipping;\n          if (\n            setting.black.uri === uri.ES_HUMAN &&\n            setting.white.uri !== uri.ES_HUMAN\n          ) {\n            flip = false;\n          } else if (\n            setting.black.uri !== uri.ES_HUMAN &&\n            setting.white.uri === uri.ES_HUMAN\n          ) {\n            flip = true;\n          }\n          if (flip !== state.appSetting.boardFlipping) {\n            commit(Mutation.FLIP_BOARD);\n          }\n        }\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の初期化中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    async [Action.STOP_GAME]({ commit, state }, specialMove?: SpecialMove) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (specialMove) {\n        commit(\n          Mutation.PUSH_MESSAGE,\n          `対局終了（${specialMoveToDisplayString(specialMove)})`\n        );\n      }\n      commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await endGame(state.record.usi, specialMove);\n        state.record.append(specialMove || SpecialMove.INTERRUPT);\n        state.record.current.setElapsedMs(state.game.elapsedMs);\n        state.mode = Mode.NORMAL;\n        return true;\n      } catch (e) {\n        commit(Mutation.PUSH_ERROR, \"対局の終了中にエラーが出ました: \" + e);\n        return false;\n      } finally {\n        commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    },\n    [Action.RESIGN_BY_USER]({ state, getters, dispatch }) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (!getters.isMovableByUser) {\n        return;\n      }\n      return dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n    },\n    [Action.DO_MOVE_BY_USER]({ commit, state, getters }, move: Move) {\n      if (!getters.isMovableByUser) {\n        return false;\n      }\n      if (state.mode === Mode.GAME) {\n        state.game.increment(state.record.position.color);\n      }\n      commit(Mutation.DO_MOVE, move);\n      return true;\n    },\n    [Action.DO_MOVE_BY_USI_ENGINE](\n      { commit, dispatch, state },\n      payload: {\n        sessionID: number;\n        usi: string;\n        color: Color;\n        sfen: string;\n      }\n    ) {\n      if (state.mode !== Mode.GAME) {\n        return false;\n      }\n      if (state.usiSessionID !== payload.sessionID) {\n        return false;\n      }\n      if (state.record.usi !== payload.usi) {\n        return false;\n      }\n      if (payload.color !== state.record.position.color) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"手番ではないエンジンから指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      if (payload.sfen === \"resign\") {\n        dispatch(Action.STOP_GAME, SpecialMove.RESIGN);\n        return true;\n      }\n      if (payload.sfen === \"win\") {\n        // TODO: 勝ち宣言が正当かどうかをチェックする。\n        dispatch(Action.STOP_GAME, SpecialMove.ENTERING_OF_KING);\n        return true;\n      }\n      const move = state.record.position.createMoveBySFEN(payload.sfen);\n      if (!move || !state.record.position.isValidMove(move)) {\n        commit(\n          Mutation.PUSH_ERROR,\n          \"エンジンから不明な指し手を受信しました:\" + payload.sfen\n        );\n        dispatch(Action.STOP_GAME, SpecialMove.FOUL_LOSE);\n        return false;\n      }\n      state.game.increment(state.record.position.color);\n      commit(Mutation.DO_MOVE, move);\n      return true;\n    },\n    [Action.RESET_GAME_TIMER]({ dispatch, getters, state }) {\n      const color = state.record.position.color;\n      state.game.startTimer(color, {\n        timeout: () => {\n          if (\n            getters.isMovableByUser ||\n            state.game.setting.enableEngineTimeout\n          ) {\n            dispatch(Action.STOP_GAME, SpecialMove.TIMEOUT);\n          } else {\n            stopUSI(color);\n          }\n        },\n        onBeepShort: () => {\n          dispatch(Action.BEEP_SHORT);\n        },\n        onBeepUnlimited: () => {\n          dispatch(Action.BEEP_UNLIMITED);\n        },\n      });\n    },\n    [Action.BEEP_UNLIMITED]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      state.beep5sHandler = beepUnlimited({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n    [Action.BEEP_SHORT]({ state, getters }) {\n      if (\n        state.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n        !getters.isMovableByUser\n      ) {\n        return;\n      }\n      if (state.beep5sHandler) {\n        return;\n      }\n      beepShort({\n        frequency: state.appSetting.clockPitch,\n        volume: state.appSetting.clockVolume,\n      });\n    },\n  },\n});\n\nwatch(\n  [() => store.state.mode, () => store.state.record.position],\n  () => {\n    store.commit(Mutation.CLEAR_GAME_TIMER);\n    if (store.state.mode === Mode.GAME) {\n      store.dispatch(Action.RESET_GAME_TIMER);\n    }\n    if (store.state.mode === Mode.GAME || store.state.mode === Mode.RESEARCH) {\n      updateUSIPosition(\n        store.state.record.usi,\n        store.state.game.setting,\n        store.state.game.blackTimeMs,\n        store.state.game.whiteTimeMs\n      );\n    }\n  },\n  { deep: true }\n);\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Bussy.vue?vue&type=style&index=0&id=9afd096a&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EngineAnalyticsElement.vue?vue&type=style&index=0&id=61f1257a&scoped=true&lang=css\"","import { BoardLayoutType } from \"@/components/primitive/BoardLayout\";\n\nexport enum InformationTab {\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  CHART = \"chart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  boardLayout: BoardLayoutType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  informationTab: InformationTab;\n};\n\nexport type AppSettingUpdate = {\n  boardLayout?: BoardLayoutType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  informationTab?: InformationTab;\n};\n\nexport function defaultAppSetting(): AppSetting {\n  return {\n    boardLayout: BoardLayoutType.HITOMOJI,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    informationTab: InformationTab.COMMENT,\n  };\n}\n","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type BussyState = {\n  count: number;\n};\n\nexport const bussyState: Module<BussyState, State> = {\n  state: {\n    count: 0,\n  },\n  getters: {\n    isBussy(state): boolean {\n      return state.count !== 0;\n    },\n  },\n  mutations: {\n    [Mutation.RETAIN_BUSSY_STATE](state) {\n      state.count += 1;\n    },\n    [Mutation.RELEASE_BUSSY_STATE](state) {\n      state.count -= 1;\n    },\n  },\n};\n","import { handPieceTypes, ImmutableHand, PieceType } from \"@/shogi\";\nimport {\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum BoardLayoutType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n}\n\ntype LayoutTemplate = {\n  images: {\n    board: string;\n    black: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n    white: {\n      pawn: string;\n      lance: string;\n      knight: string;\n      silver: string;\n      gold: string;\n      bishop: string;\n      rook: string;\n      king: string;\n      king2: string;\n      promPawn: string;\n      promLance: string;\n      promKnight: string;\n      promSilver: string;\n      horse: string;\n      dragon: string;\n    };\n  };\n  frame: {\n    width: number;\n    height: number;\n  };\n  board: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    squreWidth: number;\n    squreHeight: number;\n    leftSquarePadding: number;\n    topSquarePadding: number;\n    leftPiecePadding: number;\n    topPiecePadding: number;\n    highlight: {\n      selected: { [key: string]: string };\n      lastMove: { [key: string]: string };\n    };\n  };\n  piece: {\n    width: number;\n    height: number;\n  };\n  hand: {\n    color: string;\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    highlight: {\n      selected: { [key: string]: string };\n    };\n  };\n  turn: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  playerName: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  clock: {\n    black: {\n      x: number;\n      y: number;\n    };\n    white: {\n      x: number;\n      y: number;\n    };\n    width: number;\n    height: number;\n    fontSize: number;\n  };\n  control: {\n    left: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n    right: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      fontSize: number;\n    };\n  };\n};\n\nconst templateCommon = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    // original image size: 878x960\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n      lastMove: { \"background-color\": \"#00ddff\", opacity: \"0.5\" },\n    },\n  },\n  piece: {\n    // original image size: 88x93\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    color: \"#8b4513\",\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst templates: { [key: string]: LayoutTemplate } = {\n  hitomoji: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji/black_pawn.png\",\n        lance: \"./piece/hitomoji/black_lance.png\",\n        knight: \"./piece/hitomoji/black_knight.png\",\n        silver: \"./piece/hitomoji/black_silver.png\",\n        gold: \"./piece/hitomoji/black_gold.png\",\n        bishop: \"./piece/hitomoji/black_bishop.png\",\n        rook: \"./piece/hitomoji/black_rook.png\",\n        king: \"./piece/hitomoji/black_king.png\",\n        king2: \"./piece/hitomoji/black_king2.png\",\n        promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n        horse: \"./piece/hitomoji/black_horse.png\",\n        dragon: \"./piece/hitomoji/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji/white_pawn.png\",\n        lance: \"./piece/hitomoji/white_lance.png\",\n        knight: \"./piece/hitomoji/white_knight.png\",\n        silver: \"./piece/hitomoji/white_silver.png\",\n        gold: \"./piece/hitomoji/white_gold.png\",\n        bishop: \"./piece/hitomoji/white_bishop.png\",\n        rook: \"./piece/hitomoji/white_rook.png\",\n        king: \"./piece/hitomoji/white_king.png\",\n        king2: \"./piece/hitomoji/white_king2.png\",\n        promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n        horse: \"./piece/hitomoji/white_horse.png\",\n        dragon: \"./piece/hitomoji/white_dragon.png\",\n      },\n    },\n  },\n  hitomojiGothic: {\n    ...templateCommon,\n    images: {\n      board: \"./board/default.png\",\n      black: {\n        pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/black_lance.png\",\n        knight: \"./piece/hitomoji_gothic/black_knight.png\",\n        silver: \"./piece/hitomoji_gothic/black_silver.png\",\n        gold: \"./piece/hitomoji_gothic/black_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/black_rook.png\",\n        king: \"./piece/hitomoji_gothic/black_king.png\",\n        king2: \"./piece/hitomoji_gothic/black_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/black_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n      },\n      white: {\n        pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n        lance: \"./piece/hitomoji_gothic/white_lance.png\",\n        knight: \"./piece/hitomoji_gothic/white_knight.png\",\n        silver: \"./piece/hitomoji_gothic/white_silver.png\",\n        gold: \"./piece/hitomoji_gothic/white_gold.png\",\n        bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n        rook: \"./piece/hitomoji_gothic/white_rook.png\",\n        king: \"./piece/hitomoji_gothic/white_king.png\",\n        king2: \"./piece/hitomoji_gothic/white_king2.png\",\n        promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n        promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n        promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n        promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n        horse: \"./piece/hitomoji_gothic/white_horse.png\",\n        dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n      },\n    },\n  },\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n};\n\ntype BoardLayout = {\n  imagePath: string;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: string;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nexport default class LayoutBuilder {\n  private template: LayoutTemplate;\n\n  constructor(layoutType: BoardLayoutType) {\n    this.template =\n      templates[layoutType] || templates[BoardLayoutType.HITOMOJI];\n  }\n\n  preload(): void {\n    preloadImage(this.template.images.board);\n    Object.values(this.template.images.black).forEach(preloadImage);\n    Object.values(this.template.images.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / this.template.frame.width;\n    if (this.template.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / this.template.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      return {\n        style: {\n          height: this.template.frame.height * ratio + \"px\",\n          width: this.template.frame.width * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const imagePath = this.template.images.board;\n      const x = this.template.board.x * ratio;\n      const y = this.template.board.y * ratio;\n      const width = this.template.board.width * ratio;\n      const height = this.template.board.height * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        imagePath,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.template.images[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (this.template.board.leftPiecePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topPiecePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.piece.width * ratio;\n        const height = this.template.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (this.template.board.leftSquarePadding +\n            this.template.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (this.template.board.topSquarePadding +\n            this.template.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = this.template.board.squreWidth * ratio;\n        const height = this.template.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.lastMove,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const standX = this.template.hand[displayColor].x * ratio;\n      const standY = this.template.hand[displayColor].y * ratio;\n      const standWidth = this.template.hand.width * ratio;\n      const standHeight = this.template.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": this.template.hand.color,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (this.template.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (this.template.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = this.template.piece.width * ratio;\n        const pieceHeight = this.template.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.template.images[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...this.template.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.template.images[color][promoted.type];\n      const notPromoteImagePath = this.template.images[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (this.template.board.leftSquarePadding +\n          this.template.board.squreWidth * (square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (this.template.board.topSquarePadding +\n          this.template.board.squreHeight * square.y) *\n          ratio;\n      const width = this.template.board.squreWidth * 2 * ratio;\n      const height = this.template.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left: this.template.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: this.template.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: this.template.turn.width * ratio - borderWidth + \"px\",\n          height: this.template.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": this.template.turn.fontSize * ratio + \"px\",\n          \"border-radius\": this.template.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.playerName[displayColor].x * ratio + \"px\",\n          top: this.template.playerName[displayColor].y * ratio + \"px\",\n          width: this.template.playerName.width * ratio + \"px\",\n          height: this.template.playerName.height * ratio + \"px\",\n          \"font-size\": this.template.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: this.template.clock[displayColor].x * ratio + \"px\",\n          top: this.template.clock[displayColor].y * ratio + \"px\",\n          width: this.template.clock.width * ratio + \"px\",\n          height: this.template.clock.height * ratio + \"px\",\n          \"font-size\": this.template.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: this.template.control.left.x * ratio + \"px\",\n            top: this.template.control.left.y * ratio + \"px\",\n            width: this.template.control.left.width * ratio + \"px\",\n            height: this.template.control.left.height * ratio + \"px\",\n            \"font-size\": this.template.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: this.template.control.right.x * ratio + \"px\",\n            top: this.template.control.right.y * ratio + \"px\",\n            width: this.template.control.right.width * ratio + \"px\",\n            height: this.template.control.right.height * ratio + \"px\",\n            \"font-size\": this.template.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","import { defaultGameSetting, GameSetting } from \"@/settings/game\";\nimport { Color } from \"@/shogi\";\n\nexport type PlayerState = {\n  timeMs: number;\n  byoyomi: number;\n};\n\ntype TimerHandlers = {\n  timeout: () => void;\n  onBeepShort: () => void;\n  onBeepUnlimited: () => void;\n};\n\nexport class GameState {\n  private black: PlayerState;\n  private white: PlayerState;\n  private timerHandle: number;\n  private timerStart: Date;\n  private lastTimeMs: number;\n  private _elapsedMs: number;\n  private _setting: GameSetting;\n\n  constructor() {\n    this.black = { timeMs: 0, byoyomi: 0 };\n    this.white = { timeMs: 0, byoyomi: 0 };\n    this.timerHandle = 0;\n    this.timerStart = new Date();\n    this.lastTimeMs = 0;\n    this._elapsedMs = 0;\n    this._setting = defaultGameSetting();\n  }\n\n  get blackTimeMs(): number {\n    return this.black.timeMs;\n  }\n\n  get blackByoyomi(): number {\n    return this.black.byoyomi;\n  }\n\n  get whiteTimeMs(): number {\n    return this.white.timeMs;\n  }\n\n  get whiteByoyomi(): number {\n    return this.white.byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  setup(setting: GameSetting): void {\n    this.black.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.black.byoyomi = setting.timeLimit.byoyomi;\n    this.white.timeMs = setting.timeLimit.timeSeconds * 1e3;\n    this.white.byoyomi = setting.timeLimit.byoyomi;\n    this._setting = setting;\n  }\n\n  private getPlayerState(color: Color): PlayerState {\n    switch (color) {\n      case Color.BLACK:\n        return this.black;\n      case Color.WHITE:\n        return this.white;\n    }\n  }\n\n  startTimer(color: Color, handlers: TimerHandlers): void {\n    const playerState = this.getPlayerState(color);\n    this.timerStart = new Date();\n    this.lastTimeMs = playerState.timeMs;\n    playerState.byoyomi = this.setting.timeLimit.byoyomi;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = playerState.timeMs;\n      const lastByoyomi = playerState.byoyomi;\n      const now = new Date();\n      this._elapsedMs = now.getTime() - this.timerStart.getTime();\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        playerState.timeMs = timeMs;\n      } else {\n        playerState.timeMs = 0;\n        playerState.byoyomi = Math.max(\n          Math.ceil(this.setting.timeLimit.byoyomi + timeMs / 1e3),\n          0\n        );\n      }\n      if (playerState.timeMs === 0 && playerState.byoyomi === 0) {\n        handlers.timeout();\n        return;\n      }\n      const lastTime = Math.ceil(lastTimeMs / 1e3);\n      const time = Math.ceil(playerState.timeMs / 1e3);\n      const byoyomi = playerState.byoyomi;\n      if (time === 0 && (lastTimeMs > 0 || byoyomi !== lastByoyomi)) {\n        if (byoyomi <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (byoyomi <= 10 || byoyomi % 10 === 0) {\n          handlers.onBeepShort();\n        }\n      } else if (!this.setting.timeLimit.byoyomi && time !== lastTime) {\n        if (time <= 5) {\n          handlers.onBeepUnlimited();\n        } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n          handlers.onBeepShort();\n        }\n      }\n    }, 100);\n  }\n\n  increment(color: Color): void {\n    this.getPlayerState(color).timeMs += this.setting.timeLimit.increment * 1e3;\n  }\n\n  clearTimer(): void {\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n    this._elapsedMs = 0;\n  }\n}\n","export type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption\n): string | number | undefined {\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting };\n\n  constructor(json?: string) {\n    this.engines = {};\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      return a.name > b.name ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./USIEngineOptionDialog.vue?vue&type=style&index=0&id=338bd142&scoped=true&lang=css\"","export enum Mutation {\n  UPDATE_APP_SETTING = \"updateAppSetting\",\n  FLIP_BOARD = \"flipBoard\",\n\n  SHOW_PASTE_DIALOG = \"showPasteDialog\",\n  CLOSE_PASTE_DIALOG = \"closePasteDialog\",\n  SHOW_GAME_DIALOG = \"showGameDialog\",\n  SHOW_RESEARCH_DIALOG = \"showResearchDialog\",\n  OPEN_APP_SETTING_DIALOG = \"openAppSettingDialog\",\n  OPEN_USI_ENGINE_MANAGEMENT_DIALOG = \"openUSIEngineManagementDialog\",\n  CLOSE_DIALOG = \"closeDialog\",\n\n  NEW_RECORD = \"newRecord\",\n  UPDATE_RECORD_COMMENT = \"updateRecordComment\",\n\n  CHANGE_TURN = \"changeTurn\",\n  INITIALIZE_POSITION = \"initializePosition\",\n  EDIT_POSITION = \"editPosition\",\n\n  CHANGE_MOVE_NUMBER = \"changeMoveNumber\",\n  CHANGE_BRANCH = \"changeBranch\",\n  REMOVE_RECORD_AFTER = \"removeRecordAfter\",\n\n  DO_MOVE = \"move\",\n  CLEAR_GAME_TIMER = \"clearGameTimer\",\n\n  // usi\n  UPDATE_USI_INFO = \"updateUSIInfo\",\n\n  // message\n  PUSH_MESSAGE = \"pushMessage\",\n  SHIFT_MESSAGE = \"shiftMessage\",\n\n  // error\n  PUSH_ERROR = \"pushError\",\n  CLEAR_ERRORS = \"clearErrors\",\n\n  // bussy\n  RETAIN_BUSSY_STATE = \"retainBussyState\",\n  RELEASE_BUSSY_STATE = \"releaseBussyState\",\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RecordPane.vue?vue&type=style&index=0&id=36298fd3&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./USIEngineManagementDialog.vue?vue&type=style&index=0&id=5c5214f8&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Board.vue?vue&type=style&index=0&id=6ddcd49e&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Message.vue?vue&type=style&index=0&id=0b6b1b72&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InformationPane.vue?vue&type=style&index=0&id=1a4d352f&scoped=true&lang=css\"","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type ErrorState = {\n  queue: Error[];\n};\n\nexport const errorState: Module<ErrorState, State> = {\n  state: {\n    queue: [],\n  },\n  getters: {\n    hasError(state): boolean {\n      return state.queue.length !== 0;\n    },\n  },\n  mutations: {\n    [Mutation.PUSH_ERROR](state, e) {\n      if (e instanceof Error) {\n        state.queue.push(e);\n      } else {\n        state.queue.push(new Error(e));\n      }\n    },\n    [Mutation.CLEAR_ERRORS](state) {\n      state.queue = [];\n    },\n  },\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GameDialog.vue?vue&type=style&index=0&id=3a08c41c&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ErrorMessage.vue?vue&type=style&index=0&id=43fa633e&scoped=true&lang=css\"","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","export enum Mode {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME = \"game\",\n  GAME_DIALOG = \"gameDialog\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  APP_SETTING_DIALOG = \"appSettingDialog\",\n}\n","import { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type MessageState = {\n  queue: string[];\n};\n\nexport const messageState: Module<MessageState, State> = {\n  state: {\n    queue: [],\n  },\n  getters: {\n    hasMessage(state): boolean {\n      return state.queue.length !== 0;\n    },\n    message(state): string {\n      return state.queue[0];\n    },\n  },\n  mutations: {\n    [Mutation.PUSH_MESSAGE](state, message: string) {\n      state.queue.push(message);\n    },\n    [Mutation.SHIFT_MESSAGE](state) {\n      state.queue.shift();\n    },\n  },\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EngineAnalytics.vue?vue&type=style&index=0&id=dbaf3902&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RecordComment.vue?vue&type=style&index=0&id=4f9715e5&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ErrorMessage.vue?vue&type=style&index=1&id=43fa633e&scoped=true&lang=css\"","import { Color } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\n\ntype Evaluation = {\n  blackPlayer?: number;\n  whitePlayer?: number;\n  researcher?: number;\n};\n\nexport const MAX_SCORE = 2000;\n\nexport const MIN_SCORE = -MAX_SCORE;\n\nexport class RecordEntryCustomData {\n  evaluation?: Evaluation;\n\n  constructor(json?: string) {\n    if (json) {\n      const obj = JSON.parse(json);\n      this.evaluation = obj.evaluation;\n    }\n  }\n\n  private updateScore(\n    color: Color,\n    sender: USIInfoSender,\n    score: number\n  ): void {\n    if (!this.evaluation) {\n      this.evaluation = {};\n    }\n    switch (sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        this.evaluation[USIInfoSender.BLACK_PLAYER] = score;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        this.evaluation[USIInfoSender.WHITE_PLAYER] = -score;\n        break;\n      case USIInfoSender.RESEARCHER:\n        this.evaluation[USIInfoSender.RESEARCHER] =\n          color === Color.BLACK ? score : -score;\n        break;\n    }\n  }\n\n  updateUSIInfo(\n    color: Color,\n    sender: USIInfoSender,\n    command: USIInfoCommand\n  ): void {\n    if (command.scoreCP) {\n      this.updateScore(\n        color,\n        sender,\n        Math.min(Math.max(command.scoreCP, MIN_SCORE), MAX_SCORE)\n      );\n    } else if (command.scoreMate) {\n      this.updateScore(\n        color,\n        sender,\n        command.scoreMate >= 0 ? MAX_SCORE : MIN_SCORE\n      );\n    }\n  }\n\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n}\n","export enum Action {\n  UPDATE_APP_SETTING = \"updateAppSetting\",\n\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n\n  UPDATE_USI_INFO = \"updateUsiInfo\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN_BY_USER = \"resign\",\n  DO_MOVE_BY_USER = \"doMoveByUser\",\n  DO_MOVE_BY_USI_ENGINE = \"doMoveByUSIEngine\",\n  RESET_GAME_TIMER = \"resetGameTimer\",\n\n  BEEP_UNLIMITED = \"beepUnlimited\",\n  BEEP_SHORT = \"beepShort\",\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ResearchDialog.vue?vue&type=style&index=0&id=23a86a08&scoped=true&lang=css\"","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { Record, RecordMetadataKey } from \"@/shogi\";\n\nexport function defaultRecordFileName(record: Record): string {\n  const date = record.metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return (\n      date.trim().replaceAll(\" \", \"_\").replaceAll(\"/\", \"\").replaceAll(\":\", \"\") +\n      \".kif\"\n    );\n  }\n  return (\n    new Date()\n      .toLocaleDateString(undefined, {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n      })\n      .replaceAll(\"/\", \"\") + \".kif\"\n  );\n}\n","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  color: Color;\n\n  type: PieceType;\n\n  constructor(color: Color, type: PieceType) {\n    this.type = type;\n    this.color = color;\n  }\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  file: number;\n\n  rank: number;\n\n  constructor(file: number, rank: number) {\n    this.file = file;\n    this.rank = rank;\n  }\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  from: Square | PieceType;\n\n  to: Square;\n\n  promote: boolean;\n\n  color: Color;\n\n  pieceType: PieceType;\n\n  capturedPieceType: PieceType | null;\n\n  constructor(\n    from: Square | PieceType,\n    to: Square,\n    promote: boolean,\n    color: Color,\n    pieceType: PieceType,\n    capturedPieceType: PieceType | null\n  ) {\n    this.from = from;\n    this.to = to;\n    this.promote = promote;\n    this.color = color;\n    this.pieceType = pieceType;\n    this.capturedPieceType = capturedPieceType;\n  }\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += ` (${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isCheck(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isCheck(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSfen(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board: Board;\n  private _color: Color;\n  private _blackHand: Hand;\n  private _whiteHand: Hand;\n\n  constructor() {\n    this._board = new Board();\n    this._color = Color.BLACK;\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n  }\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color);\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isCheck(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isCheck(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isCheck(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    // FIXME: 連続王手の千日手チェック\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSfen(1);\n  }\n\n  getSfen(nextMoveNumber: number): string {\n    let ret = `sfen ${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    this._board.resetBySFEN(sections[1]);\n    this._color = parseSFENColor(sections[2]);\n    const hands = Hand.parseSFEN(sections[3]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length < 5) {\n      return false;\n    }\n    if (sections[0] !== \"sfen\") {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[1])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[2])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[3])) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n","import Position, { DoMoveOption, ImmutablePosition } from \"./position\";\nimport Move from \"./move\";\nimport { Color } from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TITLE = \"title\", // 表題\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport class RecordMetadata {\n  private metadata: Map<RecordMetadataKey, string>;\n  private customMetadata: Map<string, string>;\n\n  constructor() {\n    this.metadata = new Map<RecordMetadataKey, string>();\n    this.customMetadata = new Map<string, string>();\n  }\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.metadata.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.metadata.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    this.metadata.set(key, value);\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.customMetadata.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.customMetadata.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    this.customMetadata.set(key, value);\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface RecordEntry {\n  readonly number: number;\n  readonly prev: RecordEntry | null;\n  readonly next: RecordEntry | null;\n  readonly branch: RecordEntry | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly move: Move | SpecialMove;\n  comment: string;\n  customData: string | undefined;\n  readonly displayMoveText: string;\n  readonly displayText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass RecordEntryImpl implements RecordEntry {\n  public next: RecordEntryImpl | null;\n  public branch: RecordEntryImpl | null;\n  public comment: string;\n  public customData: string | undefined;\n  public elapsedMs: number;\n  public totalElapsedMs: number;\n\n  constructor(\n    public number: number,\n    public prev: RecordEntryImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public move: Move | SpecialMove\n  ) {\n    this.next = null;\n    this.branch = null;\n    this.comment = \"\";\n    this.elapsedMs = 0;\n    this.totalElapsedMs = 0;\n  }\n\n  get displayMoveText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get displayText(): string {\n    let ret = this.displayMoveText;\n    if (this.number !== 0) {\n      const elapsed = millisecondsToMSS(this.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n      ret += ` (${elapsed} / ${totalElapsed})`;\n    }\n    return ret;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport default class Record {\n  private _metadata: RecordMetadata;\n\n  private _initialPosition: ImmutablePosition;\n\n  private _position: Position;\n\n  private _first: RecordEntryImpl;\n\n  private _current: RecordEntryImpl;\n\n  constructor(position?: ImmutablePosition) {\n    this._metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = new RecordEntryImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      SpecialMove.START // move\n    );\n    this._current = this._first;\n  }\n\n  get metadata(): RecordMetadata {\n    return this._metadata;\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): RecordEntry {\n    return this._first;\n  }\n\n  get current(): RecordEntry {\n    return this._current;\n  }\n\n  get moves(): Array<RecordEntry> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<RecordEntry> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<RecordEntryImpl> {\n    const moves = new Array<RecordEntryImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as RecordEntryImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): RecordEntry | null {\n    return this._current.prev ? this._current.prev.next : null;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first.next = null;\n    this._current = this._first;\n  }\n\n  goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as RecordEntryImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this.goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this.goForward()) {\n        break;\n      }\n    }\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((entry) => {\n      entry.activeBranch = entry.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new RecordEntryImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        move // move\n      );\n      this._current = this._current.next;\n      return true;\n    }\n    let p: RecordEntryImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new RecordEntryImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      move // move\n    );\n    lastBranch.branch = this._current;\n    return true;\n  }\n\n  removeAfter(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n  }\n\n  get usi(): string {\n    let ret = \"position \" + this.initialPosition.sfen + \" moves\";\n    this._movesBefore.forEach((entry) => {\n      if (entry.move instanceof Move) {\n        ret += \" \" + entry.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get sfen(): string {\n    return \"position \" + this.position.getSfen(this._current.number + 1);\n  }\n\n  forEach(handler: (entry: RecordEntry) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (entry: RecordEntryImpl) => void): void {\n    let p: RecordEntryImpl | null = this._first;\n    const stack: RecordEntryImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport { SpecialMove } from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手番/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手番/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  let end = line.indexOf(\"#\");\n  if (end === -1) {\n    end = line.length;\n  }\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin, end),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length, end),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line.substring(0, end),\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section || section === \"なし\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          record.metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          record.metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        record.current.comment +=\n          (record.current.comment.length !== 0 ? \"\\n\" : \"\") + parsed.data;\n        break;\n      case LineType.UNKNOWN:\n        console.log(\"skip\", line);\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: RecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"先手番\" + returnCode;\n  } else {\n    ret += \"後手番\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: Record,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((entry) => {\n    if (entry.move) {\n      if (!entry.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + entry.number + \"手\" + returnCode;\n      }\n      if (entry.move instanceof Move) {\n        ret += entry.number + \" \" + formatMove(entry.move);\n      } else {\n        ret += specialMoveToString[entry.move];\n      }\n      const elapsed = millisecondsToMSS(entry.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(entry.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (entry.isFirstBranch && entry.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (entry.comment.length !== 0) {\n      ret +=\n        \"*\" + entry.comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Record.vue?vue&type=style&index=0&id=f15d1ab0&scoped=true&lang=css\"","export enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport function stringifyUSIInfoSender(sender: USIInfoSender): string {\n  switch (sender) {\n    case USIInfoSender.BLACK_PLAYER:\n      return \"先手\";\n    case USIInfoSender.WHITE_PLAYER:\n      return \"後手\";\n    case USIInfoSender.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nexport type InfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./EvaluationChart.vue?vue&type=style&index=0&id=4e9d2ad3&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AppSettingDialog.vue?vue&type=style&index=0&id=162d170a&scoped=true&lang=css\"","export enum MenuEvent {\n  NEW_RECORD = \"newRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  PASTE_RECORD = \"pasteRecord\",\n  REMOVE_RECORD_AFTER = \"remvoeRecordAfter\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_GAME = \"startGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { API } from \"./renderer\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  GAME_SETTING = \"gameSetting\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: API = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Buffer> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async endResearch(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async startGame(): Promise<void> {\n    // Do Nothing\n  },\n  async endGame(): Promise<void> {\n    // Do Nothing\n  },\n  async updateUSIPosition(): Promise<void> {\n    // Do Nothing\n  },\n  async stopUSI(): Promise<void> {\n    // Do Nothing\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n};\n","import { Color } from \"@/shogi\";\nimport { Action, Mutation, State } from \"@/store\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { watch } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { Store } from \"vuex\";\nimport { MenuEvent } from \"@/menu/event\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { USIInfoSender } from \"@/usi/info\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { Mode } from \"@/store/mode\";\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(mode: Mode, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Buffer>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Buffer): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  startResearch(json: string, sessionID: number): Promise<void>;\n  endResearch(): Promise<void>;\n  startGame(json: string, sessionID: number): Promise<void>;\n  endGame(usi: string, specialMove?: SpecialMove): Promise<void>;\n  updateUSIPosition(\n    usi: string,\n    gameSetting: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stopUSI(color: Color): Promise<void>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      color: Color,\n      sfen: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI: API;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n\nfunction getAPI(): API {\n  return getWindowObject().electronShogiAPI || webAPI;\n}\n\nexport async function getRecordPathFromProcArg(): Promise<string> {\n  return await getAPI().getRecordPathFromProcArg();\n}\n\nexport async function showOpenRecordDialog(): Promise<string> {\n  return await getAPI().showOpenRecordDialog();\n}\n\nexport async function openRecord(path: string): Promise<Buffer> {\n  return await getAPI().openRecord(path);\n}\n\nexport async function showSaveRecordDialog(\n  defaultPath: string\n): Promise<string> {\n  return await getAPI().showSaveRecordDialog(defaultPath);\n}\n\nexport async function saveRecord(path: string, data: Buffer): Promise<void> {\n  await getAPI().saveRecord(path, data);\n}\n\nexport async function showSelectFileDialog(): Promise<string> {\n  return await getAPI().showSelectFileDialog();\n}\n\nexport async function loadAppSetting(): Promise<AppSetting> {\n  return JSON.parse(await getAPI().loadAppSetting());\n}\n\nexport async function saveAppSetting(setting: AppSetting): Promise<void> {\n  await getAPI().saveAppSetting(JSON.stringify(setting));\n}\n\nexport async function loadResearchSetting(): Promise<ResearchSetting> {\n  return JSON.parse(await getAPI().loadResearchSetting());\n}\n\nexport async function saveResearchSetting(\n  setting: ResearchSetting\n): Promise<void> {\n  await getAPI().saveResearchSetting(JSON.stringify(setting));\n}\n\nexport async function loadGameSetting(): Promise<GameSetting> {\n  return JSON.parse(await getAPI().loadGameSetting());\n}\n\nexport async function saveGameSetting(setting: GameSetting): Promise<void> {\n  await getAPI().saveGameSetting(JSON.stringify(setting));\n}\n\nexport async function loadUSIEngineSetting(): Promise<USIEngineSettings> {\n  return new USIEngineSettings(await getAPI().loadUSIEngineSetting());\n}\n\nexport async function saveUSIEngineSetting(\n  setting: USIEngineSettings\n): Promise<void> {\n  await getAPI().saveUSIEngineSetting(setting.jsonWithIndent);\n}\n\nexport async function showSelectUSIEngineDialog(): Promise<string> {\n  return await getAPI().showSelectUSIEngineDialog();\n}\n\nexport async function getUSIEngineInfo(\n  path: string\n): Promise<USIEngineSetting> {\n  return JSON.parse(await getAPI().getUSIEngineInfo(path));\n}\n\nexport async function startResearch(\n  researchSetting: ResearchSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startResearch(JSON.stringify(researchSetting), sessionID);\n}\n\nexport async function endResearch(): Promise<void> {\n  await getAPI().endResearch();\n}\n\nexport async function startGame(\n  gameSetting: GameSetting,\n  sessionID: number\n): Promise<void> {\n  await getAPI().startGame(JSON.stringify(gameSetting), sessionID);\n}\n\nexport async function endGame(\n  usi: string,\n  specialMove?: SpecialMove\n): Promise<void> {\n  await getAPI().endGame(usi, specialMove);\n}\n\nexport async function updateUSIPosition(\n  usi: string,\n  gameSetting: GameSetting,\n  blackTimeMs: number,\n  whiteTimeMs: number\n): Promise<void> {\n  await getAPI().updateUSIPosition(\n    usi,\n    JSON.stringify(gameSetting),\n    blackTimeMs,\n    whiteTimeMs\n  );\n}\n\nexport async function stopUSI(color: Color): Promise<void> {\n  await getAPI().stopUSI(color);\n}\n\nexport async function sendUSISetOption(\n  path: string,\n  name: string\n): Promise<void> {\n  await getAPI().sendUSISetOption(path, name);\n}\n\nexport function setup(store: Store<State>): void {\n  const api = getAPI();\n  api.onSendError((e: Error) => {\n    store.commit(Mutation.PUSH_ERROR, e);\n  });\n  api.onMenuEvent((event: MenuEvent) => {\n    if (store.getters.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.commit(Mutation.NEW_RECORD);\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.dispatch(Action.OPEN_RECORD);\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.dispatch(Action.SAVE_RECORD, { overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.dispatch(Action.SAVE_RECORD);\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.dispatch(Action.COPY_RECORD);\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        break;\n      case MenuEvent.REMOVE_RECORD_AFTER:\n        store.commit(Mutation.REMOVE_RECORD_AFTER);\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.dispatch(Action.START_POSITION_EDITING);\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.dispatch(Action.END_POSITION_EDITING);\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.commit(Mutation.CHANGE_TURN);\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.STANDARD\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_RIGHT_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_BISHOP\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_ROOK_LANCE\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_2PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_4PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_6PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.HANDICAP_8PIECES\n        );\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.commit(\n          Mutation.INITIALIZE_POSITION,\n          InitialPositionType.TSUME_SHOGI\n        );\n        break;\n      case MenuEvent.START_GAME:\n        store.commit(Mutation.SHOW_GAME_DIALOG);\n        break;\n      case MenuEvent.STOP_GAME:\n        store.dispatch(Action.STOP_GAME);\n        break;\n      case MenuEvent.RESIGN:\n        store.dispatch(Action.RESIGN_BY_USER);\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.dispatch(Action.STOP_RESEARCH);\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.commit(Mutation.FLIP_BOARD);\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n        break;\n    }\n  });\n  api.onUSIBestMove(\n    (sessionID: number, usi: string, color: Color, sfen: string) => {\n      store.dispatch(Action.DO_MOVE_BY_USI_ENGINE, {\n        sessionID,\n        usi,\n        color,\n        sfen,\n      });\n    }\n  );\n  api.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      store.dispatch(Action.UPDATE_USI_INFO, {\n        sessionID,\n        usi,\n        sender,\n        name,\n        info: JSON.parse(json),\n      });\n    }\n  );\n  watch(\n    () => [store.state.mode, store.getters.isBussy],\n    ([mode, bussy]) => {\n      api.updateMenuState(mode as Mode, bussy as boolean);\n    }\n  );\n  api.updateMenuState(store.state.mode, store.getters.isBussy);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BoardPane.vue?vue&type=style&index=0&id=51f2316b&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PasteDialog.vue?vue&type=style&index=0&id=7a20f62c&scoped=true&lang=css\"","import { InitialPositionType } from \"@/shogi\";\nimport { USIEngineSetting } from \"./usi\";\nimport * as uri from \"@/uri\";\n\nexport type PlayerSetting = {\n  name: string;\n  uri: string;\n  usi?: USIEngineSetting;\n};\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとフィッシャールールは併用できません。\");\n  }\n  return;\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_Bussy = _resolveComponent(\"Bussy\")!\n  const _component_Message = _resolveComponent(\"Message\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.processing)\n      ? (_openBlock(), _createBlock(_component_Bussy, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_Message, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 7 }))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-df1473a6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = {\n  class: \"top-pane\",\n  ref: \"topPane\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_InformationPane = _resolveComponent(\"InformationPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          maxSize: _ctx.boardPaneMaxSize\n        }, null, 8, [\"maxSize\"]),\n        _createVNode(_component_RecordPane, { class: \"top-right-pane\" })\n      ], 512),\n      _createVNode(_component_InformationPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-51f2316b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 中断 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_10 = { class: \"control bottom\" }\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_16 = [\"disabled\"]\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" 棋譜貼り付け \")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" 棋譜コピー \")\nconst _hoisted_19 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n  const _component_Board = _resolveComponent(\"Board\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_Board, {\n      layoutType: _ctx.layout,\n      maxSize: _ctx.maxSize,\n      position: _ctx.position,\n      lastMove: _ctx.lastMove,\n      flip: _ctx.flip,\n      allowMove: _ctx.allowMove,\n      allowEdit: _ctx.allowEdit,\n      blackPlayerName: _ctx.blackPlayerName,\n      whitePlayerName: _ctx.whitePlayerName,\n      blackPlayerTimeMs: _ctx.blackPlayerTimeMs,\n      blackPlayerByoyomi: _ctx.blackPlayerByoyomi,\n      whitePlayerTimeMs: _ctx.whitePlayerTimeMs,\n      whitePlayerByoyomi: _ctx.whitePlayerByoyomi,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"game\"\n                }),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"stop\"\n                }),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"resign\"\n                }),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"research\"\n                }),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"end\"\n                }),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"edit\"\n                }),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"check\"\n                }),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_Icon, {\n                  class: \"icon\",\n                  icon: \"swap\"\n                }),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionStandard && _ctx.onInitPositionStandard(...args)))\n              }, \" 平手 \"))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onInitPositionTsumeShogi && _ctx.onInitPositionTsumeShogi(...args)))\n              }, \" 詰将棋 \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args))),\n            disabled: !_ctx.controlStates.appSettings\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"settings\"\n            }),\n            _hoisted_12\n          ], 8, _hoisted_11),\n          _createElementVNode(\"button\", {\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args))),\n            disabled: !_ctx.controlStates.engineSettings\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"engineSettings\"\n            }),\n            _hoisted_14\n          ], 8, _hoisted_13),\n          _createElementVNode(\"button\", {\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"flip\"\n            }),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args))),\n            disabled: !_ctx.controlStates.paste\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"paste\"\n            }),\n            _hoisted_17\n          ], 8, _hoisted_16),\n          _createElementVNode(\"button\", {\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onCopy && _ctx.onCopy(...args)))\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"copy\"\n            }),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveAfter && _ctx.onRemoveAfter(...args)))\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"delete\"\n            }),\n            _hoisted_19\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"layoutType\", \"maxSize\", \"position\", \"lastMove\", \"flip\", \"allowMove\", \"allowEdit\", \"blackPlayerName\", \"whitePlayerName\", \"blackPlayerTimeMs\", \"blackPlayerByoyomi\", \"whitePlayerTimeMs\", \"whitePlayerByoyomi\", \"onMove\", \"onEdit\"])\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6ddcd49e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = { class: \"player-name-text\" }\nconst _hoisted_3 = { class: \"clock-text\" }\nconst _hoisted_4 = { class: \"player-name-text\" }\nconst _hoisted_5 = { class: \"clock-text\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = [\"src\"]\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"board\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.imagePath\n        }, null, 8, _hoisted_1)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_2, \"▲\" + _toDisplayString(_ctx.blackPlayerName || \"先手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, \"△\" + _toDisplayString(_ctx.whitePlayerName || \"後手\"), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"square\",\n          key: square.id,\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"piece\",\n          key: piece.id,\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_6)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"square\",\n          key: square.id,\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_7))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"piece\",\n            key: piece.id,\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_8)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'black', pointer.type))\n          }, null, 12, _hoisted_9))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"piece\",\n            key: piece.id,\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_10)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"hand-pointer\",\n            key: pointer.id,\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, 'white', pointer.type))\n          }, null, 12, _hoisted_11))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_12)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_13)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","\nimport { PieceType } from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardLayoutType,\n} from \"@/components/primitive/BoardLayout\";\nimport { Square, Piece, Color, Move, ImmutablePosition } from \"@/shogi\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"Board\",\n  props: {\n    layoutType: {\n      type: String as PropType<BoardLayoutType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Move,\n      required: false,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n    },\n    blackPlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerTimeMs: {\n      type: Number,\n      required: false,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n    },\n  },\n  emits: [\"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(props.layoutType);\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() =>\n      layoutBuilder.value.build(\n        props.maxSize.reduce(new RectSize(20, 20)),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      )\n    );\n\n    const formatTime = (timeMs?: number, byoyomi?: number): string => {\n      if (timeMs) {\n        return secondsToHMMSS(Math.ceil(timeMs / 1e3));\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (timeMs?: number, byoyomi?: number) => {\n      if (!timeMs && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (timeMs || 0) / 1e3 + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTimeMs, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTimeMs, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n    };\n  },\n});\n","import { render } from \"./Board.vue?vue&type=template&id=6ddcd49e&scoped=true&ts=true\"\nimport script from \"./Board.vue?vue&type=script&lang=ts\"\nexport * from \"./Board.vue?vue&type=script&lang=ts\"\n\nimport \"./Board.vue?vue&type=style&index=0&id=6ddcd49e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ddcd49e\"]])\n\nexport default __exports__","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  CHART = \"chart\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"Icon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./Icon.vue?vue&type=template&id=150e72bb&ts=true\"\nimport script from \"./Icon.vue?vue&type=script&lang=ts\"\nexport * from \"./Icon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport Board from \"@/components/primitive/Board.vue\";\nimport {\n  InitialPositionType,\n  Move,\n  PositionChange,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport Icon from \"@/components/primitive/Icon.vue\";\nimport { Mode } from \"@/store/mode\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  components: {\n    Board,\n    Icon,\n  },\n  setup() {\n    const store = useStore();\n\n    const onMove = (move: Move) => {\n      store.dispatch(Action.DO_MOVE_BY_USER, move);\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.commit(Mutation.EDIT_POSITION, change);\n    };\n\n    const onGame = () => {\n      store.commit(Mutation.SHOW_GAME_DIALOG);\n    };\n\n    const onStop = () => {\n      store.dispatch(Action.STOP_GAME);\n    };\n\n    const onResign = () => {\n      store.dispatch(Action.RESIGN_BY_USER);\n    };\n\n    const onResearch = () => {\n      store.commit(Mutation.SHOW_RESEARCH_DIALOG);\n    };\n\n    const onEndResearch = () => {\n      store.dispatch(Action.STOP_RESEARCH);\n    };\n\n    const onStartEditPosition = () => {\n      store.dispatch(Action.START_POSITION_EDITING);\n    };\n\n    const onEndEditPosition = () => {\n      store.dispatch(Action.END_POSITION_EDITING);\n    };\n\n    const onInitPositionStandard = () => {\n      store.commit(Mutation.INITIALIZE_POSITION, InitialPositionType.STANDARD);\n    };\n\n    const onInitPositionTsumeShogi = () => {\n      store.commit(\n        Mutation.INITIALIZE_POSITION,\n        InitialPositionType.TSUME_SHOGI\n      );\n    };\n\n    const onChangeTurn = () => {\n      store.commit(Mutation.CHANGE_TURN);\n    };\n\n    const onOpenAppSettings = () => {\n      store.commit(Mutation.OPEN_APP_SETTING_DIALOG);\n    };\n\n    const onOpenEngineSettings = () => {\n      store.commit(Mutation.OPEN_USI_ENGINE_MANAGEMENT_DIALOG);\n    };\n\n    const onFlip = () => {\n      store.commit(Mutation.FLIP_BOARD);\n    };\n\n    const onPaste = () => {\n      store.commit(Mutation.SHOW_PASTE_DIALOG);\n    };\n\n    const onCopy = () => {\n      store.dispatch(Action.COPY_RECORD);\n    };\n\n    const onRemoveAfter = () => {\n      store.commit(Mutation.REMOVE_RECORD_AFTER);\n    };\n\n    const allowEdit = computed(\n      () => store.state.mode === Mode.POSITION_EDITING\n    );\n\n    const allowMove = computed(() => store.getters.isMovableByUser);\n\n    const position = computed(() => store.state.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.state.record.current.move;\n      return move instanceof Move ? move : null;\n    });\n\n    const layout = computed(() => store.state.appSetting.boardLayout);\n\n    const flip = computed(() => store.state.appSetting.boardFlipping);\n\n    const blackPlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.state.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const blackPlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.blackTimeMs : undefined\n    );\n    const blackPlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.blackByoyomi : undefined\n    );\n    const whitePlayerTimeMs = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.whiteTimeMs : undefined\n    );\n    const whitePlayerByoyomi = computed(() =>\n      store.state.mode === Mode.GAME ? store.state.game.whiteByoyomi : undefined\n    );\n\n    const controlStates = computed(() => {\n      return {\n        game: store.state.mode === Mode.NORMAL,\n        stop: store.state.mode === Mode.GAME,\n        resign: store.state.mode === Mode.GAME && store.getters.isMovableByUser,\n        research: store.state.mode === Mode.NORMAL,\n        endResearch: store.state.mode === Mode.RESEARCH,\n        startEditPosition: store.state.mode === Mode.NORMAL,\n        endEditPosition: store.state.mode === Mode.POSITION_EDITING,\n        initPosition: store.state.mode === Mode.POSITION_EDITING,\n        paste: store.state.mode === Mode.NORMAL,\n        appSettings: store.state.mode === Mode.NORMAL,\n        engineSettings: store.state.mode === Mode.NORMAL,\n      };\n    });\n\n    return {\n      layout,\n      position,\n      lastMove,\n      flip,\n      blackPlayerName,\n      whitePlayerName,\n      blackPlayerTimeMs,\n      blackPlayerByoyomi,\n      whitePlayerTimeMs,\n      whitePlayerByoyomi,\n      controlStates,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPositionStandard,\n      onInitPositionTsumeShogi,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onPaste,\n      onCopy,\n      onRemoveAfter,\n      allowEdit,\n      allowMove,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=51f2316b&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=51f2316b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-51f2316b\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Record = _resolveComponent(\"Record\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_Record, {\n      class: \"record\",\n      record: _ctx.record,\n      operational: _ctx.isRecordOperational,\n      onGoBegin: _ctx.goBegin,\n      onGoBack: _ctx.goBack,\n      onGoForward: _ctx.goForward,\n      onGoEnd: _ctx.goEnd,\n      onSelectMove: _ctx.selectMove,\n      onSelectBranch: _ctx.selectBranch\n    }, null, 8, [\"record\", \"operational\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f15d1ab0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"frame\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"selected\", \"value\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"selected\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin())),\n          disabled: !_ctx.operational\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"first\"\n          })\n        ], 8, _hoisted_3),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack())),\n          disabled: !_ctx.operational\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"back\"\n          })\n        ], 8, _hoisted_4),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward())),\n          disabled: !_ctx.operational\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"next\"\n          })\n        ], 8, _hoisted_5),\n        _createElementVNode(\"button\", {\n          class: \"control-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd())),\n          disabled: !_ctx.operational\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"last\"\n          })\n        ], 8, _hoisted_6)\n      ]),\n      _createElementVNode(\"select\", {\n        class: \"move-list\",\n        size: \"2\",\n        ref: \"moveList\",\n        onChange: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeNumber())),\n        disabled: !_ctx.operational\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: move.number,\n            selected: move.selected,\n            value: move.number\n          }, _toDisplayString(move.number !== 0 ? move.number + \" \" : \"\") + \" \" + _toDisplayString(move.text) + \" \" + _toDisplayString(move.hasBranch ? \" 分岐\" : \"\"), 9, _hoisted_8))\n        }), 128))\n      ], 40, _hoisted_7),\n      _createElementVNode(\"select\", {\n        class: \"branch-list\",\n        size: \"2\",\n        ref: \"branchList\",\n        onChange: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeBranch())),\n        disabled: !_ctx.operational\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: branch.index,\n            selected: branch.selected,\n            value: branch.index\n          }, _toDisplayString(branch.text), 9, _hoisted_10))\n        }), 128))\n      ], 40, _hoisted_9)\n    ])\n  ]))\n}","\nimport { Record, RecordEntry } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref } from \"vue\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport default defineComponent({\n  name: \"Record\",\n  components: {\n    Icon,\n  },\n  props: {\n    record: {\n      type: Record,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      context.emit(\"goBegin\");\n    };\n\n    const goBack = () => {\n      context.emit(\"goBack\");\n    };\n\n    const goForward = () => {\n      context.emit(\"goForward\");\n    };\n\n    const goEnd = () => {\n      context.emit(\"goEnd\");\n    };\n\n    const changeNumber = () => {\n      context.emit(\"selectMove\", Number(moveList.value.value));\n    };\n\n    const changeBranch = () => {\n      context.emit(\"selectBranch\", Number(branchList.value.value));\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        text: string;\n        number: number;\n        hasBranch: boolean;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          hasBranch: elem.hasBranch,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin?.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        selected: boolean;\n      }[] = [];\n      let p: RecordEntry | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayMoveText,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n    };\n  },\n});\n","import { render } from \"./Record.vue?vue&type=template&id=f15d1ab0&scoped=true&ts=true\"\nimport script from \"./Record.vue?vue&type=script&lang=ts\"\nexport * from \"./Record.vue?vue&type=script&lang=ts\"\n\nimport \"./Record.vue?vue&type=style&index=0&id=f15d1ab0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f15d1ab0\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport Record from \"@/components/primitive/Record.vue\";\nimport { Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    Record,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.commit(Mutation.CHANGE_MOVE_NUMBER, number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.state.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.state.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.commit(Mutation.CHANGE_BRANCH, index);\n    };\n\n    const isRecordOperational = computed(() => {\n      return (\n        store.state.mode === Mode.NORMAL || store.state.mode === Mode.RESEARCH\n      );\n    });\n\n    const record = computed(() => store.state.record);\n\n    return {\n      isRecordOperational,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=36298fd3&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=36298fd3&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-36298fd3\"]])\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a4d352f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 棋譜コメント \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 形勢グラフ \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"tab-border\" }, null, -1))\nconst _hoisted_8 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"minimize-padding\", { enabled: _ctx.activeTab === 'invisible' }])\n      }, null, 2),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'comment' }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect('comment')))\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"comment\"\n          }),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'search' }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect('search')))\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"brain\"\n          }),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'chart' }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect('chart')))\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"chart\"\n          }),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === 'invisible' }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect('invisible')))\n        }, [\n          _createVNode(_component_Icon, {\n            class: \"icon\",\n            icon: \"arrowDrop\"\n          }),\n          _hoisted_6\n        ], 2)\n      ]),\n      _hoisted_7,\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'comment' }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'search' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === 'chart' }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4f9715e5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.state.record.current.comment);\n    const readonly = computed(() => store.state.mode != Mode.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.commit(Mutation.UPDATE_RECORD_COMMENT, comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=4f9715e5&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=4f9715e5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f9715e5\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-dbaf3902\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.infos.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            name: _ctx.infos.blackPlayer.name,\n            info: _ctx.infos.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            name: _ctx.infos.whitePlayer.name,\n            info: _ctx.infos.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.infos.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            name: _ctx.infos.researcher.name,\n            info: _ctx.infos.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-61f1257a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-61f1257a><div class=\\\"list-column time\\\" data-v-61f1257a>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-61f1257a>順位</div><div class=\\\"list-column depth\\\" data-v-61f1257a>深さ</div><div class=\\\"list-column score\\\" data-v-61f1257a>評価値</div></div>\", 1)\nconst _hoisted_19 = { class: \"list-column time\" }\nconst _hoisted_20 = { class: \"list-column multipv-index\" }\nconst _hoisted_21 = { class: \"list-column depth\" }\nconst _hoisted_22 = { class: \"list-column score\" }\nconst _hoisted_23 = { class: \"list-column score-flag\" }\nconst _hoisted_24 = { class: \"list-column text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_18,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 36}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.info.iterates, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"list-item\",\n            key: index\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_20, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_21, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.text), 1)\n          ]))\n        }), 128))\n      ], 4)\n    ])\n  ]))\n}","\nimport { USIPlayerMonitor } from \"@/store/usi\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=61f1257a&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=61f1257a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61f1257a\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/analytics/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const infos = computed(() => store.state.usi);\n    const elementHeight = computed(() => {\n      const n =\n        (store.state.usi.blackPlayer ? 1 : 0) +\n        (store.state.usi.whitePlayer ? 1 : 0) +\n        (store.state.usi.researcher ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      infos,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=dbaf3902&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=dbaf3902&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dbaf3902\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4e9d2ad3\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { Mutation, useStore } from \"@/store\";\nimport { MAX_SCORE, MIN_SCORE, RecordEntryCustomData } from \"@/store/record\";\nimport { defineComponent, onMounted, onUnmounted, ref, Ref, watch } from \"vue\";\nimport { ActiveElement, Chart, ChartEvent, Color } from \"chart.js\";\nimport { stringifyUSIInfoSender, USIInfoSender } from \"@/usi/info\";\nimport { Record } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n\n    const buildDataset = (\n      borderColor: Color,\n      sender: USIInfoSender,\n      record: Record\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      record.moves.forEach((entry) => {\n        const data = new RecordEntryCustomData(entry.customData);\n        const value = data.evaluation && data.evaluation[sender];\n        if (value) {\n          dataPoints.push({\n            x: entry.number,\n            y: value,\n          });\n        }\n      });\n      return {\n        label: stringifyUSIInfoSender(sender),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: Record) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: \"red\",\n        data: [\n          { x: record.current.number, y: MAX_SCORE },\n          { x: record.current.number, y: MIN_SCORE },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (record: Record) => {\n      return [\n        verticalLine(record),\n        buildDataset(\"royalblue\", USIInfoSender.BLACK_PLAYER, record),\n        buildDataset(\"darkorange\", USIInfoSender.WHITE_PLAYER, record),\n        buildDataset(\"darkgreen\", USIInfoSender.RESEARCHER, record),\n      ];\n    };\n\n    const buildScalesOption = (record: Record) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n        },\n        y: {\n          min: MIN_SCORE,\n          max: MAX_SCORE,\n        },\n      };\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.commit(Mutation.CHANGE_MOVE_NUMBER, number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: buildDatasets(store.state.record),\n        },\n        options: {\n          color: \"black\",\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.state.record],\n      ([record]) => {\n        chart.data.datasets = buildDatasets(record);\n        chart.options.scales = buildScalesOption(record);\n        chart.update();\n      },\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=4e9d2ad3&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=4e9d2ad3&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e9d2ad3\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/analytics/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/analytics/EngineAnalytics.vue\";\nimport EvaluationChart from \"@/components/analytics/EvaluationChart.vue\";\nimport { Action, useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"InformationPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    Icon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: string) => {\n      store.dispatch(Action.UPDATE_APP_SETTING, {\n        informationTab: id,\n      });\n    };\n    const activeTab = computed(() => store.state.appSetting.informationTab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      changeSelect,\n    };\n  },\n});\n","import { render } from \"./InformationPane.vue?vue&type=template&id=1a4d352f&scoped=true&ts=true\"\nimport script from \"./InformationPane.vue?vue&type=script&lang=ts\"\nexport * from \"./InformationPane.vue?vue&type=script&lang=ts\"\n\nimport \"./InformationPane.vue?vue&type=style&index=0&id=1a4d352f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a4d352f\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  Ref,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport InformationPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minInformationHeight,\n} from \"./InformationPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { InformationTab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    InformationPane,\n  },\n  setup() {\n    const store = useStore();\n    const windowSize = reactive(new RectSize(0, 0));\n    const topPaneHeight = ref(0);\n    const topPane: Ref = ref(null);\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    const topPaneResizeObserver = new ResizeObserver((entries) => {\n      topPaneHeight.value = entries[0].contentRect.height;\n    });\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.observe(topPane.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n      topPaneResizeObserver.disconnect();\n    });\n\n    const boardPaneMaxSize = computed(() => {\n      const minInformationPaneHeight =\n        store.state.appSetting.informationTab !== InformationTab.INVISIBLE\n          ? minInformationHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minInformationPaneHeight\n      );\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - topPaneHeight.value\n      );\n    });\n\n    return {\n      topPane,\n      boardPaneMaxSize,\n      bottomPaneSize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=df1473a6&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=df1473a6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-df1473a6\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3a08c41c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"player\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"players-control\" }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" 先後入れ替え \")\nconst _hoisted_15 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_16 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_17 = { class: \"dialog-form-item\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_19 = [\"value\"]\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_23 = { class: \"dialog-form-item\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_25 = [\"value\"]\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_27 = { class: \"dialog-form-item\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_31 = { class: \"dialog-form-area flags\" }\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = [\"value\"]\nconst _hoisted_34 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-3a08c41c>現在の局面</option><option value=\\\"standard\\\" data-v-3a08c41c>平手</option><option value=\\\"handicapLance\\\" data-v-3a08c41c>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-3a08c41c>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-3a08c41c>角落ち</option><option value=\\\"handicapRook\\\" data-v-3a08c41c>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-3a08c41c>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-3a08c41c>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-3a08c41c>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-3a08c41c>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-3a08c41c>8枚落ち</option>\", 11)\nconst _hoisted_45 = [\n  _hoisted_34\n]\nconst _hoisted_46 = { class: \"dialog-form-item\" }\nconst _hoisted_47 = [\"checked\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"disable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_49 = { class: \"dialog-form-item\" }\nconst _hoisted_50 = [\"checked\"]\nconst _hoisted_51 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"人を手前に表示する\", -1))\nconst _hoisted_52 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createElementVNode(\"select\", {\n              class: \"player-select\",\n              size: \"1\",\n              ref: \"blackPlayerSelect\",\n              value: _ctx.defaultValues.black.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ]),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _hoisted_10,\n            _createElementVNode(\"select\", {\n              class: \"player-select\",\n              size: \"1\",\n              ref: \"whitePlayerSelect\",\n              value: _ctx.defaultValues.white.type\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: player.uri,\n                  value: player.uri\n                }, _toDisplayString(player.name), 9, _hoisted_12))\n              }), 128))\n            ], 8, _hoisted_11)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_Icon, {\n              class: \"icon\",\n              icon: \"swap_h\"\n            }),\n            _hoisted_14\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"div\", _hoisted_17, [\n            _hoisted_18,\n            _createElementVNode(\"input\", {\n              class: \"time-input\",\n              ref: \"hours\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.hours\n            }, null, 8, _hoisted_19),\n            _hoisted_20,\n            _createElementVNode(\"input\", {\n              class: \"time-input\",\n              ref: \"minutes\",\n              type: \"number\",\n              min: \"0\",\n              max: \"59\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.minutes\n            }, null, 8, _hoisted_21),\n            _hoisted_22\n          ]),\n          _createElementVNode(\"div\", _hoisted_23, [\n            _hoisted_24,\n            _createElementVNode(\"input\", {\n              class: \"time-input single\",\n              ref: \"byoyomi\",\n              type: \"number\",\n              min: \"0\",\n              max: \"60\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.byoyomi\n            }, null, 8, _hoisted_25),\n            _hoisted_26\n          ]),\n          _createElementVNode(\"div\", _hoisted_27, [\n            _hoisted_28,\n            _createElementVNode(\"input\", {\n              class: \"time-input single\",\n              ref: \"increment\",\n              type: \"number\",\n              min: \"0\",\n              max: \"99\",\n              step: \"1\",\n              value: _ctx.defaultValues.timeLimit.increment\n            }, null, 8, _hoisted_29),\n            _hoisted_30\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createElementVNode(\"div\", _hoisted_32, [\n            _createElementVNode(\"select\", {\n              ref: \"startPosition\",\n              value: _ctx.defaultValues.startPosition\n            }, _hoisted_45, 8, _hoisted_33)\n          ]),\n          _createElementVNode(\"div\", _hoisted_46, [\n            _createElementVNode(\"input\", {\n              ref: \"enableEngineTimeout\",\n              type: \"checkbox\",\n              id: \"disable-engine-timeout\",\n              checked: _ctx.defaultValues.enableEngineTimeout\n            }, null, 8, _hoisted_47),\n            _hoisted_48\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _createElementVNode(\"input\", {\n              ref: \"humanIsFront\",\n              type: \"checkbox\",\n              id: \"human-is-front\",\n              checked: _ctx.defaultValues.humanIsFront\n            }, null, 8, _hoisted_50),\n            _hoisted_51\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_52, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport { loadGameSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  PlayerSetting,\n  validateGameSetting,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    Icon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const blackPlayerSelect: Ref = ref(null);\n    const whitePlayerSelect: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        gameSetting.value = await loadGameSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (uri.isUSIEngine(playerURI)) {\n        const engine = engineSetting.value.getEngine(playerURI);\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerSelect.value.value),\n        white: buildPlayerSetting(whitePlayerSelect.value.value),\n        timeLimit: {\n          timeSeconds: (hours.value.value * 60 + minutes.value.value) * 60,\n          byoyomi: Number(byoyomi.value.value),\n          increment: Number(increment.value.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        humanIsFront: humanIsFront.value.checked,\n      };\n      const error = validateGameSetting(gameSetting);\n      if (error) {\n        store.commit(Mutation.PUSH_ERROR, error);\n      } else {\n        store.dispatch(Action.START_GAME, gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerSelect.value.value, whitePlayerSelect.value.value] = [\n        whitePlayerSelect.value.value,\n        blackPlayerSelect.value.value,\n      ];\n    };\n\n    const defaultValues = computed(() => {\n      return {\n        black: { type: gameSetting.value.black.uri },\n        white: { type: gameSetting.value.white.uri },\n        timeLimit: {\n          hours: Math.floor(gameSetting.value.timeLimit.timeSeconds / 3600),\n          minutes:\n            Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60,\n          byoyomi: gameSetting.value.timeLimit.byoyomi,\n          increment: gameSetting.value.timeLimit.increment,\n        },\n        startPosition:\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\",\n        enableEngineTimeout: gameSetting.value.enableEngineTimeout,\n        humanIsFront: gameSetting.value.humanIsFront,\n      };\n    });\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSetting.value.engineList,\n      ];\n    });\n\n    return {\n      dialog,\n      blackPlayerSelect,\n      whitePlayerSelect,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      humanIsFront,\n      defaultValues,\n      players,\n      onStart,\n      onCancel,\n      onSwapColor,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=3a08c41c&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=3a08c41c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3a08c41c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-23a86a08\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"エンジン\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item-unit\" }\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"select\", {\n              class: \"engine-select\",\n              size: \"1\",\n              ref: \"engineSelect\",\n              value: _ctx.defaultValue\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: engine.uri,\n                  value: engine.uri\n                }, _toDisplayString(engine.name), 9, _hoisted_8))\n              }), 128))\n            ], 8, _hoisted_7)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { loadResearchSetting, loadUSIEngineSetting } from \"@/ipc/renderer\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineSelect: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSetting = ref(new USIEngineSettings());\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await loadResearchSetting();\n        engineSetting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const onStart = () => {\n      const uri = engineSelect.value.value;\n      if (!engineSetting.value.hasEngine(uri)) {\n        store.commit(Mutation.PUSH_ERROR, \"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSetting.value.getEngine(uri);\n      const researchSetting: ResearchSetting = {\n        usi: engine,\n      };\n      store.dispatch(Action.START_RESEARCH, researchSetting);\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const engines = computed(() => engineSetting.value.engineList);\n\n    const defaultValue = computed(() => {\n      if (researchSetting.value.usi) {\n        return researchSetting.value.usi.uri;\n      }\n      return \"\";\n    });\n\n    return {\n      dialog,\n      engineSelect,\n      engines,\n      defaultValue,\n      onStart,\n      onCancel,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=23a86a08&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=23a86a08&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23a86a08\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c5214f8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"engine\",\n              key: engine.uri,\n              value: engine.uri\n            }, [\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \" 設定 \", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                class: \"dialog-button\",\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \" 削除 \", 8, _hoisted_8)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          latestEngineSetting: _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latestEngineSetting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-338bd142\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\",\n  ref: \"engineNameInput\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"option\",\n            key: option.name\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport {\n  getUSIEngineInfo,\n  sendUSISetOption,\n  showSelectFileDialog,\n} from \"@/ipc/renderer\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      rquired: true,\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const store = useStore();\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    let engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        const path = await showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? Number(elem.value)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=338bd142&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=338bd142&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-338bd142\"]])\n\nexport default __exports__","\nimport {\n  getUSIEngineInfo,\n  loadUSIEngineSetting,\n  saveUSIEngineSetting,\n  showSelectUSIEngineDialog,\n} from \"@/ipc/renderer\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { Mutation, useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n    const store = useStore();\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await loadUSIEngineSetting();\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n        store.commit(Mutation.CLOSE_DIALOG);\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        const path = await showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await getUSIEngineInfo(path));\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.commit(Mutation.RETAIN_BUSSY_STATE);\n        await saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.commit(Mutation.CLOSE_DIALOG);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=5c5214f8&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=5c5214f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c5214f8\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-162d170a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"デザイン\", -1))\nconst _hoisted_6 = [\"value\"]\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_12 = { class: \"dialog-form-item\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_16 = { class: \"dialog-form-item\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_18 = [\"value\"]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_22 = [\"value\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_25 = [\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"select\", {\n            value: _ctx.appSetting.boardLayout,\n            ref: \"boardLayout\"\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardLayouts, (layout) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: layout,\n                value: layout.value\n              }, _toDisplayString(layout.name), 9, _hoisted_7))\n            }), 128))\n          ], 8, _hoisted_6)\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.pieceVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\",\n            ref: \"pieceVolume\"\n          }, null, 8, _hoisted_10),\n          _hoisted_11\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.clockVolume,\n            type: \"number\",\n            max: \"100\",\n            min: \"0\",\n            ref: \"clockVolume\"\n          }, null, 8, _hoisted_14),\n          _hoisted_15\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"input\", {\n            value: _ctx.appSetting.clockPitch,\n            type: \"number\",\n            max: \"880\",\n            min: \"220\",\n            ref: \"clockPitch\"\n          }, null, 8, _hoisted_18),\n          _hoisted_19\n        ]),\n        _createElementVNode(\"div\", _hoisted_20, [\n          _hoisted_21,\n          _createElementVNode(\"select\", {\n            value: _ctx.appSetting.clockSoundTarget,\n            ref: \"clockSoundTarget\"\n          }, _hoisted_25, 8, _hoisted_22)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_26, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","export function readInputAsNumber(input: HTMLInputElement): number {\n  const value = Number(input.value);\n  const max = Number(input.max);\n  const min = Number(input.min);\n  return Math.min(Math.max(value, min), max);\n}\n","\nimport { BoardLayoutType } from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate } from \"@/settings/app\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const boardLayout: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        boardLayout: boardLayout.value.value,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n      };\n      store.commit(Mutation.RETAIN_BUSSY_STATE);\n      try {\n        await store.dispatch(Action.UPDATE_APP_SETTING, update);\n        store.commit(Mutation.CLOSE_DIALOG);\n      } catch (e) {\n        store.commit(Mutation.PUSH_ERROR, e);\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    };\n\n    const cancel = () => {\n      store.commit(Mutation.CLOSE_DIALOG);\n    };\n\n    const appSetting = computed(() => store.state.appSetting);\n\n    const boardLayouts = [\n      { name: \"一文字駒\", value: BoardLayoutType.HITOMOJI },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: BoardLayoutType.HITOMOJI_GOTHIC,\n      },\n    ];\n\n    return {\n      dialog,\n      boardLayout,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      appSetting,\n      boardLayouts,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=162d170a&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=162d170a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-162d170a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7a20f62c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜を取り込みます。\", -1))\nconst _hoisted_5 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_9 = [\n  _hoisted_6,\n  _hoisted_7,\n  _hoisted_8\n]\nconst _hoisted_10 = { ref: \"textarea\" }\nconst _hoisted_11 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _hoisted_9))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_10, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/renderer\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.commit(Mutation.RETAIN_BUSSY_STATE);\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.commit(Mutation.RELEASE_BUSSY_STATE);\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n      if (data) {\n        store.dispatch(Action.PASTE_RECORD, data);\n      }\n    };\n\n    const onCancel = () => {\n      store.commit(Mutation.CLOSE_PASTE_DIALOG);\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=7a20f62c&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=7a20f62c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a20f62c\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9afd096a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"bussy\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_Icon, {\n          class: \"icon\",\n          icon: \"bussy\"\n        }),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport default defineComponent({\n  name: \"Bussy\",\n  components: {\n    Icon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n    };\n  },\n});\n","import { render } from \"./Bussy.vue?vue&type=template&id=9afd096a&scoped=true&ts=true\"\nimport script from \"./Bussy.vue?vue&type=script&lang=ts\"\nexport * from \"./Bussy.vue?vue&type=script&lang=ts\"\n\nimport \"./Bussy.vue?vue&type=style&index=0&id=9afd096a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9afd096a\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0b6b1b72\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"messagebox\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_Icon, {\n          class: \"icon\",\n          icon: \"info\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    Icon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.getters.message);\n\n    const onClose = () => {\n      store.commit(Mutation.SHIFT_MESSAGE);\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./Message.vue?vue&type=template&id=0b6b1b72&scoped=true&ts=true\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=0b6b1b72&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b6b1b72\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-43fa633e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"error\",\n  ref: \"dialog\"\n}\nconst _hoisted_2 = { class: \"content\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_Icon, {\n          class: \"icon\",\n          icon: \"error\"\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"item\",\n              key: error.index\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { Mutation, useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport Icon from \"@/components/primitive/Icon.vue\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    Icon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.state.error.queue.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.commit(Mutation.CLEAR_ERRORS);\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=43fa633e&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=43fa633e&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=43fa633e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-43fa633e\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport Bussy from \"@/components/dialog/Bussy.vue\";\nimport Message from \"@/components/dialog/Message.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { Action, Mutation, useStore } from \"@/store\";\nimport { Mode } from \"@/store/mode\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    Bussy,\n    Message,\n    ErrorMessage,\n  },\n  setup() {\n    const store = useStore();\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.state.mode === Mode.GAME_DIALOG,\n        research: store.state.mode === Mode.RESEARCH_DIALOG,\n        usiEngineSetting: store.state.mode === Mode.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.state.mode === Mode.APP_SETTING_DIALOG,\n        paste: store.state.mode === Mode.PASTE_DIALOG,\n        processing: store.getters.isBussy,\n      };\n    });\n\n    const hasMessage = computed(() => store.getters.hasMessage);\n\n    const hasErrors = computed(() => store.getters.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.dispatch(Action.COPY_RECORD);\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.commit(Mutation.SHOW_PASTE_DIALOG);\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.dispatch(Action.OPEN_RECORD, path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.state.record.current.number;\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.state.record.current.number;\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, 0);\n        },\n        onArrowRight(): void {\n          store.commit(Mutation.CHANGE_MOVE_NUMBER, Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=51d4e128&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=51d4e128&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport {\n  getRecordPathFromProcArg,\n  loadAppSetting,\n  setup as setupIPC,\n} from \"./ipc/renderer\";\nimport { store, key, Mutation, Action } from \"./store\";\nimport { Chart, registerables } from \"chart.js\";\n\nChart.register(...registerables);\n\nsetupIPC(store);\n\nPromise.allSettled([\n  loadAppSetting()\n    .then((setting) => {\n      store.commit(Mutation.UPDATE_APP_SETTING, setting);\n    })\n    .catch((e) => {\n      store.commit(\n        Mutation.PUSH_ERROR,\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  (async function (): Promise<void> {\n    const path = await getRecordPathFromProcArg();\n    if (path) {\n      await store.dispatch(Action.OPEN_RECORD, path);\n    }\n  })(),\n]).finally(() => {\n  createApp(App).use(store, key).mount(\"#app\");\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./StandardLayout.vue?vue&type=style&index=0&id=df1473a6&scoped=true&lang=css\"","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=51d4e128&lang=css\"","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","import { ImmutablePosition, Move } from \"@/shogi\";\nimport { InfoCommand as USIInfoCommand, USIInfoSender } from \"@/usi/info\";\nimport { Module } from \"vuex\";\nimport { State } from \".\";\nimport { Mutation } from \"./mutation\";\n\nexport type USIIteration = {\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n\n  constructor(public name: string) {\n    this.iterates = [];\n  }\n\n  update(position: ImmutablePosition, update: USIInfoCommand): void {\n    const iterate: USIIteration = {};\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = formatPV(position, update.pv);\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      this.iterates.unshift(iterate);\n    }\n  }\n}\n\nexport type USIState = {\n  sessionID?: number;\n  blackPlayer?: USIPlayerMonitor;\n  blackPosition?: string;\n  whitePlayer?: USIPlayerMonitor;\n  whitePosition?: string;\n  researcher?: USIPlayerMonitor;\n  researchPosition?: string;\n};\n\nexport const usiState: Module<USIState, State> = {\n  mutations: {\n    [Mutation.UPDATE_USI_INFO](\n      state,\n      payload: {\n        sessionID: number;\n        position: ImmutablePosition;\n        sender: USIInfoSender;\n        name: string;\n        info: USIInfoCommand;\n      }\n    ) {\n      if (state.sessionID != payload.sessionID) {\n        state.blackPlayer = undefined;\n        state.whitePlayer = undefined;\n        state.researcher = undefined;\n        state.sessionID = payload.sessionID;\n      }\n\n      switch (payload.sender) {\n        case USIInfoSender.BLACK_PLAYER:\n          if (\n            !state.blackPlayer ||\n            state.blackPosition !== payload.position.sfen\n          ) {\n            state.blackPlayer = new USIPlayerMonitor(payload.name);\n            state.blackPosition = payload.position.sfen;\n          }\n          state.blackPlayer.update(payload.position, payload.info);\n          break;\n        case USIInfoSender.WHITE_PLAYER:\n          if (\n            !state.whitePlayer ||\n            state.whitePosition !== payload.position.sfen\n          ) {\n            state.whitePlayer = new USIPlayerMonitor(payload.name);\n            state.whitePosition = payload.position.sfen;\n          }\n          state.whitePlayer.update(payload.position, payload.info);\n          break;\n        case USIInfoSender.RESEARCHER:\n          if (\n            !state.researcher ||\n            state.researchPosition !== payload.position.sfen\n          ) {\n            state.researcher = new USIPlayerMonitor(payload.name);\n            state.researchPosition = payload.position.sfen;\n          }\n          state.researcher.update(payload.position, payload.info);\n          break;\n      }\n    },\n  },\n};\n"],"sourceRoot":""}